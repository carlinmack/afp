<div id="Epistemic_Logic">
<div class="head"><h1>Theory Epistemic_Logic</h1>
<span class="command">theory</span> <span class="name">Epistemic_Logic</span><br/>
<span class="keyword">imports</span> <a href="../../HOL/HOL-Library/Countable.html"><span class="name">Countable</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
  File:      Epistemic_Logic.thy
  Author:    Asta HalkjÃ¦r From

  This work is a formalization of epistemic logic with countably many agents.
  It includes proofs of soundness and completeness for the axiom system K.
  The completeness proof is based on the textbook "Reasoning About Knowledge"
  by Fagin, Halpern, Moses and Vardi (MIT Press 1995).
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Epistemic_Logic</span><span> </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"HOL-Library.Countable"</span></span></span><span> </span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Syntaxâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">type_synonym</span></span><span> </span><span>id</span><span> </span><span class="delimiter">=</span><span> </span><span>string</span><span>
</span><span>
</span><span class="keyword1"><span class="command">datatype</span></span><span> </span><span class="tfree">'i</span><span> </span><span>fm</span><span>
</span><span>  </span><span class="delimiter">=</span><span> </span><span>FF</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">âŠ¥</span>"</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">|</span><span> </span><span>Pro</span><span> </span><span>id</span><span>
</span><span>  </span><span class="delimiter">|</span><span> </span><span>Dis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">âˆ¨</span>"</span></span></span><span> </span><span>30</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">|</span><span> </span><span>Con</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">âˆ§</span>"</span></span></span><span> </span><span>35</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">|</span><span> </span><span>Imp</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">âŸ¶</span>"</span></span></span><span> </span><span>25</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">|</span><span> </span><span>K</span><span> </span><span class="tfree">'i</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>TT</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">âŠ¤</span>"</span></span></span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹TT â‰¡ <span class="hidden">â™</span><span class="bold">âŠ¥</span> <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>Neg</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"<span class="hidden">â™</span><span class="bold">Â¬</span> _"</span></span></span><span> </span><span class="delimiter">[</span><span>40</span><span class="delimiter">]</span><span> </span><span>40</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Neg p â‰¡ p <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Semanticsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">datatype</span></span><span> </span><span class="delimiter">(</span><span class="tfree">'i</span><span class="delimiter">,</span><span> </span><span class="tfree">'s</span><span class="delimiter">)</span><span> </span><span>kripke</span><span> </span><span class="delimiter">=</span><span> </span><span>Kripke</span><span> </span><span class="delimiter">(</span><span>Ï€</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'s â‡’ id â‡’ boolâ€º</span></span></span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>ğ’¦</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i â‡’ 's â‡’ 's setâ€º</span></span></span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>semantics</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i, 's) kripke â‡’ 's â‡’ 'i fm â‡’ boolâ€º</span></span></span><span>
</span><span>  </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_, _ âŠ¨ _"</span></span></span><span> </span><span class="delimiter">[</span><span>50</span><span class="delimiter">,</span><span>50</span><span class="delimiter">]</span><span> </span><span>50</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(_, _ âŠ¨ <span class="hidden">â™</span><span class="bold">âŠ¥</span>) = Falseâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ Pro i) = Ï€ M s iâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)) = ((M, s âŠ¨ p) âˆ¨ (M, s âŠ¨ q))â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)) = ((M, s âŠ¨ p) âˆ§ (M, s âŠ¨ q))â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)) = ((M, s âŠ¨ p) âŸ¶ (M, s âŠ¨ q))â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ K i p) = (âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ p)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Utilityâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>reflexive</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i, 's) kripke â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹reflexive M â‰¡ âˆ€i s. s âˆˆ ğ’¦ M i sâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>symmetric</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i, 's) kripke â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹symmetric M â‰¡ âˆ€i s t. t âˆˆ ğ’¦ M i s âŸ· s âˆˆ ğ’¦ M i tâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>transitive</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i, 's) kripke â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹transitive M â‰¡ âˆ€i s t u. t âˆˆ ğ’¦ M i s âˆ§ u âˆˆ ğ’¦ M i t âŸ¶ u âˆˆ ğ’¦ M i sâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Imp_intro</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M, s âŠ¨ p âŸ¹ M, s âŠ¨ q) âŸ¹ M, s âŠ¨ Imp p qâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S5 Axiomsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>distribution</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ (K i p <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i q)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Imp_intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ (K i p <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q))â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i pâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ pâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ qâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i qâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>generalization</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>valid</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€(M :: ('i, 's) kripke) s. M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(M :: ('i, 's) kripke), s âŠ¨ K i pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>truth</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹reflexive Mâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ (K i p <span class="hidden">â™</span><span class="bold">âŸ¶</span> p)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Imp_intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹s âˆˆ ğ’¦ M i sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹reflexive Mâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>pos_introspection</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹transitive Mâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ (K i p <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i (K i p))â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Imp_intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M,s âŠ¨ K i pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. âˆ€u âˆˆ ğ’¦ M i t. M, u âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹transitive Mâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ K i pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i (K i p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>neg_introspection</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹symmetric Mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹transitive Mâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i p <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i (<span class="hidden">â™</span><span class="bold">Â¬</span> K i p))â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Imp_intro</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M,s âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (K i p)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>u</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹u âˆˆ ğ’¦ M i sâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (M, u âŠ¨ p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. u âˆˆ ğ’¦ M i tâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹u âˆˆ ğ’¦ M i sâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹symmetric Mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹transitive Mâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€t âˆˆ ğ’¦ M i s. M, t âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> K i pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ K i (<span class="hidden">â™</span><span class="bold">Â¬</span> K i p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Axiom System Kâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>eval</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(id â‡’ bool) â‡’ ('i fm â‡’ bool) â‡’ 'i fm â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval _ _ <span class="hidden">â™</span><span class="bold">âŠ¥</span> = Falseâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g _ (Pro i) = g iâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q) = (eval g h p âˆ¨ eval g h q)â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) = (eval g h p âˆ§ eval g h q)â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) = (eval g h p âŸ¶ eval g h q)â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval _ h (K i p) = h (K i p)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology p â‰¡ âˆ€g h. eval g h pâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive</span></span><span> </span><span>SystemK</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm â‡’ boolâ€º</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"âŠ¢ _"</span></span></span><span> </span><span class="delimiter">[</span><span>50</span><span class="delimiter">]</span><span> </span><span>50</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span>A1</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology p âŸ¹ âŠ¢ pâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>A2</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (K i p <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i q)â€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>R1</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ p âŸ¹ âŠ¢ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âŸ¹ âŠ¢ qâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>R2</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ p âŸ¹ âŠ¢ K i pâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Soundnessâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>eval_semantics</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval (pi s) (Î»q. Kripke pi r, s âŠ¨ q) p = (Kripke pi r, s âŠ¨ p)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>p</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>tautology</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology p âŸ¹ M, s âŠ¨ pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval (g s) (Î»q. Kripke g r, s âŠ¨ q) pâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>g</span><span> </span><span>r</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke g r, s âŠ¨ pâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>g</span><span> </span><span>r</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>eval_semantics</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>kripke.collapse</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>soundness</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ p âŸ¹ M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>p</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>s</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>SystemK.induct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>simp_all</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tautology</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Derived rulesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_FFI</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> p) <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>conjoin</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm list â‡’ 'i fm â‡’ 'i fmâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹conjoin [] q = qâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹conjoin (p # ps) q = (p <span class="hidden">â™</span><span class="bold">âˆ§</span> conjoin ps q)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>imply</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm list â‡’ 'i fm â‡’ 'i fmâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply [] q = qâ€º</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply (p # ps) q = (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps q)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_imply_head</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (p # ps) pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply (p # ps) p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_imply_Cons</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps qâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (p # ps) qâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply ps q <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (p # ps) q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (imply ps q <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (p # ps) q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_imply_member</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ set ps âŸ¹ âŠ¢ imply ps pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>a</span><span> </span><span>ps</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹a = pâ€º</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span> </span><span>K_imply_head</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span> </span><span>K_imply_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_right_mp</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps pâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps qâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply ps p <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (imply ps p <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tautology_imply_superset</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set ps âŠ† set qsâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply ps r <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply qs r)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ tautology (imply ps r <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply qs r)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ eval g h (imply ps r <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply qs r)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (imply ps r)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ eval g h (imply qs r)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">consider</span></span><span> </span><span class="delimiter">(</span><span>np</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆƒp âˆˆ set ps. Â¬ eval g h pâ€º</span></span></span><span> </span><span class="delimiter">|</span><span> </span><span class="delimiter">(</span><span>r</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€p âˆˆ set ps. eval g h pâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h râ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>cases</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>np</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆƒp âˆˆ set qs. Â¬ eval g h pâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set ps âŠ† set qsâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (imply qs r)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>qs</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ eval g h (imply qs r)â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>r</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹eval g h (imply qs r)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>qs</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ eval g h (imply qs r)â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tautology_imply</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology q âŸ¹ tautology (imply ps q)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>K_imply_weaken</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set ps âŠ† set ps'â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps' qâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply ps q <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps' q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set ps âŠ† set ps'â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>ps'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps'</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>a</span><span> </span><span>G</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>tautology_imply_superset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (imply ps q <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply ps' q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ps qâ€º</span></span></span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>imply_append</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply (ps @ ps') q = imply ps (imply ps' q)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_ImpI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (p # G) qâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set (p # G) âŠ† set (G @ [p])â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (G @ [p]) qâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>K_imply_weaken</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (imply [p] q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>imply_append</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>cut</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G p âŸ¹ âŠ¢ imply (p # G) q âŸ¹ âŠ¢ imply G qâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_ImpI</span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_Boole</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span> âŸ¹ âŠ¢ imply G pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_ImpI</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>G</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_DisE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (A # G) Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (B # G) Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (imply (A # G) C <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (B # G) C <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>G</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (imply (A # G) C <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (B # G) C <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_conjoin_imply</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin G (<span class="hidden">â™</span><span class="bold">Â¬</span> p))â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin G (<span class="hidden">â™</span><span class="bold">Â¬</span> p) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>G</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin G (<span class="hidden">â™</span><span class="bold">Â¬</span> p) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply G p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_distrib_K_imp</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ K i (imply G q)â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (map (K i) G) (K i q)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (K i (imply G q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q))â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>G</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>a</span><span> </span><span>G</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (K i a <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i (imply G q))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A2</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ ((K i a <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i (imply G q)) <span class="hidden">â™</span><span class="bold">âŸ¶</span>
        (K i (imply G q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q)) <span class="hidden">â™</span><span class="bold">âŸ¶</span>
        (K i a <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q)))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (K i a <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ ((K i a <span class="hidden">â™</span><span class="bold">âˆ§</span> K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q)) <span class="hidden">â™</span><span class="bold">âŸ¶</span>
        (K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i a <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q)))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (K i (imply (a # G) q) <span class="hidden">â™</span><span class="bold">âŸ¶</span> K i a <span class="hidden">â™</span><span class="bold">âŸ¶</span> imply (map (K i) G) (K i q))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Consistencyâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>consistency</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set set â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency C â‰¡ âˆ€S âˆˆ C.
    (âˆ€p. Â¬ (Pro p âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro p) âˆˆ S)) âˆ§
    <span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆ‰ S âˆ§
    (âˆ€Z. (<span class="hidden">â™</span><span class="bold">Â¬</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> Z)) âˆˆ S âŸ¶ S âˆª {Z} âˆˆ C) âˆ§
    (âˆ€A B. (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) âˆˆ S âŸ¶ S âˆª {A, B} âˆˆ C) âˆ§
    (âˆ€A B. (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)) âˆˆ S âŸ¶ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ C) âˆ§
    (âˆ€A B. (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) âˆˆ S âŸ¶ S âˆª {A} âˆˆ C âˆ¨ S âˆª {B} âˆˆ C) âˆ§
    (âˆ€A B. (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)) âˆˆ S âŸ¶ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ C) âˆ§
    (âˆ€A B. (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) âˆˆ S âŸ¶ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ S âˆª {B} âˆˆ C) âˆ§
    (âˆ€A B. (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)) âˆˆ S âŸ¶ S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ C) âˆ§
    (âˆ€A. tautology A âŸ¶ S âˆª {A} âˆˆ C) âˆ§
    (âˆ€A i. Â¬ (K i A âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ S))â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Closure under subsetsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>close</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set set â‡’ 'i fm set setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹close C â‰¡ {S. âˆƒS' âˆˆ C. S âŠ† S'}â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>subset_closed</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'a set set â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed C â‰¡ (âˆ€S' âˆˆ C. âˆ€S. S âŠ† S' âŸ¶ S âˆˆ C)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>subset_in_close</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª x âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª x âˆˆ close Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª x âˆˆ close Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>close_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª x âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>close_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>close_consistency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>C</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency (close C)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>ballI</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ close Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>S</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>close_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>p</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (Pro p âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro p) âˆˆ S)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (Pro p âˆˆ S' âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro p) âˆˆ S')â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆ‰ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆ‰ S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Z</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> Z)) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> Z)) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {Z} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {Z} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {A, B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ C âˆ¨ S âˆª {B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {A} âˆˆ close C âˆ¨ S' âˆª {B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ close C âˆ¨ S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) âˆˆ S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ S âˆª {B} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ close C âˆ¨ S' âˆª {B} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology Aâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆª {A} âˆˆ close Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span>subset_in_close</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (K i A âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ S)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (K i A âˆˆ S' âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ S')â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>close_closed</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed (close C)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>close_def</span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>close_subset</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C âŠ† close Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>close_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Finite characterâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>finite_char</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'a set set â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char C â‰¡ (âˆ€S. S âˆˆ C = (âˆ€S'. finite S' âŸ¶ S' âŠ† S âŸ¶ S' âˆˆ C))â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>mk_finite_char</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'a set set â‡’ 'a set setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹mk_finite_char C â‰¡ {S. âˆ€S'. finite S' âŸ¶ S' âŠ† S âŸ¶ S' âˆˆ C}â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>finite_char</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char (mk_finite_char C)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>finite_char_def</span><span> </span><span>mk_finite_char_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>finite_char_closed</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char C âŸ¹ subset_closed Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>finite_char_def</span><span> </span><span>subset_closed_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>ballI</span><span> </span><span>allI</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S</span><span> </span><span>S'</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S. (S âˆˆ C) = (âˆ€S'. finite S' âŸ¶ S' âŠ† S âŸ¶ S' âˆˆ C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âŠ† S'â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S'. finite S' âŸ¶ S' âŠ† S âŸ¶ S' âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>finite_char_subset</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed C âŸ¹ C âŠ† mk_finite_char Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>finite_consistency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>C</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency (mk_finite_char C)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>ballI</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finc</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âŠ† S. finite S' âŸ¶ S' âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âˆˆ C. âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>sc</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' x. S' âˆª x âˆˆ C âŸ¶ (âˆ€S âŠ† S' âˆª x. S âˆˆ C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (Pro i âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i) âˆˆ S)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹{Pro i, (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i)} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆ‰ Sâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹{<span class="hidden">â™</span><span class="bold">âŠ¥</span>} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Z</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> Z) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {Z} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>CollectI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' - {Z} âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> Z}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† S âˆª {Z}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {Z} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>CollectI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' - {A, B} âˆª {A <span class="hidden">â™</span><span class="bold">âˆ§</span> B}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† S âˆª {A, B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {A, B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>CollectI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' - {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>CollectI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' - {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ mk_finite_char C âˆ¨ S âˆª {B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ ?thesisâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Sa</span><span> </span><span>Sb</span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span>
</span><span>          </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Sa - {A}) âˆª (Sb - {B}) âˆª {A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {B}â€º</span></span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {A} âˆˆ C âˆ¨ ?S' âˆª {B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆˆ C âˆ¨ Sb âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ mk_finite_char C âˆ¨ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ ?thesisâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Sa</span><span> </span><span>Sb</span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span>
</span><span>          </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Sa - {<span class="hidden">â™</span><span class="bold">Â¬</span> A}) âˆª (Sb - {<span class="hidden">â™</span><span class="bold">Â¬</span> B}) âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B}â€º</span></span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ ?S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆˆ C âˆ¨ Sb âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ mk_finite_char C âˆ¨ S âˆª {B} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ ?thesisâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Sa</span><span> </span><span>Sb</span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span>
</span><span>          </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {B}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Sa - {<span class="hidden">â™</span><span class="bold">Â¬</span> A}) âˆª (Sb - {B}) âˆª {A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âŠ† S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âŠ† S âˆª {B}â€º</span></span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Saâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Sbâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ C âˆ¨ ?S' âˆª {B} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆˆ C âˆ¨ Sb âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sa âˆ‰ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Sb âˆ‰ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology Aâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>mk_finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>CollectI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>      </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S'</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' - {A}â€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† S âˆª {A}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âŠ† Sâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite ?S'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S' âˆª {A} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ mk_finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (K i A âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ S)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i A âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ Sâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹{K i A, (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A)} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Maximal extensionâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">instantiation</span></span><span> </span><span>fm</span><span> </span><span class="delimiter">::</span><span> </span><span class="delimiter">(</span><span>countable</span><span class="delimiter">)</span><span> </span><span>countable</span><span> </span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span class="keyword1"><span class="command">instance</span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>countable_datatype</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>is_chain</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(nat â‡’ 'a set) â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain f â‰¡ âˆ€n. f n âŠ† f (Suc n)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>is_chainD</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain f âŸ¹ x âˆˆ f m âŸ¹ x âˆˆ f (m + n)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>n</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>is_chain_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>is_chainD'</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹m â‰¤ kâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f kâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹k = m + nâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹m â‰¤ kâ€º</span></span></span><span> </span><span>le_iff_add</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f kâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f mâ€º</span></span></span><span> </span><span>is_chainD</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>chain_index</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Fâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹F âŠ† (â‹ƒn. f n) âŸ¹ âˆƒn. F âŠ† f nâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Fâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>F</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>finite_induct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>empty</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>insert</span><span> </span><span>x</span><span> </span><span>F</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆƒn. F âŠ† f nâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆƒm. x âˆˆ f mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹F âŠ† (â‹ƒx. f x)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>m</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹F âŠ† f nâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f mâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹m â‰¤ max n mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n â‰¤ max n mâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f (max n m)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_chainD'</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ f mâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹m â‰¤ max n mâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹F âŠ† f (max n m)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_chainD'</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹F âŠ† f nâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n â‰¤ max n mâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>chain_union_closed'</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€n. f n âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âˆˆ C. âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† (â‹ƒn. f n)â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† f nâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>chain_index</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite S'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† (â‹ƒn. f n)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹f n âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€n. f n âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âˆˆ C. âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>chain_union_closed</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain fâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€n. f n âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(â‹ƒn. f n) âˆˆ Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finite_char_closed</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âˆˆ C. âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S'. finite S' âŸ¶ S' âŠ† (â‹ƒn. f n) âŸ¶ S' âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>chain_union_closed'</span><span> </span><span>assms</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹((â‹ƒn. f n) âˆˆ C) = (âˆ€S'. finite S' âŸ¶ S' âŠ† (â‹ƒn. f n) âŸ¶ S' âˆˆ C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>finite_char_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>extend</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set â‡’ 'i fm set set â‡’ (nat â‡’ 'i fm) â‡’ nat â‡’ 'i fm setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹extend S C f 0 = Sâ€º</span></span></span><span> </span><span class="delimiter">|</span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹extend S C f (Suc n) =
    (if extend S C f n âˆª {f n} âˆˆ C
     then extend S C f n âˆª {f n}
     else extend S C f n)â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Extend</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set â‡’ 'i fm set set â‡’ (nat â‡’ 'i fm) â‡’ 'i fm setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Extend S C f â‰¡ â‹ƒn. extend S C f nâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>is_chain_extend</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹is_chain (extend S C f)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>is_chain_def</span><span class="delimiter">)</span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>extend_in_C</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency C âŸ¹ S âˆˆ C âŸ¹ extend S C f n âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>n</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>Extend_in_C</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency C âŸ¹ finite_char C âŸ¹ S âˆˆ C âŸ¹ Extend S C f âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>chain_union_closed</span><span> </span><span>is_chain_extend</span><span> </span><span>extend_in_C</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>Extend_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>Extend_subset</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âŠ† Extend S C fâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>Extend_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Union_upper</span><span> </span><span>extend.simps</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>range_eqI</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>maximal</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'a set â‡’ 'a set set â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal S C â‰¡ âˆ€S' âˆˆ C. S âŠ† S' âŸ¶ S = S'â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>Extend_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€y :: 'i fm. âˆƒn. y = f nâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal (Extend S C f) Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span>Extend_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>ballI</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S'</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(â‹ƒx. extend S C f x) âŠ† S'â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âŠ† (â‹ƒx. extend S C f x)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ S' âŠ† (â‹ƒx. extend S C f x)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>z</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆˆ S'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆ‰ (â‹ƒx. extend S C f x)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z = f nâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€y. âˆƒn. y = f nâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹extend S C f n âˆª {f n} âŠ† S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(â‹ƒx. extend S C f x) âŠ† S'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z = f nâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆˆ S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span>finite_char_closed</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S' âˆˆ C. âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€S âŠ† S'. S âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S' âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹extend S C f n âˆª {f n} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹extend S C f n âˆª {f n} âŠ† S'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆˆ extend S C f (Suc n)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆ‰ (â‹ƒx. extend S C f x)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z = f nâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹z âˆ‰ (â‹ƒx. extend S C f x)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(â‹ƒx. extend S C f x) = S'â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K consistencyâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>K_consistency</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>}â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>conjI</span><span> </span><span>ballI</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>notI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>S</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>}â€º</span></span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">is</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆˆ ?Câ€º</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>G</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>*</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S = set Gâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (Pro i)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_member</span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_FFI</span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_member</span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Z</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> Z) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> Z)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_member</span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply (Z # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_ImpI</span><span> </span><span>K_right_mp</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {Z} = set (Z # G)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {Z} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_member</span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ ((A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> A)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ ((A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G Aâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G Bâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_right_mp</span><span> </span><span>K_imply_head</span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>imply.simps</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply (A # B # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_Cons</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span>cut</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, B} = set (A # B # G)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B))â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span>K_imply_Cons</span><span> </span><span>K_imply_member</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">Â¬</span> A)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">Â¬</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp_all</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span> </span><span>tautology_imply</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) (<span class="hidden">â™</span><span class="bold">Â¬</span> A)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) # (<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span>cut</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} = set ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) # (<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B))â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span>K_imply_member</span><span> </span><span>K_imply_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>
</span><span>      </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> A)â€º</span></span></span><span>
</span><span>      </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">Â¬</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp_all</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span> </span><span>tautology_imply</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) Aâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply (A # (<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span>cut</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} = set (A # (<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A, <span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span>K_imply_member</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {A} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {B} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (A # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (B # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Un_insert_right</span><span> </span><span>list.simps</span><span class="delimiter">(</span><span>15</span><span class="delimiter">)</span><span> </span><span>sup_bot.right_neutral</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (A <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span> </span><span>K_DisE</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ ?C âˆ¨ S âˆª {B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B)) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span>K_imply_member</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> (A <span class="hidden">â™</span><span class="bold">âˆ§</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> B))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span> </span><span>tautology_imply</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> B))â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> B) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Un_insert_right</span><span> </span><span>list.simps</span><span class="delimiter">(</span><span>15</span><span class="delimiter">)</span><span> </span><span>sup_bot.right_neutral</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_DisE</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> B))â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ ?C âˆ¨ S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>B</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span>K_imply_member</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G ((A <span class="hidden">â™</span><span class="bold">âŸ¶</span> B) <span class="hidden">â™</span><span class="bold">âŸ¶</span> (<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span> </span><span>tautology_imply</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(âˆ€G'. set G' = S âˆª {B} âŸ¶ âŠ¢ imply G' <span class="hidden">â™</span><span class="bold">âŠ¥</span>)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (B # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Un_insert_right</span><span> </span><span>list.simps</span><span class="delimiter">(</span><span>15</span><span class="delimiter">)</span><span> </span><span>sup_bot.right_neutral</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_DisE</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G ((<span class="hidden">â™</span><span class="bold">Â¬</span> A) <span class="hidden">â™</span><span class="bold">âˆ¨</span> B)â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> A} âˆˆ ?C âˆ¨ S âˆª {B} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fmâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹tautology Aâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G Aâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>tautology_imply</span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (A # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span> âŸ¹ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cut</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} = set (A # G)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {A} âˆˆ ?Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i A âˆˆ S âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A) âˆˆ Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (K i A)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G (<span class="hidden">â™</span><span class="bold">Â¬</span> K i A)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_member</span><span> </span><span>*</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_FFI</span><span> </span><span>K_right_mp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>K_finite_consistency</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency (mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>}))â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_consistency</span><span> </span><span>finite_consistency</span><span> </span><span>close_closed</span><span> </span><span>close_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>K_concrete_finite_consistency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C â‰¡ mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set G âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span>mk_finite_char_def</span><span> </span><span>close_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_imply_weaken</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Model existenceâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>at_least_one_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p} âˆˆ C âˆ¨ V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (V âˆª {p} âˆˆ C âˆ¨ V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p <span class="hidden">â™</span><span class="bold">âˆ¨</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span>maximal_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>no_types</span><span class="delimiter">,</span><span> </span><span>hide_lams</span><span class="delimiter">)</span><span> </span><span>insert_iff</span><span> </span><span>subset_iff</span><span> </span><span>sup.absorb_iff1</span><span> </span><span>sup.cobounded1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span>maximal_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>at_most_one_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (p âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>p</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>FF</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Pro</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Dis</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q) âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p} âˆˆ C âˆ¨ V âˆª {q} âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p, <span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ¨ q âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Dis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Con</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p, q} âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C âˆ¨ V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V âˆ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Con</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Imp</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C âˆ¨ V âˆª {q} âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p, <span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V âˆ¨ q âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Imp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>K</span><span> </span><span>i</span><span> </span><span>p</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>exactly_one_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p âˆˆ V) â‰  ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>at_most_one_in_maximal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>conjuncts_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ V âŸ· p âˆˆ V âˆ§ q âˆˆ Vâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p, q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ§ q âˆˆ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ§ q âˆˆ Vâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆ‰ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C âˆ¨ V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V âˆ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ§ q âˆˆ Vâ€º</span></span></span><span> </span><span>assms</span><span> </span><span>at_most_one_in_maximal</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>consequent_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q âˆˆ Vâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">consider</span></span><span> </span><span class="delimiter">(</span><span>np</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ Câ€º</span></span></span><span> </span><span class="delimiter">|</span><span> </span><span class="delimiter">(</span><span>q</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>cases</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>np</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>at_most_one_in_maximal</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>q</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_not_neg_in_consistency</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> p) âŸ¹ {p} âˆˆ {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>}â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set [p] = {p}â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply [p] <span class="hidden">â™</span><span class="bold">âŠ¥</span> = (<span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>K_inconsistent_neg</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C â‰¡ mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹{p} âˆ‰ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span>mk_finite_char_def</span><span> </span><span>close_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_not_neg_in_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>conjuncts_in_consistency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p <span class="hidden">â™</span><span class="bold">âˆ§</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p, q} âˆˆ Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p <span class="hidden">â™</span><span class="bold">âˆ§</span> q}â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ ?Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S âˆª {p, q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p, q} âŠ† ?S âˆª {p, q}â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p, q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>conjoined_in_consistency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {conjoin ps q} âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª set ps âˆª {q} âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {conjoin ps q} âˆˆ Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>ps</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>S</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>p</span><span> </span><span>ps</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p, conjoin ps q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>conjuncts_in_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆª {p} âˆª {conjoin ps q} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>insert_is_Un</span><span> </span><span>sup_assoc</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>inconsistent_conjoin</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C â‰¡ mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set G âˆª {p} âˆ‰ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin G p)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_finite_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>finite_char</span><span> </span><span>finite_char_closed</span><span class="delimiter">)</span><span>
</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin G p)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹{conjoin G p} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_inconsistent_neg</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set G âˆª {p} âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>conjoined_in_consistency</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>K_in_maximal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C â‰¡ mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_finite_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>finite_char</span><span> </span><span>finite_char_closed</span><span class="delimiter">)</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> <span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>A1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span> </span><span>R1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆ‰ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set [<span class="hidden">â™</span><span class="bold">Â¬</span> p] âˆˆ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subset_closed_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>C_def</span><span> </span><span>K_concrete_finite_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>exists_finite_inconsistent</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>C</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆƒW. W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âŠ† V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆ‰ W âˆ§ finite W âˆ§ W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>finite_char_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>smt</span><span> </span><span>Un_insert_right</span><span> </span><span>Un_subset_iff</span><span> </span><span>finite_insert</span><span> </span><span>inf_sup_ord</span><span class="delimiter">(</span><span>4</span><span class="delimiter">)</span><span>
</span><span>      </span><span>mk_disjoint_insert</span><span> </span><span>sup_bot.comm_neutral</span><span> </span><span>sup_ge1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>exists_maximal_superset</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>C</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i :: countable) fm set setâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>W</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âŠ† Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹ W âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal W Câ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?W</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Extend V C from_natâ€º</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âŠ† ?Wâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Extend_subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?W âˆˆ Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Extend_in_C</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal ?W Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>Extend_maximal</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>from_nat_to_nat</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>that</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">type_synonym</span></span><span> </span><span class="tfree">'i</span><span> </span><span>s_max</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm setâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>pi</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i s_max â‡’ id â‡’ boolâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹pi s i â‰¡ Pro i âˆˆ sâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>partition</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set â‡’ 'i â‡’ 'i fm setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹partition V i â‰¡ {p. K i p âˆˆ V}â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span>reach</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹'i fm set set â‡’ 'i â‡’ 'i s_max â‡’ 'i s_max setâ€º</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹reach C i V â‰¡ {W. partition V i âŠ† W âˆ§ W âˆˆ C âˆ§ maximal W C}â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>model_existence</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>p</span><span> </span><span class="delimiter">::</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹('i :: countable) fmâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">defines</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹C â‰¡ mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p âˆˆ V âŸ· Kripke pi (reach C), V âŠ¨ p) âˆ§
    ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V âŸ· Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_finite_consistency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>finite_char</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>finite_char</span><span> </span><span>finite_char_closed</span><span class="delimiter">)</span><span>
</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>p</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>V</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>FF</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>conjI</span><span> </span><span>impI</span><span> </span><span>iffI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>False</span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹<span class="hidden">â™</span><span class="bold">âŠ¥</span> âˆ‰ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> <span class="hidden">â™</span><span class="bold">âŠ¥</span>) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>FF</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Pro</span><span> </span><span>i</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>conjI</span><span> </span><span>impI</span><span> </span><span>iffI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹pi V iâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ Pro iâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆ‰ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ (pi V i)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> Pro iâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ Pro iâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> Pro iâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Pro i âˆ‰ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> Pro i) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>Pro</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Dis</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p} âˆˆ C âˆ¨ V âˆª {q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">consider</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span> </span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Dis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>cases</span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p, <span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ¨</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Dis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>Dis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Con</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âˆ§</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p, q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ Vâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Con</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C âˆ¨ V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">consider</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span> </span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âˆ§</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Con</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>cases</span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>Con</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Imp</span><span> </span><span>p</span><span> </span><span>q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ C âˆ¨ V âˆª {q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">consider</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆˆ Vâ€º</span></span></span><span> </span><span class="delimiter">|</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Imp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>cases</span><span> </span><span>simp_all</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆª {p, <span class="hidden">â™</span><span class="bold">Â¬</span> q} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>consistency_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹p âˆˆ V âˆ§ (<span class="hidden">â™</span><span class="bold">Â¬</span> q) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>maximal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> (p <span class="hidden">â™</span><span class="bold">âŸ¶</span> q)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Imp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>Imp</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>K</span><span> </span><span>i</span><span> </span><span>p</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i p âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ K i pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i p âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€W âˆˆ reach C i V. p âˆˆ W âˆ§ W âˆˆ C âˆ§ maximal W Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€W âˆˆ reach C i V. Kripke pi (reach C), W âŠ¨ pâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ K i pâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Kripke pi (reach C), V âŠ¨ K i p) âŸ¶ K i p âˆˆ Vâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ K i pâ€º</span></span></span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆˆ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>W</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âŠ† Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal W Câ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span>exists_maximal_superset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), W âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> pâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆˆ reach C i Vâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âŠ† Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal W Câ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> K i pâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach C), V âŠ¨ K i pâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>W</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>        </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âŠ† partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆ‰ Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char Câ€º</span></span></span><span> </span><span>exists_finite_inconsistent</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>
</span><span>      </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>L</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set L = Wâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite Wâ€º</span></span></span><span> </span><span>finite_list</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ (<span class="hidden">â™</span><span class="bold">Â¬</span> conjoin L (<span class="hidden">â™</span><span class="bold">Â¬</span> p))â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inconsistent_conjoin</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âˆ‰ Câ€º</span></span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply L pâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_conjoin_imply</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ K i (imply L p)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>R2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply (map (K i) L) (K i p)â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_distrib_K_imp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply (map (K i) L) (K i p) âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K_in_maximal</span><span> </span><span>K.prems</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span> </span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>C_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i p âˆˆ Vâ€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set L = Wâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹W âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p} âŠ† partition V i âˆª {<span class="hidden">â™</span><span class="bold">Â¬</span> p}â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> p) âˆ‰ Wâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>L</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>W</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>a</span><span> </span><span>L</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹K i a âˆˆ Vâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹imply (map (K i) L) (K i p) âˆˆ Vâ€º</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹V âˆˆ Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span>consequent_in_maximal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> K i p) âŸ¶ (<span class="hidden">â™</span><span class="bold">Â¬</span> K i p) âˆˆ Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K.prems</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span>at_least_one_in_maximal</span><span> </span><span>calculation</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(<span class="hidden">â™</span><span class="bold">Â¬</span> K i p) âˆˆ V âŸ¶ Kripke pi (reach C), V âŠ¨ <span class="hidden">â™</span><span class="bold">Â¬</span> K i pâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>K.prems</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal V Câ€º</span></span></span><span> </span><span>calculation</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>exactly_one_in_maximal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Completenessâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>imply_completeness</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>valid</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€(M :: ('i, ('i :: countable) fm set) kripke) s.
    list_all (Î»q. M, s âŠ¨ q) G âŸ¶ M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ imply G pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>K_Boole</span><span class="delimiter">,</span><span> </span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?S</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹set ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) # G)â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?C</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹mk_finite_char (close {set G | G. Â¬ âŠ¢ imply G <span class="hidden">â™</span><span class="bold">âŠ¥</span>})â€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?V</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Extend ?S ?C from_natâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?M</span><span> </span><span class="delimiter">=</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Kripke pi (reach ?C)â€º</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹consistency ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>K_finite_consistency</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subset_closed ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finite_char</span><span> </span><span>finite_char_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>finite_char</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?S âˆˆ ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ âŠ¢ imply ((<span class="hidden">â™</span><span class="bold">Â¬</span> p) # G) <span class="hidden">â™</span><span class="bold">âŠ¥</span>â€º</span></span></span><span> </span><span>close_closed</span><span> </span><span>close_subset</span><span> </span><span>finite_char_subset</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?V âˆˆ ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Extend_in_C</span><span> </span><span>K_finite_consistency</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char ?Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€y :: 'i fm. âˆƒn. y = from_nat nâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>from_nat_to_nat</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal ?V ?Câ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Extend_maximal</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹finite_char ?Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span> </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ ?Sâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ ?Vâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Extend_subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?M, ?V âŠ¨ xâ€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>model_existence</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?V âˆˆ ?Câ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹maximal ?V ?Câ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?M, ?V âŠ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹list_all (Î»p. ?M, ?V âŠ¨ p) Gâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>list_all_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?M, ?V âŠ¨ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?M, ?V âŠ¨ (<span class="hidden">â™</span><span class="bold">Â¬</span> p)â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>completeness</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âˆ€(M :: ('i :: countable, 'i fm set) kripke) s. M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>imply_completeness</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>G</span><span class="delimiter">=</span><span class="cartouche"><span class="delete"><span class="delete">â€¹[]â€º</span></span></span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Main Resultâ€º</span></span></span><span> </span><span class="comment">â€• â€¹System K is sound and completeâ€º</span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid p â‰¡ âˆ€(M :: (nat, nat s_max) kripke) s. M, s âŠ¨ pâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>main</span><span class="delimiter">:</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid p âŸ· âŠ¢ pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>completeness</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>soundness</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">corollary</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid p âŸ¶ M, s âŠ¨ pâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹valid pâ€º</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹âŠ¢ pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>main</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>soundness</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹M, s âŠ¨ pâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Acknowledgementsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹
The definition of a consistency property, subset closure, finite character and maximally consistent
sets is based on work by Berghofer, but has been adapted from first-order logic to epistemic logic.

  â–ª Stefan Berghofer:
  First-Order Logic According to Fitting.
  ğŸŒâ€¹https://www.isa-afp.org/entries/FOL-Fitting.shtmlâ€º
â€º</span></span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div>