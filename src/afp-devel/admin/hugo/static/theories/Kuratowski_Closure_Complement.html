<div id="KuratowskiClosureComplementTheorem">
<div class="head">
<h1>Theory KuratowskiClosureComplementTheorem</h1>
</div>
<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> KuratowskiClosureComplementTheorem
<span class="keyword2"><span class="keyword">imports</span></span>
  <span class="quoted">"<a href="../../HOL/HOL-Analysis/Multivariate_Analysis.html">HOL-Analysis.Multivariate_Analysis</a>"</span>
  <span class="quoted">"<a href="../../HOL/HOL-Analysis/Continuum_Not_Denumerable.html">HOL-Analysis.Continuum_Not_Denumerable</a>"</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(*&gt;*)</span>
<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ Introduction ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We discuss a topological curiosity discovered by <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span>
"Kuratowski:1922"<span class="antiquote"><span class="antiquote">}</span></span></span></span>: the fact that the number of distinct operators on
a topological space generated by compositions of closure and
complement never exceeds 14, and is exactly 14 in the case of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span>
<span class="quoted"><span class="quoted">"<span class="main"><span class="main">ℝ</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>. In addition, we prove a theorem due to <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span>
"Chagrov:1982"<span class="antiquote"><span class="antiquote">}</span></span></span></span> that classifies topological spaces according to the
number of such operators they support.

Kuratowski's result, which is exposited in <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span>
"TheoremOfTheDay:2015"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and Chapter 7 of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "Chamberland:2015"<span class="antiquote"><span class="antiquote">}</span></span></span></span>,
has already been treated in Mizar --- see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span>
"BaginskaGrabowski:2003"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "Grabowski:2004"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. To the best of
our knowledge, we are the first to mechanize Chagrov's result.

Our work is based on a presentation of Kuratowski's and Chagrov's
results by <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "GardnerJackson:2008"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.

We begin with some preliminary facts pertaining to the relationship
between interiors of unions and unions of interiors
(\S\ref{sec:interiors-unions}) and the relationship between <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span>
<span class="quoted"><span class="quoted">"<span class="main"><span class="main">ℚ</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="main">ℝ</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> (\S\ref{sec:rat-real}). We then prove
Kuratowski's result (\S\ref{sec:kuratowski}) and the corollary that at
most 7 distinct operators on a topological space can be generated by
compositions of closure and interior
(\S\ref{sec:kuratowski-corollary}). Finally, we prove Chagrov's result
(\S\ref{sec:chagrov}).

›</span></span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ Interiors and unions \label{sec:interiors-unions} ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">boundary</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">boundary</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> closure <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">-</span> interior <span class="free"><span class="bound"><span class="entity">X</span></span></span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-boundary_empty"><span class="command">lemma</span></span> boundary_empty<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"boundary <span class="main">{}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> boundary_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">exterior</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">exterior</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> <span class="main">-</span> <span class="main">(</span>interior <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">∪</span> boundary <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-interior_union_boundary"><span class="command">lemma</span></span> interior_union_boundary<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span> <span class="main">=</span> interior <span class="free">X</span> <span class="main">∪</span> interior <span class="free">Y</span>
           <span class="main">⟷</span> boundary <span class="free">X</span> <span class="main">∩</span> boundary <span class="free">Y</span> <span class="main">⊆</span> boundary <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?lhs1</span> <span class="main">=</span> <span class="var">?lhs2</span><span class="main">)</span> <span class="main">⟷</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffI<span class="main"><span class="main">[</span></span><span class="operator">OF</span> _ subset_antisym<span class="main"><span class="main">[</span></span><span class="operator">OF</span> subsetI<span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs1</span> <span class="main">=</span> <span class="var">?lhs2</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?rhs</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> boundary_def<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="var"><span class="quoted"><span class="var">?rhs</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs1</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">X</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">Y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> boundary <span class="free">X</span> <span class="main">∩</span> boundary <span class="free">Y</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?rhs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs1</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> boundary_def subset_iff<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">consider</span></span> <span class="main">(</span>X<span class="main">)</span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∉</span> boundary <span class="free">X</span>"</span></span> <span class="main">|</span> <span class="main">(</span>Y<span class="main">)</span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∉</span> boundary <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
      <span class="keyword3"><span class="command">case</span></span> X
      <span class="keyword1"><span class="command">from</span></span> X <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> exterior <span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> exterior_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> boundary <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> exterior <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">X</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">-</span> <span class="free">X</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ComplI DiffI boundary_def closure_interior interior_subset open_interior<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> interior <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">U'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> interiorE<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">-</span> <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∩</span> <span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹open <span class="skolem">U'</span>›</span></span> <span class="quoted"><span class="quoted">‹open <span class="skolem">U</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> IntI interiorI open_Int<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> Y
      <span class="keyword1"><span class="command">from</span></span> Y <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> exterior <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> exterior_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> boundary <span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> exterior <span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">Y</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">-</span> <span class="free">Y</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ComplI DiffI boundary_def closure_interior interior_subset open_interior<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> interior <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">U'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> interiorE<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">-</span><span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∩</span> <span class="skolem">U'</span> <span class="main">⊆</span> <span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∉</span> interior <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹open <span class="skolem">U'</span>›</span></span> <span class="quoted"><span class="quoted">‹open <span class="skolem">U</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> IntI interiorI open_Int<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs1</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs2</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs2</span> <span class="main">⊆</span> <span class="var">?lhs1</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> interior_mono<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-interior_union_closed_intervals"><span class="command">lemma</span></span> interior_union_closed_intervals<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">a</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>ordered_euclidean_space"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">b</span> <span class="main">&lt;</span> <span class="free">c</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior <span class="main">(</span><span class="main">{</span><span class="free">a</span><span class="main">..</span><span class="free">b</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">c</span><span class="main">..</span><span class="free">d</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> interior <span class="main">{</span><span class="free">a</span><span class="main">..</span><span class="free">b</span><span class="main">}</span> <span class="main">∪</span> interior <span class="main">{</span><span class="free">c</span><span class="main">..</span><span class="free">d</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">subst</span> interior_union_boundary<span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> boundary_def<span class="main">)</span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ Additional facts about the rationals and reals \label{sec:rat-real} ›</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-Rat_real_limpt"><span class="command">lemma</span></span> Rat_real_limpt<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">real</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="keyword1">islimpt</span> <span class="main">ℚ</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> islimptI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="skolem">T</span>"</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">T</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">e</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">&lt;</span> <span class="skolem">e</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> ball<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¦</span><span class="skolem">x'</span> <span class="main">-</span> <span class="free">x</span><span class="main">¦</span> <span class="main">&lt;</span> <span class="skolem">e</span> <span class="main">⟶</span> <span class="skolem">x'</span> <span class="main">∈</span> <span class="skolem">T</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x'</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> open_real<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">0</span> <span class="main">&lt;</span> <span class="skolem">e</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">&lt;</span> real_of_rat <span class="skolem">q</span> <span class="main">∧</span> real_of_rat <span class="skolem">q</span> <span class="main">&lt;</span> <span class="free">x</span> <span class="main">+</span> <span class="skolem">e</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> of_rat_dense <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">with</span></span> ball <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">∈</span><span class="main">ℚ</span><span class="main">.</span> <span class="bound">y</span> <span class="main">∈</span> <span class="skolem">T</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">≠</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-Rat_closure"><span class="command">lemma</span></span> Rat_closure<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure <span class="main">ℚ</span> <span class="main">=</span> <span class="main">(</span>UNIV <span class="main">::</span> real set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> closure_def <span class="keyword1"><span class="command">using</span></span> Rat_real_limpt <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-Rat_interval_closure"><span class="command">lemma</span></span> Rat_interval_closure<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">real</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">&lt;</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure <span class="main">(</span><span class="main">{</span><span class="free">x</span><span class="main">&lt;..&lt;</span><span class="free">y</span><span class="main">}</span> <span class="main">∩</span> <span class="main">ℚ</span><span class="main">)</span> <span class="main">=</span> <span class="main">{</span><span class="free">x</span><span class="main">..</span><span class="free">y</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Rat_closure closure_closure closure_greaterThanLessThan closure_mono inf_le1 inf_top.right_neutral open_Int_closure_subset open_real_greaterThanLessThan subset_antisym<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-Rat_not_open"><span class="command">lemma</span></span> Rat_not_open<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">T</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"real set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"open <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span><span class="free">T</span> <span class="main">⊆</span> <span class="main">ℚ</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> countable_rat open_minus_countable subset_eq<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-Irrat_dense_in_real"><span class="command">lemma</span></span> Irrat_dense_in_real<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">real</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">&lt;</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">r</span><span class="main">∈</span><span class="main">-</span><span class="main">ℚ</span><span class="main">.</span> <span class="free">x</span> <span class="main">&lt;</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms Rat_not_open<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">x</span><span class="main">&lt;..&lt;</span><span class="free">y</span><span class="main">}</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-closed_interval_Int_compl"><span class="command">lemma</span></span> closed_interval_Int_compl<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">real</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">&lt;</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">&lt;</span> <span class="free">z</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">-</span> <span class="main">{</span><span class="free">x</span><span class="main">..</span><span class="free">y</span><span class="main">}</span> <span class="main">∩</span> <span class="main">-</span> <span class="main">{</span><span class="free">y</span><span class="main">..</span><span class="free">z</span><span class="main">}</span> <span class="main">=</span> <span class="main">-</span> <span class="main">{</span><span class="free">x</span><span class="main">..</span><span class="free">z</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ Kuratowski's result \label{sec:kuratowski} ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We prove that at most 14 distinct operators can be generated by compositions of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "closure"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and complement. For convenience, we give these operators short names and try to avoid pointwise reasoning. We treat the <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "interior"<span class="antiquote"><span class="antiquote">}</span></span></span></span> operator at the same time.

›</span></span>

<span class="keyword1"><span class="command">declare</span></span> o_apply<span class="main">[</span><span class="operator">simp</span> <span class="quasi_keyword">del</span><span class="main">]</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">C</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set"</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> <span class="main">-</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">K</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set"</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> closure <span class="free"><span class="bound"><span class="entity">X</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">I</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set"</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">I</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> interior <span class="free"><span class="bound"><span class="entity">X</span></span></span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-C_C"><span class="command">lemma</span></span> C_C<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"C <span class="main">∘</span> C <span class="main">=</span> id"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fun_eq_iff C_def o_apply<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-K_K"><span class="command">lemma</span></span> K_K<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="main">∘</span> K <span class="main">=</span> K"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fun_eq_iff K_def o_apply<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-I_I"><span class="command">lemma</span></span> I_I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> I <span class="main">=</span> I"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> I_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_def<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-I_K"><span class="command">lemma</span></span> I_K<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"I <span class="main">=</span> C <span class="main">∘</span> K <span class="main">∘</span> C"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> C_def I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_def interior_closure<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-K_I"><span class="command">lemma</span></span> K_I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="main">=</span> C <span class="main">∘</span> I <span class="main">∘</span> C"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> C_def I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_def interior_closure<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-K_I_K_I"><span class="command">lemma</span></span> K_I_K_I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> K <span class="main">∘</span> I"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> C_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply closure_minimal closure_mono closure_subset interior_maximal interior_subset subset_antisym<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-I_K_I_K"><span class="command">lemma</span></span> I_K_I_K<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> I <span class="main">∘</span> K"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> C_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> closure_closure closure_mono closure_subset interior_maximal interior_mono interior_subset open_interior subset_antisym<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-K_mono"><span class="command">lemma</span></span> K_mono<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊆</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="free">x</span> <span class="main">⊆</span> K <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> closure_mono<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

The following lemma embodies the crucial observation about compositions of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "C"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "K"<span class="antiquote"><span class="antiquote">}</span></span></span></span>:

›</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-KCKCKCK_KCK"><span class="command">lemma</span></span> KCKCKCK_KCK<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> C <span class="main">∘</span> K"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> ext<span class="main"><span class="main">[</span></span><span class="operator">OF</span> equalityI<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="var">?rhs</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> C_def K_def closure_def o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="main">(</span>K <span class="main">∘</span> <span class="var">?rhs</span><span class="main">)</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_mono o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="var">?rhs</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_K o_assoc<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> K <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> C_def K_def closure_def o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="main">(</span>K <span class="main">∘</span> K<span class="main">)</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_mono o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>C <span class="main">∘</span> <span class="main">(</span>K <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="main">(</span>C <span class="main">∘</span> <span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> C_def o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> <span class="main">(</span>K <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> <span class="main">(</span>K <span class="main">∘</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_mono o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?rhs</span> <span class="skolem">x</span> <span class="main">⊆</span> <span class="var">?lhs</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_K o_assoc<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

The inductive set <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CK›</span></span></span></span> captures all operators that can be generated by compositions of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "C"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "K"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. We shallowly embed the operators; that is, we identify operators up to extensional equality.

›</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">CK</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">CK</span> C"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK</span> K"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">⟦</span> <span class="free">CK</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">;</span> <span class="free">CK</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main">⟧</span> <span class="main">⟹</span> <span class="free">CK</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">∘</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">declare</span></span> CK.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span><span class="main">]</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_id"><span class="command">lemma</span></span> CK_id<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span><span class="main">]</span><span class="main">:</span>
  <span class="quoted"><span class="quoted">"CK id"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> CK.intros<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> CK.intros<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> C_C<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

The inductive set <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CK_nf›</span></span></span></span> captures the normal forms for the 14 distinct operators.

›</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">CK_nf</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> id"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> C"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> K"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>K <span class="main">∘</span> C<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf</span> <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">declare</span></span> CK_nf.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_nf_set"><span class="command">lemma</span></span> CK_nf_set<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">f</span> <span class="main">.</span> CK_nf <span class="bound">f</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span>id<span class="main">,</span> C<span class="main">,</span> K<span class="main">,</span> C <span class="main">∘</span> K<span class="main">,</span> K <span class="main">∘</span> C<span class="main">,</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">,</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">,</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">,</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">,</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">,</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">,</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">,</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">,</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> CK_nf.simps<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

That each operator generated by compositions of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "C"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "K"<span class="antiquote"><span class="antiquote">}</span></span></span></span> is extensionally equivalent to one of the normal forms
captured by <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CK_nf›</span></span></span></span> is demonstrated by means of an
induction over the construction of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CK_nf›</span></span></span></span> and an appeal
to the facts proved above.

›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> CK_nf<span class="main">:</span>
  <span class="quoted"><span class="quoted">"CK <span class="free">f</span> <span class="main">⟷</span> CK_nf <span class="free">f</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffI<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CK <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"CK_nf <span class="free">f</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span>
       <span class="main">(</span><span class="operator">elim</span> CK_nf.cases<span class="main"><span class="keyword3">;</span></span> <span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> id_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span> C_C K_K KCKCKCK_KCK o_assoc<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_assoc<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> C_C K_K KCKCKCK_KCK o_assoc
      <span class="main"><span class="keyword3">|</span></span> <span class="operator">blast</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CK_nf <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"CK <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> id_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> CK_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK <span class="bound">f</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">14</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> CK_nf CK_nf_set card.insert_remove <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> le_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> card_Diff1_le<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We show, using the following subset of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>ℝ›</span></span></span></span> (an
example taken from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "Rusin:2001"<span class="antiquote"><span class="antiquote">}</span></span></span></span>) as a witness, that there
exist topological spaces on which all 14 operators are distinct.

›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">RRR</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"real set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">RRR</span> <span class="main">=</span> <span class="main">{</span><span class="main">0</span><span class="main">&lt;..&lt;</span><span class="main">1</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="main">1</span><span class="main">&lt;..&lt;</span><span class="numeral">2</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">3</span><span class="main">}</span> <span class="main">∪</span> <span class="main">(</span><span class="main">{</span><span class="numeral">5</span><span class="main">&lt;..&lt;</span><span class="numeral">7</span><span class="main">}</span> <span class="main">∩</span> <span class="main">ℚ</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

The following facts allow the required proofs to proceed by <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">method</span></span> simp<span class="antiquote"><span class="antiquote">}</span></span></span></span>:

›</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-RRR_closure"><span class="command">lemma</span></span> RRR_closure<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure RRR <span class="main">=</span> <span class="main">{</span><span class="main">0</span><span class="main">..</span><span class="numeral">2</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">3</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">5</span><span class="main">..</span><span class="numeral">7</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> RRR_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> closure_insert Rat_interval_closure<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-RRR_interior"><span class="command">lemma</span></span> RRR_interior<span class="main">:</span>
  <span class="quoted"><span class="quoted">"interior RRR <span class="main">=</span> <span class="main">{</span><span class="main">0</span><span class="main">&lt;..&lt;</span><span class="main">1</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="main">1</span><span class="main">&lt;..&lt;</span><span class="numeral">2</span><span class="main">}</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> equalityI<span class="main"><span class="main">[</span></span><span class="operator">OF</span> subsetI subsetI<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">T</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="main">⊆</span> RRR"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> interiorE<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">e</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">&lt;</span> <span class="skolem">e</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"ball <span class="skolem">x</span> <span class="skolem">e</span> <span class="main">⊆</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> openE<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">T</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">0</span> <span class="main">&lt;</span> <span class="skolem">e</span>›</span></span> <span class="quoted"><span class="quoted">‹ball <span class="skolem">x</span> <span class="skolem">e</span> <span class="main">⊆</span> <span class="skolem">T</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">T</span> <span class="main">⊆</span> RRR›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> RRR_def ball_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> c<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"min <span class="main">(</span><span class="numeral">3</span> <span class="main">+</span> <span class="skolem">e</span><span class="main">/</span><span class="numeral">2</span><span class="main">)</span> <span class="numeral">4</span>"</span></span><span class="main"><span class="main">]</span></span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> dist_real_def<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> Irrat_dense_in_real<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> y<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">+</span> <span class="skolem">e</span><span class="main">/</span><span class="numeral">2</span>"</span></span><span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="main">0</span> <span class="main">&lt;</span> <span class="skolem">e</span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">∈</span><span class="main">-</span> <span class="main">ℚ</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">&lt;</span> <span class="skolem">r</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">x</span> <span class="main">+</span> <span class="skolem">e</span> <span class="main">/</span> <span class="numeral">2</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">T</span>›</span></span>  <span class="quoted"><span class="quoted">‹ball <span class="skolem">x</span> <span class="skolem">e</span> <span class="main">⊆</span> <span class="skolem">T</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">T</span> <span class="main">⊆</span> RRR›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">{</span><span class="numeral">5</span><span class="main">&lt;..&lt;</span><span class="numeral">7</span><span class="main">}</span> <span class="main">∩</span> <span class="main">ℚ</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> RRR_def ball_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> dist_real_def <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> c<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">r</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> interior RRR›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?rhs</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> RRR_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="operator">OF</span> interior_subset<span class="main"><span class="main">]</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?rhs</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?lhs</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> RRR_def interior_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> open_real_greaterThanLessThan<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-RRR_interior_closure"><span class="command">lemma</span></span> RRR_interior_closure<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior <span class="main">(</span><span class="main">{</span><span class="main">0</span><span class="main">::</span>real<span class="main">..</span><span class="numeral">2</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">3</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">5</span><span class="main">..</span><span class="numeral">7</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="main">{</span><span class="main">0</span><span class="main">&lt;..&lt;</span><span class="numeral">2</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">5</span><span class="main">&lt;..&lt;</span><span class="numeral">7</span><span class="main">}</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> interior <span class="main">(</span><span class="main">{</span><span class="main">0</span><span class="main">..</span><span class="numeral">2</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="numeral">5</span><span class="main">..</span><span class="numeral">7</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Un_assoc Un_commute closed_Un closed_eucl_atLeastAtMost interior_closed_Un_empty_interior interior_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">...</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> interior_union_closed_intervals<span class="main">)</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

The operators can be distinguished by testing which of the points in
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>{1,2,3,4,6}›</span></span></span></span> belong to their results.

›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">test</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>real set <span class="main">⇒</span> real set<span class="main">)</span> <span class="main">⇒</span> bool list"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">test</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">≡</span> map <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> RRR<span class="main">)</span> <span class="main">[</span><span class="main">1</span><span class="main">,</span><span class="numeral">2</span><span class="main">,</span><span class="numeral">3</span><span class="main">,</span><span class="numeral">4</span><span class="main">,</span><span class="numeral">6</span><span class="main">]</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-RRR_test"><span class="command">lemma</span></span> RRR_test<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> RRR <span class="main">=</span> <span class="free">g</span> RRR"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"test <span class="free">f</span> <span class="main">=</span> test <span class="free">g</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> test_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-nf_RRR"><span class="command">lemma</span></span> nf_RRR<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"test id <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> False<span class="main">,</span> True<span class="main">,</span> False<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test C <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> True<span class="main">,</span> False<span class="main">,</span> True<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test K <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> False<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> True<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> True<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> False<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> True<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> False<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> False<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>False<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">,</span> True<span class="main">]</span>"</span></span>
    <span class="quoted"><span class="quoted">"test <span class="main">(</span>C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C <span class="main">∘</span> K <span class="main">∘</span> C<span class="main">)</span> <span class="main">=</span> <span class="main">[</span>True<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">,</span> False<span class="main">]</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> test_def C_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> RRR_closure RRR_interior RRR_interior_closure closure_complement closed_interval_Int_compl o_apply<span class="main">)</span>
   <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> RRR_def<span class="main">)</span>

<span class="keyword1"><span class="command">theorem</span></span> CK_nf_real_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">(</span><span class="main">(</span><span class="main">λ</span> <span class="bound">f</span><span class="main">.</span> <span class="bound">f</span> RRR<span class="main">)</span> <span class="main">`</span> <span class="main">{</span><span class="bound">f</span> <span class="main">.</span> CK_nf <span class="bound">f</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="numeral">14</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CK_nf_set<span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="operator">subst</span> card_insert_disjoint<span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> RRR_test <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> nf_RRR id_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1"><span class="command">theorem</span></span> CK_real_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">::</span>real set <span class="main">⇒</span> real set<span class="main">.</span> CK <span class="bound">f</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">14</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> antisym<span class="main"><span class="main">[</span></span><span class="operator">OF</span> CK_card<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?rhs</span> <span class="main">≤</span> <span class="var">?lhs</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> CK_nf
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> le_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> eq_imp_le<span class="main"><span class="main">[</span></span><span class="operator">OF</span> CK_nf_real_card<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span> card_image_le<span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CK_nf_set<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ A corollary of Kuratowski's result \label{sec:kuratowski-corollary} ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We show that it is a corollary of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">thm</span></span> [source] CK_real_card<span class="antiquote"><span class="antiquote">}</span></span></span></span> that at
most 7 distinct operators on a topological space can be generated by
compositions of closure and interior. In the case of
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>ℝ›</span></span></span></span>, exactly 7 distinct operators can be so
generated.

›</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">IK</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">IK</span> id"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK</span> I"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK</span> K"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">⟦</span> <span class="free">IK</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">;</span> <span class="free">IK</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main">⟧</span> <span class="main">⟹</span> <span class="free">IK</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">∘</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">IK_nf</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> id"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> I"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> K"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> <span class="main">(</span>I <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> <span class="main">(</span>K <span class="main">∘</span> I<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> <span class="main">(</span>I <span class="main">∘</span> K <span class="main">∘</span> I<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">IK_nf</span> <span class="main">(</span>K <span class="main">∘</span> I <span class="main">∘</span> K<span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">declare</span></span> IK.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span></span><span class="main">]</span>

<span class="keyword1"><span class="command">declare</span></span> IK_nf.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span></span></span></span></span><span class="main">]</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-IK_nf_set"><span class="command">lemma</span></span> IK_nf_set<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">f</span> <span class="main">.</span> IK_nf <span class="bound">f</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span>id<span class="main">,</span> I<span class="main">,</span> K<span class="main">,</span> I <span class="main">∘</span> K<span class="main">,</span> K <span class="main">∘</span> I<span class="main">,</span> I <span class="main">∘</span> K <span class="main">∘</span> I<span class="main">,</span> K <span class="main">∘</span> I <span class="main">∘</span> K<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> IK_nf.simps<span class="main">)</span>

<span class="keyword1"><span class="command">theorem</span></span> IK_nf<span class="main">:</span>
  <span class="quoted"><span class="quoted">"IK <span class="free">f</span> <span class="main">⟷</span> IK_nf <span class="free">f</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffI<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"IK <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IK_nf <span class="free">f</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span>
       <span class="main">(</span><span class="operator">elim</span> IK_nf.cases<span class="main"><span class="keyword3">;</span></span> <span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> id_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span> o_assoc<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> I_I K_K o_assoc<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> K_I_K_I I_K_I_K o_assoc
      <span class="main"><span class="keyword3">|</span></span> <span class="operator">blast</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"IK_nf <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IK <span class="free">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> IK_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> IK <span class="bound">f</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">7</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> IK_nf IK_nf_set card.insert_remove <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> le_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> card_Diff1_le<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">theorem</span></span> IK_nf_real_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">(</span><span class="main">(</span><span class="main">λ</span> <span class="bound">f</span><span class="main">.</span> <span class="bound">f</span> RRR<span class="main">)</span> <span class="main">`</span> <span class="main">{</span><span class="bound">f</span> <span class="main">.</span> IK_nf <span class="bound">f</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="numeral">7</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> IK_nf_set<span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="operator">subst</span> card_insert_disjoint<span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> RRR_test <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> nf_RRR I_K id_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span> o_assoc<span class="main">)</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1"><span class="command">theorem</span></span> IK_real_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">::</span>real set <span class="main">⇒</span> real set<span class="main">.</span> IK <span class="bound">f</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">7</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">=</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> antisym<span class="main"><span class="main">[</span></span><span class="operator">OF</span> IK_card<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?rhs</span> <span class="main">≤</span> <span class="var">?lhs</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IK_nf
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> le_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> eq_refl<span class="main"><span class="main">[</span></span><span class="operator">OF</span> IK_nf_real_card<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span> card_image_le<span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> IK_nf_set<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹ Chagrov's result \label{sec:chagrov} ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

Chagrov's theorem, which is discussed in Section 2.1 of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span>
"GardnerJackson:2008"<span class="antiquote"><span class="antiquote">}</span></span></span></span>, states that the number of distinct operators
on a topological space that can be generated by compositions of
closure and complement is one of 2, 6, 8, 10 or 14.

We begin by observing that the set of normal forms <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "CK_nf"<span class="antiquote"><span class="antiquote">}</span></span></span></span>
can be split into two disjoint sets, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="free">CK_nf_pos</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span>
<span class="quoted"><span class="quoted">"<span class="free"><span class="free">CK_nf_neg</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>, which we define in terms of interior and closure.

›</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">CK_nf_pos</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> id"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> I"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> K"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> <span class="main">(</span>I <span class="main">∘</span> K<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> <span class="main">(</span>K <span class="main">∘</span> I<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> <span class="main">(</span>I <span class="main">∘</span> K <span class="main">∘</span> I<span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">CK_nf_pos</span> <span class="main">(</span>K <span class="main">∘</span> I <span class="main">∘</span> K<span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">declare</span></span> CK_nf_pos.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span></span></span></span></span><span class="main">]</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_nf_pos_set"><span class="command">lemma</span></span> CK_nf_pos_set<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">f</span> <span class="main">.</span> CK_nf_pos <span class="bound">f</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span>id<span class="main">,</span> I<span class="main">,</span> K<span class="main">,</span> I <span class="main">∘</span> K<span class="main">,</span> K <span class="main">∘</span> I<span class="main">,</span> I <span class="main">∘</span> K <span class="main">∘</span> I<span class="main">,</span> K <span class="main">∘</span> I <span class="main">∘</span> K<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> CK_nf_pos.simps<span class="main">)</span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">CK_nf_neg</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">⇒</span> bool"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">CK_nf_neg</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">g</span><span class="main">.</span> CK_nf_pos <span class="bound">g</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">=</span> C <span class="main">∘</span> <span class="bound">g</span><span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_nf_pos_neg_disjoint"><span class="command">lemma</span></span> CK_nf_pos_neg_disjoint<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"CK_nf_pos <span class="free">f</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"CK_nf_neg <span class="free">g</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">≠</span> <span class="free">g</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> CK_nf_neg_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> CK_nf_pos.simps<span class="main"><span class="keyword3">;</span></span> <span class="operator">elim</span> disjE<span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> comp_def C_def I_def K_def Compl_iff closure_UNIV interior_UNIV id_apply<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_nf_pos_neg_CK_nf"><span class="command">lemma</span></span> CK_nf_pos_neg_CK_nf<span class="main">:</span>
  <span class="quoted"><span class="quoted">"CK_nf <span class="free">f</span> <span class="main">⟷</span> CK_nf_pos <span class="free">f</span> <span class="main">∨</span> CK_nf_neg <span class="free">f</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"<span class="var">?lhs</span> <span class="main">⟷</span> <span class="var">?rhs</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffI<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="var"><span class="quoted"><span class="var">?lhs</span></span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?rhs</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> CK_nf_neg_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> CK_nf.cases<span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> CK_nf_pos.simps C_C I_K K_I comp_id o_assoc<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="var"><span class="quoted"><span class="var">?rhs</span></span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?lhs</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> CK_nf_neg_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> CK_nf_pos.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> I_K C_C o_assoc<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We now focus on <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> "CK_nf_pos"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. In particular, we show that its
cardinality for any given topological space is one of 1, 3, 4, 5 or 7.

The proof consists of exhibiting normal forms for the operators
supported by each of six classes of topological spaces. These are
sublattices of the following lattice of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> CK_nf_pos<span class="antiquote"><span class="antiquote">}</span></span></span></span> operators:

›</span></span>

<span class="keyword1"><span class="command">lemmas</span></span> K_I_K_subseteq_K <span class="main">=</span> closure_mono<span class="main">[</span><span class="operator">OF</span> interior_subset<span class="main">,</span> <span class="operator">of</span> <span class="quoted"><span class="quoted">"closure <span class="free">X</span>"</span></span><span class="main">,</span> <span class="operator">simplified</span><span class="main">]</span> <span class="keyword2"><span class="keyword">for</span></span> <span class="free">X</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-CK_nf_pos_lattice"><span class="command">lemma</span></span> CK_nf_pos_lattice<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≤</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"id <span class="main">≤</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≤</span> I <span class="main">∘</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">≤</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">≤</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">≤</span> K <span class="main">∘</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">≤</span> K <span class="main">∘</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">≤</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> interior_subset closure_subset interior_maximal closure_mono o_apply interior_mono K_I_K_subseteq_K le_funI<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We define the six classes of topological spaces in question, and show
that they are related by inclusion in the following way (as shown in
Figure 2.3 of <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "GardnerJackson:2008"<span class="antiquote"><span class="antiquote">}</span></span></span></span>):

\begin{center}
 \begin{tikzpicture}[scale=.7]
  \node (d) at (30:5cm) {Open unresolvable spaces};
  \node (one) at (90:5cm) {Kuratowski spaces};
  \node (b) at (150:5cm) {Extremally disconnected spaces};
  \node (a) at (210:5cm) {Partition spaces};
  \node (zero) at (270:5cm) {Discrete spaces};
  \node (c) at (330:5cm) {\hspace{1cm}Extremally disconnected and open unresolvable spaces};
  \draw (zero) -- (a) -- (b) -- (one) -- (d) -- (c) -- (zero);
  \draw (c) -- (b);
 \end{tikzpicture}
\end{center}

›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Discrete spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">discrete</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span> I <span class="main">=</span> <span class="main">(</span>id<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-discrete_eqs"><span class="command">lemma</span></span> discrete_eqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"discrete <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I  <span class="main">=</span> <span class="main">(</span>id<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K  <span class="main">=</span> <span class="main">(</span>id<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> discrete_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> C_C K_I<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-discrete_card"><span class="command">lemma</span></span> discrete_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"discrete <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> discrete_eqs<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> CK_nf_pos_lattice<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">=</span></span></span></span></span></span></span></span></span><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CK_nf_pos_set<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-discrete_discrete_topology"><span class="command">lemma</span></span> discrete_discrete_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">Y</span><span class="main">::</span><span class="tfree">'a</span> set<span class="main">.</span> open <span class="bound">Y</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"discrete <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> discrete_def I_def interior_def islimpt_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff<span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Partition spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">part</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span> K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-discrete_part"><span class="command">lemma</span></span> discrete_part<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"discrete <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"part <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> discrete_def part_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> C_C K_I<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_eqs"><span class="command">lemma</span></span> part_eqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"part <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">=</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> part_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">assumption</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> I_I K_I o_assoc<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_not_discrete_card"><span class="command">lemma</span></span> part_not_discrete_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"part <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> part_eqs<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted"><span class="quoted">‹part <span class="free"><span class="free">X</span></span>›</span></span></span><span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>discrete <span class="free">X</span>›</span></span> CK_nf_pos_lattice<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">=</span></span></span></span></span></span></span></span></span><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span>
<span class="keyword1"><span class="command">unfolding</span></span> discrete_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CK_nf_pos_set card_insert_if C_C I_K K_K o_assoc<span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> comp_id<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

A partition space is a topological space whose basis consists of the empty set and the equivalence classes of points of the space induced by some equivalence relation <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="free">R</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> on the underlying set of the space. Equivalently, a partition space is one in which every open set is closed. Thus, for example, the class of partition spaces includes every topological space whose open sets form a boolean algebra.

›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> part_witness <span class="main">=</span> a <span class="main">|</span> b <span class="main">|</span> c

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_UNIV"><span class="command">lemma</span></span> part_witness_UNIV<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"UNIV <span class="main">=</span> set <span class="main">[</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">]</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> part_witness.exhaust <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemmas</span></span> part_witness_pow <span class="main">=</span> subset_subseqs<span class="main">[</span><span class="operator">OF</span> subset_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> subset_UNIV Set.equalityD1<span class="main"><span class="main">[</span></span><span class="operator">OF</span> part_witness_UNIV<span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>

<span class="keyword1"><span class="command">lemmas</span></span> part_witness_Compl <span class="main">=</span> Compl_eq_Diff_UNIV<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main">=</span></span><span class="quoted">part_witness</span><span class="main">,</span> <span class="operator">unfolded</span> part_witness_UNIV<span class="main">,</span> <span class="operator">simplified</span><span class="main">]</span>

<span class="keyword1"><span class="command">instantiation</span></span> part_witness <span class="main">::</span> <span class="quoted">topological_space</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="class_parameter">open_part_witness</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⟷</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">∈</span> <span class="main">{</span><span class="main">{}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">}</span><span class="main">,</span> <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span><span class="main">}</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_ball"><span class="command">lemma</span></span> part_witness_ball<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="bound">s</span> <span class="main">∈</span> <span class="main">{</span><span class="main">{}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">}</span><span class="main">,</span> <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span><span class="main">}</span><span class="main">)</span> <span class="main">⟷</span> <span class="free">S</span> <span class="main">⊆</span> set <span class="main">[</span><span class="main">{}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">}</span><span class="main">,</span> <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span><span class="main">,</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span><span class="main">]</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">lemmas</span></span> part_witness_subsets_pow <span class="main">=</span> subset_subseqs<span class="main">[</span><span class="operator">OF</span> iffD1<span class="main"><span class="main">[</span></span><span class="operator">OF</span> part_witness_ball<span class="main"><span class="main">]</span></span><span class="main">]</span>

<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">standard</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">K</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"part_witness set set"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">S</span><span class="main">∈</span><span class="skolem">K</span><span class="main">.</span> open <span class="bound">S</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"open <span class="main">(</span><span class="main">⋃</span><span class="skolem">K</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> open_part_witness_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">drule</span> part_witness_subsets_pow<span class="main"><span class="keyword3">;</span></span> <span class="operator">clarsimp</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">elim</span> disjE<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> open_part_witness_def part_witness_UNIV<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_interior_simps"><span class="command">lemma</span></span> part_witness_interior_simps<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>c<span class="main">}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> interior_def open_part_witness_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_part"><span class="command">lemma</span></span> part_witness_part<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"part_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"part <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"closure <span class="main">(</span>interior <span class="skolem">Y</span><span class="main">)</span> <span class="main">=</span> interior <span class="skolem">Y</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"part_witness set"</span></span>
    <span class="keyword1"><span class="command">using</span></span> part_witness_pow<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> X<span class="main"><span class="main">=</span></span><span class="quoted"><span class="skolem">Y</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> closure_interior part_witness_interior_simps part_witness_Compl insert_Diff_if<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> part_def I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_not_discrete"><span class="command">lemma</span></span> part_witness_not_discrete<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"part_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> discrete_def I_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> o_apply fun_eq_iff exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">{</span>b<span class="main">}</span>"</span></span><span class="main"><span class="main">]</span></span> part_witness_interior_simps<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_witness_card"><span class="command">lemma</span></span> part_witness_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span>part_witness set <span class="main">⇒</span> part_witness set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_not_discrete_card<span class="main"><span class="main">[</span></span><span class="operator">OF</span> part_witness_part part_witness_not_discrete<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Extremally disconnected and open unresolvable spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">ed_ou</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span> I <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-discrete_ed_ou"><span class="command">lemma</span></span> discrete_ed_ou<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"discrete <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> discrete_def ed_ou_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_eqs"><span class="command">lemma</span></span> ed_ou_eqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> I_I K_K o_assoc<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_neqs"><span class="command">lemma</span></span> ed_ou_neqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">≠</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms CK_nf_pos_lattice<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">=</span></span></span></span></span></span></span></span></span><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span>
<span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def discrete_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> C_C I_K K_I comp_id o_assoc antisym<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_not_discrete_card"><span class="command">lemma</span></span> ed_ou_not_discrete_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> ed_ou_eqs<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹ed_ou <span class="free"><span class="free"><span class="free">X</span></span></span>›</span></span></span></span><span class="main">]</span> ed_ou_neqs<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">subst</span> CK_nf_pos_set<span class="main">)</span> <span class="main">(</span><span class="operator">subst</span> card_insert_disjoint<span class="main"><span class="keyword3">;</span></span> <span class="main">(</span><span class="operator">auto</span><span class="main">)</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We consider an example extremally disconnected and open unresolvable topological space.

›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> ed_ou_witness <span class="main">=</span> a <span class="main">|</span> b <span class="main">|</span> c <span class="main">|</span> d <span class="main">|</span> e

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_UNIV"><span class="command">lemma</span></span> ed_ou_witness_UNIV<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"UNIV <span class="main">=</span> set <span class="main">[</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">]</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> ed_ou_witness.exhaust <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemmas</span></span> ed_ou_witness_pow <span class="main">=</span> subset_subseqs<span class="main">[</span><span class="operator">OF</span> subset_trans<span class="main"><span class="main">[</span></span><span class="operator">OF</span> subset_UNIV Set.equalityD1<span class="main"><span class="main">[</span></span><span class="operator">OF</span> ed_ou_witness_UNIV<span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>

<span class="keyword1"><span class="command">lemmas</span></span> ed_ou_witness_Compl <span class="main">=</span> Compl_eq_Diff_UNIV<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main">=</span></span><span class="quoted">ed_ou_witness</span><span class="main">,</span> <span class="operator">unfolded</span> ed_ou_witness_UNIV<span class="main">,</span> <span class="operator">simplified</span><span class="main">]</span>

<span class="keyword1"><span class="command">instance</span></span> ed_ou_witness <span class="main">::</span> <span class="quoted">finite</span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ed_ou_witness_UNIV<span class="main">)</span>

<span class="keyword1"><span class="command">instantiation</span></span> ed_ou_witness <span class="main">::</span> <span class="quoted">topological_space</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity"><span class="class_parameter">open_ed_ou_witness</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>b<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span>"</span></span>

<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>b<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">open_ed_ou_witness</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">declare</span></span> open_ed_ou_witness.intros<span class="main">[</span><span class="operator">intro</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">!</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_inter"><span class="command">lemma</span></span> ed_ou_witness_inter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">S</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"open <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"open <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"open <span class="main">(</span><span class="free">S</span> <span class="main">∩</span> <span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> open_ed_ou_witness.cases<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_union"><span class="command">lemma</span></span> ed_ou_witness_union<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">.</span> open <span class="bound">x</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"open <span class="main">(</span><span class="main">⋃</span><span class="free">X</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> finite<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">X</span></span><span class="main">]</span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">force</span><span class="main">)</span>
   <span class="main">(</span><span class="operator">clarsimp</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">elim</span> open_ed_ou_witness.cases<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> open_ed_ou_witness.simps subset_insertI2 insert_commute<span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> Union_empty_conv<span class="main">)</span>

<span class="keyword1"><span class="command">instance</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> ed_ou_witness_UNIV <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> ed_ou_witness_inter ed_ou_witness_union<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_interior_simps"><span class="command">lemma</span></span> ed_ou_witness_interior_simps<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>c<span class="main">}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>d<span class="main">}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>c<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>c<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> c<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">,</span> e<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"interior <span class="main">{</span>b<span class="main">,</span> c<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>b<span class="main">,</span> d<span class="main">,</span> e<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> interior_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">safe</span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> open_ed_ou_witness.simps<span class="main"><span class="keyword3">;</span></span> <span class="operator">blast</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_not_discrete"><span class="command">lemma</span></span> ed_ou_witness_not_discrete<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> discrete_def I_def <span class="keyword1"><span class="command">using</span></span> ed_ou_witness_interior_simps <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_ed_ou"><span class="command">lemma</span></span> ed_ou_witness_ed_ou<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def I_def K_def
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> o_apply fun_eq_iff<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ed_ou_witness set"</span></span>
  <span class="keyword1"><span class="command">from</span></span> ed_ou_witness_pow<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="skolem">x</span></span><span class="main">]</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"interior <span class="main">(</span>closure <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> closure <span class="main">(</span>interior <span class="skolem">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">elim</span> disjE<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> closure_interior ed_ou_witness_interior_simps ed_ou_witness_Compl insert_Diff_if<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_witness_card"><span class="command">lemma</span></span> ed_ou_witness_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span>ed_ou_witness set <span class="main">⇒</span> ed_ou_witness set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ed_ou_not_discrete_card<span class="main"><span class="main">[</span></span><span class="operator">OF</span> ed_ou_witness_ed_ou ed_ou_witness_not_discrete<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Extremally disconnected spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">extremally_disconnected</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span> K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_part_extremally_disconnected"><span class="command">lemma</span></span> ed_ou_part_extremally_disconnected<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"part <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"extremally_disconnected <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> extremally_disconnected_def ed_ou_def part_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-extremally_disconnected_eqs"><span class="command">lemma</span></span> extremally_disconnected_eqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"extremally_disconnected <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> extremally_disconnected_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> K_I_K_I<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-extremally_disconnected_not_part_not_ed_ou_card"><span class="command">lemma</span></span> extremally_disconnected_not_part_not_ed_ou_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"extremally_disconnected <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>part <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">5</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> extremally_disconnected_eqs<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted"><span class="quoted">‹extremally_disconnected <span class="free"><span class="free">X</span></span>›</span></span></span><span class="main">]</span> CK_nf_pos_lattice<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">=</span></span></span></span></span></span></span></span></span><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">,</span>3<span class="main">)</span>
<span class="keyword1"><span class="command">unfolding</span></span> part_def ed_ou_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CK_nf_pos_set C_C I_K K_K o_assoc card_insert_if<span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> C_C K_I id_comp o_assoc<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

Any topological space having an infinite underlying set and whose topology consists of the empty set and every cofinite subset of the underlying set is extremally disconnected. We consider an example such space having a countably infinite underlying set.

›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="tfree">'a</span> cofinite <span class="main">=</span> cofinite <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>

<span class="keyword1"><span class="command">instantiation</span></span> cofinite <span class="main">::</span> <span class="main">(</span><span class="quoted">type</span><span class="main">)</span> <span class="quoted">topological_space</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="class_parameter">open_cofinite</span></span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">X</span><span class="main">::</span><span class="tfree">'a</span> cofinite set<span class="main">.</span> finite <span class="main">(</span><span class="main">-</span><span class="bound">X</span><span class="main">)</span> <span class="main">∨</span> <span class="bound">X</span> <span class="main">=</span> <span class="main">{}</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">instance</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> open_cofinite_def uminus_Sup<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_closure_finite"><span class="command">lemma</span></span> cofinite_closure_finite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"finite <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure <span class="free">X</span> <span class="main">=</span> <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> closed_open open_cofinite_def<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_closure_infinite"><span class="command">lemma</span></span> cofinite_closure_infinite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"infinite <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure <span class="free">X</span> <span class="main">=</span> UNIV"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Compl_empty_eq closure_subset double_compl finite_subset interior_complement open_cofinite_def open_interior<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_interior_finite"><span class="command">lemma</span></span> cofinite_interior_finite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"finite <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"infinite <span class="main">(</span>UNIV<span class="main">::</span><span class="tfree">'a</span> cofinite set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior <span class="free">X</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms cofinite_closure_infinite<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> X<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">-</span><span class="free">X</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> interior_closure<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_interior_infinite"><span class="command">lemma</span></span> cofinite_interior_infinite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span> cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"infinite <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"infinite <span class="main">(</span><span class="main">-</span><span class="free">X</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior <span class="free">X</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms cofinite_closure_infinite<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> X<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">-</span><span class="free">X</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> interior_closure<span class="main">)</span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="quoted"><span class="quoted">"<span class="free">evens</span> <span class="main">::</span> nat cofinite set <span class="main">≡</span> <span class="main">{</span>cofinite <span class="bound">n</span> <span class="main">|</span> <span class="bound">n</span><span class="main">.</span> <span class="main">∃</span><span class="bound">i</span><span class="main">.</span> <span class="bound">n</span><span class="main">=</span><span class="numeral">2</span><span class="main">*</span><span class="bound">i</span><span class="main">}</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-evens_infinite"><span class="command">lemma</span></span> evens_infinite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"infinite evens"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffD2<span class="main"><span class="main">[</span></span><span class="operator">OF</span> infinite_iff_countable_subset<span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> exI<span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> conjI<span class="main">)</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">n</span><span class="main">::</span>nat<span class="main">.</span> cofinite <span class="main">(</span><span class="numeral">2</span><span class="main">*</span><span class="bound">n</span><span class="main">)</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"inj <span class="var">?f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> inj_onI<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"range <span class="var">?f</span> <span class="main">⊆</span> evens"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_nat_infinite"><span class="command">lemma</span></span> cofinite_nat_infinite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"infinite <span class="main">(</span>UNIV<span class="main">::</span>nat cofinite set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> evens_infinite finite_Diff2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-evens_Compl_infinite"><span class="command">lemma</span></span> evens_Compl_infinite<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"infinite <span class="main">(</span><span class="main">-</span> evens<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> iffD2<span class="main"><span class="main">[</span></span><span class="operator">OF</span> infinite_iff_countable_subset<span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> exI<span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> conjI<span class="main">)</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">n</span><span class="main">::</span>nat<span class="main">.</span> cofinite <span class="main">(</span><span class="numeral">2</span><span class="main">*</span><span class="bound">n</span><span class="main">+</span><span class="main">1</span><span class="main">)</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"inj <span class="var">?f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> inj_onI<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"range <span class="var">?f</span> <span class="main">⊆</span> <span class="main">-</span>evens"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">clarsimp</span> <span class="operator">presburger</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-evens_closure"><span class="command">lemma</span></span> evens_closure<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure evens <span class="main">=</span> UNIV"</span></span>
<span class="keyword1"><span class="command">using</span></span> evens_infinite <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> cofinite_closure_infinite<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-evens_interior"><span class="command">lemma</span></span> evens_interior<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"interior evens <span class="main">=</span> <span class="main">{}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> evens_infinite evens_Compl_infinite <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> cofinite_interior_infinite<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_not_part"><span class="command">lemma</span></span> cofinite_not_part<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>part <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> part_def I_def K_def
<span class="keyword1"><span class="command">using</span></span> cofinite_nat_infinite
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> cofinite_closure_finite cofinite_interior_finite double_compl finite.emptyI finite.insertI insert_not_empty interior_closure<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_not_ed_ou"><span class="command">lemma</span></span> cofinite_not_ed_ou<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply evens_closure evens_interior exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"evens"</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_extremally_disconnected_aux"><span class="command">lemma</span></span> cofinite_extremally_disconnected_aux<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"closure <span class="main">(</span>interior <span class="main">(</span>closure <span class="free">X</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> interior <span class="main">(</span>closure <span class="free">X</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> subsetI closure_closure closure_complement closure_def closure_empty finite_Un interior_eq open_cofinite_def open_interior<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_extremally_disconnected"><span class="command">lemma</span></span> cofinite_extremally_disconnected<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"nat cofinite set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"extremally_disconnected <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> extremally_disconnected_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="operator">OF</span> closure_subset<span class="main"><span class="main">]</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="operator">OF</span> interior_subset<span class="main"><span class="main">]</span></span> subsetD<span class="main"><span class="main">[</span></span><span class="operator">OF</span> cofinite_extremally_disconnected_aux<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-cofinite_card"><span class="command">lemma</span></span> cofinite_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span>nat cofinite set <span class="main">⇒</span> nat cofinite set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">5</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> extremally_disconnected_not_part_not_ed_ou_card<span class="main"><span class="main">[</span></span><span class="operator">OF</span> cofinite_extremally_disconnected cofinite_not_part cofinite_not_ed_ou<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Open unresolvable spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">open_unresolvable</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span> K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ed_ou_open_unresolvable"><span class="command">lemma</span></span> ed_ou_open_unresolvable<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"ed_ou <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"open_unresolvable <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> open_unresolvable_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ed_ou_eqs<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-open_unresolvable_eqs"><span class="command">lemma</span></span> open_unresolvable_eqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"open_unresolvable <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">=</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> open_unresolvable_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">metis</span> I_K_I_K o_assoc<span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span><span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-not_ed_ou_neqs"><span class="command">lemma</span></span> not_ed_ou_neqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">≠</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fun_eq_iff I_K K_def C_def o_apply<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> closure_eq_empty disjoint_eq_subset_Compl double_complement interior_Int interior_complement set_eq_subset<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-open_unresolvable_not_ed_ou_card"><span class="command">lemma</span></span> open_unresolvable_not_ed_ou_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"open_unresolvable <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">5</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> open_unresolvable_eqs<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted"><span class="quoted">‹open_unresolvable <span class="free"><span class="free">X</span></span>›</span></span></span><span class="main">]</span> not_ed_ou_neqs<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted"><span class="quoted">‹<span class="main"><span class="main">¬</span></span>ed_ou <span class="free"><span class="free">X</span></span>›</span></span></span><span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>ed_ou <span class="free">X</span>›</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> CK_nf_pos_set card_insert_if<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

We show that the class of open unresolvable spaces is non-empty by exhibiting an example of such a space.

›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> ou_witness <span class="main">=</span> a <span class="main">|</span> b <span class="main">|</span> c

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ou_witness_UNIV"><span class="command">lemma</span></span> ou_witness_UNIV<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"UNIV <span class="main">=</span> set <span class="main">[</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">]</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> ou_witness.exhaust <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">instantiation</span></span> ou_witness <span class="main">::</span> <span class="quoted">topological_space</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="class_parameter">open_ou_witness</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⟷</span> a <span class="main">∉</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">∨</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> UNIV"</span></span>

<span class="keyword1"><span class="command">instance</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> open_ou_witness_def<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ou_witness_closure_simps"><span class="command">lemma</span></span> ou_witness_closure_simps<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>a<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>b<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span>"</span></span>
    <span class="quoted"><span class="quoted">"closure <span class="main">{</span>b<span class="main">,</span> c<span class="main">}</span> <span class="main">=</span> <span class="main">{</span>a<span class="main">,</span> b<span class="main">,</span> c<span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> closure_def islimpt_def open_ou_witness_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ou_witness_open_unresolvable"><span class="command">lemma</span></span> ou_witness_open_unresolvable<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ou_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"open_unresolvable <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> open_unresolvable_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> o_apply fun_eq_iff<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Compl_iff K_I_K_subseteq_K closure_complement closure_interior closure_mono closure_subset interior_eq interior_maximal open_ou_witness_def subset_antisym<span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ou_witness_not_ed_ou"><span class="command">lemma</span></span> ou_witness_not_ed_ou<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ou_witness set"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> ed_ou_def I_def K_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> o_apply fun_eq_iff<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> UNIV_I insert_iff interior_eq open_ou_witness_def singletonD
          ou_witness.distinct<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">,</span></span>5<span class="main"><span class="main">)</span></span> ou_witness.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> ou_witness_closure_simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-ou_witness_card"><span class="command">lemma</span></span> ou_witness_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span>ou_witness set <span class="main">⇒</span> ou_witness set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">5</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> open_unresolvable_not_ed_ou_card<span class="main"><span class="main">[</span></span><span class="operator">OF</span> ou_witness_open_unresolvable ou_witness_not_ed_ou<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Kuratowski spaces ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">kuratowski</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span> <span class="main">⟷</span>
    <span class="main">¬</span>extremally_disconnected <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">∧</span> <span class="main">¬</span>open_unresolvable <span class="free"><span class="bound"><span class="entity">X</span></span></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

A Kuratowski space distinguishes all 7 positive operators.

›</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_closed_open"><span class="command">lemma</span></span> part_closed_open<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"closed <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"open <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> Topological_Spaces.openI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"I <span class="main">(</span><span class="main">-</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?G</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">-</span>K <span class="var">?S</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?G</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> I›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"I <span class="main">(</span>K <span class="main">(</span>I <span class="var">?S</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="var">?S</span>"</span></span> <span class="quoted"><span class="quoted">"I <span class="var">?S</span> <span class="main">=</span> <span class="var">?S</span>"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> o_def fun_eq_iff<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"K <span class="main">(</span>I <span class="var">?S</span><span class="main">)</span> <span class="main">≠</span> UNIV"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def <span class="keyword1"><span class="command">using</span></span> interior_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">G</span> <span class="main">⊆</span> <span class="var">?S</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">G</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"open <span class="skolem">G</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">G</span>
      <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> I_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> interior_maximal subset_Compl_singleton<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">clarsimp</span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> ComplD Compl_empty_eq closure_interior closure_subset ex_in_conv open_interior subset_eq<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> I›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"open <span class="var">?G</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> fun_eq_iff o_apply<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?G</span> <span class="main">⊆</span> <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?G</span> <span class="main">⊆</span> K <span class="var">?G</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> K_def <span class="keyword1"><span class="command">using</span></span> closure_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> I›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">...</span> <span class="main">=</span> K <span class="main">{</span><span class="skolem">x</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> closure_interior comp_def double_complement<span class="main">)</span>
    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹closed <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">...</span> <span class="main">⊆</span> <span class="free">X</span>"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> K_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">clarsimp</span> <span class="main">(</span><span class="operator">meson</span> closure_minimal contra_subsetD empty_subsetI insert_subset<span class="main">)</span>
    <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">T</span><span class="main">.</span> open <span class="bound">T</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">∈</span> <span class="bound">T</span> <span class="main">∧</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_I_K_I"><span class="command">lemma</span></span> part_I_K_I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I<span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">=</span> <span class="main">(</span>K<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> interior_open<span class="main">[</span><span class="operator">OF</span> part_closed_open<span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms closed_closure<span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">unfolding</span></span> I_def K_def o_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-part_K_I_I"><span class="command">lemma</span></span> part_K_I_I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I<span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">=</span> <span class="main">(</span>I<span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> part_I_K_I<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-kuratowski_neqs"><span class="command">lemma</span></span> kuratowski_neqs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"kuratowski <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> I <span class="main">∘</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">≠</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">≠</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">≠</span> K <span class="main">∘</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">≠</span> K <span class="main">∘</span> I <span class="main">∘</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">≠</span> <span class="main">(</span>K <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">≠</span> K <span class="main">∘</span> <span class="main">(</span>I <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"I <span class="main">∘</span> K <span class="main">∘</span> I <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"K <span class="main">∘</span> I <span class="main">∘</span> K <span class="main">≠</span> <span class="main">(</span>id <span class="main">::</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> kuratowski_def extremally_disconnected_def open_unresolvable_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> I_K K_K I_K_I_K K_I_K_I part_I_K_I part_K_I_I o_assoc comp_id<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-kuratowski_card"><span class="command">lemma</span></span> kuratowski_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"kuratowski <span class="main">(</span><span class="free">X</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>topological_space set<span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">7</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> CK_nf_pos_lattice<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main">=</span></span></span></span></span></span></span></span></span><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main">]</span> kuratowski_neqs<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> assms
<span class="keyword1"><span class="command">unfolding</span></span> kuratowski_def extremally_disconnected_def open_unresolvable_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">subst</span> CK_nf_pos_set<span class="main">)</span> <span class="main">(</span><span class="operator">subst</span> card_insert_disjoint<span class="main"><span class="keyword3">;</span></span> <span class="main">(</span><span class="operator">auto</span><span class="main">)</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹

<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>ℝ›</span></span></span></span> is a Kuratowski space.

›</span></span>

<span class="keyword1" id="KuratowskiClosureComplementTheorem-kuratowski_reals"><span class="command">lemma</span></span> kuratowski_reals<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"kuratowski <span class="main">(</span><span class="main">ℝ</span> <span class="main">::</span> real set<span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> kuratowski_def extremally_disconnected_def open_unresolvable_def
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> conjI<span class="main">)</span>
   <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> I_K list.inject nf_RRR<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> nf_RRR<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> o_assoc<span class="main"><span class="keyword3">,</span></span>
    <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> I_K fun.map_comp list.inject nf_RRR<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> nf_RRR<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Chagrov's theorem ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> chagrov<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>topological_space set"</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="quoted"><span class="quoted">"discrete <span class="free">X</span>"</span></span>
        <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span> <span class="main">∧</span> part <span class="free">X</span>"</span></span>
        <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>discrete <span class="free">X</span> <span class="main">∧</span> ed_ou <span class="free">X</span>"</span></span>
        <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span> <span class="main">∧</span> open_unresolvable <span class="free">X</span>"</span></span>
        <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>ed_ou <span class="free">X</span> <span class="main">∧</span> <span class="main">¬</span>part <span class="free">X</span> <span class="main">∧</span> extremally_disconnected <span class="free">X</span>"</span></span>
        <span class="main">|</span> <span class="quoted"><span class="quoted">"kuratowski <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">unfolding</span></span> kuratowski_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>

<span class="keyword1"><span class="command">corollary</span></span> chagrov_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="bound">f</span><span class="main">.</span> CK_nf_pos <span class="main">(</span><span class="bound">f</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>topological_space set <span class="main">⇒</span> <span class="tfree">'a</span> set<span class="main">)</span><span class="main">}</span> <span class="main">∈</span> <span class="main">{</span><span class="main">1</span><span class="main">,</span><span class="numeral">3</span><span class="main">,</span><span class="numeral">4</span><span class="main">,</span><span class="numeral">5</span><span class="main">,</span><span class="numeral">7</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> discrete_card part_not_discrete_card ed_ou_not_discrete_card open_unresolvable_not_ed_ou_card
      extremally_disconnected_not_part_not_ed_ou_card kuratowski_card
<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> chagrov<span class="main">)</span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
<span class="comment1">(*&lt;*)</span>

<span class="keyword2"><span class="keyword">end</span></span>
<span class="comment1">(*&gt;*)</span>
</pre>
</div>