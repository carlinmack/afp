<div id="Agent">
<div class="head"><h1>Theory Agent</h1>
<span class="command">theory</span> <span class="name">Agent</span><br/>
<span class="keyword">imports</span> <a href="../../HOL/HOL-Nominal/Nominal.html"><span class="name">Nominal</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Agent</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"HOL-Nominal.Nominal"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">atom_decl</span></span><span> </span><span>name</span><span>
</span><span>
</span><span class="keyword1"><span class="command">nominal_datatype</span></span><span> </span><span>act</span><span> </span><span class="delimiter">=</span><span> </span><span>actAction</span><span> </span><span>name</span><span>      </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"â¦‡_â¦ˆ"</span></span></span><span> </span><span>100</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>actCoAction</span><span> </span><span>name</span><span>    </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"âŸ¨_âŸ©"</span></span></span><span> </span><span>100</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>actTau</span><span>              </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"Ï„"</span></span></span><span> </span><span>100</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">nominal_datatype</span></span><span> </span><span>ccs</span><span> </span><span class="delimiter">=</span><span> </span><span>CCSNil</span><span>           </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"ğŸ¬"</span></span></span><span> </span><span>115</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>Action</span><span> </span><span>act</span><span> </span><span>ccs</span><span>   </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_._"</span></span></span><span> </span><span class="delimiter">[</span><span>120</span><span class="delimiter">,</span><span> </span><span>110</span><span class="delimiter">]</span><span> </span><span>110</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>Sum</span><span> </span><span>ccs</span><span> </span><span>ccs</span><span>      </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixl</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âŠ•"</span></span></span><span> </span><span>90</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>Par</span><span> </span><span>ccs</span><span> </span><span>ccs</span><span>      </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">infixl</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆ¥"</span></span></span><span> </span><span>85</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>Res</span><span> </span><span class="string"><span class="delete"><span class="delete">"Â«nameÂ» ccs"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½_â¦ˆ_"</span></span></span><span> </span><span class="delimiter">[</span><span>105</span><span class="delimiter">,</span><span> </span><span>100</span><span class="delimiter">]</span><span> </span><span>100</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="delimiter">|</span><span> </span><span>Bang</span><span> </span><span>ccs</span><span>         </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"!_"</span></span></span><span> </span><span class="delimiter">[</span><span>95</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">nominal_primrec</span></span><span> </span><span>coAction</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"act â‡’ act"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"coAction (â¦‡aâ¦ˆ) = (âŸ¨aâŸ©)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="string"><span class="delete"><span class="delete">"coAction (âŸ¨aâŸ©)= (â¦‡aâ¦ˆ)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span class="string"><span class="delete"><span class="delete">"coAction (Ï„) = Ï„"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>TrueI</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>coActionEqvt</span><span class="delimiter">[</span><span>eqvt</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>p</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"name prm"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(p âˆ™ coAction a) = coAction(p âˆ™ a)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>a</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>act.strong_induct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>eqvts</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>coActionSimps</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"coAction(coAction a) = a"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"(coAction a = Ï„) = (a = Ï„)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> </span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>act.strong_induct</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>coActSimp</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"coAction Î± â‰  Ï„ = (Î± â‰  Ï„)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(coAction Î± = Ï„) = (Î± = Ï„)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>Î±</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>act.strong_induct</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>    
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>coActFresh</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ coAction a = x â™¯ a"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>a</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>act.strong_induct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span class="delimiter">)</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>alphaRes</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>y</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y â™¯ P"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP = â¦‡Î½yâ¦ˆ([(x, y)] âˆ™ P)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span> </span><span>alpha</span><span> </span><span>fresh_left</span><span> </span><span>calc_atm</span><span> </span><span>pt_swap_bij</span><span class="delimiter">[</span><span>OF</span><span> </span><span>pt_name_inst</span><span class="delimiter">,</span><span> </span><span>OF</span><span> </span><span>at_name_inst</span><span class="delimiter">]</span><span>pt3</span><span class="delimiter">[</span><span>OF</span><span> </span><span>pt_name_inst</span><span class="delimiter">,</span><span> </span><span>OF</span><span> </span><span>at_ds1</span><span class="delimiter">[</span><span>OF</span><span> </span><span>at_name_inst</span><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive</span></span><span> </span><span>semantics</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ act â‡’ ccs â‡’ bool"</span></span></span><span>    </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ âŸ¼_ â‰º _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span>Action</span><span class="delimiter">:</span><span>   </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âŸ¼Î± â‰º P"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Sum1</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P' âŸ¹ P âŠ• Q âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Sum2</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¼Î± â‰º Q' âŸ¹ P âŠ• Q âŸ¼Î± â‰º Q'"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Par1</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P' âŸ¹ P âˆ¥ Q âŸ¼Î± â‰º P' âˆ¥ Q"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Par2</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¼Î± â‰º Q' âŸ¹ P âˆ¥ Q âŸ¼Î± â‰º P âˆ¥ Q'"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Comm</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"âŸ¦P âŸ¼a â‰º P'; Q âŸ¼(coAction a) â‰º Q'; a â‰  Ï„âŸ§ âŸ¹ P âˆ¥ Q âŸ¼Ï„ â‰º P' âˆ¥ Q'"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Res</span><span class="delimiter">:</span><span>      </span><span class="string"><span class="delete"><span class="delete">"âŸ¦P âŸ¼Î± â‰º P'; x â™¯ Î±âŸ§ âŸ¹ â¦‡Î½xâ¦ˆP âŸ¼Î± â‰º â¦‡Î½xâ¦ˆP'"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Bang</span><span class="delimiter">:</span><span>     </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¼Î± â‰º P' âŸ¹ !P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">equivariance</span></span><span> </span><span>semantics</span><span>
</span><span>
</span><span class="keyword1"><span class="command">nominal_inductive</span></span><span> </span><span>semantics</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>abs_fresh</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>semanticsInduct</span><span class="delimiter">:</span><span>
</span><span class="string"><span class="delete"><span class="delete">"âŸ¦R âŸ¼Î² â‰º R'; â‹€Î± P ğ’. Prop ğ’ (Î±.(P)) Î± P;
 â‹€P Î± P' Q ğ’. âŸ¦P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ P Î± P'âŸ§ âŸ¹ Prop ğ’ (ccs.Sum P Q) Î± P';
 â‹€Q Î± Q' P ğ’. âŸ¦Q âŸ¼Î± â‰º Q'; â‹€ğ’. Prop ğ’ Q Î± Q'âŸ§ âŸ¹ Prop ğ’ (ccs.Sum P Q) Î± Q';
 â‹€P Î± P' Q ğ’. âŸ¦P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ P Î± P'âŸ§ âŸ¹ Prop ğ’ (P âˆ¥ Q) Î± (P' âˆ¥ Q);
 â‹€Q Î± Q' P ğ’. âŸ¦Q âŸ¼Î± â‰º Q'; â‹€ğ’. Prop ğ’ Q Î± Q'âŸ§ âŸ¹ Prop ğ’ (P âˆ¥ Q) Î± (P âˆ¥ Q');
 â‹€P a P' Q Q' ğ’.
    âŸ¦P âŸ¼a â‰º P'; â‹€ğ’. Prop ğ’ P a P'; Q âŸ¼(coAction a) â‰º Q';
     â‹€ğ’. Prop ğ’ Q (coAction a) Q'; a â‰  Ï„âŸ§
    âŸ¹ Prop ğ’ (P âˆ¥ Q) (Ï„) (P' âˆ¥ Q');
 â‹€P Î± P' x ğ’.
    âŸ¦x â™¯ ğ’; P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ P Î± P'; x â™¯ Î±âŸ§ âŸ¹ Prop ğ’ (â¦‡Î½xâ¦ˆP) Î± (â¦‡Î½xâ¦ˆP');
 â‹€P Î± P' ğ’. âŸ¦P âˆ¥ !P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ (P âˆ¥ !P) Î± P'âŸ§ âŸ¹ Prop ğ’ !P Î± P'âŸ§

âŸ¹ Prop (ğ’::'a::fs_name) R Î² R'"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>erule_tac</span><span> </span><span>z</span><span class="delimiter">=</span><span>ğ’</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>semantics.strong_induct</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>NilTrans</span><span class="delimiter">[</span><span>dest</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ¬ âŸ¼Î± â‰º P' âŸ¹ False"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"(â¦‡bâ¦ˆ).P âŸ¼âŸ¨câŸ© â‰º P' âŸ¹ False"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"(â¦‡bâ¦ˆ).P âŸ¼Ï„ â‰º P' âŸ¹ False"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"(âŸ¨bâŸ©).P âŸ¼â¦‡câ¦ˆ â‰º P' âŸ¹ False"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"(âŸ¨bâŸ©).P âŸ¼Ï„ â‰º P' âŸ¹ False"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ¬ âŸ¼Î± â‰º P'"</span></span></span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡bâ¦ˆ).P âŸ¼âŸ¨câŸ© â‰º P'"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡bâ¦ˆ).P âŸ¼Ï„ â‰º P'"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(âŸ¨bâŸ©).P âŸ¼â¦‡câ¦ˆ â‰º P'"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(âŸ¨bâŸ©).P âŸ¼Ï„ â‰º P'"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>freshDerivative</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>  </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>semantics.strong_induct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.fresh</span><span> </span><span>abs_fresh</span><span class="delimiter">)</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cAct</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î²</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âŸ¼Î² â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Prop Î± P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop Î² P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âŸ¼Î² â‰º P'"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSum1</span><span> </span><span>cSum2</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¼Î± â‰º R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P'. P âŸ¼Î± â‰º P' âŸ¹ Prop P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€Q'. Q âŸ¼Î± â‰º Q' âŸ¹ Prop Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¼Î± â‰º R"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cPar1</span><span> </span><span>cPar2</span><span> </span><span>cComm</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¼Î± â‰º R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P'. P âŸ¼Î± â‰º P' âŸ¹ Prop Î± (P' âˆ¥ Q)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€Q'. Q âŸ¼Î± â‰º Q' âŸ¹ Prop Î± (P âˆ¥ Q')"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P' Q' a. âŸ¦P âŸ¼a â‰º P'; Q âŸ¼(coAction a) â‰º Q'; a â‰  Ï„; Î± = Ï„âŸ§ âŸ¹ Prop (Ï„) (P' âˆ¥ Q')"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop Î± R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¼Î± â‰º R"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cRes</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span>  </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P'. âŸ¦P âŸ¼Î± â‰º P'; x â™¯ Î±âŸ§ âŸ¹ Prop (â¦‡Î½xâ¦ˆP')"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹â¦‡Î½xâ¦ˆP âŸ¼Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>freshDerivative</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>abs_fresh</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>cases</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>semantics.strong_cases</span><span class="delimiter">[</span><span>of</span><span> </span><span>_</span><span> </span><span>_</span><span> </span><span>_</span><span> </span><span>_</span><span> </span><span>x</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>abs_fresh</span><span> </span><span>ccs.inject</span><span> </span><span>alpha</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive</span></span><span> </span><span>bangPred</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ ccs â‡’ bool"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span>aux1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (!P)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>aux2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (P âˆ¥ !P)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangInduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cPar1</span><span> </span><span>cPar2</span><span> </span><span>cComm</span><span> </span><span>cBang</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>ğ’</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'a::fs_name"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rPar1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± P' ğ’. âŸ¦P âŸ¼Î± â‰º P'âŸ§ âŸ¹ Prop ğ’ (P âˆ¥ !P) Î± (P' âˆ¥ !P)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rPar2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± P' ğ’. âŸ¦!P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ (!P) Î± P'âŸ§ âŸ¹ Prop ğ’ (P âˆ¥ !P) Î± (P âˆ¥ P')"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rComm</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€a P' P'' ğ’. âŸ¦P âŸ¼a â‰º P'; !P âŸ¼(coAction a) â‰º P''; â‹€ğ’. Prop ğ’ (!P) (coAction a) P''; a â‰  Ï„âŸ§ âŸ¹ Prop ğ’ (P âˆ¥ !P) (Ï„) (P' âˆ¥ P'')"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rBang</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± P' ğ’. âŸ¦P âˆ¥ !P âŸ¼Î± â‰º P'; â‹€ğ’. Prop ğ’ (P âˆ¥ !P) Î± P'âŸ§ âŸ¹ Prop ğ’ (!P) Î± P'"</span></span></span><span>
</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop ğ’ (!P) Î± P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>X</span><span> </span><span>Î±</span><span> </span><span>P'</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âŸ¼Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P X"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop ğ’ X Î± P'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>avoiding</span><span class="delimiter">:</span><span> </span><span>ğ’</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>semantics.strong_induct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Action</span><span> </span><span>Î±</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> 
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Î±.(Pa))"</span></span></span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sum1</span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>P'</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Pa âŠ• Q)"</span></span></span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sum2</span><span> </span><span>Q</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Pa âŠ• Q)"</span></span></span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Par1</span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>P'</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Pa âˆ¥ Q)"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>rPar1</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Par2</span><span> </span><span>Q</span><span> </span><span>Î±</span><span> </span><span>P'</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Pa âˆ¥ Q)"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>rPar2</span><span> </span><span>aux1</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Comm</span><span> </span><span>Pa</span><span> </span><span>a</span><span> </span><span>P'</span><span> </span><span>Q</span><span> </span><span>Q'</span><span> </span><span>C</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (Pa âˆ¥ Q)"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>rComm</span><span> </span><span>aux1</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Res</span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>P'</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (â¦‡Î½xâ¦ˆPa)"</span></span></span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Bang</span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>P'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangPred P (!Pa)"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>rBang</span><span> </span><span>aux2</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹!P âŸ¼Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bangPred.aux1</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_set</span></span><span> </span><span>bangRel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set â‡’ (ccs Ã— ccs) set"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span>BRBang</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel âŸ¹ (!P, !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>BRPar</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(R, T) âˆˆ Rel âŸ¹ (P, Q) âˆˆ (bangRel Rel) âŸ¹ (R âˆ¥ P, T âˆ¥ Q) âˆˆ (bangRel Rel)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>BRBangCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>BRBang</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>F</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ bool"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P. (P, Q) âˆˆ Rel âŸ¹ F (!P)"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"F P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, !Q) âˆˆ bangRel Rel"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span> 
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>BRParCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>BRPar</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>F</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ bool"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P R. âŸ¦(P, Q) âˆˆ Rel; (R, !Q) âˆˆ bangRel RelâŸ§ âŸ¹ F (P âˆ¥ R)"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"F P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>-</span><span> </span><span class="delimiter">(</span><span>ind_cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ccs.inject</span><span class="delimiter">)</span><span> 
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangRelSubset</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ Rel âŸ¹ (P, Q) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ bangRel Rel'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span>  </span><span>bangRel.induct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>BRBang</span><span> </span><span>BRPar</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Tau_Chain">
<div class="head"><h1>Theory Tau_Chain</h1>
<span class="command">theory</span> <span class="name">Tau_Chain</span><br/>
<span class="keyword">imports</span> <a href="Agent.html"><span class="name">Agent</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Tau_Chain</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Agent</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>tauChain</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ ccs â‡’ bool"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P' â‰¡ (P, P') âˆˆ {(P, P') | P P'. P âŸ¼Ï„ â‰º P'}^*"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainInduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>Base</span><span> </span><span>Step</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Prop P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P' P''. âŸ¦P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'; P' âŸ¼Ï„ â‰º P''; Prop P'âŸ§ âŸ¹ Prop P''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>rtrancl_induct</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainRefl</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainCons</span><span class="delimiter">[</span><span>dest</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P''</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P' âŸ¼Ï„ â‰º P''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>rtrancl_trans</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainCons2</span><span class="delimiter">[</span><span>dest</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P''</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P' âŸ¼Ï„ â‰º P''"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>rtrancl_trans</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainAppend</span><span class="delimiter">[</span><span>dest</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P''</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'â€º</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainSum1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P â‰  P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span> 
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Step</span><span> </span><span>P'</span><span> </span><span>P''</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"P=P'"</span></span></span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainSum2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â‰  Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span> 
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Step</span><span> </span><span>Q'</span><span> </span><span>Q''</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q=Q'"</span></span></span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum2</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainPar1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P' âˆ¥ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainPar2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P âˆ¥ Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainRes</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>  </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> â¦‡Î½xâ¦ˆP'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>Res</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainRepl</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P' â‰  P âˆ¥ !P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"P' â‰  P âˆ¥ !P"</span></span></span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>drule</span><span> </span><span>Bang</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Cong_Semantics">
<div class="head"><h1>Theory Weak_Cong_Semantics</h1>
<span class="command">theory</span> <span class="name">Weak_Cong_Semantics</span><br/>
<span class="keyword">imports</span> <a href="Tau_Chain.html"><span class="name">Tau_Chain</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Cong_Semantics</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Tau_Chain</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weakCongTrans</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ act â‡’ ccs â‡’ bool"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ âŸ¹_ â‰º _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P' â‰¡ âˆƒP'' P'''. P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'' âˆ§ P'' âŸ¼Î± â‰º P''' âˆ§ P''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongTransE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P''</span><span> </span><span>P'''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' âŸ¼Î± â‰º P'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongTransI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P''</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>    </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'''</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P'' âŸ¼Î± â‰º P'''"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongAction</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âŸ¹Î± â‰º P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Action</span><span> </span><span>tauChainRefl</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongSum1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"P=P''"</span></span></span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>tauChainSum1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongSum2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹Î± â‰º Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q=P''"</span></span></span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>Sum2</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>tauChainSum2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongPar1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹Î± â‰º P' âˆ¥ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>tauChainPar1</span><span> </span><span>Par1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongPar2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹Î± â‰º P âˆ¥ Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>tauChainPar2</span><span> </span><span>Par2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongSync</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹(coAction Î±) â‰º Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Î± â‰  Ï„"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹Ï„ â‰º P' âˆ¥ Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>x</span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' âˆ¥ P''a"</span></span></span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>exI</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>tauChainPar1</span><span> </span><span>tauChainPar2</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>x</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">"P''' âˆ¥ P'''a"</span></span></span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>exI</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Comm</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>P'</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">"P' âˆ¥ P'''a"</span></span></span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>tauChainAppend</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>tauChainPar1</span><span> </span><span>tauChainPar2</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongRes</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>  </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âŸ¹Î± â‰º â¦‡Î½xâ¦ˆP'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>tauChainRes</span><span> </span><span>Res</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongRepl</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' = P âˆ¥ !P"</span></span></span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Bang</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>tauChainRepl</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Semantics">
<div class="head"><h1>Theory Weak_Semantics</h1>
<span class="command">theory</span> <span class="name">Weak_Semantics</span><br/>
<span class="keyword">imports</span> <a href="Weak_Cong_Semantics.html"><span class="name">Weak_Cong_Semantics</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Semantics</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Cong_Semantics</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weakTrans</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ act â‡’ ccs â‡’ bool"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ âŸ¹<span class="hidden">â‡§</span><sup>^</sup>_ â‰º _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' â‰¡ P âŸ¹Î± â‰º P' âˆ¨ (Î± = Ï„ âˆ§ P = P')"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakEmptyTrans</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakTransCases</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>Base</span><span> </span><span>Step</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"âŸ¦Î± = Ï„; P = P'âŸ§ âŸ¹ Prop (Ï„) P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P' âŸ¹ Prop Î± P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop Î± P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongTransitionWeakTransition</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitionWeakTransition</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>transitionWeakCongTransition</span><span> </span><span>weakCongTransitionWeakTransition</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakAction</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>a</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongAction</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSum1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P â‰  P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSum1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSum2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â‰  Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSum2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakPar1</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ¥ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongPar1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakPar2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P âˆ¥ Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongPar2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSync</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>(coAction Î±) â‰º Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Î± â‰  Ï„"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P' âˆ¥ Q'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSync</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakRes</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>  </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º â¦‡Î½xâ¦ˆP'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongRes</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakRepl</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>  </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P'</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"P' â‰  P âˆ¥ !P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongRepl</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Strong_Sim">
<div class="head"><h1>Theory Strong_Sim</h1>
<span class="command">theory</span> <span class="name">Strong_Sim</span><br/>
<span class="keyword">imports</span> <a href="Agent.html"><span class="name">Agent</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Sim</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Agent</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>simulation</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ (ccs Ã— ccs) set â‡’ ccs â‡’ bool"</span></span></span><span>   </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â†[_] _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q â‰¡ âˆ€a Q'. Q âŸ¼a â‰º Q' âŸ¶ (âˆƒP'. P âŸ¼a â‰º P' âˆ§ (P', Q') âˆˆ Rel)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simI</span><span class="delimiter">[</span><span>case_names</span><span> </span><span>Sim</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± Q'. Q âŸ¼Î± â‰º Q' âŸ¹ âˆƒP'. P âŸ¼Î± â‰º P' âˆ§ (P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>   </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¼Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel''</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â†[Rel'] R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel O Rel' âŠ† Rel''"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel''] R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span><span>
</span></pre>
</div>
</div><div id="Weak_Sim">
<div class="head"><h1>Theory Weak_Sim</h1>
<span class="command">theory</span> <span class="name">Weak_Sim</span><br/>
<span class="keyword">imports</span> <a href="Weak_Semantics.html"><span class="name">Weak_Semantics</span></a> <a href="Strong_Sim.html"><span class="name">Strong_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Sim</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Semantics</span><span> </span><span>Strong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weakSimulation</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ (ccs Ã— ccs) set â‡’ ccs â‡’ bool"</span></span></span><span>   </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â†<span class="hidden">â‡§</span><sup>^</sup>&lt;_&gt; _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q â‰¡ âˆ€a Q'. Q âŸ¼a â‰º Q' âŸ¶ (âˆƒP'. P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>a â‰º P' âˆ§ (P', Q') âˆˆ Rel)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSimI</span><span class="delimiter">[</span><span>case_names</span><span> </span><span>Sim</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± Q'. Q âŸ¼Î± â‰º Q' âŸ¹ âˆƒP'. P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ§ (P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSimE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>   </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¼Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simTauChain</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>Sim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; S"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>thesis</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Base</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Step</span><span> </span><span>Q''</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P'', Q'') âˆˆ Rel"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Step</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P'', Q'') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sim</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q'' âŸ¼Ï„ â‰º Q'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P''â€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>weakCongTrans_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Step</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simE2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>   </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>Sim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; S"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>Goal</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P'. âŸ¦P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'; (P', Q') âˆˆ RelâŸ§ âŸ¹ thesis"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒP'. P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ§ (P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakTransCases</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Step</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¹Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q'''</span><span> </span><span>Q''</span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>QChain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Q'''Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q''' âŸ¼Î± â‰º Q''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Q''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongTransE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>QChain</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span>Sim</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>PChain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P''', Q''') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simTauChain</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P''', Q''') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q'''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sim</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P'''Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P'', Q'') âˆˆ Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Q'''Trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Q''Chain</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P'', Q'') âˆˆ Relâ€º</span></span></span><span> </span><span>Sim</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simTauChain</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>P'''Trans</span><span> </span><span>P''Chain</span><span> </span><span>Step</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakTransCases</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>PChain</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P'"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>          </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Step</span><span> </span><span>P'</span><span> </span><span>P''</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Step</span><span> </span><span>P'''</span><span> </span><span>P''</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Step</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span>PChain</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>x</span><span class="delimiter">=</span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>exI</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span> </span><span>weakCongTrans_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>transitionWeakCongTransition</span><span> </span><span>weakCongTransitionWeakTransition</span><span class="delimiter">)</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel''</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel O Rel' âŠ† Rel''"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€S T. (S, T) âˆˆ Rel âŸ¹ S â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; T"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel''&gt; R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>R'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>drule_tac</span><span> </span><span>Q</span><span class="delimiter">=</span><span>R</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>weakSimE</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>drule_tac</span><span> </span><span>Q</span><span class="delimiter">=</span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>simE2</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakMonotonic</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>B</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;A&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"A âŠ† B"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;B&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simWeakSim</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>weakSimI</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>simE</span><span> </span><span>transitionWeakTransition</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Cong_Sim">
<div class="head"><h1>Theory Weak_Cong_Sim</h1>
<span class="command">theory</span> <span class="name">Weak_Cong_Sim</span><br/>
<span class="keyword">imports</span> <a href="Weak_Sim.html"><span class="name">Weak_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Cong_Sim</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Cong_Semantics</span><span> </span><span>Weak_Sim</span><span> </span><span>Strong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weakCongSimulation</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ (ccs Ã— ccs) set â‡’ ccs â‡’ bool"</span></span></span><span>   </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â†&lt;_&gt; _"</span></span></span><span> </span><span class="delimiter">[</span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">,</span><span> </span><span>80</span><span class="delimiter">]</span><span> </span><span>80</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q â‰¡ âˆ€a Q'. Q âŸ¼a â‰º Q' âŸ¶ (âˆƒP'. P âŸ¹a â‰º P' âˆ§ (P', Q') âˆˆ Rel)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSimI</span><span class="delimiter">[</span><span>case_names</span><span> </span><span>Sim</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Î± Q'. Q âŸ¼Î± â‰º Q' âŸ¹ âˆƒP'. P âŸ¹Î± â‰º P' âˆ§ (P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakSimE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>   </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¼Î± â‰º Q'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simWeakSim</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>weakSimI</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>simE</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongSimWeakSim</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>Weak_Sim.weakSimI</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span> </span><span>weakCongTransitionWeakTransition</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>test</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P = P' âˆ¨ (âˆƒP''. P âŸ¼Ï„ â‰º P'' âˆ§ P'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P')"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainInduct</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>tauChainCasesSym</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cTauNil</span><span> </span><span>cTauStep</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Prop P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P''. âŸ¦P âŸ¼Ï„ â‰º P''; P'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'âŸ§ âŸ¹ Prop P'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop P'"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>test</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>simE2</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span>   </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q'</span><span>  </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹Î± â‰º Q'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>Sim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; S"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>Goal</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P'. âŸ¦P âŸ¹Î± â‰º P'; (P', Q') âˆˆ RelâŸ§ âŸ¹ thesis"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¹Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q'''</span><span> </span><span>Q''</span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>QChain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Q'''Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q''' âŸ¼Î± â‰º Q''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Q''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongTransE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>QChain</span><span> </span><span>Q'''Trans</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>tauChainCasesSym</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>cTauNil</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q''â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>PTrans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P''', Q'') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Q''Chain</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P''', Q'') âˆˆ Relâ€º</span></span></span><span> </span><span>Sim</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simTauChain</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>PTrans</span><span> </span><span>P''Chain</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Goal</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cTauStep</span><span> </span><span>Q''''</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Ï„ â‰º Q''''â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P''''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>  </span><span>PChain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Ï„ â‰º P''''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P'''', Q'''') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>drule_tac</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q'''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> Q'''â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P'''', Q'''') âˆˆ Relâ€º</span></span></span><span> </span><span>Sim</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P''''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P'''' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P''', Q''') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simTauChain</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P''', Q''') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q'''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sim</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P'''Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P''' âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P''"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P'', Q'') âˆˆ Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Q'''Trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Sim.weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Q''Chain</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P'', Q'') âˆˆ Relâ€º</span></span></span><span> </span><span>Sim</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>P''Chain</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P'' âŸ¹<span class="hidden">â‡©</span><sub>Ï„</sub> P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simTauChain</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>PChain</span><span> </span><span>P''''Chain</span><span> </span><span>P'''Trans</span><span> </span><span>P''Chain</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>x</span><span class="delimiter">=</span><span>P''aa</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>exI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>tauChain_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Goal</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongTrans_def</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel''</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â†&lt;Rel'&gt; R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel O Rel' âŠ† Rel''"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€S T. (S, T) âˆˆ Rel âŸ¹ S â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; T"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel''&gt; R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>R'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>drule_tac</span><span> </span><span>Q</span><span class="delimiter">=</span><span>R</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>weakSimE</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>drule_tac</span><span> </span><span>Q</span><span class="delimiter">=</span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>simE2</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakMonotonic</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>B</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;A&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"A âŠ† B"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;B&gt; Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Strong_Sim_SC">
<div class="head"><h1>Theory Strong_Sim_SC</h1>
<span class="command">theory</span> <span class="name">Strong_Sim_SC</span><br/>
<span class="keyword">imports</span> <a href="Strong_Sim.html"><span class="name">Strong_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Sim_SC</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Strong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resNilLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆğŸ¬ â†[Rel] ğŸ¬"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resNilRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ¬ â†[Rel] â¦‡Î½xâ¦ˆğŸ¬"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>test</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ [x].P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>abs_fresh</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExtSumLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€y R. y â™¯ R âŸ¹ (â¦‡Î½yâ¦ˆR, R) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(P âŠ• Q) â†[Rel] P âŠ• â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>elim</span><span> </span><span>sumCases</span><span> </span><span>resCases</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span> </span><span>C1</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>freshDerivative</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExtSumRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€y R. y â™¯ R âŸ¹ (R, â¦‡Î½yâ¦ˆR) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• â¦‡Î½xâ¦ˆQ â†[Rel] â¦‡Î½xâ¦ˆ(P âŠ• Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>elim</span><span> </span><span>sumCases</span><span> </span><span>resCases</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span> </span><span>C1</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>freshDerivative</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExtLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€y R T. y â™¯ R âŸ¹ (â¦‡Î½yâ¦ˆ(R âˆ¥ T), R âˆ¥ â¦‡Î½yâ¦ˆT) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(P âˆ¥ Q) â†[Rel] P âˆ¥ â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span> </span><span>C1</span><span> </span><span>Par1</span><span> </span><span>Par2</span><span> </span><span>Comm</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>freshDerivative</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExtRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€y R T. y â™¯ R âŸ¹ (R âˆ¥ â¦‡Î½yâ¦ˆT, â¦‡Î½yâ¦ˆ(R âˆ¥ T)) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ â¦‡Î½xâ¦ˆQ â†[Rel] â¦‡Î½xâ¦ˆ(P âˆ¥ Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span> </span><span>C1</span><span> </span><span>Par1</span><span> </span><span>Par2</span><span> </span><span>Comm</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>freshDerivative</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q â†[Rel] Q âŠ• P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumAssocLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• Q) âŠ• R â†[Rel] P âŠ• (Q âŠ• R)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumAssocRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">" P âŠ• (Q âŠ• R) â†[Rel] (P âŠ• Q) âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>intro</span><span> </span><span>simI</span><span class="delimiter">,</span><span> </span><span>elim</span><span> </span><span>sumCases</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumIdLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• ğŸ¬ â†[Rel] P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumIdRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] P âŠ• ğŸ¬"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R T. (R âˆ¥ T, T âˆ¥ R) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q â†[Rel] Q âˆ¥ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par1</span><span> </span><span>Par2</span><span> </span><span>Comm</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parAssocLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. ((S âˆ¥ T) âˆ¥ U, S âˆ¥ (T âˆ¥ U)) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ Q) âˆ¥ R â†[Rel] P âˆ¥ (Q âˆ¥ R)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par1</span><span> </span><span>Par2</span><span> </span><span>Comm</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parAssocRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. (S âˆ¥ (T âˆ¥ U), (S âˆ¥ T) âˆ¥ U) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ (Q âˆ¥ R) â†[Rel] (P âˆ¥ Q) âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par1</span><span> </span><span>Par2</span><span> </span><span>Comm</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parIdLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Q. (Q âˆ¥ ğŸ¬, Q) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ ğŸ¬ â†[Rel] P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par1</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parIdRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Q. (Q, Q âˆ¥ ğŸ¬) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] P âˆ¥ ğŸ¬"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>parCases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>fresh_atm</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resActLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(Î±.(P)) â†[Rel] (Î±.(â¦‡Î½xâ¦ˆP))"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>actCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span> </span><span>Action</span><span class="delimiter">)</span><span> 
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resActRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(â¦‡Î½xâ¦ˆP) â†[Rel] â¦‡Î½xâ¦ˆ(Î±.(P))"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span> </span><span>actCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Action</span><span class="delimiter">)</span><span> 
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>y</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€Q. (â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆQ), â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆQ)) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP) â†[Rel] â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive_cases</span></span><span> </span><span>bangCases</span><span class="delimiter">[</span><span>simplified</span><span> </span><span>ccs.distinct</span><span> </span><span>act.distinct</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¼Î± â‰º P'"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangUnfoldLeft</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P â†[Rel] !P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>ccs.inject</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>bangCases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangUnfoldRight</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†[Rel] P âˆ¥ !P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>ccs.inject</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Bang</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span> 
</span><span>
</span></pre>
</div>
</div><div id="Strong_Bisim">
<div class="head"><h1>Theory Strong_Bisim</h1>
<span class="command">theory</span> <span class="name">Strong_Bisim</span><br/>
<span class="keyword">imports</span> <a href="Strong_Sim.html"><span class="name">Strong_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Bisim</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Strong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>monotonic</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>A</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>B</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[A] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"A âŠ† B"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[B] Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>monoCoinduct</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€x y xa xb P Q.
                      x â‰¤ y âŸ¹
                      (Q â†[{(xb, xa). x xb xa}] P) âŸ¶
                     (Q â†[{(xb, xa). y xb xa}] P)"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>monotonic</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>le_funE</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">coinductive_set</span></span><span> </span><span>bisim</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"âŸ¦P â†[bisim] Q; (Q, P) âˆˆ bisimâŸ§ âŸ¹ (P, Q) âˆˆ bisim"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">monos</span></span><span> </span><span>monoCoinduct</span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span>
</span><span>  </span><span>bisimJudge</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ âˆ¼ _"</span></span></span><span> </span><span class="delimiter">[</span><span>70</span><span class="delimiter">,</span><span> </span><span>70</span><span class="delimiter">]</span><span> </span><span>65</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q â‰¡ (P, Q) âˆˆ bisim"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimCoinductAux</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†[(X âˆª bisim)] Q âˆ§ (Q, P) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª bisim = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ bisim}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>coinduct</span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimCoinduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ R â†[(X âˆª bisim)] S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ (S, R) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª bisim = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ bisim}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>coinduct</span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimWeakCoinductAux</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ R â†[X] S âˆ§ (S, R) âˆˆ X"</span></span></span><span> 
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinductAux</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>monotonic</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimWeakCoinduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†[X] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ (Q, P) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª bisim = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ bisim}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>monotonic</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[bisim] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"Q âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bisim.cases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[bisim] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âˆ¼ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bisim.intros</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, P) âˆˆ Id"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>symmetric</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>  
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q âˆ¼ R"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, R) âˆˆ bisim O bisim"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>transitive</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimTransCoinduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rSim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ R â†[(bisim O X O bisim)] S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>rSym</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ (S, R) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ bisim O X O bisim"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimWeakCoinduct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ bisim O X O bisimâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R</span><span> </span><span>S</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ R"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R, S) âˆˆ X"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S âˆ¼ Q"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¼ Râ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[bisim] R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, S) âˆˆ Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R â†[(bisim O X O bisim)] S"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>rSim</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"bisim O (bisim O X O bisim) âŠ† bisim O X O bisim"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[(bisim O X O bisim)] S"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Strong_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹S âˆ¼ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S â†[bisim] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(bisim O X O bisim) O bisim âŠ† bisim O X O bisim"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Strong_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>symmetric</span><span> </span><span>rSym</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Strong_Sim_Pres">
<div class="head"><h1>Theory Strong_Sim_Pres</h1>
<span class="command">theory</span> <span class="name">Strong_Sim_Pres</span><br/>
<span class="keyword">imports</span> <a href="Strong_Sim.html"><span class="name">Strong_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Sim_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Strong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span>    </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) â†[Rel] Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>actCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Action</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel âŠ† Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R â†[Rel'] Q âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Sum1</span><span> </span><span>Sum2</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPresAux</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"R â†[Rel'] T"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(R, T) âˆˆ Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P' Q' R' T'. âŸ¦(P', Q') âˆˆ Rel; (R', T') âˆˆ Rel'âŸ§ âŸ¹ (P' âˆ¥ R', Q' âˆ¥ T') âˆˆ Rel''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â†[Rel''] Q âˆ¥ T"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>simI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>a</span><span> </span><span>QT</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âˆ¥ T âŸ¼a â‰º QTâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>parCases</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†[Rel] Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼a â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼a â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¼a â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼a â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, T) âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ T) âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>T'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â†[Rel'] Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹T âŸ¼a â‰º T'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¼a â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', T') âˆˆ Rel'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼a â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼a â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par2</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', T') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ T') âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>Q'</span><span> </span><span>T'</span><span> </span><span>a</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†[Rel] Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼a â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼a â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â†[Rel'] Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹T âŸ¼(coAction a) â‰º T'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¼(coAction a) â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', T') âˆˆ Rel'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¼a â‰º P'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼(coAction a) â‰º R'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹a â‰  Ï„â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Comm</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', T') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ T') âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. (S, T) âˆˆ Rel âŸ¹ (S âˆ¥ U, T âˆ¥ U) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â†[Rel'] Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>parPresAux</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>Rel''</span><span class="delimiter">=</span><span>Rel'</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Rel'</span><span class="delimiter">=</span><span>Id</span><span class="delimiter">]</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>   </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S y. (R, S) âˆˆ Rel âŸ¹ (â¦‡Î½yâ¦ˆR, â¦‡Î½yâ¦ˆS) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP â†[Rel'] â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>simulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Res</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†[Rel] S"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†[bangRel Rel] !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>simI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!Q âŸ¼Î± â‰º Q'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Pa, !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒP'. Pa âŸ¼Î± â‰º P' âˆ§ (P', Q') âˆˆ bangRel Rel"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>Pa</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bangInduct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span> 
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¼Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼Î± â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¼Î± â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q') âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cPar2</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼Î± â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par2</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q') âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ Q') âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>a</span><span> </span><span>Q'</span><span> </span><span>Q''</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[Rel] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼a â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¼a â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>simE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¼(coAction a) â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q'') âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cComm</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¼a â‰º P'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼(coAction a) â‰º R'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹a â‰  Ï„â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¼Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Comm</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q'') âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ Q'') âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cBang</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRBangCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRBang</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ !P, Q âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¼Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cBang</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¥ !P âŸ¼Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¼Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Bang</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹!Q âŸ¼ Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Strong_Bisim_Pres">
<div class="head"><h1>Theory Strong_Bisim_Pres</h1>
<span class="command">theory</span> <span class="name">Strong_Bisim_Pres</span><br/>
<span class="keyword">imports</span> <a href="Strong_Bisim.html"><span class="name">Strong_Bisim</span></a> <a href="Strong_Sim_Pres.html"><span class="name">Strong_Sim_Pres</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Bisim_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Strong_Bisim</span><span> </span><span>Strong_Sim_Pres</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) âˆ¼ Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(Î±.(P), Î±.(Q)) | P Q. P âˆ¼ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î±.(P), Î±.(Q)) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>actPres</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âˆ¼ Q âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(P âŠ• R, Q âŠ• R) | P Q R. P âˆ¼ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• R, Q âŠ• R) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>sumPres</span><span> </span><span>reflexive</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âˆ¼ Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(P âˆ¥ R, Q âˆ¥ R) | P Q R. P âˆ¼ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R, Q âˆ¥ R) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>parPres</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âˆ¼ â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(â¦‡Î½xâ¦ˆP, â¦‡Î½xâ¦ˆQ) | x P Q. P âˆ¼ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆP, â¦‡Î½xâ¦ˆQ) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>resPres</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âˆ¼ !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel bisim"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimWeakCoinduct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ bangRel bisimâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¼ Qâ€º</span></span></span><span> </span><span>bisimE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†[bangRel bisim] !Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangPres</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>R</span><span> </span><span>T</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âˆ¼ Tâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R â†[bisim] T"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âˆ¼ Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†[bangRel bisim] Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ bangRel bisimâ€º</span></span></span><span> </span><span>bangRel.BRPar</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Strong_Sim_Pres.parPresAux</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>induct</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>BRPar</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Struct_Cong">
<div class="head"><h1>Theory Struct_Cong</h1>
<span class="command">theory</span> <span class="name">Struct_Cong</span><br/>
<span class="keyword">imports</span> <a href="Agent.html"><span class="name">Agent</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Struct_Cong</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Agent</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">inductive</span></span><span> </span><span>structCong</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ ccs â‡’ bool"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â‰¡<span class="hidden">â‡©</span><sub>s</sub> _"</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span>Refl</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰¡<span class="hidden">â‡©</span><sub>s</sub> P"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Sym</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q âŸ¹ Q â‰¡<span class="hidden">â‡©</span><sub>s</sub> P"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"âŸ¦P â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q; Q â‰¡<span class="hidden">â‡©</span><sub>s</sub> RâŸ§ âŸ¹ P â‰¡<span class="hidden">â‡©</span><sub>s</sub> R"</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>ParComm</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q âˆ¥ P"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ParAssoc</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ Q) âˆ¥ R â‰¡<span class="hidden">â‡©</span><sub>s</sub> P âˆ¥ (Q âˆ¥ R)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ParId</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ ğŸ¬ â‰¡<span class="hidden">â‡©</span><sub>s</sub> P"</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>SumComm</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q âŠ• P"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>SumAssoc</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• Q) âŠ• R â‰¡<span class="hidden">â‡©</span><sub>s</sub> P âŠ• (Q âŠ• R)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>SumId</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• ğŸ¬ â‰¡<span class="hidden">â‡©</span><sub>s</sub> P"</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>ResNil</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆğŸ¬ â‰¡<span class="hidden">â‡©</span><sub>s</sub> ğŸ¬"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ScopeExtPar</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P âŸ¹ â¦‡Î½xâ¦ˆ(P âˆ¥ Q) â‰¡<span class="hidden">â‡©</span><sub>s</sub> P âˆ¥ â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ScopeExtSum</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P âŸ¹ â¦‡Î½xâ¦ˆ(P âŠ• Q) â‰¡<span class="hidden">â‡©</span><sub>s</sub> P âŠ• â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ScopeAct</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î± âŸ¹ â¦‡Î½xâ¦ˆ(Î±.(P)) â‰¡<span class="hidden">â‡©</span><sub>s</sub> Î±.(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span class="delimiter">|</span><span> </span><span>ScopeCommAux</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"x â‰  y âŸ¹ â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP) â‰¡<span class="hidden">â‡©</span><sub>s</sub> â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span>
</span><span class="delimiter">|</span><span> </span><span>BangUnfold</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â‰¡<span class="hidden">â‡©</span><sub>s</sub> P âˆ¥ !P"</span></span></span><span>
</span><span class="keyword1"><span class="command">equivariance</span></span><span> </span><span>structCong</span><span>
</span><span class="keyword1"><span class="command">nominal_inductive</span></span><span> </span><span>structCong</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>abs_fresh</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>ScopeComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>y</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP) â‰¡<span class="hidden">â‡©</span><sub>s</sub> â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"x=y"</span></span></span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Refl</span><span> </span><span>ScopeCommAux</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span></pre>
</div>
</div><div id="Strong_Bisim_SC">
<div class="head"><h1>Theory Strong_Bisim_SC</h1>
<span class="command">theory</span> <span class="name">Strong_Bisim_SC</span><br/>
<span class="keyword">imports</span> <a href="Strong_Sim_SC.html"><span class="name">Strong_Sim_SC</span></a> <a href="Strong_Bisim_Pres.html"><span class="name">Strong_Bisim_Pres</span></a> <a href="Struct_Cong.html"><span class="name">Struct_Cong</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Strong_Bisim_SC</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Strong_Sim_SC</span><span> </span><span>Strong_Bisim_Pres</span><span> </span><span>Struct_Cong</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resNil</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆğŸ¬ âˆ¼ ğŸ¬"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆğŸ¬, ğŸ¬) âˆˆ {(â¦‡Î½xâ¦ˆğŸ¬, ğŸ¬), (ğŸ¬, â¦‡Î½xâ¦ˆğŸ¬)}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>resNilLeft</span><span> </span><span>resNilRight</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExt</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(P âˆ¥ Q) âˆ¼ P âˆ¥ â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(â¦‡Î½xâ¦ˆ(P âˆ¥ Q), P âˆ¥ â¦‡Î½xâ¦ˆQ) | x P Q. x â™¯ P} âˆª {(P âˆ¥ â¦‡Î½xâ¦ˆQ, â¦‡Î½xâ¦ˆ(P âˆ¥ Q)) | x P Q. x â™¯ P}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆ(P âˆ¥ Q), P âˆ¥ â¦‡Î½xâ¦ˆQ) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>scopeExtLeft</span><span> </span><span>scopeExtRight</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• Q âˆ¼ Q âŠ• P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• Q, Q âŠ• P) âˆˆ {(P âŠ• Q, Q âŠ• P), (Q âŠ• P, P âŠ• Q)}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>sumComm</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumAssoc</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• Q) âŠ• R âˆ¼ P âŠ• (Q âŠ• R)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"((P âŠ• Q) âŠ• R, P âŠ• (Q âŠ• R)) âˆˆ {((P âŠ• Q) âŠ• R, P âŠ• (Q âŠ• R)), (P âŠ• (Q âŠ• R), (P âŠ• Q) âŠ• R)}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>sumAssocLeft</span><span> </span><span>sumAssocRight</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumId</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• ğŸ¬ âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• ğŸ¬, P) âˆˆ {(P âŠ• ğŸ¬, P), (P, P âŠ• ğŸ¬)}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>sumIdLeft</span><span> </span><span>sumIdRight</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span> 
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ Q âˆ¼ Q âˆ¥ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ Q, Q âˆ¥ P) âˆˆ {(P âˆ¥ Q, Q âˆ¥ P) | P Q. True} âˆª {(Q âˆ¥ P, P âˆ¥ Q) | P Q. True}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parAssoc</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ Q) âˆ¥ R âˆ¼ P âˆ¥ (Q âˆ¥ R)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"((P âˆ¥ Q) âˆ¥ R, P âˆ¥ (Q âˆ¥ R)) âˆˆ {((P âˆ¥ Q) âˆ¥ R, P âˆ¥ (Q âˆ¥ R)) | P Q R. True} âˆª  
                                     {(P âˆ¥ (Q âˆ¥ R), (P âˆ¥ Q) âˆ¥ R) | P Q R. True}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>parAssocLeft</span><span> </span><span>parAssocRight</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parId</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ ğŸ¬ âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ ğŸ¬, P) âˆˆ {(P âˆ¥ ğŸ¬, P) | P. True} âˆª {(P, P âˆ¥ ğŸ¬) | P. True}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>parIdLeft</span><span> </span><span>parIdRight</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeFresh</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âˆ¼ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âˆ¼ â¦‡Î½xâ¦ˆP âˆ¥ ğŸ¬"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parId</span><span class="delimiter">[</span><span>THEN</span><span> </span><span>symmetric</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP âˆ¥ ğŸ¬ âˆ¼ ğŸ¬ âˆ¥ â¦‡Î½xâ¦ˆP"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ¬ âˆ¥ â¦‡Î½xâ¦ˆP âˆ¼ â¦‡Î½xâ¦ˆ(ğŸ¬ âˆ¥ P)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>scopeExt</span><span class="delimiter">[</span><span>THEN</span><span> </span><span>symmetric</span><span class="delimiter">]</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(ğŸ¬ âˆ¥ P) âˆ¼ â¦‡Î½xâ¦ˆ(P âˆ¥ ğŸ¬)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>resPres</span><span class="delimiter">[</span><span>OF</span><span> </span><span>parComm</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x â™¯ Pâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(P âˆ¥ ğŸ¬) âˆ¼ P âˆ¥ â¦‡Î½xâ¦ˆğŸ¬"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>scopeExt</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ â¦‡Î½xâ¦ˆğŸ¬ âˆ¼ â¦‡Î½xâ¦ˆğŸ¬ âˆ¥ P"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆğŸ¬ âˆ¥ P âˆ¼ ğŸ¬ âˆ¥ P"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parPres</span><span class="delimiter">[</span><span>OF</span><span> </span><span>resNil</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ¬ âˆ¥ P âˆ¼ P âˆ¥ ğŸ¬"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ ğŸ¬ âˆ¼ P"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parId</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>metis</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>scopeExtSum</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(P âŠ• Q) âˆ¼ P âŠ• â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆ(P âŠ• Q), P âŠ• â¦‡Î½xâ¦ˆQ) âˆˆ {(â¦‡Î½xâ¦ˆ(P âŠ• Q), P âŠ• â¦‡Î½xâ¦ˆQ), (P âŠ• â¦‡Î½xâ¦ˆQ, â¦‡Î½xâ¦ˆ(P âŠ• Q))}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x â™¯ Pâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>scopeExtSumLeft</span><span> </span><span>scopeExtSumRight</span><span> </span><span>reflexive</span><span> </span><span>scopeFresh</span><span> </span><span>scopeFresh</span><span class="delimiter">[</span><span>THEN</span><span> </span><span>symmetric</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resAct</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x â™¯ Î±"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(Î±.(P)) âˆ¼ Î±.(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆ(Î±.(P)), Î±.(â¦‡Î½xâ¦ˆP)) âˆˆ {(â¦‡Î½xâ¦ˆ(Î±.(P)), Î±.(â¦‡Î½xâ¦ˆP)), (Î±.(â¦‡Î½xâ¦ˆP), â¦‡Î½xâ¦ˆ(Î±.(P)))}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x â™¯ Î±â€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>resActLeft</span><span> </span><span>resActRight</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resComm</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>y</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP) âˆ¼ â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP), â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)) âˆˆ {(â¦‡Î½xâ¦ˆ(â¦‡Î½yâ¦ˆP), â¦‡Î½yâ¦ˆ(â¦‡Î½xâ¦ˆP)) | x y P. True}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>resComm</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangUnfold</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âˆ¼ P âˆ¥ !P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, P âˆ¥ !P) âˆˆ {(!P, P âˆ¥ !P), (P âˆ¥ !P, !P)}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bisimCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bangUnfoldLeft</span><span> </span><span>bangUnfoldRight</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimStructCong</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>Struct_Cong.strong_induct</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span> </span><span>symmetric</span><span> </span><span>transitive</span><span> </span><span>parComm</span><span> </span><span>parAssoc</span><span> </span><span>parId</span><span> </span><span>sumComm</span><span>
</span><span>   </span><span>sumAssoc</span><span> </span><span>sumId</span><span> </span><span>resNil</span><span> </span><span>scopeExt</span><span> </span><span>scopeExtSum</span><span> </span><span>resAct</span><span> </span><span>resComm</span><span> </span><span>bangUnfold</span><span class="delimiter">)</span><span>   
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>  
</span><span>
</span></pre>
</div>
</div><div id="Weak_Bisim">
<div class="head"><h1>Theory Weak_Bisim</h1>
<span class="command">theory</span> <span class="name">Weak_Bisim</span><br/>
<span class="keyword">imports</span> <a href="Weak_Sim.html"><span class="name">Weak_Sim</span></a> <a href="Strong_Bisim_SC.html"><span class="name">Strong_Bisim_SC</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Bisim</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Sim</span><span> </span><span>Strong_Bisim_SC</span><span> </span><span>Struct_Cong</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakMonoCoinduct</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€x y xa xb P Q.
                         x â‰¤ y âŸ¹
                         (Q â†<span class="hidden">â‡§</span><sup>^</sup>&lt;{(xb, xa). x xb xa}&gt; P) âŸ¶
                        (Q â†<span class="hidden">â‡§</span><sup>^</sup>&lt;{(xb, xa). y xb xa}&gt; P)"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakMonotonic</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>le_funE</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">coinductive_set</span></span><span> </span><span>weakBisimulation</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"âŸ¦P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; Q; (Q, P) âˆˆ weakBisimulationâŸ§ âŸ¹ (P, Q) âˆˆ weakBisimulation"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">monos</span></span><span> </span><span>weakMonoCoinduct</span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span>
</span><span>  </span><span>weakBisimJudge</span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â‰ˆ _"</span></span></span><span> </span><span class="delimiter">[</span><span>70</span><span class="delimiter">,</span><span> </span><span>70</span><span class="delimiter">]</span><span> </span><span>65</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q â‰¡ (P, Q) âˆˆ weakBisimulation"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimulationCoinductAux</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;(X âˆª weakBisimulation)&gt; Q âˆ§ (Q, P) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª weakBisimulation = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ weakBisimulation}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>coinduct</span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;(X âˆª weakBisimulation)&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ (S, R) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª weakBisimulation = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ weakBisimulation}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>coinduct</span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimWeakCoinductAux</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;X&gt; Q âˆ§ (Q, P) âˆˆ X"</span></span></span><span> 
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinductAux</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakMonotonic</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimWeakCoinduct</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>X</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;X&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ (Q, P) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"X âˆª weakBisim = {(P, Q). (P, Q) âˆˆ X âˆ¨ (P, Q) âˆˆ weakBisim}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakMonotonic</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"Q â‰ˆ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakBisimulation.cases</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimulationI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â‰ˆ P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakBisimulation.intros</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, P) âˆˆ Id"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Weak_Sim.reflexive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>symmetric</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â‰ˆ P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>  
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â‰ˆ R"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, R) âˆˆ weakBisimulation O weakBisimulation"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, R) âˆˆ weakBisimulation O weakBisimulationâ€º</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â‰ˆ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ Qâ€º</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q â‰ˆ Râ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O weakBisimulation âŠ† (weakBisimulation O weakBisimulation) âˆª weakBisimulation"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>symmetric</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimWeakBisimulation</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimWeakCoinduct</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>X</span><span class="delimiter">=</span><span>bisim</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span> </span><span>simWeakSim</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>structCongWeakBisimulation</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bisimWeakBisimulation</span><span> </span><span>bisimStructCong</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>strongAppend</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel''</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>PSimQ</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>QSimR</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â†[Rel'] R"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>Trans</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Rel O Rel' âŠ† Rel''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel''&gt; R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span> </span><span>simulation_def</span><span class="delimiter">)</span><span> </span><span>blast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimWeakUpto</span><span class="delimiter">[</span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">,</span><span> </span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>p</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>rSim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ X âŸ¹ P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;(weakBisimulation O X O bisim)&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>rSym</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€ P Q. (P, Q) âˆˆ X âŸ¹ (Q, P) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O X O weakBisimulation"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?Y</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O X O bisim"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Strong_Bisim.reflexive</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimWeakCoinduct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>P</span><span> </span><span>P'</span><span> </span><span>Q'</span><span> </span><span>Q</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ X"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q' â‰ˆ Q"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span> </span><span>Strong_Bisim.reflexive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q' â‰ˆ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"?Y O weakBisimulation âŠ† ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimWeakBisimulation</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>P</span><span> </span><span>Q</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?Y"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span>Q'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ X"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q' âˆ¼ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?Y&gt; Q'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>rSim</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q' âˆ¼ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q' â†[bisim] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"?Y O bisim âŠ† ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>Strong_Bisim.transitive</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?Y&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>strongAppend</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ P'â€º</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O ?Y âŠ† ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?Y&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>Weak_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P' â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?X&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ P'â€º</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O ?X âŠ† ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?X&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>Weak_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ ?Xâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>bisimE</span><span> </span><span>rSym</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimUpto</span><span class="delimiter">[</span><span>case_names</span><span> </span><span>cSim</span><span> </span><span>cSym</span><span class="delimiter">,</span><span> </span><span>consumes</span><span> </span><span>1</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>p</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>rSim</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;(weakBisimulation O (X âˆª weakBisimulation) O bisim)&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>rSym</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ X âŸ¹ (S, R) âˆˆ X"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>p</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ X âˆª weakBisimulation"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimWeakUpto</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>rSim</span><span> </span><span>rSym</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakMonotonic</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>relcomp_unfold</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>metis</span><span> </span><span>reflexive</span><span> </span><span>Strong_Bisim.reflexive</span><span> </span><span>transitive</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Cong">
<div class="head"><h1>Theory Weak_Cong</h1>
<span class="command">theory</span> <span class="name">Weak_Cong</span><br/>
<span class="keyword">imports</span> <a href="Weak_Cong_Sim.html"><span class="name">Weak_Cong_Sim</span></a> <a href="Weak_Bisim.html"><span class="name">Weak_Bisim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Cong</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Cong_Sim</span><span> </span><span>Weak_Bisim</span><span> </span><span>Strong_Bisim_SC</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weakCongruence</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs â‡’ ccs â‡’ bool"</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">"_ â‰… _"</span></span></span><span> </span><span class="delimiter">[</span><span>70</span><span class="delimiter">,</span><span> </span><span>70</span><span class="delimiter">]</span><span> </span><span>65</span><span class="delimiter">)</span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q â‰¡ P â†&lt;weakBisimulation&gt; Q âˆ§ Q â†&lt;weakBisimulation&gt; P"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongruenceE</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span class="string"><span class="delete"><span class="delete">"Q â†&lt;weakBisimulation&gt; P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongruence_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongruenceI</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"ccs"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â†&lt;weakBisimulation&gt; P"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongruence_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongISym</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSym</span><span> </span><span>cSim</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Prop P Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. Prop P Q âŸ¹ Prop Q P"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. Prop P Q âŸ¹ (F P) â†&lt;weakBisimulation&gt; (F Q)"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"F P â‰… F Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongruence_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongISym2</span><span class="delimiter">[</span><span>consumes</span><span> </span><span>1</span><span class="delimiter">,</span><span> </span><span>case_names</span><span> </span><span>cSim</span><span class="delimiter">]</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. P â‰… Q âŸ¹ (F P) â†&lt;weakBisimulation&gt; (F Q)"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"F P â‰… F Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongruence_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reflexive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… P"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongruenceI</span><span> </span><span>Weak_Bisim.reflexive</span><span> </span><span>Weak_Cong_Sim.reflexive</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>symmetric</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â‰… P"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>  
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongruence_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>transitive</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Q â‰… R"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?Prop</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"Î»P R. âˆƒQ. P â‰… Q âˆ§ Q â‰… R"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"?Prop P R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>symmetric</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹?Prop P Râ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â‰… R"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q â‰… Râ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q â†&lt;weakBisimulation&gt; R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Weak_Bisim.transitive</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O weakBisimulation âŠ† weakBisimulation"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Cong_Sim.transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bisimWeakCongruence</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¼ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¼ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[bisim] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bisimE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†[weakBisimulation] Q"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>bisimWeakBisimulation</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>monotonic</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>simWeakSim</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>structCongWeakCongruence</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰¡<span class="hidden">â‡©</span><sub>s</sub> Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bisimWeakCongruence</span><span> </span><span>bisimStructCong</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakCongruenceWeakBisimulation</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(P, Q) | P Q. P â‰… Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ ?Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Cong.weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;(?X âˆª weakBisimulation)&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Weak_Cong_Sim.weakMonotonic</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongSimWeakSim</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ ?Xâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>symmetric</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Sim_Pres">
<div class="head"><h1>Theory Weak_Sim_Pres</h1>
<span class="command">theory</span> <span class="name">Weak_Sim_Pres</span><br/>
<span class="keyword">imports</span> <a href="Weak_Sim.html"><span class="name">Weak_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Sim_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span>    </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>actCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakAction</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel âŠ† Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. (S, T) âˆˆ Rel âŸ¹ (S âŠ• U, T) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; Q âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>QR</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŠ• R âŸ¼Î± â‰º QRâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSum1</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> 
</span><span>    </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakTransCases</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P âŠ• R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âŠ• R, Q') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Step</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongSum1</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Rel âŠ† Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSum2</span><span> </span><span>R'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹Î± â‰º R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âŸ¹Î± â‰º R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongSum2</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Id âŠ† Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPresAux</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>T</span><span>     </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>   </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel''</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; T"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(R, T) âˆˆ Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P' Q' R' T'. âŸ¦(P', Q') âˆˆ Rel; (R', T') âˆˆ Rel'âŸ§ âŸ¹ (P' âˆ¥ R', Q' âˆ¥ T') âˆˆ Rel''"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel''&gt; Q âˆ¥ T"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>QT</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âˆ¥ T âŸ¼Î± â‰º QTâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>parCases</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakPar1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, T) âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ T) âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>T'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹T âŸ¼Î± â‰º T'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', T') âˆˆ Rel'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakPar2</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', T') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ T') âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>Q'</span><span> </span><span>T'</span><span> </span><span>Î±</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹T âŸ¼(coAction Î±) â‰º T'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>(coAction Î±) â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', T') âˆˆ Rel'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>(coAction Î±) â‰º R'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Î± â‰  Ï„â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSync</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', T') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ T') âˆˆ Rel''"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. (S, T) âˆˆ Rel âŸ¹ (S âˆ¥ U, T âˆ¥ U) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>parPresAux</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>Rel'</span><span class="delimiter">=</span><span>Id</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Rel''</span><span class="delimiter">=</span><span>Rel'</span><span class="delimiter">]</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>   </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S y. (R, S) âˆˆ Rel âŸ¹ (â¦‡Î½yâ¦ˆR, â¦‡Î½yâ¦ˆS) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakSimulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakRes</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>Par</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S T U. âŸ¦(R, S) âˆˆ Rel; (T, U) âˆˆ Rel'âŸ§ âŸ¹ (R âˆ¥ T, S âˆ¥ U) âˆˆ Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangRel Rel âŠ† Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R âˆ¥ !R, S) âˆˆ Rel' âŸ¹ (!R, S) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel'&gt; !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!Q âŸ¼Î± â‰º Q'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Pa, !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒP'. Pa âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ§ (P', Q') âˆˆ Rel'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>Pa</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bangInduct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span> 
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakPar1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span>C2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ !Q) âˆˆ Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Par</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cPar2</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakPar2</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ Q') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>a</span><span> </span><span>Q'</span><span> </span><span>Q''</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;Rel&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼a â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>a â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>(coAction a) â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q'') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cComm</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>a â‰º P'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>(coAction a) â‰º R'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹a â‰  Ï„â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º P' âˆ¥ R'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSync</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q'') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ Q'') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Par</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cBang</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRBangCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRBang</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ !P, Q âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cBang</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¥ !P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'â€º</span></span></span><span> 
</span><span>        </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakTransCases</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Base</span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Ï„ â‰º !P"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>          </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Rel'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¥ !P = P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, Q') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>C3</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Step</span><span>
</span><span>          </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¥ !P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongRepl</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹<span class="hidden">â‡§</span><sup>^</sup>Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakTrans_def</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹!Q âŸ¼ Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Bisim_Pres">
<div class="head"><h1>Theory Weak_Bisim_Pres</h1>
<span class="command">theory</span> <span class="name">Weak_Bisim_Pres</span><br/>
<span class="keyword">imports</span> <a href="Weak_Bisim.html"><span class="name">Weak_Bisim</span></a> <a href="Weak_Sim_Pres.html"><span class="name">Weak_Sim_Pres</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Bisim_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Bisim</span><span> </span><span>Weak_Sim_Pres</span><span> </span><span>Strong_Bisim_SC</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) â‰ˆ Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(Î±.(P), Î±.(Q)) | P Q. P â‰ˆ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î±.(P), Î±.(Q)) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakBisimulationE</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>actPres</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â‰ˆ Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(P âˆ¥ R, Q âˆ¥ R) | P Q R. P â‰ˆ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R, Q âˆ¥ R) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">,</span><span> </span><span>auto</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>parPres</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP â‰ˆ â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(â¦‡Î½xâ¦ˆP, â¦‡Î½xâ¦ˆQ) | x P Q. P â‰ˆ Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â¦‡Î½xâ¦ˆP, â¦‡Î½xâ¦ˆQ) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimulationCoinduct</span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>resPres</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â‰ˆ !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangRel weakBisimulation"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?Y</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"weakBisimulation O ?X O bisim"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>R</span><span> </span><span>T</span><span> </span><span>P</span><span> </span><span>Q</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R â‰ˆ T"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?Y"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ ?Yâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span>Q'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ ?X"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q' âˆ¼ Q"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âˆ¥ P â‰ˆ R âˆ¥ P'"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>metis</span><span> </span><span>parPres</span><span> </span><span>bisimWeakBisimulation</span><span> </span><span>transitive</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â‰ˆ Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ ?Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R âˆ¥ P', T âˆ¥ Q') âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>BRPar</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q' âˆ¼ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"T âˆ¥ Q' âˆ¼ T âˆ¥ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>metis</span><span> </span><span>Strong_Bisim_Pres.parPres</span><span> </span><span>Strong_Bisim.transitive</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R âˆ¥ P, T âˆ¥ Q) âˆˆ ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>BRParAux</span><span> </span><span class="delimiter">=</span><span> </span><span>this</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>coinduct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakBisimWeakUpto</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ bangRel weakBisimulationâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ Qâ€º</span></span></span><span> </span><span>weakBisimulationE</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>BRParAux</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"?X âŠ† ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Strong_Bisim.reflexive</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>P</span><span> </span><span>Q</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ !P, Q) âˆˆ ?Y"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, Q) âˆˆ ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>bangUnfold</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>Strong_Bisim.transitive</span><span> </span><span>transitive</span><span> </span><span>bisimWeakBisimulation</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangPres</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>R</span><span> </span><span>T</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â‰ˆ Tâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R â†<span class="hidden">â‡§</span><sup>^</sup>&lt;weakBisimulation&gt; T"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakBisimulationE</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â‰ˆ Tâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†<span class="hidden">â‡§</span><sup>^</sup>&lt;?Y&gt; Qâ€º</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ ?Xâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?Y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>Strong_Bisim.reflexive</span><span> </span><span>reflexive</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>BRParAux</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Sim_Pres.parPresAux</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSym</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>induct</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakBisimulationE</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>BRPar</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span></pre>
</div>
</div><div id="Weak_Cong_Sim_Pres">
<div class="head"><h1>Theory Weak_Cong_Sim_Pres</h1>
<span class="command">theory</span> <span class="name">Weak_Cong_Sim_Pres</span><br/>
<span class="keyword">imports</span> <a href="Weak_Cong_Sim.html"><span class="name">Weak_Cong_Sim</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Cong_Sim_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Cong_Sim</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>a</span><span>    </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) â†&lt;Rel&gt; Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>actCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongAction</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Rel âŠ† Rel'"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"Id âŠ† Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R â†&lt;Rel'&gt; Q âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>sumCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongSum1</span><span> </span><span>weakCongSum2</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€S T U. (S, T) âˆˆ Rel âŸ¹ (S âˆ¥ U, T âˆ¥ U) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â†&lt;Rel'&gt; Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>QR</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âˆ¥ R âŸ¼Î± â‰º QRâ€º</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>parCases</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Î± â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongPar1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ R) âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>R'</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹Î± â‰º R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Î± â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongPar2</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ R') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>Q'</span><span> </span><span>R'</span><span> </span><span>Î±</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â†&lt;Rel&gt; Qâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¼(coAction Î±) â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹(coAction Î±) â‰º R'"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>transitionWeakCongTransition</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Î± â‰  Ï„â€º</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongSync</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ R') âˆˆ Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>   </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span>   </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel&gt; Q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span class="string"><span class="delete"><span class="delete">"â‹€R S y. (R, S) âˆˆ Rel âŸ¹ (â¦‡Î½yâ¦ˆR, â¦‡Î½yâ¦ˆS) âˆˆ Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP â†&lt;Rel'&gt; â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>fastforce</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>weakCongSimulation_def</span><span> </span><span>elim</span><span class="delimiter">:</span><span> </span><span>resCases</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongRes</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span>    </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel</span><span>  </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Rel'</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"(ccs Ã— ccs) set"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ Rel"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€R S. (R, S) âˆˆ Rel âŸ¹ R â†&lt;Rel'&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>     </span><span>C2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"Rel âŠ† Rel'"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†&lt;bangRel Rel'&gt; !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakSimI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>Sim</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>Pa</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!Q âŸ¼Î± â‰º Q'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Pa, !Q) âˆˆ bangRel Rel"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒP'. Pa âŸ¹Î± â‰º P' âˆ§ (P', Q') âˆˆ bangRel Rel'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>nominal_induct</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>Pa</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bangInduct</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar1</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span> 
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel'&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Î± â‰º P' âˆ¥ R"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongPar1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span>C2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R, !Q) âˆˆ bangRel Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>induct</span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bangRel.BRPar</span><span> </span><span>bangRel.BRBang</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R, Q' âˆ¥ !Q) âˆˆ bangRel Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cPar2</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹Î± â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q') âˆˆ bangRel Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cPar2</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹Î± â‰º R'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Î± â‰º P âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongPar2</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q') âˆˆ bangRel Rel'â€º</span></span></span><span> </span><span>C2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ R', Q âˆ¥ Q') âˆˆ bangRel Rel'"</span></span></span><span> 
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cComm</span><span> </span><span>a</span><span> </span><span>Q'</span><span> </span><span>Q''</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, Q âˆ¥ !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRParCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>P</span><span> </span><span>R</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;Rel'&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>C1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Q âŸ¼a â‰º Q'â€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŸ¹a â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>blast</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakSimE</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R, !Q) âˆˆ bangRel Relâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>R'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âŸ¹(coAction a) â‰º R'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(R', Q'') âˆˆ bangRel Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cComm</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âŸ¹a â‰º P'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R âŸ¹(coAction a) â‰º R'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹a â‰  Ï„â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R âŸ¹Ï„ â‰º P' âˆ¥ R'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongSync</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ Rel'â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(R', Q'') âˆˆ bangRel Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P' âˆ¥ R', Q' âˆ¥ Q'') âˆˆ bangRel Rel'"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cBang</span><span> </span><span>Î±</span><span> </span><span>Q'</span><span> </span><span>Pa</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(Pa, !Q) âˆˆ bangRel Relâ€º</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>BRBangCases</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRBang</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P âˆ¥ !P, Q âˆ¥ !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangRel.BRPar</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>P'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ !P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P', Q') âˆˆ bangRel Rel'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>cBang</span><span>
</span><span>          </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P âˆ¥ !P âŸ¹Î± â‰º P'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P âŸ¹Î± â‰º P'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongRepl</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P', Q') âˆˆ bangRel Rel'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹(P, Q) âˆˆ Relâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(!P, !Q) âˆˆ bangRel Rel"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BRBang</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹!Q âŸ¼ Î± â‰º Q'â€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="Weak_Cong_Pres">
<div class="head"><h1>Theory Weak_Cong_Pres</h1>
<span class="command">theory</span> <span class="name">Weak_Cong_Pres</span><br/>
<span class="keyword">imports</span> <a href="Weak_Cong.html"><span class="name">Weak_Cong</span></a> <a href="Weak_Bisim_Pres.html"><span class="name">Weak_Bisim_Pres</span></a> <a href="Weak_Cong_Sim_Pres.html"><span class="name">Weak_Cong_Sim_Pres</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Weak_Cong_Pres</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Weak_Cong</span><span> </span><span>Weak_Bisim_Pres</span><span> </span><span>Weak_Cong_Sim_Pres</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>actPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Î±</span><span> </span><span class="delimiter">::</span><span> </span><span>act</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î±.(P) â‰… Î±.(Q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceWeakBisimulation</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>actPres</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sumPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âŠ• R â‰… Q âŠ• R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Weak_Bisim.reflexive</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule_tac</span><span> </span><span>sumPres</span><span class="delimiter">)</span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>parPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>R</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ R â‰… Q âˆ¥ R"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceWeakBisimulation</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Weak_Bisim_Pres.parPres</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>parPres</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>resPres</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>x</span><span> </span><span class="delimiter">::</span><span> </span><span>name</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â¦‡Î½xâ¦ˆP â‰… â¦‡Î½xâ¦ˆQ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Weak_Bisim_Pres.resPres</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>resPres</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weakBisimBangRel</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"bangRel weakBisimulation âŠ† weakBisimulation"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>P</span><span> </span><span>Q</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ bangRel weakBisimulation"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰ˆ Q"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>bangRel.induct</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRBang</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ Qâ€º</span></span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â‰ˆ !Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Bisim_Pres.bangPres</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>BRPar</span><span> </span><span>R</span><span> </span><span>T</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹R â‰ˆ Tâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âˆ¥ P â‰ˆ T âˆ¥ P"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Bisim_Pres.parPres</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰ˆ Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P âˆ¥ T â‰ˆ Q âˆ¥ T"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Bisim_Pres.parPres</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"T âˆ¥ P â‰ˆ T âˆ¥ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>metis</span><span> </span><span>bisimWeakBisimulation</span><span> </span><span>Weak_Bisim.transitive</span><span> </span><span>parComm</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"R âˆ¥ P â‰ˆ T âˆ¥ Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Bisim.transitive</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>bangPres</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>P</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>Q</span><span> </span><span class="delimiter">::</span><span> </span><span>ccs</span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P â‰… Q"</span></span></span><span>
</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â‰… !Q"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>weakCongISym2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span class="delimiter">(</span><span>cSim</span><span> </span><span>P</span><span> </span><span>Q</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">let</span></span><span> </span><span class="var">?X</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{(P, Q) | P Q. P â‰… Q}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹P â‰… Qâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(P, Q) âˆˆ ?X"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€P Q. (P, Q) âˆˆ ?X âŸ¹ P â†&lt;weakBisimulation&gt; Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>weakCongruenceE</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"?X âŠ† weakBisimulation"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>weakCongruenceWeakBisimulation</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"!P â†&lt;bangRel weakBisimulation&gt; !Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>bangPres</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weakBisimBangRel</span><span> </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Weak_Cong_Sim.weakMonotonic</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div>