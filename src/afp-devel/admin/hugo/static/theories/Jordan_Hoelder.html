<div id="SndIsomorphismGrp">
<div class="head"><h1>Theory SndIsomorphismGrp</h1>
<span class="command">theory</span> <span class="name">SndIsomorphismGrp</span><br/>
<span class="keyword">imports</span> <a href="SubgroupConjugation.html"><span class="name">SubgroupConjugation</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      The Second Isomorphism Theorem for Groups
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>SndIsomorphismGrp</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">"HOL-Algebra.Coset"</span></span></span><span>
</span><span>    </span><span>Secondary_Sylow.SubgroupConjugation</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The Second Isomorphism Theorem for Groupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Preliminariesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>triv_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup {ğŸ­} G"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>triv_normal_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{ğŸ­} âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span>normal_axioms_def</span><span> </span><span>l_coset_def</span><span> </span><span>r_coset_def</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span>triv_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normal_restrict_supergroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>SsubG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup S G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Nnormal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"N âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ† S"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ² (Gâ¦‡carrier := Sâ¦ˆ)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>Sgrp</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := Sâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>SsubG</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sgrp.normalI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup N (Gâ¦‡carrier := Sâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.subgroup_of_subset</span><span> </span><span>normal_inv_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>SsubG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>subgroup.subset</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆ€xâˆˆcarrier (Gâ¦‡carrier := Sâ¦ˆ). N #&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Sâ¦ˆ<span class="hidden">â‡™</span></sub> x = x &lt;#<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Sâ¦ˆ<span class="hidden">â‡™</span></sub> N"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Nnormal</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span>normal_axioms_def</span><span> </span><span>l_coset_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹As this is maybe the best place this fits in: Factorizing by the trivial subgroup
is an isomorphism.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>trivial_factor_iso</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"the_elem âˆˆ iso (G Mod {ğŸ­}) G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_hom G G (Î»x. x)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>hom_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»x. x) ` carrier G = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"kernel G G (Î»x. x) = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>kernel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group_hom.FactGroup_iso_set</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹And the dual theorem to the previous one: Factorizing by the group itself gives the trivial groupâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>self_factor_iso</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»X. the_elem ((Î»x. ğŸ­) ` X)) âˆˆ iso (G Mod (carrier G)) (Gâ¦‡ carrier := {ğŸ­} â¦ˆ)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := {ğŸ­}â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span> </span><span>triv_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_hom G (Gâ¦‡carrier := {ğŸ­}â¦ˆ) (Î»x. ğŸ­)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>hom_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»x. ğŸ­) ` carrier G = carrier (Gâ¦‡carrier := {ğŸ­}â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"kernel G (Gâ¦‡carrier := {ğŸ­}â¦ˆ) (Î»x. ğŸ­) = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>kernel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group_hom.FactGroup_iso_set</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹This theory provides a proof of the second isomorphism theorems for groups. 
The theorems consist of several facts about normal subgroups.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The first lemma states that whenever we have a subgroup @{term S} and
a normal subgroup @{term H} of a group @{term G}, their intersection is normal
in @{term G}â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>second_isomorphism_grp</span><span> </span><span class="delimiter">=</span><span> </span><span>normal</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>S</span><span class="delimiter">::</span><span class="string"><span class="delete"><span class="delete">"'a set"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>subgrpS</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup S G"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">context</span></span><span> </span><span>second_isomorphism_grp</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">interpretation</span></span><span> </span><span>groupS</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := Sâ¦ˆ"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgrpS</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>normal_subgrp_intersection_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S âˆ© H âŠ² (Gâ¦‡carrier := Sâ¦ˆ)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>groupS.normal_inv_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>subgrpS</span><span> </span><span>is_subgroup</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€x. x âˆˆ {S, H} âŸ¹ subgroup x G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (â‹‚ {S, H}) G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroups_Inter</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (S âˆ© H) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S âˆ© H âŠ† S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (S âˆ© H) (Gâ¦‡carrier := Sâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span>subgroup.subgroup_of_subset</span><span> </span><span>subgrpS</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ S"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>hH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>hS</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ S"</span></span></span><span> </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g</span><span> </span><span>hH</span><span> </span><span>subgrpS</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— h âŠ— inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Sâ¦ˆ<span class="hidden">â‡™</span></sub> g âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_op_closed2</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>m_inv_consistent</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span> </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g</span><span> </span><span>hS</span><span> </span><span>subgrpS</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— h âŠ— inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Sâ¦ˆ<span class="hidden">â‡™</span></sub> g âˆˆ S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.m_closed</span><span> </span><span>subgroup.m_inv_closed</span><span> </span><span>m_inv_consistent</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>normal_set_mult_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (H &lt;#&gt; S) G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>subgroupI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H &lt;#&gt; S âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>setmult_subset_G</span><span> </span><span>subgroup.subset</span><span> </span><span>subgrpS</span><span> </span><span>subset</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ S"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_subgroup</span><span> </span><span>subgrpS</span><span> </span><span>subgroup.one_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âŠ— ğŸ­ âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H &lt;#&gt; S â‰  {}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H &lt;#&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h</span><span> </span><span>s</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>s</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"s âˆˆ S"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>ghs</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g = h âŠ— s"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>h</span><span> </span><span>ghs</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>h'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h' âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = s âŠ— h'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>coset_eq</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>s</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv g = (inv h') âŠ— (inv s)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_mult_group</span><span> </span><span>mem_carrier</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>h'</span><span> </span><span>s</span><span> </span><span>subgrpS</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv h' âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv s âˆˆ S"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.m_inv_closed</span><span> </span><span>m_inv_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv g âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>g'</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g' âˆˆ H &lt;#&gt; S"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h</span><span> </span><span>h'</span><span> </span><span>s</span><span> </span><span>s'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>hh'ss'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h' âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s âˆˆ S"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s' âˆˆ S"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = h âŠ— s"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g' = h' âŠ— s'"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— g' = (h âŠ— s) âŠ— (h' âŠ— s')"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>hh'ss'</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>inG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h' âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s' âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgrpS</span><span> </span><span>mem_carrier</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(h âŠ— s) âŠ— (h' âŠ— s') = h âŠ— (s âŠ— h') âŠ— s'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>m_assoc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>hh'ss'</span><span> </span><span>inG</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h''</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>h''</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h'' âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s âŠ— h' = h'' âŠ— s"</span></span></span><span class="keyword1"><span class="command">using</span></span><span> </span><span>coset_eq</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âŠ— (s âŠ— h') âŠ— s' = h âŠ— (h'' âŠ— s) âŠ— s'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>h''</span><span> </span><span>inG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (h âŠ— h'') âŠ— (s âŠ— s')"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>m_assoc</span><span> </span><span>mem_carrier</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— g' = h âŠ— h'' âŠ— (s âŠ— s')"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>h''</span><span> </span><span>hh'ss'</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgrpS</span><span> </span><span>subgroup.m_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— g' âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>oneH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_subgroup</span><span> </span><span>subgroup.one_closed</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>H_contained_in_set_mult</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† H &lt;#&gt; S"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.one_closed</span><span> </span><span>subgrpS</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹ğŸ­ âˆˆ Sâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— ğŸ­ âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>mem_carrier</span><span> </span><span>r_one</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>S_contained_in_set_mult</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"S âŠ† H &lt;#&gt; S"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>s</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>s</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"s âˆˆ S"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>oneH</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âŠ— s âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>s</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"s âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgrpS</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>l_one</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>normal_intersection_hom</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_hom (Gâ¦‡carrier := Sâ¦ˆ) ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H) (Î»g. H #&gt; g)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>equalityI</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>hom_def</span><span> </span><span>groupS.is_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span>gr</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal_set_mult_subgroup</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>H_contained_in_set_mult</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (H &lt;#&gt; S) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal_set_mult_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² (Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_restrict_supergroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_op_closed2</span><span> </span><span>is_subgroup</span><span> </span><span>normal_inv_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>gr</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ S"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>subgrpS</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âŠ— g âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>g</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>l_one</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; g âˆˆ carrier ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€x y. âŸ¦x âˆˆ S; y âˆˆ SâŸ§ âŸ¹ H #&gt; x âŠ— y = H #&gt; x &lt;#&gt; (H #&gt; y)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal.rcos_sum</span><span> </span><span>normal_axioms</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>normal_intersection_hom_kernel</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"kernel (Gâ¦‡carrier := Sâ¦ˆ) ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H) (Î»g. H #&gt; g) = H âˆ© S"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"kernel (Gâ¦‡carrier := Sâ¦ˆ) ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H) (Î»g. H #&gt; g)
                 = {g âˆˆ S. H #&gt; g = ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>kernel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = {g âˆˆ S. H #&gt; g = H}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = {g âˆˆ S. g âˆˆ H}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>coset_eq</span><span> </span><span>is_subgroup</span><span> </span><span>lcoset_join2</span><span> </span><span>rcos_self</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = H âˆ© S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>normal_intersection_hom_surj</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»g. H #&gt; g) ` carrier (Gâ¦‡carrier := Sâ¦ˆ) = carrier ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ S"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H &lt;#&gt; S"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>S_contained_in_set_mult</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; g âˆˆ carrier ((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ) Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h</span><span> </span><span>s</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>s</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"s âˆˆ S"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x = H #&gt; (h âŠ— s)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x = (H #&gt; h) #&gt; s"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>h</span><span> </span><span>s</span><span> </span><span>coset_mult_assoc</span><span> </span><span>mem_carrier</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span>subgrpS</span><span> </span><span>subset</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = H #&gt; s"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>h</span><span> </span><span>is_group</span><span> </span><span>rcos_const</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x = H #&gt; s"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>s</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ (#&gt;) H ` S"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Finally we can prove the actual isomorphism theorem:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>normal_intersection_quotient_isom</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»X. the_elem ((Î»g. H #&gt; g) ` X)) âˆˆ iso ((Gâ¦‡carrier := Sâ¦ˆ) Mod (H âˆ© S)) (((Gâ¦‡carrier := H &lt;#&gt; Sâ¦ˆ)) Mod H)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_intersection_hom_kernel</span><span class="delimiter">[</span><span>symmetric</span><span class="delimiter">]</span><span> </span><span>normal_intersection_hom</span><span> </span><span>normal_intersection_hom_surj</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group_hom.FactGroup_iso_set</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="SubgroupsAndNormalSubgroups">
<div class="head"><h1>Theory SubgroupsAndNormalSubgroups</h1>
<span class="command">theory</span> <span class="name">SubgroupsAndNormalSubgroups</span><br/>
<span class="keyword">imports</span> <a href="SndSylow.html"><span class="name">SndSylow</span></a> <a href="SndIsomorphismGrp.html"><span class="name">SndIsomorphismGrp</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      Additional Facts about Subgroups and Normal Subgroups
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>SubgroupsAndNormalSubgroups</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span>Secondary_Sylow.SndSylow</span><span>
</span><span>  </span><span>SndIsomorphismGrp</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"HOL-Algebra.Coset"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Preliminary lemmasâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A group of order 1 is always the trivial group.â€º</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>order_one_triv_iff</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(order G = 1) = (carrier G = {ğŸ­})"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>order</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G = 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"carrier G = {x}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>card_Suc_eq</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ = x"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>one_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order G = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>finite_pos_order</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"0 &lt; order G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>one_closed</span><span> </span><span>finite</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>card_gt_0_iff</span><span> </span><span>subgroup_nonempty</span><span> </span><span>subgroup_self</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>iso_order_closed</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso G H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order G = order H"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span>iso_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>no_types</span><span class="delimiter">)</span><span> </span><span>bij_betw_same_card</span><span> </span><span>mem_Collect_eq</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹More Facts about Subgroupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>subgroup</span><span class="delimiter">)</span><span> </span><span>subgroup_of_restricted_group</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup U (Gâ¦‡ carrier := Hâ¦ˆ)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U âŠ† H"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>subgroup</span><span class="delimiter">)</span><span> </span><span>subgroup_of_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup U (Gâ¦‡ carrier := Hâ¦ˆ)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup U G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U âŠ† H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>subgroup_of_restricted_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span>subset</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âŠ— y = x âŠ—<span class="hidden">â‡˜</span><sub>Gâ¦‡ carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ U"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ U"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span>a</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">" x âŠ— y âˆˆ U"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.m_closed</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>Gâ¦‡ carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> = ğŸ­"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ U"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.one_closed</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ U"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡ carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x âˆˆ U"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>subgroup.m_inv_closed</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹x âˆˆ Uâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>in_mono</span><span> </span><span>subgroup_of_restricted_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹subgroup H Gâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡ carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x = inv x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group.m_inv_consistent</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv x âˆˆ U"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Being a subgroup is preserved by surjective homomorphismsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>subgroup</span><span class="delimiter">)</span><span> </span><span>surj_hom_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group_hom G F Ï†"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†surj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† ` (carrier G) = carrier F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (Ï† ` H) F"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Ï†surj</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>img_subset</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† ` H âŠ† carrier F"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>f</span><span> </span><span>f'</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"f âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>h'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"f' âˆˆ Ï† ` H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†surj</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span>g'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"f = Ï† g"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>g'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g' âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"f' = Ï† g'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g' âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>m_closed</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g') âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>g</span><span> </span><span>g'</span><span> </span><span>Ï†</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"f âŠ—<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> f' âˆˆ Ï† ` H"</span></span></span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group_hom.hom_mult</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ğŸ­ âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group_hom.hom_one</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>f</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>f</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"f âˆˆ Ï† ` H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"f = Ï† g"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv g âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† (inv g) âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†</span><span> </span><span>g</span><span> </span><span>subset</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> f âˆˆ Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group_hom.hom_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹... and thus of course by isomorphisms of groups.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>iso_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>groups</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso G F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (Ï† ` H) F"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>groups</span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_hom G F Ï†"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>iso_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` (carrier G) = carrier F"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>HG</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.surj_hom_subgroup</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹An isomorphism restricts to an isomorphism of subgroups.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>iso_restrict</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>groups</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso G F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(restrict Ï† H) âˆˆ iso (Gâ¦‡carrier := Hâ¦ˆ) (Fâ¦‡carrier := Ï† ` Hâ¦ˆ)"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>hom_def</span><span> </span><span>bij_betw_def</span><span> </span><span>inj_on_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>HG</span><span> </span><span>subgroup.mem_carrier</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h) = Ï† g âŠ—<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† h"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>hom_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h âˆ‰ H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>HG</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"undefined = Ï† g âŠ—<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† h"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>eq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† g = Ï† h"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>HG</span><span> </span><span>subgroup.mem_carrier</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>eq</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = h"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span>inj_on_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The intersection of two subgroups is, again, a subgroupâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>subgroup_intersect</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup H' G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (H âˆ© H') G"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Facts about Normal Subgroupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>is_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>coset_eq</span><span> </span><span>is_subgroup</span><span> </span><span>normalI</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Being a normal subgroup is preserved by surjective homomorphisms.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>surj_hom_normal_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group_hom G F Ï†"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†surj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† ` (carrier G) = carrier F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Ï† ` H) âŠ² F"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>group.normalI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group F"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Ï†</span><span> </span><span>Ï†surj</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (Ï† ` H) F"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>surj_hom_subgroup</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆ€xâˆˆcarrier F. Ï† ` H #&gt;<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> x = x &lt;#<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† ` H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>f</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>f</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"f âˆˆ carrier F"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†surj</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"f = Ï† g"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` H #&gt;<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> f = Ï† ` H #&gt;<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† g"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (Î»x. (Ï† x) âŠ—<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> (Ï† g)) ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span>image_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (Î»x. Ï† (x âŠ— g)) ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subset</span><span> </span><span>g</span><span> </span><span>Ï†</span><span> </span><span>group_hom.hom_mult</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>image_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = Ï† ` (H #&gt; g)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = Ï† ` (g &lt;# H)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>coset_eq</span><span> </span><span>g</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (Î»x. Ï† (g âŠ— x)) ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (Î»x. (Ï† g) âŠ—<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> (Ï† x)) ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subset</span><span> </span><span>g</span><span> </span><span>Ï†</span><span> </span><span>group_hom.hom_mult</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = Ï† g &lt;#<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>l_coset_def</span><span> </span><span>image_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = f &lt;#<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† ` H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>g</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` H #&gt;<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> f = f &lt;#<span class="hidden">â‡˜</span><sub>F<span class="hidden">â‡™</span></sub> Ï† ` H"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Being a normal subgroup is preserved by group isomorphisms.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>iso_normal_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>groups</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso G F"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Ï† ` H) âŠ² F"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>groups</span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_hom G F Ï†"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>iso_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` (carrier G) = carrier F"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">note</span></span><span> </span><span>HG</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal.surj_hom_normal_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The trivial subgroup is a subgroup:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>triv_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup {ğŸ­} G"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The cardinality of the right cosets of the trivial subgroup is the cardinality of the group itself:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>card_rcosets_triv</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets {ğŸ­}) = order G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup {ğŸ­} G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>triv_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets {ğŸ­}) * card {ğŸ­} = order G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lagrange</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span>card_Suc_eq</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The intersection of two normal subgroups is, again, a normal subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normal_subgroup_intersect</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M âŠ² G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M âˆ© N âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>subgroup_intersect</span><span> </span><span>is_group</span><span> </span><span>normal_inv_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The set product of two normal subgroups is a normal subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>setmult_lcos_assoc</span><span class="delimiter">:</span><span>
</span><span>     </span><span class="string"><span class="delete"><span class="delete">"âŸ¦H âŠ† carrier G; K âŠ† carrier G; x âˆˆ carrier GâŸ§
      âŸ¹ (x &lt;# H) &lt;#&gt; K = x &lt;# (H &lt;#&gt; K)"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>force</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>l_coset_def</span><span> </span><span>set_mult_def</span><span> </span><span>m_assoc</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normal_subgroup_set_mult_closed</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M âŠ² G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M &lt;#&gt; N âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normalI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (M &lt;#&gt; N) G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.normal_set_mult_subgroup</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆ€xâˆˆcarrier G. M &lt;#&gt; N #&gt; x = x &lt;# (M &lt;#&gt; N)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M &lt;#&gt; N #&gt; x = M &lt;#&gt; (N #&gt; x)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span>normal_inv_iff</span><span> </span><span>setmult_rcos_assoc</span><span> </span><span>subgroup.subset</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = M &lt;#&gt; (x &lt;# N)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>normal.coset_eq</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (M #&gt; x) &lt;#&gt; N"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>rcos_assoc_lcos</span><span> </span><span>subgroup.subset</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (x &lt;# M) &lt;#&gt; N"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal.coset_eq</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x &lt;# (M &lt;#&gt; N)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>setmult_lcos_assoc</span><span> </span><span>subgroup.subset</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M &lt;#&gt; N #&gt; x = x &lt;# (M &lt;#&gt; N)"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The following is a very basic lemma about subgroups: If restricting the carrier of
  a group yields a group it's a subgroup of the group we've started with.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>restrict_group_imp_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ carrier (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— y âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.is_monoid</span><span> </span><span>monoid.m_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.is_monoid</span><span> </span><span>monoid.one_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x âˆˆ carrier (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.inv_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x âŠ— x = ğŸ­"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.l_inv</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> x = inv x"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inv_equality</span><span class="delimiter">[</span><span>symmetric</span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv x âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.inv_closed</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A subgroup relation survives factoring by a normal subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normal_subgroup_factorize</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ² G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ† H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N) (G Mod N)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>GModN</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"G Mod N"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N âŠ² Gâ¦‡carrier := Hâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal_restrict_supergroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>grpHN</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := Hâ¦ˆ Mod N)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(&lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier:=Hâ¦ˆ<span class="hidden">â‡™</span></sub>) = (Î»U K. (â‹ƒhâˆˆU. â‹ƒkâˆˆK. {h âŠ—<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> k}))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (Î»U K. (â‹ƒhâˆˆU. â‹ƒkâˆˆK. {h âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k}))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(&lt;#&gt;) = (Î»U K. (â‹ƒhâˆˆU. â‹ƒkâˆˆK. {h âŠ— k}))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(&lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier:=Hâ¦ˆ<span class="hidden">â‡™</span></sub>) = (&lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>grpHN</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group ((G Mod N)â¦‡carrier := (rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N âŠ† carrier (G Mod N)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>GModN.is_group</span><span> </span><span>group.restrict_group_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A normality relation survives factoring by a normal subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normality_factorization</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>NG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"N âŠ² G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>NH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"N âŠ† H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N) âŠ² (G Mod N)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>GModN</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"G Mod N"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>GModN.normal_inv_iff</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N) (G Mod N)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_imp_subgroup</span><span> </span><span>normal_subgroup_factorize</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>U</span><span> </span><span>V</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>U</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U âˆˆ carrier (G Mod N)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>V</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"V âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U = N #&gt; g"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>V</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>h</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"V = N #&gt; h"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>hG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>HG</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.mem_carrier</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ghG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âŠ— h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>g</span><span> </span><span>m_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ— h âŠ— inv g âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>HG</span><span> </span><span>normal_inv_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U &lt;#&gt; V &lt;#&gt; inv<span class="hidden">â‡˜</span><sub>G Mod N<span class="hidden">â‡™</span></sub> U = N #&gt; (g âŠ— h âŠ— inv g)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g</span><span> </span><span>U</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>G Mod N<span class="hidden">â‡™</span></sub> U = N #&gt; inv g"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>NG</span><span> </span><span>normal.inv_FactGroup</span><span> </span><span>normal.rcos_inv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U &lt;#&gt; V &lt;#&gt; inv<span class="hidden">â‡˜</span><sub>G Mod N<span class="hidden">â‡™</span></sub> U = (N #&gt; g) &lt;#&gt; (N #&gt; h) &lt;#&gt; (N #&gt; inv g)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = N #&gt; (g âŠ— h) &lt;#&gt; (N #&gt; inv g)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>g</span><span> </span><span>hG</span><span> </span><span>NG</span><span> </span><span>normal.rcos_sum</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = N #&gt; (g âŠ— h âŠ— inv g)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>g</span><span> </span><span>inv_closed</span><span> </span><span>ghG</span><span> </span><span>NG</span><span> </span><span>normal.rcos_sum</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U &lt;#&gt; V &lt;#&gt; inv<span class="hidden">â‡˜</span><sub>G Mod N<span class="hidden">â‡™</span></sub> U âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Hâ¦ˆ<span class="hidden">â‡™</span></sub> N"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Factoring by a normal subgroups yields the trivial group iff the subgroup is the whole group.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>fact_group_trivial_iff</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(carrier (G Mod H) = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}) = (H = carrier G)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (G Mod H) = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span>lagrange</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (G Mod H) * card H = order G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H = order G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.subset</span><span> </span><span>is_subgroup</span><span> </span><span>assms</span><span> </span><span>card_subset_eq</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ordergt0</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G &gt; 0"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.finite_imp_card_positive</span><span> </span><span>subgroup_self</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = carrier G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H = order G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span>is_subgroup</span><span> </span><span>lagrange</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets H) * order G = order G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>ordergt0</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets H) = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>mult_eq_self_implies_10</span><span> </span><span>mult.commute</span><span> </span><span>neq0_conv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (G Mod H) = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (G Mod H) = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>factorgroup_is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group.order_one_triv_iff</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Finite groups have finite quotients.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>factgroup_finite</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (rcosets H)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The union of all the cosets contained in a subgroup of a quotient group acts as a represenation for that subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_char</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup A (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â‹ƒA) = {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹ƒA âŠ† {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ â‹ƒA"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>a</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>a</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"a âˆˆ A"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ a"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>xx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span>a</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>y</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>y</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"y âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"a = H #&gt; y"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>a</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H #&gt; y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; y = H #&gt; x"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>y</span><span> </span><span>is_subgroup</span><span> </span><span>repr_independence</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>y</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>a</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>xx</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{x âˆˆ carrier G. H #&gt; x âˆˆ A} âŠ† â‹ƒA"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>xx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H #&gt; x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_subgroup</span><span> </span><span>rcos_self</span><span> </span><span>xx</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ â‹ƒA"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_subgroup</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup A (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (â‹ƒA) G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup {x âˆˆ carrier G. H #&gt; x âˆˆ A} G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{x âˆˆ carrier G. H #&gt; x âˆˆ A} âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ A"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>y</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"y âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; y âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>xyG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âŠ— y âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>m_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; x) &lt;#&gt; (H #&gt; y) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.m_closed</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; (x âŠ— y) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rcos_sum</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>y</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>xyG</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— y âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; ğŸ­ âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>subgroup.one_closed</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>coset_mult_one</span><span> </span><span>monoid.select_convs</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>subset</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span>one_closed</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>invx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inv x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inv_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"set_inv (H #&gt; x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.m_inv_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_FactGroup</span><span> </span><span>subgroup.mem_carrier</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; (inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rcos_inv</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>invx</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span>factgroup_subgroup_union_char</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A âŠ² (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹ƒA âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{x âˆˆ carrier G. H #&gt; x âˆˆ A} âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span>normal_axioms_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span> </span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*(auto del: equalityI)*)</span></span></span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup {x âˆˆ carrier G. H #&gt; x âˆˆ A} G"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>full_types</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_char</span><span> </span><span>factgroup_subgroup_union_subgroup</span><span> </span><span>normal_imp_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>Anormal</span><span class="delimiter">:</span><span> </span><span>normal</span><span> </span><span>A</span><span> </span><span class="string"><span class="delete"><span class="delete">"(G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A} #&gt; x"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y = x' âŠ— x"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>x'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x' âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Hx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ carrier (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x'</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(inv<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; x)) âŠ—<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; x') âŠ—<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Anormal.inv_op_closed1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(set_inv (H #&gt; x)) &lt;#&gt; (H #&gt; x') &lt;#&gt; (H #&gt; x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inv_FactGroup</span><span> </span><span>Hx</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; (inv x)) &lt;#&gt; (H #&gt; x') &lt;#&gt; (H #&gt; x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rcos_inv</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; (inv x âŠ— x')) &lt;#&gt; (H #&gt; x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span> </span><span>rcos_sum</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; (inv x âŠ— x' âŠ— x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span> </span><span>m_closed</span><span> </span><span>rcos_sum</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv x âŠ— x' âŠ— x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span> </span><span>x'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span> </span><span>m_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv x âŠ— x' âŠ— x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>xcoset</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âŠ— (inv x âŠ— x' âŠ— x) âˆˆ x &lt;# {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— (inv x âŠ— x' âŠ— x) = (x âŠ— inv x) âŠ— x' âŠ— x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Units_eq</span><span> </span><span>Units_inv_Units</span><span> </span><span>m_assoc</span><span> </span><span>m_closed</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x' âŠ— x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>l_one</span><span> </span><span>r_inv</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹y = x' âŠ— xâ€º</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— (inv x âŠ— x' âŠ— x) = y"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>xcoset</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ x &lt;# {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>Anormal</span><span class="delimiter">:</span><span> </span><span>normal</span><span> </span><span>A</span><span> </span><span class="string"><span class="delete"><span class="delete">"(G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ x &lt;# {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y = x âŠ— x'"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>x'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x' âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>invx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inv x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>inv_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Hinvx</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H #&gt; (inv x) âˆˆ carrier (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x'</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(inv<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; inv x)) âŠ—<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; x') âŠ—<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub> (H #&gt; inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>invx</span><span> </span><span>Anormal.inv_op_closed1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(set_inv (H #&gt; inv x)) &lt;#&gt; (H #&gt; x') &lt;#&gt; (H #&gt; inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inv_FactGroup</span><span> </span><span>Hinvx</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; inv (inv x)) &lt;#&gt; (H #&gt; x') &lt;#&gt; (H #&gt; inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>invx</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rcos_inv</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; x) &lt;#&gt; (H #&gt; x') &lt;#&gt; (H #&gt; inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_inv</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(H #&gt; (x âŠ— x')) &lt;#&gt; (H #&gt; inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rcos_sum</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; (x âŠ— x' âŠ— inv x) âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span> </span><span>m_closed</span><span> </span><span>rcos_sum</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— x' âŠ— inv x âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span> </span><span>x'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span> </span><span>m_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— x' âŠ— inv x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>xcoset</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(x âŠ— x' âŠ— inv x) âŠ— x âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A} #&gt; x"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>invx</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(x âŠ— x' âŠ— inv x) âŠ— x = (x âŠ— x') âŠ— (inv x âŠ— x)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Units_eq</span><span> </span><span>Units_inv_Units</span><span> </span><span>m_assoc</span><span> </span><span>m_closed</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x âŠ— x'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>l_inv</span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>m_closed</span><span> </span><span>r_one</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹y = x âŠ— x'â€º</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ— x' âŠ— inv x âŠ— x = y"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>xcoset</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"y âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A} #&gt; x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>full_types</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_char</span><span> </span><span>normal_imp_subgroup</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>factgroup_subgroup_union_factor</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup A (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := â‹ƒAâ¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := {x âˆˆ carrier G. H #&gt; x âˆˆ A}â¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>U</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>U</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U âˆˆ A"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>x'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U = H #&gt; x'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>U</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x' âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x'</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := {x âˆˆ carrier G. H #&gt; x âˆˆ A}â¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>U</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>U</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := {x âˆˆ carrier G. H #&gt; x âˆˆ A}â¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>x'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ {x âˆˆ carrier G. H #&gt; x âˆˆ A}"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U = H #&gt; x'"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x' âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>x'</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>factgroup_subgroup_union_char</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span>  </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Flattening the type of group carriersâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Flattening here means to convert the type of group elements from 'a set to 'a.
This is possible whenever the empty set is not an element of the group.â€º</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>flatten</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"flatten (G::('a set, 'b) monoid_scheme) rep = â¦‡carrier=(rep ` (carrier G)),
      monoid.mult=(Î» x y. rep ((the_inv_into (carrier G) rep x) âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (the_inv_into (carrier G) rep y))), 
      one=rep ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> â¦ˆ"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>flatten_set_group_hom</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>group</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>inj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inj_on rep (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep âˆˆ hom G (flatten G rep)"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>hom_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep g âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep g âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep h âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep g âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> rep h
    = rep (the_inv_into (carrier G) rep (rep g) âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> the_inv_into (carrier G) rep (rep h))"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>the_inv_into_f_f</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h) = rep g âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> rep h"</span></span></span><span class="keyword1"><span class="command">..</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>flatten_set_group</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>group</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>inj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inj_on rep (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (flatten G rep)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>groupI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>y</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"y âˆˆ carrier (flatten G rep)"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>g</span><span> </span><span>h</span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = the_inv_into (carrier G) rep x"</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h = the_inv_into (carrier G) rep y"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> y = rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g_def</span><span> </span><span>h_def</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span>the_inv_into_into</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>partial_object.select_convs</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>subset_refl</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group</span><span> </span><span>group.is_monoid</span><span> </span><span>monoid.m_closed</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h) âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> y âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span>group.is_monoid</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span>z</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>y</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"y âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>z</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"z âˆˆ carrier (flatten G rep)"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span>k</span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = the_inv_into (carrier G) rep x"</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h = the_inv_into (carrier G) rep y"</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"k = the_inv_into (carrier G) rep z"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> y âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> z = (rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h)) âŠ— <span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> z"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = rep (the_inv_into (carrier G) rep (rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h)) âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>k_def</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>g_def</span><span> </span><span>h_def</span><span> </span><span>k_def</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ghkG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"k âˆˆ carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span>z</span><span> </span><span>the_inv_into_into</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>gh</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h âˆˆ carrier G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>hk</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"h âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group</span><span> </span><span>group.is_monoid</span><span> </span><span>monoid.m_closed</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (the_inv_into (carrier G) rep (rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h)) âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k) = rep ((g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> h) âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>the_inv_into_f_f</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = rep (g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (h âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group</span><span> </span><span>group.is_monoid</span><span> </span><span>ghkG</span><span> </span><span>monoid.m_assoc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> (rep (h âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> k))"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>g_def</span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hk</span><span> </span><span>inj</span><span> </span><span>the_inv_into_f_f</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> (y âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> z)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>h_def</span><span> </span><span>k_def</span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> y âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> z = x âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> (y âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> z)"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (flatten G rep)"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>g</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = the_inv_into (carrier G) rep x"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>gG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>the_inv_into_into</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> âˆˆ (carrier G)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span>group.is_monoid</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"the_inv_into (carrier G) rep (ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub>) = ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>the_inv_into_f_f</span><span> </span><span>inj</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = rep (ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span>g_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = rep g"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>gG</span><span> </span><span>group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group.is_monoid</span><span> </span><span>monoid.l_one</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>g_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span>f_the_inv_into_f</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = x"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>group</span><span> </span><span>inj</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>hom</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"rep âˆˆ hom G (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>flatten_set_group_hom</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier (flatten G rep)"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>g</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g = the_inv_into (carrier G) rep x"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>gG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>the_inv_into_into</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>invG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group</span><span> </span><span>group.inv_closed</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âˆˆ carrier (flatten G rep)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> (rep g)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>g_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>f_the_inv_into_f</span><span> </span><span>inj</span><span> </span><span>x</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g âŠ—<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hom</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>hom_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>gG</span><span> </span><span>invG</span><span> </span><span>hom_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = rep ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>invG</span><span> </span><span>gG</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group</span><span> </span><span>group.l_inv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rep (inv<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> g) âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub>"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒyâˆˆcarrier (flatten G rep). y âŠ—<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub> x = ğŸ­<span class="hidden">â‡˜</span><sub>flatten G rep<span class="hidden">â‡™</span></sub>"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>flatten_set_group_mod_inj</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inj_on (Î»U. SOME g. g âˆˆ U) (carrier (G Mod H))"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>inj_onI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>U</span><span> </span><span>V</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>U</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U âˆˆ carrier (G Mod H)"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>V</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"V âˆˆ carrier (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U = H #&gt; g"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>h</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"V = H #&gt; h"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"h âˆˆ carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>notempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"U â‰  {}"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"V â‰  {}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>empty_iff</span><span> </span><span>is_subgroup</span><span> </span><span>rcos_self</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(SOME g. g âˆˆ U) = (SOME g. g âˆˆ V)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(SOME g. g âˆˆ U) âˆˆ U âˆ© V"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>IntI</span><span> </span><span>ex_in_conv</span><span> </span><span>someI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"U = V"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Int_iff</span><span> </span><span>g</span><span> </span><span>h</span><span> </span><span>is_subgroup</span><span> </span><span>repr_independence</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>flatten_set_group_mod</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (flatten (G Mod H) (Î»U. SOME g. g âˆˆ U))"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>factorgroup_is_group</span><span> </span><span>flatten_set_group_mod_inj</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>flatten_set_group</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>flatten_set_group_mod_iso</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Î»U. SOME g. g âˆˆ U) âˆˆ iso (G Mod H) (flatten (G Mod H) (Î»U. SOME g. g âˆˆ U))"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>auto</span><span class="delimiter">)</span><span>
</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>flatten_set_group_mod_inj</span><span> </span><span>factorgroup_is_group</span><span> </span><span>flatten_set_group_hom</span><span class="delimiter">)</span><span>
</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>flatten_set_group_mod_inj</span><span class="delimiter">)</span><span>
</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>flatten_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>auto</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="SimpleGroups">
<div class="head"><h1>Theory SimpleGroups</h1>
<span class="command">theory</span> <span class="name">SimpleGroups</span><br/>
<span class="keyword">imports</span> <a href="SubgroupsAndNormalSubgroups.html"><span class="name">SubgroupsAndNormalSubgroups</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      Simple Groups
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>SimpleGroups</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span>SubgroupsAndNormalSubgroups</span><span>
</span><span>  </span><span>Secondary_Sylow.SndSylow</span><span>
</span><span>  </span><span>SndIsomorphismGrp</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Simple Groupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>simple_group</span><span> </span><span class="delimiter">=</span><span> </span><span>group</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>order_gt_one</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G &gt; 1"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>no_real_normal_subgroup</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â‹€H. H âŠ² G âŸ¹ (H = carrier G âˆ¨ H = {ğŸ­})"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>simple_group</span><span class="delimiter">)</span><span> </span><span>is_simple_group</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>simple_group_axioms</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Simple groups are non-trivial.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>simple_group</span><span class="delimiter">)</span><span> </span><span>simple_not_triv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G â‰  {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>order_gt_one</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Every group of prime order is simpleâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>prime_order_simple</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>prime</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime (order G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>prime</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"1 &lt; order G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>prime_nat_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>H</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H dvd order G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>card_subgrp_dvd</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>prime</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H = 1 âˆ¨ card H = order G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>prime_nat_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = carrier G âˆ¨ H = {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H = 1"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>HG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup.one_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>card_Suc_eq</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card H = order G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>HG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>prime</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (carrier G) &gt; 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span>prime_nat_iff</span><span> </span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span>card_ge_0_finite</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>card_subset_eq</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Being simple is a property that is preserved by isomorphisms.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>simple_group</span><span class="delimiter">)</span><span> </span><span>iso_simple</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>H</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>iso</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso G H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group H"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>equalityI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>iso</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order G = order H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>bij_betw_same_card</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>order_gt_one</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc 0 &lt; order H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>inv_iso</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(inv_into (carrier G) Ï†) âˆˆ iso H G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>iso_set_sym</span><span class="delimiter">)</span><span>    
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>N</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>NH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"N âŠ² H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>Nneq1</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"N â‰  {ğŸ­<span class="hidden">â‡˜</span><sub>H<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>Nnormal</span><span class="delimiter">:</span><span> </span><span>normal</span><span> </span><span>N</span><span> </span><span>H</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>M</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M = (inv_into (carrier G) Ï†) ` N"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>MG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"M âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inv_iso</span><span> </span><span>NH</span><span> </span><span>H</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_group</span><span> </span><span>iso_normal_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>surj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† ` carrier G = carrier H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>MN</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† ` M = N"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>M_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Nnormal.subset</span><span> </span><span>image_inv_into_cancel</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M â‰  {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>notI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M = {ğŸ­}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` M = {Ï† ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>full_types</span><span class="delimiter">)</span><span> </span><span>image_empty</span><span> </span><span>image_insert</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† ` M = {ğŸ­<span class="hidden">â‡˜</span><sub>H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>lifting</span><span class="delimiter">)</span><span> </span><span>Nnormal.is_subgroup</span><span> </span><span>MN</span><span> </span><span>calculation</span><span> </span><span>singleton_iff</span><span> </span><span>subgroup.one_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Nneq1</span><span> </span><span>MN</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"M = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>no_real_normal_subgroup</span><span> </span><span>MG</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"N = carrier H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>surj</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹As a corollary of this: Factorizing a group by itself does not result in a simple group!â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>self_factor_not_simple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Â¬ simple_group (G Mod (carrier G))"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>assm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod (carrier G))"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier :=  {ğŸ­}â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span> </span><span>triv_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assm</span><span> </span><span>self_factor_iso</span><span> </span><span>simple_group.iso_simple</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := {ğŸ­}â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simple_group.simple_not_triv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="MaximalNormalSubgroups">
<div class="head"><h1>Theory MaximalNormalSubgroups</h1>
<span class="command">theory</span> <span class="name">MaximalNormalSubgroups</span><br/>
<span class="keyword">imports</span> <a href="SimpleGroups.html"><span class="name">SimpleGroups</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      A locale for and a characterization of maximal normal subgroups
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>MaximalNormalSubgroups</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span>SubgroupsAndNormalSubgroups</span><span>
</span><span>  </span><span>SimpleGroups</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Facts about maximal normal subgroupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A maximal normal subgroup of $G$ is a normal subgroup which is not contained in other any proper
  normal subgroup of $G$.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>max_normal_subgroup</span><span> </span><span class="delimiter">=</span><span> </span><span>normal</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>proper</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H â‰  carrier G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>max_normal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â‹€J. J âŠ² G âŸ¹ J â‰  H âŸ¹ J â‰  carrier G âŸ¹ Â¬ (H âŠ† J)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Another characterization of maximal normal subgroups: The factor group is simple.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal</span><span class="delimiter">)</span><span> </span><span>max_normal_simple_quotient</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"max_normal_subgroup H G = simple_group (G Mod H)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"max_normal_subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>maxH</span><span class="delimiter">:</span><span> </span><span>max_normal_subgroup</span><span> </span><span>H</span><span> </span><span>G</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>intro</span><span> </span><span>conjI</span><span> </span><span>factorgroup_is_group</span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>disjCI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finite</span><span> </span><span>factgroup_finite</span><span> </span><span>factorgroup_is_group</span><span> </span><span>group.finite_pos_order</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>gt0</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"0 &lt; card (rcosets H)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>maxH.proper</span><span> </span><span>finite</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (G Mod H) â‰  {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>fact_group_trivial_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"1 â‰  order (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>factorgroup_is_group</span><span> </span><span>group.order_one_triv_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>gt0</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"1 &lt; order (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A'</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A'normal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"A' âŠ² G Mod H"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>A'nottriv</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"A' â‰  {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>A</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = â‹ƒA'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>A2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"A âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A'normal</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>A_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>factgroup_subgroup_union_normal</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âˆˆ A'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A'normal</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.one_closed</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† A"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>A_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>A1</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ² (Gâ¦‡carrier := Aâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A2</span><span> </span><span>is_normal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_subgroup</span><span> </span><span>maxH.max_normal</span><span> </span><span>normal_restrict_supergroup</span><span> </span><span>subgroup_self</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>A3</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"A' = rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>A_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>factgroup_subgroup_union_factor</span><span> </span><span>A'normal</span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>A1</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>normalHA</span><span class="delimiter">:</span><span> </span><span>normal</span><span> </span><span>H</span><span> </span><span class="string"><span class="delete"><span class="delete">"(Gâ¦‡carrier := Aâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ† A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normalHA.is_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = H âˆ¨ A = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>maxH.max_normal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A' = carrier (G Mod H)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> 
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = H"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (Gâ¦‡carrier := Aâ¦ˆ Mod H) = {ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Aâ¦ˆ Mod H)<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>finite</span><span> </span><span>is_group</span><span> </span><span>normalHA.fact_group_trivial_iff</span><span> </span><span>normalHA.subgroup_self</span><span> </span><span>normalHA.subset</span><span> </span><span>subgroup_finite</span><span> </span><span>subgroup_of_restricted_group</span><span> </span><span>subgroup_of_subgroup</span><span> </span><span>subset_antisym</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A' = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A'nottriv</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = carrier G"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(Gâ¦‡carrier := Aâ¦ˆ Mod H) = G Mod H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A' = carrier (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A3</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>simple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod H)"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"max_normal_subgroup H G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>simple</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (G Mod H) â‰  {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>finite</span><span> </span><span>fact_group_trivial_iff</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H â‰  carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>A</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>A</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"A âŠ² G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A â‰  H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A â‰  carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ H âŠ† A"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>HA</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ† A"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² (Gâ¦‡carrier := Aâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>A</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>inv_op_closed2</span><span> </span><span>is_subgroup</span><span> </span><span>normal_inv_iff</span><span> </span><span>normal_restrict_supergroup</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>normalHA</span><span class="delimiter">:</span><span> </span><span>normal</span><span> </span><span>H</span><span> </span><span class="string"><span class="delete"><span class="delete">"(Gâ¦‡carrier := Aâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finite</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finiteA</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_finite</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Aâ¦ˆ)<span class="hidden">â‡™</span></sub> H âŠ² G Mod H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normality_factorization</span><span> </span><span>is_normal</span><span> </span><span>HA</span><span> </span><span>A</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simple</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Aâ¦ˆ)<span class="hidden">â‡™</span></sub> H = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>} âˆ¨ rcosets<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Aâ¦ˆ)<span class="hidden">â‡™</span></sub> H = carrier (G Mod H)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> H = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> H = {ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Aâ¦ˆ) Mod H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>finiteA</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normalHA.fact_group_trivial_iff</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>AHGH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> H = carrier (G Mod H)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"A âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>A</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>        </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G âŠ† A"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ rcosets H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>AHGH</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> H"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>            </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>x'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>x'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x' âˆˆ A"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt;x = H #&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Aâ¦ˆ<span class="hidden">â‡™</span></sub> x'"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H #&gt; x = H #&gt; x'"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ H #&gt; x'"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_subgroup</span><span> </span><span>rcos_self</span><span> </span><span>x</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ A #&gt; x'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>HA</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ A"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>x'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subgroup.m_closed</span><span> </span><span>A</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>A</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="CompositionSeries">
<div class="head"><h1>Theory CompositionSeries</h1>
<span class="command">theory</span> <span class="name">CompositionSeries</span><br/>
<span class="keyword">imports</span> <a href="MaximalNormalSubgroups.html"><span class="name">MaximalNormalSubgroups</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      Composition Series
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>CompositionSeries</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span>SimpleGroups</span><span>
</span><span>  </span><span>MaximalNormalSubgroups</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Normal series and Composition seriesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Preliminariesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A subgroup which is unique in cardinality is normal:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>unique_sizes_subgrp_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>fin</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒ!Q. Q âˆˆ subgroups_of_size q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(THE Q. Q âˆˆ subgroups_of_size q) âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q = (THE Q. Q âˆˆ subgroups_of_size q)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Qsize</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Q âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>theI</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>QG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup Q G"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>cardQ</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"card Q = q"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroups_of_size_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>QG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>normalI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>g</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>g</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g âˆˆ carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>invg</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"inv g âˆˆ carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inv_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>fin</span><span> </span><span>Qsize</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"conjugation_action q (inv g) Q âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>conjugation_is_size_invariant</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>g</span><span> </span><span>Qsize</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(inv g) &lt;# (Q #&gt; inv (inv g)) âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>conjugation_action_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>invg</span><span> </span><span>g</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"inv g &lt;# (Q #&gt; g) = Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Qsize</span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>inv_inv</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>QG</span><span> </span><span>QG</span><span> </span><span>g</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Q #&gt; g = g &lt;# Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>conj_wo_inv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Q_def</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A group whose order is the product of two distinct
primes $p$ and $q$ where $p &lt; q$ has a unique subgroup of size $q$:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>pq_order_unique_subgrp</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>orderG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G = q * p"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>primep</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime p"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>primeq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>pq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"p &lt; q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆƒ!Q. Q âˆˆ (subgroups_of_size q)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>primep</span><span> </span><span>primeq</span><span> </span><span>pq</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>nqdvdp</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Â¬ (q dvd p)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>less_not_refl3</span><span> </span><span>prime_nat_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>calM</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"calM = {s. s âŠ† carrier G âˆ§ card s = q ^ 1}"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>RelM</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"RelM = {(N1, N2). N1 âˆˆ calM âˆ§ N2 âˆˆ calM âˆ§ (âˆƒgâˆˆcarrier G. N1 = N2 #&gt; g)}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>syl</span><span class="delimiter">:</span><span> </span><span>snd_sylow</span><span> </span><span>G</span><span> </span><span>q</span><span> </span><span>1</span><span> </span><span>p</span><span> </span><span>calM</span><span> </span><span>RelM</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>snd_sylow_def</span><span> </span><span>sylow_def</span><span> </span><span>snd_sylow_axioms_def</span><span> </span><span>sylow_axioms_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span>primeq</span><span> </span><span>orderG</span><span> </span><span>finite</span><span> </span><span>nqdvdp</span><span> </span><span>calM_def</span><span> </span><span>RelM_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Q</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>Q</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Q âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>lifting</span><span class="delimiter">,</span><span> </span><span>mono_tags</span><span class="delimiter">)</span><span> </span><span>mem_Collect_eq</span><span> </span><span>power_one_right</span><span> </span><span>subgroups_of_size_def</span><span> </span><span>syl.sylow_thm</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ex1I</span><span class="delimiter">)</span><span>
</span><span>     </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>P</span><span>
</span><span>     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>P</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"P âˆˆ subgroups_of_size q"</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (subgroups_of_size q) mod q = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>power_one_right</span><span> </span><span>syl.p_sylow_mod_p</span><span class="delimiter">)</span><span>     
</span><span>     </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (subgroups_of_size q) dvd p"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>power_one_right</span><span> </span><span>syl.num_sylow_dvd_remainder</span><span class="delimiter">)</span><span>
</span><span>     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (subgroups_of_size q) = p âˆ¨ card (subgroups_of_size q) = 1"</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>primep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>prime_nat_iff</span><span class="delimiter">)</span><span>
</span><span>     </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (subgroups_of_size q) = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>pq</span><span>
</span><span>       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>     </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Q</span><span> </span><span>P</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"P = Q"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span>card_Suc_eq</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹... And this unique subgroup is normal.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">corollary</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>pq_order_subgrp_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>orderG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G = q * p"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>primep</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime p"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>primeq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>pq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"p &lt; q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(THE Q. Q âˆˆ subgroups_of_size q) âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>pq_order_unique_subgrp</span><span> </span><span>unique_sizes_subgrp_normal</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The trivial subgroup is normal in every group.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>trivial_subgroup_is_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{ğŸ­} âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span>normal_axioms_def</span><span> </span><span>r_coset_def</span><span> </span><span>l_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>intro</span><span class="delimiter">:</span><span> </span><span>normalI</span><span> </span><span>subgroupI</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>is_group</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Normal Seriesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹We define a normal series as a locale which fixes one group
@{term G} and a list @{term ğ”Š} of subsets of @{term G}'s carrier. This list
must begin with the trivial subgroup, end with the carrier of the group itself
and each of the list items must be a normal subgroup of its successor.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>normal_series</span><span> </span><span class="delimiter">=</span><span> </span><span>group</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>ğ”Š</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>notempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š â‰  []"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>hd</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"hd ğ”Š = {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>last</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"last ğ”Š = carrier G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>normal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â‹€i. i + 1 &lt; length ğ”Š âŸ¹ (ğ”Š ! i) âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>is_normal_series</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series G ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal_series_axioms</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹For every group there is a "trivial" normal series consisting
only of the group itself and its trivial subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>trivial_normal_series</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series G [{ğŸ­}, carrier G]"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_series_def</span><span> </span><span>normal_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span>trivial_subgroup_is_normal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹We can also show that the normal series presented above is the only such with
a length of two:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>length_two_unique</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 2"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}, carrier G]"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>nth_equalityI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = length [{ğŸ­}, carrier G]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = [{ğŸ­}, carrier G] ! i"</span></span></span><span> </span><span class="keyword2"><span class="keyword">if</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>i</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i = 0 âˆ¨ i = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>that</span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = [{ğŸ­}, carrier G] ! i"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>disjE</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i = 0"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = hd ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>hd_conv_nth</span><span> </span><span>notempty</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = [{ğŸ­}, carrier G] ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hd</span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i = 1"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = last ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>diff_add_inverse</span><span> </span><span>last_conv_nth</span><span> </span><span>nat_1_add_1</span><span> </span><span>notempty</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = [{ğŸ­}, carrier G] ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last</span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹We can construct new normal series by expanding existing ones: If we
append the carrier of a group @{term G} to a normal series for a normal subgroup
@{term "H âŠ² G"} we receive a normal series for @{term G}.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>normal_series_extend</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>normal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"normal_series (Gâ¦‡carrier := Hâ¦ˆ) â„Œ"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series G (â„Œ @ [carrier G])"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>normal</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>normalH</span><span class="delimiter">:</span><span> </span><span>normal_series</span><span> </span><span class="string"><span class="delete"><span class="delete">"(Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span>â„Œ</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>normalH.hd</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"hd â„Œ = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>normalH.notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>hdTriv</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"hd (â„Œ @ [carrier G]) = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>hd_append2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_series_def</span><span> </span><span>normal_series_axioms_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ hd (â„Œ @ [carrier G])"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>hdTriv</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x = ğŸ­"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>hdTriv</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"ğŸ­ âˆˆ hd (â„Œ @ [carrier G])"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i &lt; length â„Œ"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i âŠ² Gâ¦‡carrier := (â„Œ @ [carrier G]) ! Suc iâ¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length â„Œ"</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>normalH.normal</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ ! i âŠ² Gâ¦‡carrier := â„Œ ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i âŠ² Gâ¦‡carrier := â„Œ ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nth_append</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>True</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i âŠ² Gâ¦‡carrier := (â„Œ @ [carrier G]) ! (Suc i)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nth_append</span><span> </span><span>Suc_eq_plus1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>i2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 = length â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i = â„Œ ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>nth_append</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i2</span><span> </span><span>normalH.notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = last â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_right'</span><span> </span><span>last_conv_nth</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>normalH.last</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i = H"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! (i + 1) = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>nth_append_length</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>HG</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹All entries of a normal series for $G$ are subgroups of $G$.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>normal_series_subgroups</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &lt; length ğ”Š âŸ¹ subgroup (ğ”Š ! i) G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length ğ”Š âŸ¹ subgroup (ğ”Š ! i) G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š - (i + 2)"</span></span></span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>i</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>0</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 2 = length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ii</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 = length ğ”Š - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span> </span><span>normal</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>ii</span><span> </span><span>last</span><span> </span><span>notempty</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! i) G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last_conv_nth</span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Suc</span><span> </span><span>k</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Suc</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span>  </span><span>normal</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! i) (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Suc</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>k</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"k = length ğ”Š - ((i + 1) + 2)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Suc</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! (i + 1)) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! i) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_group</span><span> </span><span>subgroup.subgroup_of_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 = length ğ”Š âŸ¹ subgroup (ğ”Š ! i) G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last</span><span> </span><span>notempty</span><span> </span><span>last_conv_nth</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_right'</span><span> </span><span>subgroup_self</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &lt; length ğ”Š âŸ¹ subgroup (ğ”Š ! i) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The second to last entry of a normal series is a normal subgroup of G.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>normal_series_snd_to_last</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (length ğ”Š - 2) âŠ² G"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"2 â‰¤ length ğ”Š"</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>length</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_eq_plus1</span><span> </span><span>leI</span><span> </span><span>length_0_conv</span><span> </span><span>less_2_cases</span><span> </span><span>plus_nat.add_0</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>hd</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (length ğ”Š - 2) = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hd_conv_nth</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>length</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>trivial_subgroup_is_normal</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(length ğ”Š - 2) + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>normal</span><span> </span><span>last</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (length ğ”Š - 2) âŠ² Gâ¦‡carrier := ğ”Š ! ((length ğ”Š - 2) + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"1 + (1 + (length ğ”Š - (1 + 1))) = length ğ”Š"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>True</span><span> </span><span>le_add_diff_inverse</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>presburger</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (length ğ”Š - 2) âŠ² Gâ¦‡carrier :=  ğ”Š ! (length ğ”Š - 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹ğ”Š ! (length ğ”Š - 2) âŠ² G â¦‡carrier := ğ”Š ! (length ğ”Š - 2 + 1)â¦ˆâ€º</span></span></span><span> </span><span>add.commute</span><span> </span><span>add_diff_cancel_left'</span><span> </span><span>one_add_one</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span>last</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last_conv_nth</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Just like the expansion of normal series, every prefix of a normal series is again a normal series.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>normal_series_prefix_closed</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"0 &lt; i"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series (Gâ¦‡carrier := ğ”Š ! (i - 1)â¦ˆ) (take i ğ”Š)"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_series_def</span><span> </span><span>normal_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>hd</span><span> </span><span>del</span><span class="delimiter">:</span><span>equalityI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>is_group</span><span> </span><span>normal_series_subgroups</span><span> </span><span>subgroup.subgroup_is_group</span><span class="delimiter">)</span><span>
</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>last_conv_nth</span><span> </span><span>min.absorb2</span><span> </span><span>notempty</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹If a group's order is the product of two distinct primes @{term p} and @{term q}, where
@{term "p &lt; q"}, we can construct a normal series using the only subgroup of size  @{term q}.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>pq_order_normal_series</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>orderG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G = q * p"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>primep</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime p"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>primeq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>pq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"p &lt; q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series G [{ğŸ­}, (THE H. H âˆˆ subgroups_of_size q), carrier G]"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>H</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = (THE H. H âˆˆ subgroups_of_size q)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>HG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>pq_order_subgrp_normal</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>groupH</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := Hâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series (Gâ¦‡carrier := Hâ¦ˆ) [{ğŸ­}, H]"</span></span></span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>groupH.trivial_normal_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>HG</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>H_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>append_Cons</span><span> </span><span>append_Nil</span><span> </span><span>normal_series_extend</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The following defines the list of all quotient groups of the normal series:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>quotients</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"quotients = map (Î»i. Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i) [0..&lt;((length ğ”Š) - 1)]"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The list of quotient groups has one less entry than the series itself:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>quotients_length</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length quotients + 1 = length ğ”Š"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length quotients + 1 = length [0..&lt;((length ğ”Š) - 1)] + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>quotients_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = (length ğ”Š - 1) + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>diff_zero</span><span> </span><span>length_upt</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"... = length ğ”Š"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>ac_simps</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>last_quotient</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š &gt; 1"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last quotients = G Mod ğ”Š ! (length ğ”Š - 1 - 1)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lsimp</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š - 1 - 1 + 1 = length ğ”Š - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"quotients â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>quotients_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last quotients = quotients ! (length quotients - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>last_conv_nth</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = quotients ! (length ğ”Š - 1 - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_left'</span><span> </span><span>quotients_length</span><span> </span><span>add.commute</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = Gâ¦‡carrier := ğ”Š ! ((length ğ”Š - 1 - 1) + 1)â¦ˆ Mod ğ”Š ! (length ğ”Š - 1 - 1)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>quotients_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = Gâ¦‡carrier := ğ”Š ! (length ğ”Š - 1)â¦ˆ Mod ğ”Š ! (length ğ”Š - 1 - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lsimp</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = G Mod ğ”Š ! (length ğ”Š - 1 - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last</span><span> </span><span>last_conv_nth</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The next lemma transports the constituting properties of a normal series
along an isomorphism of groups.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>normal_series_iso</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>H</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>iso</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Î¨ âˆˆ iso G H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series H (map (image Î¨) ğ”Š)"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>normal_series_def</span><span> </span><span>normal_series_axioms_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>H</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>H</span><span> </span><span>is_group</span><span> </span><span>iso</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>group_hom</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group_hom G H Î¨"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_hom_def</span><span> </span><span>group_hom_axioms_def</span><span> </span><span>iso_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"hd (map (image Î¨) ğ”Š) = Î¨ ` {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>hd_map</span><span> </span><span>hd</span><span> </span><span>notempty</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = {Î¨ ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>image_empty</span><span> </span><span>image_insert</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = {ğŸ­<span class="hidden">â‡˜</span><sub>H<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group_hom</span><span> </span><span>group_hom.hom_one</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"hd (map ((`) Î¨) ğ”Š) = {ğŸ­<span class="hidden">â‡˜</span><sub>H<span class="hidden">â‡™</span></sub>}"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last (map ((`) Î¨) ğ”Š) = carrier H âˆ§ (âˆ€i. Suc i &lt; length ğ”Š âŸ¶ Î¨ ` ğ”Š ! i âŠ² Hâ¦‡carrier := Î¨ ` ğ”Š ! Suc iâ¦ˆ)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>equalityI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last (map ((`) Î¨) ğ”Š) = Î¨ ` (carrier G)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last</span><span> </span><span>last_map</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = carrier H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>bij_betw_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last (map ((`) Î¨) ğ”Š) = carrier H"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Suc i &lt; length ğ”Š"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>norm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ² Gâ¦‡carrier := ğ”Š ! Suc iâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"restrict Î¨ (ğ”Š ! Suc i) âˆˆ iso (Gâ¦‡carrier := ğ”Š ! Suc iâ¦ˆ) (Hâ¦‡carrier := Î¨ ` ğ”Š ! Suc iâ¦ˆ)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>H</span><span> </span><span>i</span><span> </span><span>is_group</span><span> </span><span>iso</span><span> </span><span>iso_restrict</span><span> </span><span>normal_series_subgroups</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := ğ”Š ! Suc iâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>i</span><span> </span><span>normal_series_subgroups</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! Suc i) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>i</span><span> </span><span>normal_series_subgroups</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"subgroup (Î¨ ` ğ”Š ! Suc i) H"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>H</span><span> </span><span>is_group</span><span> </span><span>iso</span><span> </span><span>iso_subgroup</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Hâ¦‡carrier := Î¨ ` ğ”Š ! Suc iâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>H</span><span> </span><span>subgroup.subgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"restrict Î¨ (ğ”Š ! Suc i) ` ğ”Š ! i âŠ² Hâ¦‡carrier := Î¨ ` ğ”Š ! Suc iâ¦ˆ"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>is_group</span><span> </span><span>H</span><span> </span><span>iso_normal_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>cong</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>image_cong_simp</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>norm</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! Suc i"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normal_def</span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"{y. âˆƒxâˆˆğ”Š ! i. y = (if x âˆˆ ğ”Š ! Suc i then Î¨ x else undefined)} = {y. âˆƒxâˆˆğ”Š ! i. y = Î¨ x}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Î¨ ` ğ”Š ! i âŠ² Hâ¦‡carrier := Î¨ ` ğ”Š ! Suc iâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>restrict_def</span><span> </span><span>image_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Composition Seriesâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A composition series is a normal series where all consecutive factor groups are simple:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>composition_series</span><span> </span><span class="delimiter">=</span><span> </span><span>normal_series</span><span> </span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>simplefact</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â‹€i. i + 1 &lt;  length ğ”Š âŸ¹ simple_group (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>is_composition_series</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series G ğ”Š"</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>composition_series_axioms</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A composition series for a group $G$ has length one if and only if $G$ is the trivial group.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_series_length_one</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(length ğ”Š = 1) = (ğ”Š = [{ğŸ­}])"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>hd</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = length [{ğŸ­}] âˆ§ (âˆ€i &lt; length ğ”Š. ğ”Š ! i = [{ğŸ­}] ! i)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hd_conv_nth</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}]"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>list_eq_iff_nth_eq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}]"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_series_triv_group</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(carrier G = {ğŸ­}) = (ğ”Š = [{ğŸ­}])"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>G</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š â‰  1"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>length</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š â‰¥ 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_eq_plus1</span><span> </span><span>length_0_conv</span><span> </span><span>less_2_cases</span><span> </span><span>not_less</span><span> </span><span>plus_nat.add_0</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simplefact</span><span> </span><span>hd</span><span> </span><span>hd_conv_nth</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ Mod {ğŸ­})"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>SG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup (ğ”Š ! 1) G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>length</span><span> </span><span>normal_series_subgroups</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.trivial_factor_iso</span><span> </span><span>simple_group.iso_simple</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>SG</span><span> </span><span>G</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ) = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simple_group.simple_not_triv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>composition_series_length_one</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}]"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>last</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The inner elements of a composition series may not consist of the trivial subgroup or the
group itself.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>inner_elements_not_triv</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &gt; 0"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i â‰  {ğŸ­}"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(i - 1) + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>simple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! ((i - 1) + 1)â¦ˆ Mod ğ”Š ! (i - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simplefact</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = {ğŸ­}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(i - 1) + 1 = i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := ğ”Š ! ((i - 1) + 1)â¦ˆ Mod ğ”Š ! (i - 1) = Gâ¦‡carrier := {ğŸ­}â¦ˆ Mod ğ”Š ! (i - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (Gâ¦‡carrier := ğ”Š ! ((i - 1) + 1)â¦ˆ Mod ğ”Š ! (i - 1)) = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>order_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span>simple</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹A composition series of a simple group always is its trivial one.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_series_simple_group</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(simple_group G) = (ğ”Š = [{ğŸ­}, carrier G])"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}, carrier G]"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simplefact</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod {ğŸ­})"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"the_elem âˆˆ iso (G Mod {ğŸ­}) G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>trivial_factor_iso</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>is_group</span><span> </span><span>simple_group.iso_simple</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>simple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group G"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š &gt; 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ 1 &lt; length ğ”Š"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Suc_leI</span><span> </span><span>antisym</span><span> </span><span>notempty</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hd</span><span> </span><span>last</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>composition_series_length_one</span><span> </span><span>composition_series_triv_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order G = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simple</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š â‰¤ 2"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>k</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"k = length ğ”Š - 2"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ (length ğ”Š â‰¤ 2)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>gt2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š &gt; 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ksmall</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"k + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>k_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>gt2</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>carrier</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (k + 1) = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>notempty</span><span> </span><span>last</span><span> </span><span>last_conv_nth</span><span> </span><span>k_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Nat.add_diff_assoc</span><span> </span><span>Nat.diff_cancel</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Â¬ length ğ”Š â‰¤ 2â€º</span></span></span><span> </span><span>add.commute</span><span> </span><span>nat_le_linear</span><span> </span><span>one_add_one</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>normal</span><span> </span><span>ksmall</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! k âŠ² Gâ¦‡ carrier := ğ”Š ! (k + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>simplefact</span><span> </span><span>ksmall</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>simplek</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! (k + 1)â¦ˆ Mod ğ”Š ! k)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>simplefact</span><span> </span><span>ksmall</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>simplek'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! ((k - 1) + 1)â¦ˆ Mod ğ”Š ! (k - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! k âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>carrier</span><span> </span><span>k_def</span><span> </span><span>gt2</span><span> </span><span>normal</span><span> </span><span>ksmall</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simple</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(ğ”Š ! k) = carrier G âˆ¨ (ğ”Š ! k) = {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>disjE</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! k = carrier G"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := ğ”Š ! (k + 1)â¦ˆ Mod ğ”Š ! k = G Mod (carrier G)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>carrier</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simplek</span><span> </span><span>self_factor_not_simple</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! k = {ğŸ­}"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>ksmall</span><span> </span><span>k_def</span><span> </span><span>gt2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"False"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inner_elements_not_triv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­}, carrier G]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>length_two_unique</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Two consecutive elements in a composition series are distinct.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>entries_distinct</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i â‰  ğ”Š ! (i + 1)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finite</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite  (ğ”Š ! (i + 1))"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span>normal_series_subgroups</span><span> </span><span>subgroup.subset</span><span> </span><span>rev_finite_subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>fin</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>norm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ² (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = ğ”Š ! (i + 1)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i = carrier (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier ((Gâ¦‡carrier := (ğ”Š ! (i + 1))â¦ˆ) Mod (ğ”Š ! i)) = {ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ) Mod ğ”Š ! i<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>norm</span><span> </span><span>fin</span><span> </span><span>normal.fact_group_trivial_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ simple_group ((Gâ¦‡carrier := (ğ”Š ! (i + 1))â¦ˆ) Mod (ğ”Š ! i))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>simple_group.simple_not_triv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>i</span><span> </span><span>simplefact</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The normal series for groups of order @{term "p * q"} is even a composition series:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>pq_order_composition_series</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>orderG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order G = q * p"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>primep</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime p"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>primeq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"prime q"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>pq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"p &lt; q"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series G [{ğŸ­}, (THE H. H âˆˆ subgroups_of_size q), carrier G]"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>composition_series_def</span><span> </span><span>composition_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>pq_order_normal_series</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>H</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H = (THE H. H âˆˆ subgroups_of_size q)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>exi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"âˆƒ!Q. Q âˆˆ (subgroups_of_size q)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>pq_order_unique_subgrp</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Hsize</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"H âˆˆ subgroups_of_size q"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>H_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>theI'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>HsubG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup H G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroups_of_size_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>Hgroup</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := Hâ¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &lt; Suc (Suc 0)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i = 0 âˆ¨ i = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := [H, carrier G] ! iâ¦ˆ Mod [{ğŸ­}, H, carrier G] ! i)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i = 0"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Hsize</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>orderH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"order (Gâ¦‡carrier := Hâ¦ˆ) = q"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroups_of_size_def</span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (Gâ¦‡carrier := Hâ¦ˆ Mod {ğŸ­}) = q"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>card_rcosets_triv</span><span> </span><span>order_def</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Hgroup.card_rcosets_triv</span><span> </span><span>HsubG</span><span> </span><span>finite</span><span> </span><span>monoid.cases_scheme</span><span> </span><span>monoid.select_convs</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>partial_object.select_convs</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>partial_object.update_convs</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>subgroup_finite</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal {ğŸ­} (Gâ¦‡carrier := Hâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Hgroup.is_group</span><span> </span><span>Hgroup.normal_inv_iff</span><span> </span><span>HsubG</span><span> </span><span>group.trivial_subgroup_is_normal</span><span> </span><span>is_group</span><span> </span><span>singleton_iff</span><span> </span><span>subgroup.one_closed</span><span> </span><span>subgroup.subgroup_of_subgroup</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := Hâ¦ˆ Mod {ğŸ­})"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>orderH</span><span> </span><span>primeq</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := Hâ¦ˆ Mod {ğŸ­})"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹order (Gâ¦‡carrier := Hâ¦ˆ Mod {ğŸ­}) = qâ€º</span></span></span><span> </span><span>group.prime_order_simple</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i = 1"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span>exi</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>H_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>pq_order_subgrp_normal</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>groupGH</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>primeq</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"q â‰  0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>not_prime_0</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>HsubG</span><span> </span><span>finite</span><span> </span><span>orderG</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets H) * card H = q * p"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroups_of_size_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lagrange</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Hsize</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets H) * q = q * p"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>subgroups_of_size_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹q â‰  0â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"card (rcosets H) = p"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (G Mod H) = p"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>groupGH</span><span> </span><span>primep</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod H)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group.prime_order_simple</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Prefixes of composition series are also composition series.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_series_prefix_closed</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"0 &lt; i"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series (Gâ¦‡carrier := ğ”Š ! (i - 1)â¦ˆ) (take i ğ”Š)"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>composition_series_def</span><span> </span><span>composition_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series (Gâ¦‡carrier := ğ”Š ! (i - Suc 0)â¦ˆ) (take i ğ”Š)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>One_nat_def</span><span> </span><span>normal_series_prefix_closed</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>j</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>j</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Suc j &lt; length ğ”Š"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc j &lt; i"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simplefact</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! Suc jâ¦ˆ Mod ğ”Š ! j)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_eq_plus1</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The second element in a composition series is simple group.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_series_snd_simple</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"2 â‰¤ length ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>compTake</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := ğ”Š ! 1â¦ˆ"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"take 2 ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_right'</span><span> </span><span>composition_series_prefix_closed</span><span> </span><span>one_add_one</span><span> </span><span>zero_less_numeral</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (take 2 ğ”Š) = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_right'</span><span> </span><span>append_take_drop_id</span><span> </span><span>diff_diff_cancel</span><span> </span><span>length_append</span><span> </span><span>length_drop</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(take 2 ğ”Š) = [{ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := ğ”Š ! 1â¦ˆ)<span class="hidden">â‡™</span></sub>}, carrier (Gâ¦‡carrier := ğ”Š ! 1â¦ˆ)]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>compTake.length_two_unique</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compTake.composition_series_simple_group</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹As a stronger way to state the previous lemma: An entry of a composition series is 
  simple if and only if it is the second one.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>composition_snd_simple_iff</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &lt; length ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(simple_group (Gâ¦‡carrier :=  ğ”Š ! iâ¦ˆ)) = (i = 1)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>simpi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i â‰  {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simple_group.simple_not_triv</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i â‰  0"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>hd</span><span> </span><span>hd_conv_nth</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>compTake</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := ğ”Š ! iâ¦ˆ"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"take (Suc i) ğ”Š"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>composition_series_prefix_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>diff_Suc_1</span><span> </span><span>less_eq_Suc_le</span><span> </span><span>zero_less_Suc</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>simpi</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(take (Suc i) ğ”Š) = [{ğŸ­<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! iâ¦ˆ<span class="hidden">â‡™</span></sub>}, carrier (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ)]"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compTake.composition_series_simple_group</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (take (Suc i) ğ”Š) = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"min (length ğ”Š) (Suc i) = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_take</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc i = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i = 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"2 â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>composition_series_snd_simple</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The second to last entry of a normal series is not only a normal subgroup but
  actually even a \emph{maximal} normal subgroup.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>snd_to_last_max_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>length</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š &gt; 1"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"max_normal_subgroup (ğ”Š ! (length ğ”Š - 2)) G"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>max_normal_subgroup_def</span><span> </span><span>max_normal_subgroup_axioms_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>equalityI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (length ğ”Š - 2) âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal_series_snd_to_last</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span> 
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>G'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' = ğ”Š ! (length ğ”Š - 2)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>length21</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š - 2 + 1 = length ğ”Š - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š - 2 + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simplefact</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! ((length ğ”Š - 2) + 1)â¦ˆ Mod G')"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>G'_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>length21</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>simple_last</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod G')"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>last</span><span> </span><span>notempty</span><span> </span><span>last_conv_nth</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>snd_to_last_eq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"G' = carrier G"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (G Mod G') = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod G'<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_series_snd_to_last</span><span> </span><span>finite</span><span> </span><span>normal.fact_group_trivial_iff</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>G'_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>snd_to_last_eq</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ simple_group (G Mod G')"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>self_factor_not_simple</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>simple_last</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>G'_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>G'G</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"G' âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>G'_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal_series_snd_to_last</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>J</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>J</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"J âŠ² G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"J â‰  G'"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"J â‰  carrier G"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' âŠ† J"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>JG'GG'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Jâ¦ˆ)<span class="hidden">â‡™</span></sub> G' âŠ² G Mod G'"</span></span></span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normality_factorization</span><span> </span><span>normal_series_snd_to_last</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>G'_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>G'G</span><span> </span><span>J</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>4</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>G'J</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"G' âŠ² (Gâ¦‡carrier := Jâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>normal_restrict_supergroup</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finite</span><span> </span><span>J</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finJ</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite J"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup_finite</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>JG'GG'</span><span> </span><span>simple_last</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G' = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod G'<span class="hidden">â‡™</span></sub>} âˆ¨ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G' = carrier (G Mod G')"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>simple_group_def</span><span> </span><span>simple_group_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span>False</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G' = {ğŸ­<span class="hidden">â‡˜</span><sub>G Mod G'<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G' = {ğŸ­<span class="hidden">â‡˜</span><sub>(Gâ¦‡carrier := Jâ¦ˆ) Mod G'<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' = J"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>G'J</span><span> </span><span>finJ</span><span> </span><span>normal.fact_group_trivial_iff</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>J</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>facts_eq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G' = carrier (G Mod G')"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"J = carrier G"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"J âŠ† carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>J</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>      </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G âŠ† J"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>x</span><span>
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>x</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"x âˆˆ carrier G"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' #&gt; x âˆˆ carrier (G Mod G')"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>FactGroup_def</span><span> </span><span>RCOSETS_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' #&gt; x âˆˆ rcosets<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Jâ¦ˆ<span class="hidden">â‡™</span></sub> G'"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>facts_eq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>j</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>j</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"j âˆˆ J"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"G' #&gt; x = G' #&gt; j"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>RCOSETS_def</span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>          </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ G' #&gt; j"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>G'G</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>x</span><span> </span><span>repr_independenceD</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>g'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>g'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"g' âˆˆ G'"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"x = g' âŠ— j"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>r_coset_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"g' âˆˆ J"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>G'J</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>          </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>g'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>j</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"x âˆˆ J"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>J</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.m_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>J</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹For the next lemma we need a few facts about removing adjacent duplicates.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>remdups_adj_obtain_adjacency</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length (remdups_adj xs)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length xs &gt; 0"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">obtains</span></span><span> </span><span>j</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"j + 1 &lt; length xs"</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">"(remdups_adj xs) ! i = xs ! j"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(remdups_adj xs) ! (i + 1) = xs ! (j + 1)"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span>xs</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>i</span><span> </span><span>thesis</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_greater_0_conv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span>thesis</span><span class="keyword1"><span class="command">..</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>x</span><span> </span><span>xs</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"xs â‰  []"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>y</span><span> </span><span>xs'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>xs</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"xs = y # xs'"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span>xs</span><span class="delimiter">)</span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹xs â‰  []â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lenxs</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length xs &gt; 0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>xs</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>rem</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) = (if x = y then remdups_adj (y # xs') else x # remdups_adj (y # xs'))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>remdups_adj.simps</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>thesis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"x = y"</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>rem</span><span> </span><span>xs</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>rem2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) = remdups_adj xs"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Cons</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length (remdups_adj xs)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Cons.IH</span><span> </span><span>lenxs</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>k</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>j</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"k + 1 &lt; length xs"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj xs ! i = xs ! k"</span></span></span><span>
</span><span>        </span><span class="string"><span class="delete"><span class="delete">"remdups_adj xs ! (i + 1) = xs ! (k + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span>thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>rem2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>rem</span><span> </span><span>xs</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>rem2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) = x # remdups_adj xs"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span>i</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>0</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"0 + 1 &lt; length (x # xs)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lenxs</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! i = (x # xs) ! 0"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! i = (x # remdups_adj (y # xs')) ! 0"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>xs</span><span> </span><span>rem2</span><span> </span><span>0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = x"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (x # xs) ! 0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! (i + 1) = (x # xs) ! (0 + 1)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! (i + 1) = (x # remdups_adj (y # xs')) ! 1"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>xs</span><span> </span><span>rem2</span><span> </span><span>0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = remdups_adj (y # xs') ! 0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (y # (remdups (y # xs'))) ! 0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>nth_Cons'</span><span> </span><span>remdups_adj_Cons_alt</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = y"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (x # xs) ! (0 + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>xs</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Cons.prems</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Suc</span><span> </span><span>k</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Cons</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"k + 1 &lt; length (remdups_adj (x # xs)) - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ â‰¤ length (remdups_adj xs) + 1 - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>One_nat_def</span><span> </span><span>le_refl</span><span> </span><span>list.size</span><span class="delimiter">(</span><span>4</span><span class="delimiter">)</span><span> </span><span>rem2</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length (remdups_adj xs)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"k + 1 &lt; length (remdups_adj xs)"</span></span></span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Cons.IH</span><span> </span><span>lenxs</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>j</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>j</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"j + 1 &lt; length xs"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj xs ! k = xs ! j"</span></span></span><span>
</span><span>        </span><span class="string"><span class="delete"><span class="delete">"remdups_adj xs ! (k + 1) = xs ! (j + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>j</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc j + 1 &lt; length (x # xs)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! i = (x # xs) ! (Suc j)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! i = (x # remdups_adj xs) ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>rem2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (remdups_adj xs) ! k"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Suc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = xs ! j"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>j</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (x # xs) ! (Suc j)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! (i + 1) = (x # xs) ! (Suc j + 1)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (x # xs) ! (i + 1) = (x # remdups_adj xs) ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>rem2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (remdups_adj xs) ! (k + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Suc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = xs ! (j + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>j</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (x # xs) ! (Suc j + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>Cons.prems</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>hd_remdups_adj</span><span class="delimiter">[</span><span>simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">"hd (remdups_adj xs) = hd xs"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span>xs</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>remdups_adj.induct</span><span class="delimiter">)</span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>remdups_adj_adjacent</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"Suc i &lt; length (remdups_adj xs) âŸ¹ remdups_adj xs ! i â‰  remdups_adj xs ! Suc i"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span>xs</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>i</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>remdups_adj.induct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>3</span><span> </span><span>x</span><span> </span><span>y</span><span> </span><span>xs</span><span> </span><span>i</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span>i</span><span class="delimiter">,</span><span> </span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"x = y"</span></span></span><span class="delimiter">)</span><span> </span><span class="delimiter">(</span><span>simp</span><span class="delimiter">,</span><span> </span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>hd_conv_nth</span><span class="delimiter">[</span><span>symmetric</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span> </span><span>simp_all</span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Intersecting each entry of a composition series with a normal subgroup of $G$ and removing
  all adjacent duplicates yields another composition series.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>intersect_normal</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>KG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"K âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series (Gâ¦‡carrier := Kâ¦ˆ) (remdups_adj (map (Î»H. K âˆ© H) ğ”Š))"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>composition_series_def</span><span> </span><span>composition_series_axioms_def</span><span> </span><span>normal_series_def</span><span> </span><span>normal_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>only</span><span class="delimiter">:</span><span> </span><span>conjI</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>equalityI</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := Kâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>KG</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup_imp_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="comment">â€• â€¹Show, that removing adjacent duplicates doesn't result in an empty list.â€º</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (map ((âˆ©) K) ğ”Š) = []"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"map ((âˆ©) K) ğ”Š = []"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>remdups_adj_Nil_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = []"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Nil_is_map_conv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notempty</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span class="keyword1"><span class="command">..</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="comment">â€• â€¹Show, that the head of the reduced list is still the trivial groupâ€º</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = {ğŸ­} # tl ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>notempty</span><span> </span><span>hd</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>list.sel</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>3</span><span class="delimiter">)</span><span> </span><span>neq_Nil_conv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"map ((âˆ©) K) ğ”Š = map ((âˆ©) K) ({ğŸ­} # tl ğ”Š)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (map ((âˆ©) K) ğ”Š) = remdups_adj ((K âˆ© {ğŸ­}) # (map ((âˆ©) K) (tl ğ”Š)))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (K âˆ© {ğŸ­}) # tl (remdups_adj ((K âˆ© {ğŸ­}) # (map ((âˆ©) K) (tl ğ”Š))))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"hd (remdups_adj (map ((âˆ©) K) ğ”Š)) = K âˆ© {ğŸ­}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>list.sel</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"hd (remdups_adj (map ((âˆ©) K) ğ”Š)) = {ğŸ­<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := Kâ¦ˆ<span class="hidden">â‡™</span></sub>}"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>KG</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.one_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="comment">â€• â€¹Show that the last entry is really @{text "K âˆ© G"}. Since we don't have a lemma ready to talk about the
    last entry of a reduced list, we reverse the list twice.â€º</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rev ğ”Š = (carrier G) # tl (rev ğ”Š)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>list.sel</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>3</span><span class="delimiter">)</span><span> </span><span>last</span><span> </span><span>last_rev</span><span> </span><span>neq_Nil_conv</span><span> </span><span>notempty</span><span> </span><span>rev_is_Nil_conv</span><span> </span><span>rev_rev_ident</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"rev (map ((âˆ©) K) ğ”Š) = map ((âˆ©) K) ((carrier G) # tl (rev ğ”Š))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rev_map</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>rev</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"rev (map ((âˆ©) K) ğ”Š) = (K âˆ© (carrier G)) # (map ((âˆ©) K) (tl (rev ğ”Š)))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last (remdups_adj (map ((âˆ©) K) ğ”Š)) = hd (rev (remdups_adj (map ((âˆ©) K) ğ”Š)))"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>hd_rev</span><span> </span><span>map_is_Nil_conv</span><span> </span><span>notempty</span><span> </span><span>remdups_adj_Nil_iff</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = hd (remdups_adj (rev (map ((âˆ©) K) ğ”Š)))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>remdups_adj_rev</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = hd (remdups_adj ((K âˆ© (carrier G)) # (map ((âˆ©) K) (tl (rev ğ”Š)))))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>rev</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = hd ((K âˆ© (carrier G)) # (remdups_adj ((K âˆ© (carrier G)) # (map ((âˆ©) K) (tl (rev ğ”Š))))))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>list.sel</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>remdups_adj_Cons_alt</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = K"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>KG</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last (remdups_adj (map ((âˆ©) K) ğ”Š)) = carrier (Gâ¦‡carrier := Kâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="comment">â€• â€¹The induction step, using the second isomorphism theorem for groups.â€º</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>j</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>j</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"j + 1 &lt; length (remdups_adj (map ((âˆ©) K) ğ”Š))"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>KGnotempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(map ((âˆ©) K) ğ”Š) â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Nil_is_map_conv</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>j</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>i</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length (map ((âˆ©) K) ğ”Š)"</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">"(remdups_adj (map ((âˆ©) K) ğ”Š)) ! j = (map ((âˆ©) K) ğ”Š) ! i"</span></span></span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">"(remdups_adj (map ((âˆ©) K) ğ”Š)) ! (j + 1) = (map ((âˆ©) K) ğ”Š) ! (i + 1)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>remdups_adj_obtain_adjacency</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>i'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_map</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>GiSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>GiSi'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i'</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finGSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (ğ”Š ! (i + 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span>normal_series_subgroups</span><span> </span><span>finite</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>subgroup_finite</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>GiSi</span><span> </span><span>KG</span><span> </span><span>i'</span><span> </span><span>normal_series_subgroups</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>GSiKnormGSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (i + 1) âˆ© K âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.normal_subgrp_intersection_normal</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>GiSi</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âˆ© (ğ”Š ! (i + 1) âˆ© K) âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>group.normal_subgroup_intersect</span><span> </span><span>group.subgroup_imp_group</span><span> </span><span>i'</span><span> </span><span>is_group</span><span> </span><span>is_normal_series</span><span> </span><span>normal_series.normal_series_subgroups</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"K âˆ© (ğ”Š ! i âˆ© ğ”Š ! (i + 1)) âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inf_commute</span><span> </span><span>inf_left_commute</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>KGinormGSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"K âˆ© ğ”Š ! i âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>GiSi'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>le_iff_inf</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"K âˆ© ğ”Š ! i âŠ† K âˆ© ğ”Š ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>GiSi'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>groupGSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span>normal_series_subgroups</span><span> </span><span>subgroup_imp_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>subKGSiGSi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"subgroup (K âˆ© ğ”Š ! (i + 1)) (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>GSiKnormGSi</span><span> </span><span>inf_sup_aci</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>normal_imp_subgroup</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>fstgoal</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"K âˆ© ğ”Š ! i âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1), carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.normal_restrict_supergroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"remdups_adj (map ((âˆ©) K) ğ”Š) ! j âŠ² Gâ¦‡carrier := K, carrier := remdups_adj (map ((âˆ©) K) ğ”Š) ! (j + 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>simplefact</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Gisimple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Gimax</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"max_normal_subgroup (ğ”Š ! i) (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal.max_normal_simple_quotient</span><span> </span><span>GiSi</span><span> </span><span>finGSi</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>GSiKnormGSi</span><span> </span><span>GiSi</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> ğ”Š ! (i + 1) âˆ© K âŠ² (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>groupGSi</span><span> </span><span>group.normal_subgroup_set_mult_closed</span><span> </span><span>set_mult_consistent</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt; ğ”Š ! (i + 1) âˆ© K âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! (i + 1) âŠ² Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inf_commute</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> K âˆ© ğ”Š ! (i + 1)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.H_contained_in_set_mult</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>subKGSiGSi</span><span> </span><span>GiSi</span><span> </span><span>normal_imp_subgroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>KGdisj</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! (i + 1) = ğ”Š ! i âˆ¨ ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! (i + 1) = ğ”Š ! (i + 1)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Gimax</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>max_normal_subgroup_def</span><span> </span><span>max_normal_subgroup_axioms_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso  (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (ğ”Š ! i âˆ© (K âˆ© ğ”Š ! (i + 1))))
             (Gâ¦‡carrier := ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.normal_intersection_quotient_isom</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>GiSi</span><span> </span><span>subKGSiGSi</span><span> </span><span>normal_imp_subgroup</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso  (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! (i + 1) âˆ© ğ”Š ! i))
                  (Gâ¦‡carrier := ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>inf_commute</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© (ğ”Š ! (i + 1) âˆ© ğ”Š ! i)))
                 (Gâ¦‡carrier := ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Int_assoc</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i))
                 (Gâ¦‡carrier := ğ”Š ! i &lt;#&gt;<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ<span class="hidden">â‡™</span></sub> K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>GiSi'</span><span> </span><span>Int_absorb2</span><span> </span><span>Int_commute</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i))
                   (Gâ¦‡carrier := ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>set_mult_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>fstgoal</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>KGsiKGigroup</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal.factorgroup_is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>KGdisj</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := K, carrier := remdups_adj (map ((âˆ©) K) ğ”Š) ! (j + 1)â¦ˆ Mod remdups_adj (map ((âˆ©) K) ğ”Š) ! j)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>groupGi</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span> </span><span>normal_series_subgroups</span><span> </span><span>subgroup_imp_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! Suc i = ğ”Š ! i"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ Mod ğ”Š ! i)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ïˆ</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ïˆ âˆˆ iso (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ Mod (carrier (Gâ¦‡carrier := ğ”Š ! iâ¦ˆ))) (Gâ¦‡carrier := {ğŸ­<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := ğ”Š ! iâ¦ˆ<span class="hidden">â‡™</span></sub>}â¦ˆ)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.self_factor_iso</span><span> </span><span>groupGi</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï€</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï€ âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) (Gâ¦‡carrier := {ğŸ­}â¦ˆ)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso_set_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) = order (Gâ¦‡carrier := {ğŸ­}â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>iso_order_closed</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"order (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>order_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) = {ğŸ­<span class="hidden">â‡˜</span><sub>Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)<span class="hidden">â‡™</span></sub>}"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.order_one_triv_iff</span><span> </span><span>KGsiKGigroup</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>fstgoal</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"K âˆ© ğ”Š ! i âŠ² Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finGSi</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"K âˆ© ğ”Š ! i = carrier (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal.fact_group_trivial_iff</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(remdups_adj (map ((âˆ©) K) ğ”Š)) ! j = (remdups_adj (map ((âˆ©) K) ğ”Š)) ! (j + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>j</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>remdups_adj_adjacent</span><span> </span><span>KGnotempty</span><span> </span><span>Suc_eq_plus1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := remdups_adj (map ((âˆ©) K) ğ”Š) ! Suc jâ¦ˆ Mod remdups_adj (map ((âˆ©) K) ğ”Š) ! j)"</span></span></span><span class="keyword1"><span class="command">..</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i &lt;#&gt; K âˆ© ğ”Š ! Suc i = ğ”Š ! Suc i"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i)) (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i)"</span></span></span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï†' âˆˆ iso (Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i) (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i))"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>KGsiKGigroup</span><span> </span><span>group.iso_set_sym</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>Gisimple</span><span> </span><span>KGsiKGigroup</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := K âˆ© ğ”Š ! (i + 1)â¦ˆ Mod (K âˆ© ğ”Š ! i))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>simple_group.iso_simple</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := remdups_adj (map ((âˆ©) K) ğ”Š) ! Suc jâ¦ˆ Mod remdups_adj (map ((âˆ©) K) ğ”Š) ! j)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>composition_series_extend</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series (Gâ¦‡carrier := Hâ¦ˆ) â„Œ"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod H)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"H âŠ² G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series G (â„Œ @ [carrier G])"</span></span></span><span>
</span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>composition_series_def</span><span> </span><span>composition_series_axioms_def</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>compâ„Œ</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span class="string"><span class="delete"><span class="delete">"Gâ¦‡carrier := Hâ¦ˆ"</span></span></span><span> </span><span>â„Œ</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"normal_series G (â„Œ @ [carrier G])"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span>assms</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>compâ„Œ.is_normal_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normal_series_extend</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>  </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i &lt; length â„Œ"</span></span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := (â„Œ @ [carrier G]) ! Suc iâ¦ˆ Mod (â„Œ @ [carrier G]) ! i)"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"i = length â„Œ - 1"</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! Suc i = carrier G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>i</span><span> </span><span>diff_Suc_1</span><span> </span><span>lessE</span><span> </span><span>nth_append_length</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i = â„Œ ! i"</span></span></span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>butlast_snoc</span><span> </span><span>i</span><span> </span><span>nth_butlast</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i = H"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>True</span><span> </span><span>last_conv_nth</span><span> </span><span>compâ„Œ.notempty</span><span> </span><span>compâ„Œ.last</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc i &lt; length â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! Suc i = â„Œ ! Suc i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nth_append</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(â„Œ @ [carrier G]) ! i = â„Œ ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nth_append</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Suc i &lt; length â„Œâ€º</span></span></span><span> </span><span>compâ„Œ.simplefact</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>composition_series</span><span class="delimiter">)</span><span> </span><span>entries_mono</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i â‰¤ j"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"j &lt; length ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! j"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span class="string"><span class="delete"><span class="delete">"j - i"</span></span></span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>i</span><span> </span><span>j</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>0</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i = j"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! j"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Suc</span><span> </span><span>k</span><span> </span><span>i</span><span> </span><span>j</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>i'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + (Suc k) = j"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ij</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 â‰¤ j"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span> </span><span>normal</span><span> </span><span>normal_imp_subgroup</span><span> </span><span>subgroup.subset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>  </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"j - (i + 1) = k"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"j &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Suc</span><span> </span><span>assms</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (i + 1) âŠ† ğ”Š ! j"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Suc</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>ij</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! i âŠ† ğ”Š ! j"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="GroupIsoClasses">
<div class="head"><h1>Theory GroupIsoClasses</h1>
<span class="command">theory</span> <span class="name">GroupIsoClasses</span><br/>
<span class="keyword">imports</span> <a href="../../HOL/HOL-Algebra/Coset.html"><span class="name">Coset</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      Isomorphism Classes of Groups
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>GroupIsoClasses</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"HOL-Algebra.Coset"</span></span></span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Isomorphism Classes of Groupsâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹We construct a quotient type for isomorphism classes of groups.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">typedef</span></span><span> </span><span class="tfree">'a</span><span> </span><span>group</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"{G :: 'a monoid. group G}"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€a. â¦‡carrier = {a}, mult = (Î»x y. x), one = aâ¦ˆ âˆˆ {G. group G}"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_def</span><span> </span><span>group_axioms_def</span><span> </span><span>monoid_def</span><span> </span><span>Units_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>group_iso_rel</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'a group â‡’ 'a group â‡’ bool"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel G H = (âˆƒÏ†. Ï† âˆˆ iso (Rep_group G) (Rep_group H))"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">quotient_type</span></span><span> </span><span class="tfree">'a</span><span> </span><span>group_iso_class</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">"'a group"</span></span></span><span> </span><span class="delimiter">/</span><span> </span><span>group_iso_rel</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">morphisms</span></span><span> </span><span>Rep_group_iso</span><span> </span><span>Abs_group_iso</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>equivpI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"reflp group_iso_rel"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>reflpI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>G</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'b group"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel G G"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso_set_refl</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"symp group_iso_rel"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>sympI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>G</span><span> </span><span>H</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'b group"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel G H"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Rep_group G) (Rep_group H)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†'</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï†' âˆˆ iso (Rep_group H) (Rep_group G)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.iso_sym</span><span> </span><span>Rep_group</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.iso_set_sym</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel H G"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"transp group_iso_rel"</span></span></span><span> 
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>transpI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>G</span><span> </span><span>H</span><span> </span><span>I</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'b group"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel G H"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel H I"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†</span><span> </span><span>Ïˆ</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (Rep_group G) (Rep_group H)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ïˆ âˆˆ iso (Rep_group H) (Rep_group I)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï€</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï€ âˆˆ iso (Rep_group G) (Rep_group I)"</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>iso_set_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group_iso_rel G I"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹This assigns to a given group the group isomorphism classâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>group</span><span class="delimiter">)</span><span> </span><span>iso_class</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">"'a group_iso_class"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"iso_class = Abs_group_iso (Abs_group (monoid.truncate G))"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Two isomorphic groups do indeed have the same isomorphism class:â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>iso_classes_iff</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group H"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(âˆƒÏ†. Ï† âˆˆ iso G H) = (group.iso_class G = group.iso_class H)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>assms</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>groups</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"group (monoid.truncate G)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group (monoid.truncate H)"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>monoid.truncate_def</span><span> </span><span>group_def</span><span> </span><span>group_axioms_def</span><span> </span><span>Units_def</span><span> </span><span>monoid_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(âˆƒÏ†. Ï† âˆˆ iso G H) = (âˆƒÏ†. Ï† âˆˆ iso (monoid.truncate G) (monoid.truncate H))"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>iso_def</span><span> </span><span>hom_def</span><span> </span><span>monoid.truncate_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = group_iso_rel (Abs_group (monoid.truncate G)) (Abs_group (monoid.truncate H))"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>group_iso_rel_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>groups</span><span> </span><span>group.Abs_group_inverse</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>mem_Collect_eq</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = (group.iso_class G = group.iso_class H)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.iso_class_def</span><span> </span><span>assms</span><span> </span><span>group_iso_class.abs_eq_iff</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div><div id="JordanHolder">
<div class="head"><h1>Theory JordanHolder</h1>
<span class="command">theory</span> <span class="name">JordanHolder</span><br/>
<span class="keyword">imports</span> <a href="CompositionSeries.html"><span class="name">CompositionSeries</span></a> <a href="GroupIsoClasses.html"><span class="name">GroupIsoClasses</span></a><br/>
</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*  Title:      The Jordan-HÃ¶lder Theorem
    Author:     Jakob von Raumer, Karlsruhe Institute of Technology
    Maintainer: Jakob von Raumer &lt;jakob.raumer@student.kit.edu&gt;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>JordanHolder</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span>
</span><span>  </span><span>CompositionSeries</span><span>
</span><span>  </span><span>MaximalNormalSubgroups</span><span>
</span><span>  </span><span class="string"><span class="delete"><span class="delete">"HOL-Library.Multiset"</span></span></span><span>
</span><span>  </span><span>GroupIsoClasses</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The Jordan-H\"older Theoremâ€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>jordan_hoelder</span><span> </span><span class="delimiter">=</span><span> </span><span>group</span><span>
</span><span>  </span><span class="delimiter">+</span><span> </span><span>compâ„Œ</span><span class="delimiter">?</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>G</span><span> </span><span>â„Œ</span><span>
</span><span>  </span><span class="delimiter">+</span><span> </span><span>compğ”Š</span><span class="delimiter">?</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>G</span><span> </span><span>ğ”Š</span><span> </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>â„Œ</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>ğ”Š</span><span>
</span><span>  </span><span class="delimiter">+</span><span> </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>finite</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹Before we finally start the actual proof of the theorem, one last lemma: Cancelling
  the last entry of a normal series results in a normal series with quotients being all but the last
  of the original ones.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>normal_series</span><span class="delimiter">)</span><span> </span><span>quotients_butlast</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š &gt; 1"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"butlast quotients = normal_series.quotients (Gâ¦‡carrier := ğ”Š ! (length ğ”Š - 1 - 1)â¦ˆ) (take (length ğ”Š - 1) ğ”Š)"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>nth_equalityI</span><span> </span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n = length ğ”Š - 1"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n = length (take n ğ”Š)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n &lt; length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span> </span><span>notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>normalğ”Šbutlast</span><span class="delimiter">:</span><span> </span><span>normal_series</span><span> </span><span class="string"><span class="delete"><span class="delete">"(Gâ¦‡carrier := ğ”Š ! (n - 1)â¦ˆ)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"take n ğ”Š"</span></span></span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>normal_series_prefix_closed</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n &gt; 0â€º</span></span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n &lt; length ğ”Šâ€º</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (butlast quotients) = length quotients - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_butlast</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length ğ”Š - 1 - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_diff_cancel_right'</span><span> </span><span>quotients_length</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length (take n ğ”Š) - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n = length (take n ğ”Š)â€º</span></span></span><span> </span><span>n_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length normalğ”Šbutlast.quotients"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>normalğ”Šbutlast.quotients_length</span><span> </span><span>diff_add_inverse2</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (butlast quotients) = length normalğ”Šbutlast.quotients"</span></span></span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"âˆ€i&lt;length (butlast quotients). butlast quotients ! i = normalğ”Šbutlast.quotients ! i"</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>i</span><span>
</span><span>    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i &lt; length quotients - Suc 0"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>i'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i &lt; length ğ”Š - 1"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i &lt; n"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; n"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>quotients_length</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"butlast quotients ! i = quotients ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>One_nat_def</span><span> </span><span>length_butlast</span><span> </span><span>nth_butlast</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = Gâ¦‡carrier := ğ”Š ! (i + 1)â¦ˆ Mod ğ”Š ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>quotients_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = Gâ¦‡carrier := (take n ğ”Š) ! (i + 1)â¦ˆ Mod (take n ğ”Š) ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">,</span><span>3</span><span class="delimiter">)</span><span> </span><span>nth_take</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = normalğ”Šbutlast.quotients ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>normalğ”Šbutlast.quotients_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>i'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>    </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"butlast (normal_series.quotients G ğ”Š) ! i = normal_series.quotients (Gâ¦‡carrier := ğ”Š ! (n - Suc 0)â¦ˆ) (take n ğ”Š) ! i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â‹€i. i &lt; length (butlast quotients) 
            âŸ¹ butlast quotients ! i
              = normal_series.quotients (Gâ¦‡carrier := ğ”Š ! (length ğ”Š - 1 - 1)â¦ˆ)  (take (length ğ”Š - 1) ğ”Š) ! i"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹The main part of the Jordan HÃ¶lder theorem is its statement about the uniqueness of 
  a composition series. Here, uniqueness up to reordering and isomorphism is modelled by stating
  that the multisets of isomorphism classes of all quotients are equal.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>jordan_hoelder_multisets</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"group G"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"finite (carrier G)"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series G ğ”Š"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series G â„Œ"</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class (normal_series.quotients G ğ”Š))
    = mset (map group.iso_class (normal_series.quotients G â„Œ))"</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>assms</span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induction</span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š"</span></span></span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>ğ”Š</span><span> </span><span>â„Œ</span><span> </span><span>G</span><span> </span><span>rule</span><span class="delimiter">:</span><span> </span><span>full_nat_induct</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>1</span><span> </span><span>ğ”Š</span><span> </span><span>â„Œ</span><span> </span><span>G</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>compğ”Š</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>G</span><span> </span><span>ğ”Š</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>1</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>compâ„Œ</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>G</span><span> </span><span>â„Œ</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>1</span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpG</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span>G</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š â‰¤ 2"</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 0 âˆ¨ length ğ”Š = 1 âˆ¨ length ğ”Š = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>compğ”Š.notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1 âˆ¨ length ğ”Š = 2"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span> </span><span>del</span><span class="delimiter">:</span><span> </span><span>mset_map</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="comment">â€• â€¹First trivial case: @{text ğ”Š} is the trivial group.â€º</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = Suc 0"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>length</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length [] + 1 = length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>charğ”Š</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.composition_series_length_one</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G = {ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.composition_series_triv_group</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>length</span><span> </span><span>charğ”Š</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.composition_series_triv_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="comment">â€• â€¹Second trivial case: @{text ğ”Š} is simple.â€º</span><span>
</span><span>      </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = 2"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ğ”Šchar</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š = [{ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}, carrier G]"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.length_two_unique</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>simple</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group G"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.composition_series_simple_group</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ = [{ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}, carrier G]"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.composition_series_simple_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>ğ”Šchar</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š = â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword3"><span class="command">thus</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span>
</span><span>    </span><span class="comment">â€• â€¹Non-trivial case: @{text ğ”Š} has length at least 3.â€º</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>length</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š â‰¥ 3"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="comment">â€• â€¹First we show that @{text â„Œ} must have a length of at least 3.â€º</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ simple_group G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.composition_series_simple_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ â‰  [{ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}, carrier G]"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.composition_series_simple_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length â„Œ â‰  2"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.length_two_unique</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier G â‰  {ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.composition_series_length_one</span><span> </span><span>compğ”Š.composition_series_triv_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length â„Œ â‰  1"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.composition_series_length_one</span><span> </span><span>compâ„Œ.composition_series_triv_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>compâ„Œ.notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length â„Œ â‰  0"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lengthâ„Œbig</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length â„Œ â‰¥ 3"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>arith</span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>m</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m = length â„Œ - 1"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>n</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n = length ğ”Š - 1"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>lengthâ„Œbig</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>m'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"m &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m &lt; length â„Œ"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(m - 1) + 1 &lt; length â„Œ"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m - 1 = length â„Œ - 2"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m - 1 + 1 = length â„Œ - 1"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m - 1 &lt; length â„Œ"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>n'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"n &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n &lt; length ğ”Š"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"(n - 1) + 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n - 1 &lt; length ğ”Š"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc n â‰¤ length ğ”Š"</span></span></span><span>
</span><span>     </span><span class="string"><span class="delete"><span class="delete">"n - 1 = length ğ”Š - 2"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n - 1 + 1 = length ğ”Š - 1"</span></span></span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>ğ”ŠPn</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”ŠPn = Gâ¦‡carrier := ğ”Š ! (n - 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>â„ŒPm</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„ŒPm = Gâ¦‡carrier := â„Œ ! (m - 1)â¦ˆ"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpğ”ŠPn</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span>ğ”ŠPn</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>n'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.normal_series_subgroups</span><span> </span><span>compğ”Š.subgroup_imp_group</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpâ„ŒPm</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span>â„ŒPm</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>m'</span><span> </span><span>compâ„Œ.normal_series_subgroups</span><span> </span><span>1</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>group.subgroup_imp_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finGbl</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier ğ”ŠPn)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹n - 1 &lt; length ğ”Šâ€º</span></span></span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.normal_series_subgroups</span><span> </span><span>compğ”Š.subgroup_finite</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finHbl</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier â„ŒPm)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹m - 1 &lt; length â„Œâ€º</span></span></span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.normal_series_subgroups</span><span> </span><span>compğ”Š.subgroup_finite</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>quotsğ”Šnotempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"compğ”Š.quotients â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.quotients_length</span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>quotsâ„Œnotempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"compâ„Œ.quotients â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.quotients_length</span><span> </span><span>lengthâ„Œbig</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    
</span><span>    </span><span class="comment">â€• â€¹Instantiate truncated composition series since they are used for both casesâ€º</span><span>
</span><span>    </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>â„Œbutlast</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>â„ŒPm</span><span> </span><span class="string"><span class="delete"><span class="delete">"take m â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.composition_series_prefix_closed</span><span> </span><span>m'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”Šbutlast</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>ğ”ŠPn</span><span> </span><span class="string"><span class="delete"><span class="delete">"take n ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.composition_series_prefix_closed</span><span> </span><span>n'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">,</span><span>2</span><span class="delimiter">)</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ltaken</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"n = length (take n ğ”Š)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>length_take</span><span> </span><span>n'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ltakem</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"m = length (take m â„Œ)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>length_take</span><span> </span><span>m'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>    </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1)  = ğ”Š ! (n - 1)"</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="comment">â€• â€¹If @{term "â„Œ ! (l - 1) = ğ”Š ! 1"}, everything is simple...â€º</span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>True</span><span>
</span><span>      </span><span class="comment">â€• â€¹The last quotients of @{term ğ”Š} and @{term â„Œ} are equal.â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lasteq</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"last compğ”Š.quotients = last compâ„Œ.quotients"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lg</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ”Š - 1 - 1 + 1 = length ğ”Š - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_diff_1</span><span> </span><span>Suc_eq_plus1</span><span> </span><span>n'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>n_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>lengthâ„Œbig</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>lh</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length â„Œ - 1 - 1 + 1 = length â„Œ - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_diff_1</span><span> </span><span>Suc_eq_plus1</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹0 &lt; mâ€º</span></span></span><span> </span><span>m_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"last compğ”Š.quotients =  G Mod ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>length</span><span> </span><span>compğ”Š.last_quotient</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = G Mod â„Œ ! (m - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>True</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = last compâ„Œ.quotients"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthâ„Œbig</span><span> </span><span>compâ„Œ.last_quotient</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>ltaken</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ind</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class ğ”Šbutlast.quotients) = mset (map group.iso_class â„Œbutlast.quotients)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>1</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span>True</span><span> </span><span>n'</span><span class="delimiter">(</span><span>5</span><span class="delimiter">)</span><span> </span><span>grpğ”ŠPn.is_group</span><span> </span><span>finGbl</span><span> </span><span>ğ”Šbutlast.is_composition_series</span><span> </span><span>â„Œbutlast.is_composition_series</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class compğ”Š.quotients)
                    = mset (map group.iso_class (butlast compğ”Š.quotients @ [last compğ”Š.quotients]))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>quotsğ”Šnotempty</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class (ğ”Šbutlast.quotients @ [last (compğ”Š.quotients)]))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.quotients_butlast</span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset ((map group.iso_class ğ”Šbutlast.quotients) @ [group.iso_class (last (compğ”Š.quotients))])"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ğ”Šbutlast.quotients) + {# group.iso_class (last (compğ”Š.quotients)) #}"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class â„Œbutlast.quotients) + {# group.iso_class (last (compğ”Š.quotients)) #}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ind</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class â„Œbutlast.quotients) + {# group.iso_class (last (compâ„Œ.quotients)) #}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lasteq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset ((map group.iso_class â„Œbutlast.quotients) @ [group.iso_class (last (compâ„Œ.quotients))])"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class (â„Œbutlast.quotients @ [last (compâ„Œ.quotients)]))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class (butlast compâ„Œ.quotients @ [last compâ„Œ.quotients]))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthâ„Œbig</span><span> </span><span>compâ„Œ.quotients_butlast</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class compâ„Œ.quotients)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>append_butlast_last_id</span><span> </span><span>quotsâ„Œnotempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>False</span><span> 
</span><span>      </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>â„ŒPmIntğ”ŠPn</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„ŒPmIntğ”ŠPn = Gâ¦‡carrier := â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)â¦ˆ"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”ŠPnmax</span><span class="delimiter">:</span><span> </span><span>max_normal_subgroup</span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1)"</span></span></span><span> </span><span>G</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_lessD1</span><span> </span><span>diff_diff_add</span><span> </span><span>n'</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>add.commute</span><span> </span><span>one_add_one</span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>compğ”Š.snd_to_last_max_normal</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>â„ŒPmmax</span><span class="delimiter">:</span><span> </span><span>max_normal_subgroup</span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1)"</span></span></span><span> </span><span>G</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>add_lessD1</span><span> </span><span>diff_diff_add</span><span> </span><span>m'</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>add.commute</span><span> </span><span>one_add_one</span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>compâ„Œ.snd_to_last_max_normal</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>â„ŒPmnormG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.normal_series_snd_to_last</span><span> </span><span>m'</span><span class="delimiter">(</span><span>4</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ğ”ŠPnnormG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1) âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.normal_series_snd_to_last</span><span> </span><span>n'</span><span class="delimiter">(</span><span>6</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>â„ŒPmintğ”ŠPnnormG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1) âŠ² G"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„ŒPmnormG</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>compğ”Š.normal_subgroup_intersect</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Intnormğ”ŠPn</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1) âŠ² ğ”ŠPn"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>Int_lower2</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.normal_restrict_supergroup</span><span> </span><span>compğ”Š.normal_series_subgroups</span><span> </span><span>compğ”Š.normal_subgroup_intersect</span><span> </span><span>n'</span><span class="delimiter">(</span><span>4</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpğ”ŠPnModâ„ŒPmintğ”ŠPn</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”ŠPn Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Intnormâ„ŒPm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1) âŠ² â„ŒPm"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„ŒPmnormG</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>Int_lower2</span><span> </span><span>Int_commute</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.normal_restrict_supergroup</span><span> </span><span>compğ”Š.normal_subgroup_intersect</span><span> </span><span>compâ„Œ.normal_series_subgroups</span><span> </span><span>m'</span><span class="delimiter">(</span><span>6</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpâ„ŒPmModâ„ŒPmintğ”ŠPn</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"â„ŒPm Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>
</span><span>      </span><span class="comment">â€• â€¹Show that the second to last entries are not contained in each other.â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>notâ„ŒPmSubğ”ŠPn</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Â¬ (â„Œ ! (m - 1) âŠ† ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„ŒPmmax.max_normal</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>False</span><span class="delimiter">[</span><span>symmetric</span><span class="delimiter">]</span><span> </span><span>ğ”ŠPnmax.proper</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>notğ”ŠPnSubâ„ŒPm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Â¬ (ğ”Š ! (n - 1) âŠ† â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”ŠPnmax.max_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>False</span><span> </span><span>â„ŒPmmax.proper</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      
</span><span>      </span><span class="comment">â€• â€¹Show that @{term "G Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1))"} is a simple group.â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>â„ŒPmSubSetmult</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âŠ† â„Œ ! (m - 1) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> ğ”Š ! (n - 1)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.H_contained_in_set_mult</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ğ”ŠPnSubSetmult</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1) âŠ† â„Œ ! (m - 1) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> ğ”Š ! (n - 1)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.S_contained_in_set_mult</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1) â‰  (â„Œ ! (m - 1)) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„ŒPmSubSetmult</span><span> </span><span>notâ„ŒPmSubğ”ŠPn</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>set_multG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(â„Œ ! (m - 1)) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (ğ”Š ! (n - 1)) = carrier G"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”ŠPnmax.max_normal</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>compğ”Š.normal_subgroup_set_mult_closed</span><span> </span><span>ğ”ŠPnSubSetmult</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (ğ”ŠPn Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1))) (Gâ¦‡carrier := carrier Gâ¦ˆ Mod â„Œ ! (m - 1))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.normal_intersection_quotient_isom</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Ï†</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï† âˆˆ iso (ğ”ŠPn Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1))) (G Mod â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ï†2</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>Ï†2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ï†2 âˆˆ iso (G Mod â„Œ ! (m - 1)) (ğ”ŠPn Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.iso_set_sym</span><span> </span><span>grpğ”ŠPnModâ„ŒPmintğ”ŠPn.is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := â„Œ ! (m - 1 + 1)â¦ˆ Mod â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.simplefact</span><span> </span><span>m'</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.last</span><span> </span><span>last_conv_nth</span><span> </span><span>compâ„Œ.notempty</span><span> </span><span>m'</span><span class="delimiter">(</span><span>5</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>simpleğ”ŠPnModInt</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (ğ”ŠPn Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simple_group.iso_simple</span><span> </span><span>grpğ”ŠPnModâ„ŒPmintğ”ŠPn.is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpGModâ„ŒPm</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"(G Mod â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>
</span><span>      </span><span class="comment">â€• â€¹Show analogues of the previous statements for @{term "â„Œ ! (m - 1)"} instead of @{term "ğ”Š ! (n - 1)"}.â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>â„ŒPmSubSetmult'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âŠ† ğ”Š ! (n - 1) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> â„Œ ! (m - 1)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.S_contained_in_set_mult</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ğ”ŠPnSubSetmult'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1) âŠ† ğ”Š ! (n - 1) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> â„Œ ! (m - 1)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.H_contained_in_set_mult</span><span> </span><span>ğ”ŠPnmax.is_normal</span><span> </span><span>â„ŒPmnormG</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) â‰  (ğ”Š ! (n - 1)) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (â„Œ ! (m - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”ŠPnSubSetmult'</span><span> </span><span>notğ”ŠPnSubâ„ŒPm</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>set_multG</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(ğ”Š ! (n - 1)) &lt;#&gt;<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub> (â„Œ ! (m - 1)) = carrier G"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„ŒPmmax.max_normal</span><span> </span><span>â„ŒPmmax.is_normal</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>compğ”Š.normal_subgroup_set_mult_closed</span><span> </span><span>â„ŒPmSubSetmult'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>set_multG</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ïˆ</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> 
</span><span>            </span><span class="string"><span class="delete"><span class="delete">"Ïˆ âˆˆ iso (â„ŒPm Mod (ğ”Š ! (n - 1) âˆ© â„Œ ! (m - 1))) (Gâ¦‡carrier := carrier Gâ¦ˆ Mod ğ”Š ! (n - 1))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>second_isomorphism_grp.normal_intersection_quotient_isom</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>â„ŒPmmax.is_normal</span><span> </span><span>normal_imp_subgroup</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>second_isomorphism_grp_def</span><span> </span><span>second_isomorphism_grp_axioms_def</span><span> </span><span>max_normal_subgroup_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>Ïˆ</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ïˆ âˆˆ iso (â„ŒPm Mod (â„Œ ! (m - 1) âˆ© (ğ”Š ! (n - 1)))) (Gâ¦‡carrier := carrier Gâ¦ˆ Mod ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Int_commute</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>Ïˆ2</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>             </span><span>Ïˆ2</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"Ïˆ2 âˆˆ iso (G Mod ğ”Š ! (n - 1)) (â„ŒPm Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>group.iso_set_sym</span><span> </span><span>grpâ„ŒPmModâ„ŒPmintğ”ŠPn.is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (Gâ¦‡carrier := ğ”Š ! (n - 1 + 1)â¦ˆ Mod ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.simplefact</span><span> </span><span>n'</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"simple_group (G Mod ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.last</span><span> </span><span>last_conv_nth</span><span> </span><span>compğ”Š.notempty</span><span> </span><span>n'</span><span class="delimiter">(</span><span>7</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>simpleâ„ŒPmModInt</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"simple_group (â„ŒPm Mod (â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)))"</span></span></span><span> 
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>simple_group.iso_simple</span><span> </span><span>grpâ„ŒPmModâ„ŒPmintğ”ŠPn.is_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>grpGModğ”ŠPn</span><span class="delimiter">:</span><span> </span><span>group</span><span> </span><span class="string"><span class="delete"><span class="delete">"(G Mod ğ”Š ! (n - 1))"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span>normal.factorgroup_is_group</span><span class="delimiter">)</span><span>
</span><span>      
</span><span>      </span><span class="comment">â€• â€¹Instantiate several composition series used to build up the equality of quotient multisets.â€º</span><span>
</span><span>      </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>ğ”</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” = remdups_adj (map ((âˆ©) (â„Œ ! (m - 1))) ğ”Š)"</span></span></span><span>
</span><span>      </span><span class="keyword3"><span class="command">define</span></span><span> </span><span>ğ”</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” = remdups_adj (map ((âˆ©) (ğ”Š ! (n - 1))) â„Œ)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>â„ŒPm</span><span> </span><span>ğ”</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.intersect_normal</span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>â„ŒPmnormG</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>ğ”ŠPn</span><span> </span><span>ğ”</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.intersect_normal</span><span> </span><span>1</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span> </span><span>ğ”ŠPnnormG</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span>
</span><span>      </span><span class="comment">â€• â€¹Apply the induction hypothesis on @{text ğ”Šbutlast} and @{text ğ”}â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>n'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc (length (take n ğ”Š)) â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>multisetsğ”Šbutlastğ”</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class ğ”Šbutlast.quotients) = mset (map group.iso_class ğ”.quotients)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"1.hyps"</span></span></span><span> </span><span>grpğ”ŠPn.is_group</span><span> </span><span>finGbl</span><span> </span><span>ğ”Šbutlast.is_composition_series</span><span> </span><span>ğ”.is_composition_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>lengthğ”</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"n = length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”Šbutlast.quotients_length</span><span> </span><span>ğ”.quotients_length</span><span> </span><span>length_map</span><span> </span><span>size_mset</span><span> </span><span>ltaken</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>lengthğ”'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ” &gt; 1"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 â‰¤ length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>n'</span><span class="delimiter">(</span><span>6</span><span class="delimiter">)</span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Inteqğ”sndlast</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1) = ğ” ! (length ğ” - 1 - 1)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 - 1 + 1 &lt; length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>KGnotempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(map ((âˆ©) (ğ”Š ! (n - 1))) â„Œ) â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Nil_is_map_conv</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>i</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length (map ((âˆ©) (ğ”Š ! (n - 1))) â„Œ)"</span></span></span><span>
</span><span>          </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1) = (map ((âˆ©) (ğ”Š ! (n - 1))) â„Œ) ! i"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1 + 1) = (map ((âˆ©) (ğ”Š ! (n - 1))) â„Œ) ! (i + 1)"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>remdups_adj_obtain_adjacency</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1) = â„Œ ! i âˆ© ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1 + 1) = â„Œ ! (i + 1) âˆ© ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1) = â„Œ ! (i + 1) âˆ© ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_diff_1</span><span> </span><span>Suc_eq_plus1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ğ”ŠPnsubâ„ŒPm</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”Š ! (n - 1) âŠ† â„Œ ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”.last</span><span> </span><span>ğ”.notempty</span><span> </span><span>last_conv_nth</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; m + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ (i + 1 â‰¤ m - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.entries_mono</span><span> </span><span>m'</span><span class="delimiter">(</span><span>6</span><span class="delimiter">)</span><span> </span><span>notğ”ŠPnSubâ„ŒPm</span><span> </span><span>ğ”ŠPnsubâ„ŒPm</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"m - 1 = i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>ğ”sndlast</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„ŒPmIntğ”ŠPn = (ğ”ŠPnâ¦‡carrier := ğ” ! (length ğ” - 1 - 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”butlast</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>â„ŒPmIntğ”ŠPn</span><span> </span><span class="string"><span class="delete"><span class="delete">"take (length ğ” - 1) ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span> </span><span>ğ”.composition_series_prefix_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹length ğ” &gt; 1â€º</span></span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>quotsğ”notemtpy</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”.quotients â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”.quotients_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span>      </span><span class="comment">â€• â€¹Apply the induction hypothesis on @{text ğ”butlast} and @{text ğ”butlast}â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” &gt; 1"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ccontr</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ length ğ” &gt; 1"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>ğ”.notempty</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” = 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>One_nat_def</span><span> </span><span>Suc_lessI</span><span> </span><span>length_greater_0_conv</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier â„ŒPm = {ğŸ­<span class="hidden">â‡˜</span><sub>â„ŒPm<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”.composition_series_length_one</span><span> </span><span>ğ”.composition_series_triv_group</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier â„ŒPm = {ğŸ­<span class="hidden">â‡˜</span><sub>G<span class="hidden">â‡™</span></sub>}"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"carrier â„ŒPm âŠ† ğ”Š ! (n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”ŠPnmax.is_subgroup</span><span> </span><span>subgroup.one_closed</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>notâ„ŒPmSubğ”ŠPn</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>lengthğ”'</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 â‰¤ length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>Inteqğ”sndlast</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1) = ğ” ! (length ğ” - 1 - 1)"</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 - 1 + 1 &lt; length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>KGnotempty</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"(map ((âˆ©) (â„Œ ! (m - 1))) ğ”Š) â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.notempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Nil_is_map_conv</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>i</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>i</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; length (map ((âˆ©) (â„Œ ! (m - 1))) ğ”Š)"</span></span></span><span>
</span><span>          </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1) = (map ((âˆ©) (â„Œ ! (m - 1))) ğ”Š) ! i"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1 + 1) = (map ((âˆ©) (â„Œ ! (m - 1))) ğ”Š) ! (i + 1)"</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>remdups_adj_obtain_adjacency</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>force</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1) = ğ”Š ! i âˆ© â„Œ ! (m - 1)"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1 - 1 + 1) = ğ”Š ! (i + 1) âˆ© â„Œ ! (m - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"ğ” ! (length ğ” - 1) = ğ”Š ! (i + 1) âˆ© â„Œ ! (m - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_diff_1</span><span> </span><span>Suc_eq_plus1</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>â„ŒPmsubğ”ŠPn</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„Œ ! (m - 1) âŠ† ğ”Š ! (i + 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”.last</span><span> </span><span>ğ”.notempty</span><span> </span><span>last_conv_nth</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>i</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"i + 1 &lt; n + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Â¬ (i + 1 â‰¤ n - 1)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.entries_mono</span><span> </span><span>n'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span>notâ„ŒPmSubğ”ŠPn</span><span> </span><span>â„ŒPmsubğ”ŠPn</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>        </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"n - 1 = i"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>i</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"composition_series (Gâ¦‡carrier := ğ” ! (length ğ” - 1 - 1)â¦ˆ) (take (length ğ” - 1) ğ”)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”'</span><span> </span><span>ğ”.composition_series_prefix_closed</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”butlast</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>â„ŒPmIntğ”ŠPn</span><span> </span><span class="string"><span class="delete"><span class="delete">"(take (length ğ” - 1) ğ”)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Inteqğ”sndlast</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>finGbl</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>finInt</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"finite (carrier â„ŒPmIntğ”ŠPn)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">moreover</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc (length (take (length ğ” - 1) ğ”)) â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>n'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">ultimately</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>multisetsğ”ğ”butlast</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class ğ”butlast.quotients) = mset (map group.iso_class ğ”butlast.quotients)"</span></span></span><span>
</span><span>         </span><span class="keyword1"><span class="command">using</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"1.hyps"</span></span></span><span> </span><span>ğ”butlast.is_group</span><span> </span><span>ğ”butlast.is_composition_series</span><span> </span><span>ğ”butlast.is_composition_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (take (length ğ” - 1) ğ”) = length (take (length ğ” - 1) ğ”)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”butlast.quotients_length</span><span> </span><span>ğ”butlast.quotients_length</span><span> </span><span>length_map</span><span> </span><span>size_mset</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length (take (length ğ” - 1) ğ”) = n - 1"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lengthğ”</span><span> </span><span>n'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>lengthğ”</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"length ğ” = n"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>Suc_diff_1</span><span> </span><span>ğ”.notempty</span><span> </span><span>butlast_conv_take</span><span> </span><span>length_butlast</span><span> </span><span>length_greater_0_conv</span><span> </span><span>n'</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>      
</span><span>      </span><span class="comment">â€• â€¹Apply the induction hypothesis on @{text ğ”} and @{text â„Œbutlast}â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>Inteqğ”sndlast</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>ğ”sndlast</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"â„ŒPmIntğ”ŠPn = (â„ŒPmâ¦‡carrier := ğ” ! (length ğ” - 1 - 1)â¦ˆ)"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span>ğ”_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>lengthğ”</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"Suc (length ğ”) â‰¤ length ğ”Š"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>n'</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>multisetsâ„Œbutlastğ”</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class â„Œbutlast.quotients) = mset (map group.iso_class ğ”.quotients)"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"1.hyps"</span></span></span><span> </span><span>grpâ„ŒPm.is_group</span><span> </span><span>finHbl</span><span> </span><span>â„Œbutlast.is_composition_series</span><span> </span><span>ğ”.is_composition_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>lengthğ”</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"m = length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>â„Œbutlast.quotients_length</span><span> </span><span>ğ”.quotients_length</span><span> </span><span>length_map</span><span> </span><span>size_mset</span><span> </span><span>ltakem</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">"length ğ” &gt; 1"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 &gt; 0"</span></span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ” - 1 â‰¤ length ğ”"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>m'</span><span class="delimiter">(</span><span>4</span><span class="delimiter">)</span><span> </span><span>lengthâ„Œbig</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">hence</span></span><span> </span><span>quotsğ”notemtpy</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">"ğ”.quotients â‰  []"</span></span></span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”.quotients_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”butlastaddğ”ŠPn</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>ğ”ŠPn</span><span> </span><span class="string"><span class="delete"><span class="delete">"(take (length ğ” - 1) ğ”) @ [ğ”Š ! (n - 1)]"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>grpğ”ŠPn.composition_series_extend</span><span> </span><span>ğ”butlast.is_composition_series</span><span> </span><span>simpleğ”ŠPnModInt</span><span> </span><span>Intnormğ”ŠPn</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>ğ”ŠPn_def</span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">interpret</span></span><span> </span><span>ğ”butlastaddâ„ŒPm</span><span class="delimiter">:</span><span> </span><span>composition_series</span><span> </span><span>â„ŒPm</span><span> </span><span class="string"><span class="delete"><span class="delete">"(take (length ğ” - 1) ğ”) @ [â„Œ ! (m - 1)]"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>grpâ„ŒPm.composition_series_extend</span><span> </span><span>ğ”butlast.is_composition_series</span><span> </span><span>simpleâ„ŒPmModInt</span><span> </span><span>Intnormâ„ŒPm</span><span>
</span><span>        </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>â„ŒPm_def</span><span> </span><span>â„ŒPmIntğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      
</span><span>      </span><span class="comment">â€• â€¹Prove equality of those composition series.â€º</span><span>
</span><span>      </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"mset (map group.iso_class compğ”Š.quotients)
                    = mset (map group.iso_class ((butlast compğ”Š.quotients) @ [last compğ”Š.quotients]))"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>quotsğ”Šnotempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class (ğ”Šbutlast.quotients @ [G Mod ğ”Š ! (n - 1)]))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compğ”Š.quotients_butlast</span><span> </span><span>compğ”Š.last_quotient</span><span> </span><span>length</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span>ğ”ŠPn_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ((butlast ğ”.quotients) @ [last ğ”.quotients])) + {# group.iso_class (G Mod ğ”Š ! (n - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>multisetsğ”Šbutlastğ”</span><span> </span><span>quotsğ”notemtpy</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class (ğ”butlast.quotients @ [ğ”ŠPn Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)])) + {# group.iso_class (G Mod ğ”Š ! (n - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”.quotients_butlast</span><span> </span><span>ğ”.last_quotient</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹length ğ” &gt; 1â€º</span></span></span><span> </span><span>ğ”sndlast</span><span> </span><span>Inteqğ”sndlast</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>n_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ğ”butlast.quotients) + {# group.iso_class (ğ”ŠPn Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)) #} + {# group.iso_class (G Mod ğ”Š ! (n - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>multisetsğ”ğ”butlast</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ğ”butlast.quotients) + {# group.iso_class (G Mod â„Œ ! (m - 1)) #} + {# group.iso_class (â„ŒPm Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Ï†</span><span> </span><span>Ïˆ2</span><span> </span><span>iso_classes_iff</span><span> </span><span>grpğ”ŠPnModâ„ŒPmintğ”ŠPn.is_group</span><span> </span><span>grpGModâ„ŒPm.is_group</span><span> </span><span>grpGModğ”ŠPn.is_group</span><span> </span><span>grpâ„ŒPmModâ„ŒPmintğ”ŠPn.is_group</span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ğ”butlast.quotients) + {# group.iso_class (â„ŒPm Mod â„Œ ! (m - 1) âˆ© ğ”Š ! (n - 1)) #} + {# group.iso_class (G Mod â„Œ ! (m - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ((butlast ğ”.quotients) @ [last ğ”.quotients])) + {# group.iso_class (G Mod â„Œ ! (m - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ğ”.quotients_butlast</span><span> </span><span>ğ”.last_quotient</span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹length ğ” &gt; 1â€º</span></span></span><span> </span><span>ğ”sndlast</span><span> </span><span>Inteqğ”sndlast</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class â„Œbutlast.quotients) + {# group.iso_class (G Mod â„Œ ! (m - 1)) #}"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>multisetsâ„Œbutlastğ”</span><span> </span><span>quotsğ”notemtpy</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class ((butlast compâ„Œ.quotients) @ [last compâ„Œ.quotients]))"</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>compâ„Œ.quotients_butlast</span><span> </span><span>compâ„Œ.last_quotient</span><span> </span><span>lengthâ„Œbig</span><span> </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>m_def</span><span> </span><span>â„ŒPm_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = mset (map group.iso_class compâ„Œ.quotients)"</span></span></span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>quotsâ„Œnotempty</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">.</span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">text</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">â€¹As a corollary, we see that the composition series of a fixed group all have the same length.â€º</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">corollary</span></span><span> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">in</span></span><span> </span><span>jordan_hoelder</span><span class="delimiter">)</span><span> </span><span>jordan_hoelder_size</span><span class="delimiter">:</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">shows</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = length â„Œ"</span></span></span><span>
</span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>  </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"length ğ”Š = length compğ”Š.quotients + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compğ”Š.quotients_length</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length (map group.iso_class compğ”Š.quotients) + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_map</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = size (mset (map group.iso_class compğ”Š.quotients)) + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>size_mset</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = size (mset (map group.iso_class compâ„Œ.quotients)) + 1"</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>jordan_hoelder_multisets</span><span> </span><span>is_group</span><span> </span><span>finite</span><span> </span><span>is_composition_series</span><span> </span><span>compâ„Œ.is_composition_series</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length (map group.iso_class compâ„Œ.quotients) + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>size_mset</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length compâ„Œ.quotients + 1"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>length_map</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">also</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">"â€¦ = length â„Œ"</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>compâ„Œ.quotients_length</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">finally</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span class="keyword1"><span class="command">.</span></span><span>
</span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span></pre>
</div>
</div>