<div id="NonInterferenceInter">
<div class="head">
<h1>Theory NonInterferenceInter</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹HRB Slicing guarantees IFC Noninterference›</span></span>

<span class="keyword1"><span class="command">theory</span></span> NonInterferenceInter 
  <span class="keyword2"><span class="keyword">imports</span></span> <span class="quoted">"<a href="../HRB-Slicing/FundamentalProperty.html">HRB-Slicing.FundamentalProperty</a>"</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Assumptions of this Approach›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Classical IFC noninterference, a special case of a noninterference
definition using partial equivalence relations (per)
\cite{SabelfeldS:01}, partitions the variables (i.e.\ locations) into
security levels. Usually, only levels for secret or high, written
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span>, and public or low, written <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>, variables are
used. Basically, a program that is noninterferent has to fulfil one
basic property: executing the program in two different initial states
that may differ in the values of their <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span>-variables yields two
final states that again only differ in the values of their 
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span>-variables; thus the values of the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span>-variables did not
influence those of the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>-variables.

Every per-based approach makes certain
assumptions: (i) all \mbox{<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span>-variables} are defined at the
beginning of the program, (ii) all <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>-variables are observed (or
used in our terms) at the end and (iii) every variable is either
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>H›</span></span></span></span> or <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>. This security label is fixed for a variable
and can not be altered during a program run. Thus, we have to extend 
the prerequisites of the slicing framework in \cite{Wasserrab:09} accordingly
in a new locale:

›</span></span>

<span class="keyword1"><span class="command">locale</span></span> NonInterferenceInterGraph <span class="main">=</span>
  SDG <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> 
    <span class="quoted"><span class="free">get_proc</span></span> <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span> 
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">sourcenode</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">targetnode</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">kind</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">valid_edge</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> bool"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Entry</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Entry'_')</span>"</span><span class="main">)</span>  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_proc</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'pname</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_return_edges</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'edge</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">procs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'pname</span> <span class="main">×</span> <span class="tfree">'var</span> list <span class="main">×</span> <span class="tfree">'var</span> list<span class="main">)</span> list"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Main</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'pname</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Exit</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span>  <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Exit'_')</span>"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Def</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Use</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamDefs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> list"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamUses</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set list"</span></span> <span class="main">+</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">H</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">L</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">High</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span>  <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_High'_')</span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Low</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span>   <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Low'_')</span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> Entry_edge_Exit_or_High<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">valid_edge</span> <span class="free">a</span><span class="main">;</span> <span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">⟧</span> 
    <span class="main">⟹</span> <span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span> <span class="main">∨</span> <span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> High_target_Entry_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∧</span>
       <span class="free">kind</span> <span class="bound">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Entry_predecessor_of_High<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">valid_edge</span> <span class="free">a</span><span class="main">;</span> <span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span><span class="main">⟧</span> <span class="main">⟹</span> <span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Exit_edge_Entry_or_Low<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">valid_edge</span> <span class="free">a</span><span class="main">;</span> <span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span><span class="main">⟧</span> 
    <span class="main">⟹</span> <span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">∨</span> <span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Low_source_Exit_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span> <span class="main">∧</span> 
       <span class="free">kind</span> <span class="bound">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Exit_successor_of_Low<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">valid_edge</span> <span class="free">a</span><span class="main">;</span> <span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">⟧</span> <span class="main">⟹</span> <span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> DefHigh<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Def</span> <span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">=</span> <span class="free">H</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> UseHigh<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Use</span> <span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">=</span> <span class="free">H</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> UseLow<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="free">L</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> HighLowDistinct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∩</span> <span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> HighLowUNIV<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∪</span> <span class="free">L</span> <span class="main">=</span> UNIV"</span></span>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="NonInterferenceInter-Low_neq_Exit"><span class="command">lemma</span></span> Low_neq_Exit<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">≠</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">Use</span> <span class="keyword1"><span class="free">(_Exit_)</span></span> <span class="main">=</span> <span class="main">{}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">with</span></span> UseLow <span class="quoted"><span class="quoted">‹<span class="free">L</span> <span class="main">≠</span> <span class="main">{}</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="NonInterferenceInter-valid_node_High"><span class="command">lemma</span></span> valid_node_High <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"valid_node <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> High_target_Entry_edge <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="NonInterferenceInter-valid_node_Low"><span class="command">lemma</span></span> valid_node_Low <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"valid_node <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Low_source_Exit_edge <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>


<span class="keyword1" id="NonInterferenceInter-get_proc_Low"><span class="command">lemma</span></span> get_proc_Low<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="free">Main</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="free">get_proc</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_proc_intra<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> get_proc_Exit
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="NonInterferenceInter-get_proc_High"><span class="command">lemma</span></span> get_proc_High<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">=</span> <span class="free">Main</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> High_target_Entry_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="free">get_proc</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_proc_intra<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span> get_proc_Entry
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>



<span class="keyword1" id="NonInterferenceInter-Entry_path_High_path"><span class="command">lemma</span></span> Entry_path_High_path<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="free">n</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="free">n</span>"</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">a'</span> <span class="free">as'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">as</span> <span class="main">=</span> <span class="free">a'</span><span class="main">#</span><span class="free">as'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="free">n</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="free">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">atomize_elim</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="free">n</span>›</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="free">n</span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a'</span> <span class="bound">as'</span><span class="main">.</span> <span class="free">as</span> <span class="main">=</span> <span class="bound">a'</span><span class="main">#</span><span class="bound">as'</span> <span class="main">∧</span> <span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="bound">as'</span><span class="main">→*</span> <span class="free">n</span> <span class="main">∧</span> <span class="free">kind</span> <span class="bound">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="skolem">n'</span><span class="main"><span class="main">≡</span></span><span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="quoted"><span class="free">as</span></span> <span class="quoted"><span class="free">n</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>path.induct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons_path <span class="skolem">n''</span> <span class="skolem">as</span> <span class="skolem">n'</span> <span class="skolem">a</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n''</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">n'</span>›</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n''</span> <span class="main">≠</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">n''</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n''</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Entry_edge_Exit_or_High<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> High_target_Entry_edge
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">n''</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="skolem">n''</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n''</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">n'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n''</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="NonInterferenceInter-Exit_path_Low_path"><span class="command">lemma</span></span> Exit_path_Low_path<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="free">n</span>"</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">a'</span> <span class="free">as'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">as</span> <span class="main">=</span> <span class="free">as'</span><span class="main">@</span><span class="main">[</span><span class="free">a'</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="free">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">atomize_elim</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">as'</span> <span class="bound">a'</span><span class="main">.</span> <span class="free">as</span> <span class="main">=</span> <span class="bound">as'</span><span class="main">@</span><span class="main">[</span><span class="bound">a'</span><span class="main">]</span> <span class="main">∧</span> <span class="free">n</span> <span class="main">-</span><span class="bound">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∧</span> <span class="free">kind</span> <span class="bound">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">as</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>rev_induct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Nil
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="free">n</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>snoc <span class="skolem">a'</span> <span class="skolem">as'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">@</span><span class="main">[</span><span class="skolem">a'</span><span class="main">]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="free">sourcenode</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_snoc<span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="free">sourcenode</span> <span class="skolem">a'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>path_Entry_target<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="free">n</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>Exit_edge_Entry_or_Low<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="free">sourcenode</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="NonInterferenceInter-not_Low_High"><span class="command">lemma</span></span> not_Low_High<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∉</span> <span class="free">L</span> <span class="main">⟹</span> <span class="free">V</span> <span class="main">∈</span> <span class="free">H</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> HighLowUNIV
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="NonInterferenceInter-not_High_Low"><span class="command">lemma</span></span> not_High_Low<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∉</span> <span class="free">H</span> <span class="main">⟹</span> <span class="free">V</span> <span class="main">∈</span> <span class="free">L</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> HighLowUNIV
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Low Equivalence›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
In classical noninterference, an external observer can only see public values,
in our case the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>-variables. If two states agree in the values of all 
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>L›</span></span></span></span>-variables, these states are indistinguishable for him. 
\emph{Low equivalence} groups those states in an equivalence class using 
the relation <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>≈<span class="hidden">⇩</span><sub>L</sub>›</span></span></span></span>:
›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">lowEquivalence</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'var</span> <span class="main">⇀</span> <span class="tfree">'val</span><span class="main">)</span> list <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span> <span class="main">⇀</span> <span class="tfree">'val</span><span class="main">)</span> list <span class="main">⇒</span> bool"</span></span> 
<span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span>"</span> 50<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="keyword1"><span class="free">≈<span class="hidden">⇩</span><sub>L</sub></span></span> <span class="free"><span class="bound"><span class="entity">s'</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">L</span><span class="main">.</span> hd <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="bound">V</span> <span class="main">=</span> hd <span class="free"><span class="bound"><span class="entity">s'</span></span></span> <span class="bound">V</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The following lemmas connect low equivalent states with
relevant variables as necessary in the correctness proof for slicing.›</span></span>

<span class="keyword1" id="NonInterferenceInter-relevant_vars_Entry"><span class="command">lemma</span></span> relevant_vars_Entry<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> <span class="free">L</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">as</span></span> <span class="skolem"><span class="skolem">n'</span></span> 
    <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">∈</span> HRB_slice <span class="free">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> Use<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="skolem">n'</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">n''</span><span class="main">.</span> valid_SDG_node <span class="bound">n''</span> <span class="main">∧</span> parent_node <span class="bound">n''</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as</span><span class="main">)</span> 
          <span class="main">⟶</span> <span class="free">V</span> <span class="main">∉</span> Def<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="bound">n''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>rvE<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span>parent_node <span class="skolem">n'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>path_valid_node <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"parent_node <span class="skolem">n'</span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>valid_node_cases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Entry
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">V</span> <span class="main">∈</span> Use<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> SDG_Use_parent_Use<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>Entry_empty<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> Exit
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">V</span> <span class="main">∈</span> Use<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> SDG_Use_parent_Use<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>Exit_empty<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> inner
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="skolem"><span class="skolem">as'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">as</span> <span class="main">=</span> <span class="skolem">a'</span><span class="main">#</span><span class="skolem">as'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="skolem">as'</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>Entry_path_High_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as</span> <span class="main">=</span> <span class="skolem">a'</span><span class="main">#</span><span class="skolem">as'</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="skolem">as'</span> <span class="main">=</span> <span class="main">[]</span>"</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> True
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="skolem">as'</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"parent_node <span class="skolem">n'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">∈</span> HRB_slice <span class="free">S</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> 
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>valid_SDG_node_in_slice_parent_node_in_slice 
                    <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>SDG_to_CFG_set_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> False
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="skolem">as'</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>path_sourcenode <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>hd_in_set <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>sourcenodes_def<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as</span> <span class="main">=</span> <span class="skolem">a'</span><span class="main">#</span><span class="skolem">as'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>sourcenodes_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span>hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_SDG_node <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_High_)</span></span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
        <span class="quoted"><span class="quoted">‹hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">n''</span><span class="main">.</span> valid_SDG_node <span class="bound">n''</span> <span class="main">∧</span> parent_node <span class="bound">n''</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as</span><span class="main">)</span> 
        <span class="main">⟶</span> <span class="free">V</span> <span class="main">∉</span> Def<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="bound">n''</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∉</span> <span class="free">Def</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>CFG_Def_SDG_Def<span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹valid_node <span class="main">(</span>hd <span class="main">(</span>sourcenodes <span class="skolem">as'</span><span class="main">)</span><span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∉</span> <span class="free">H</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>DefHigh<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> not_High_Low<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>



<span class="keyword1" id="NonInterferenceInter-lowEquivalence_relevant_nodes_Entry"><span class="command">lemma</span></span> lowEquivalence_relevant_nodes_Entry<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">s</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="free">s'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">)</span><span class="main">.</span> hd <span class="free">s</span> <span class="bound">V</span> <span class="main">=</span> hd <span class="free">s'</span> <span class="bound">V</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">L</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> relevant_vars_Entry<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="free">s'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"hd <span class="free">s</span> <span class="skolem">V</span> <span class="main">=</span> hd <span class="free">s'</span> <span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>lowEquivalence_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹The Correctness Proofs›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
In the following, we present two correctness proofs that slicing
guarantees IFC noninterference. In both theorems, <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CFG_node
(_High_) ∉ HRB_slice S›</span></span></span></span>, where <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>CFG_node (_Low_) ∈ S›</span></span></span></span>, makes
sure that no high variable (which are all defined in <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(_High_)›</span></span></span></span>)
can influence a low variable (which are all used in <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(_Low_)›</span></span></span></span>).


First, a theorem regarding <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(_Entry_) -as→* (_Exit_)›</span></span></span></span> paths in the 
control flow graph (CFG), which agree to a complete program execution:›</span></span>


<span class="keyword1" id="NonInterferenceInter-slpa_rv_Low_Use_Low"><span class="command">lemma</span></span> slpa_rv_Low_Use_Low<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟦</span>same_level_path_aux <span class="free">cs</span> <span class="free">as</span><span class="main">;</span> upd_cs <span class="free">cs</span> <span class="free">as</span> <span class="main">=</span> <span class="main">[]</span><span class="main">;</span> same_level_path_aux <span class="free">cs</span> <span class="free">as'</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">c</span> <span class="main">∈</span> set <span class="free">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span> <span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span>
   <span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="free">cs</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="free">cs</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
    fst <span class="main">(</span><span class="free">s</span><span class="main">!</span>Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="free">s'</span><span class="main">!</span>Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span><span class="main">;</span> <span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> Suc <span class="main">(</span>length <span class="free">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="free">s</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="free">s'</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span><span class="main">;</span>
   <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="free">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="free">s'</span> <span class="bound">V</span><span class="main">;</span>
   preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as</span><span class="main">)</span> <span class="free">s</span><span class="main">;</span> preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as'</span><span class="main">)</span> <span class="free">s'</span><span class="main">;</span>
   length <span class="free">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="free">cs</span><span class="main">)</span><span class="main">;</span> length <span class="free">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="free">cs</span><span class="main">)</span><span class="main">⟧</span>
   <span class="main">⟹</span> <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
                      state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as'</span><span class="main">)</span> <span class="free">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="free">m</span></span> <span class="quoted"><span class="free">as'</span></span> <span class="quoted"><span class="free">s</span></span> <span class="quoted"><span class="free">s'</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>slpa_induct<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>slpa_empty <span class="skolem">cs</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="main">[]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="main">[]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> path_valid_node<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">-</span><span class="main">[]</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>empty_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> HRB_slice <span class="free">S</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>HRB_slice_refl<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>rvI CFG_Use_SDG_Use <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>sourcenodes_def<span class="main">)</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">as'</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">m</span></span> <span class="quoted"><span class="skolem">as'</span></span> <span class="skolem">m'</span><span class="main"><span class="main">≡</span></span><span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>path.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons_path <span class="skolem">m''</span> <span class="skolem">as</span> <span class="skolem">a</span> <span class="skolem">m</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m''</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m''</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span> Nil
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>slpa_intra <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span><span class="main">)</span>
  <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span> <span class="bound">as'</span> <span class="bound">s</span> <span class="bound">s'</span><span class="main">.</span> <span class="main">⟦</span>upd_cs <span class="skolem">cs</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span><span class="main">;</span> same_level_path_aux <span class="skolem">cs</span> <span class="bound">as'</span><span class="main">;</span> 
    <span class="main">∀</span><span class="bound">a</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a</span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="bound">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span>
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span><span class="main">;</span> 
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="bound">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="bound">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="bound">s'</span> <span class="bound">V</span><span class="main">;</span>
    preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">;</span> preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">;</span>
    length <span class="bound">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">;</span> length <span class="bound">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">⟧</span>
    <span class="main">⟹</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">note</span></span> rvs <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">as'</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Nil
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">ax</span> <span class="skolem">asx</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf</span></span> <span class="skolem"><span class="skolem">cfs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> 
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf'</span></span> <span class="skolem"><span class="skolem">cfs'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>edge_kind_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Call <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span><span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> True
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> slice_intra_kind_in_slice<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> unique<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">∧</span> 
            intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">a'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> call_only_one_intra_edge<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> 
            <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_return_edge_call<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> 
            <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>call_return_node_edge<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
            <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> unique
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">a</span>›</span></span>
            <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span><span class="main">#</span><span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> False
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>slice_kind_Call<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Return <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> return_edges_only<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs</span> <span class="skolem">as'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="skolem">cs</span> <span class="skolem">asx</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span>"</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> True
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
          <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
          <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> rv<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> rv_edge_slice_kinds<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"upd_cs <span class="skolem">cs</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cfx</span></span> 
          <span class="keyword2"><span class="keyword">where</span></span> cfx<span class="main">:</span><span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span> <span class="main">∧</span> snd <span class="skolem">cfx</span> <span class="main">=</span> snd <span class="skolem">cf</span>"</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">cf</span></span><span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_intra_kind_in_slice <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">drule</span> slice_kind_Upd<span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> kind_Predicate_notin_slice_slice_kind_Predicate<span class="main">)</span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cfx'</span></span> 
          <span class="keyword2"><span class="keyword">where</span></span> cfx'<span class="main">:</span><span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span> <span class="main">∧</span> snd <span class="skolem">cfx'</span> <span class="main">=</span> snd <span class="skolem">cf'</span>"</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">cf'</span></span><span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_intra_kind_in_slice <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">drule</span> slice_kind_Upd<span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> kind_Predicate_notin_slice_slice_kind_Predicate<span class="main">)</span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> cfx <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> snds<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc<span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span>
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> 
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">i</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> rvs cfx cfx' <span class="keyword1"><span class="command">have</span></span> rvs'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs</span><span class="main">.</span>
          <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          fst <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
          fst <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> 
          <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">s</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span>
        <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_intra_kind_in_slice slice_kind_Upd
          <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>kind_Predicate_notin_slice_slice_kind_Predicate <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">s'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span>
        <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_intra_kind_in_slice slice_kind_Upd
          <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>kind_Predicate_notin_slice_slice_kind_Predicate <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs</span> <span class="skolem">asx</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> rvs' snds rv calculation<span class="main">]</span>
          <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> False
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> Suc<span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"snd <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">0</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> allE<span class="main">)</span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> False
          <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
          <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
          <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>rv_branching_edges_slice_kinds_False<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="quoted"><span class="skolem">a</span></span> <span class="quoted"><span class="skolem">ax</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>slpa_Call <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span><span class="main">)</span>
  <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span> <span class="bound">as'</span> <span class="bound">s</span> <span class="bound">s'</span><span class="main">.</span> 
    <span class="main">⟦</span>upd_cs <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span><span class="main">;</span> same_level_path_aux <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="bound">as'</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="bound">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span>
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="bound">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="bound">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="bound">s'</span> <span class="bound">V</span><span class="main">;</span>
    preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">;</span> preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">;</span>
    length <span class="bound">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span><span class="main">;</span> length <span class="bound">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span><span class="main">⟧</span>
    <span class="main">⟹</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">note</span></span> rvs <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
   <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">as'</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Nil
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">ax</span> <span class="skolem">asx</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf</span></span> <span class="skolem"><span class="skolem">cfs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> 
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf'</span></span> <span class="skolem"><span class="skolem">cfs'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main">)</span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>edge_kind_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> Intra
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> True
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> 
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">ax</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> slice_intra_kind_in_slice<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> unique<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∧</span> 
            intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">a'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> call_only_one_intra_edge<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> 
            <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_return_edge_call<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> 
            <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>call_return_node_edge<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
            <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> unique
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> 
            <span class="quoted"><span class="quoted">‹slice_kind <span class="free">S</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span>
            <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> False
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>slice_kind_Call<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Return <span class="skolem">Q'</span> <span class="skolem">p'</span> <span class="skolem">f'</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> return_edges_only<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> slice_kind_Call<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_kind_Call_in_slice <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span> <span class="main">#</span> <span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>slice_kind_Call_in_slice <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">-</span><span class="main">[]</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>empty_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>rvI CFG_Use_SDG_Use <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>SDG_to_CFG_set_def sourcenodes_def<span class="main">)</span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> Use<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"snd <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
        <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> Use <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>CFG_equal_Use_equal_call<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs</span> <span class="skolem">as'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="skolem">asx</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"upd_cs <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> slice_kind<span class="main">:</span><span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> 
        <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> slice_kind_Call_in_slice<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>›</span></span> slice_kind
      <span class="keyword1"><span class="command">have</span></span> snds<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
        snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span>
        snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">i</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ins</span></span> <span class="skolem"><span class="skolem">outs</span></span> 
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>callee_in_procs<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span><span class="free">ParamUses</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">ins</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ParamUses_call_source_length<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">ins</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="main">(</span><span class="free">ParamUses</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ParamUses_in_Use<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">ins</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="main">(</span><span class="free">ParamUses</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span><span class="main">.</span> 
        state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
        <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">ins</span><span class="main">.</span> <span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span> <span class="main">=</span> <span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>CFG_call_edge_params<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="skolem">fs</span> <span class="main">=</span> length <span class="skolem">ins</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_call_edge_length<span class="main">)</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">fs</span> <span class="main">=</span> length <span class="skolem">ins</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">ins</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> params_nth<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> params_nth<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">fs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">ins</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">ins</span><span class="main">.</span> <span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span> <span class="main">=</span> <span class="main">(</span>params <span class="skolem">fs</span> <span class="main">(</span>fst <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span>›</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">fs</span><span class="main">.</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">fs</span><span class="main">.</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span>csppa <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="main">0</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span>
          <span class="main">(</span><span class="main">(</span>csppa <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="main">0</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"Formal_in<span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">,</span><span class="skolem">i</span> <span class="main">+</span> <span class="main">0</span><span class="main">)</span> <span class="main">∈</span>  HRB_slice <span class="free">S</span>"</span></span><span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> True
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span> 
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>csppa <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="main">0</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="skolem">fs</span><span class="main">!</span><span class="skolem">i</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> csppa_Formal_in_in_slice<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">fs</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> False
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span> 
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>csppa <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="main">0</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> Map.empty"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> csppa_Formal_in_notin_slice<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">hence</span></span> eq<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span> <span class="main">&lt;</span> length <span class="skolem">fs</span><span class="main">.</span>
        <span class="main">(</span><span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span>
        <span class="main">(</span><span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="bound">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>cspp_def<span class="main">)</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span>
          <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span>
          <span class="main">(</span><span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>params_nth<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span>
          <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span>
          <span class="main">(</span><span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>params_nth<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> 
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span>
          <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span>
          <span class="main">(</span>params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> eq <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">fs</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="main">=</span>
        params <span class="main">(</span>cspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">fs</span><span class="main">)</span><span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>list_eq_iff_nth_eq<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> slice_kind <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cfx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
        <span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span><span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfs</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span>
        <span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span><span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfs'</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> rv<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
        state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
        state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> rvs <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> rvs'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> 
        <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
        fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
        fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">i</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span>
        <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span>
        <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> 
        Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">=</span> 
        Suc <span class="main">(</span>length <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹upd_cs <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span> <span class="skolem">asx</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> rvs' snds rv calculation<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>slpa_Return <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span> <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span> <span class="skolem">c'</span> <span class="skolem">cs'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span> <span class="bound">as'</span> <span class="bound">s</span> <span class="bound">s'</span><span class="main">.</span> <span class="main">⟦</span>upd_cs <span class="skolem">cs'</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span><span class="main">;</span> same_level_path_aux <span class="skolem">cs'</span> <span class="bound">as'</span><span class="main">;</span> 
    <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span> <span class="bound">m</span> <span class="main">-</span><span class="bound">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">;</span>
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs'</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span><span class="main">;</span> 
    <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="bound">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="bound">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
    <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="bound">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="bound">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="bound">s'</span> <span class="bound">V</span><span class="main">;</span>
    preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">;</span> preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">;</span>
    length <span class="bound">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span><span class="main">;</span> length <span class="bound">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span><span class="main">⟧</span>
    <span class="main">⟹</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
                       state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="bound">as'</span><span class="main">)</span> <span class="bound">s'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">note</span></span> rvs <span class="main">=</span> <span class="quoted"><span class="quoted">‹ <span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
    fst <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">c'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">as'</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Nil
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">ax</span> <span class="skolem">asx</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">f</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>return_edges_only<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs</span> <span class="skolem">as'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="skolem">cs'</span> <span class="skolem">asx</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ax</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_return_edges_unique<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"upd_cs <span class="skolem">cs'</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf</span></span> <span class="skolem"><span class="skolem">cfx</span></span> <span class="skolem"><span class="skolem">cfs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main"><span class="keyword3">,</span></span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">list</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cf'</span></span> <span class="skolem"><span class="skolem">cfx'</span></span> <span class="skolem"><span class="skolem">cfs'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main"><span class="keyword3">,</span></span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">list</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> rvs <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> rvs1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs'</span><span class="main">.</span> 
        <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
        fst <span class="main">(</span><span class="main">(</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> fst <span class="main">(</span><span class="main">(</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
        <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Qx</span></span> <span class="skolem"><span class="skolem">rx</span></span> <span class="skolem"><span class="skolem">px</span></span> <span class="skolem"><span class="skolem">fsx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">c'</span> <span class="main">=</span> <span class="skolem">Qx</span><span class="main">:</span><span class="skolem">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">px</span></sub><span class="hidden">⇙</span><span class="skolem">fsx</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>only_call_get_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
        <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> edge<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">c'</span>"</span></span>
          <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>"</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> call_return_node_edge<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">as</span></span> <span class="skolem"><span class="skolem">n'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">∈</span> HRB_slice <span class="free">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> Use<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="skolem">n'</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> all<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">n''</span><span class="main">.</span> valid_SDG_node <span class="bound">n''</span> <span class="main">∧</span> parent_node <span class="bound">n''</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="skolem">as</span><span class="main">)</span> 
          <span class="main">⟶</span> <span class="skolem">V</span> <span class="main">∉</span> Def<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="bound">n''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>rvE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> edge
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">c'</span> <span class="main">-</span><span class="skolem">a'</span><span class="main">#</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>Cons_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">c'</span> <span class="main">=</span> <span class="skolem">Qx</span><span class="main">:</span><span class="skolem">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">px</span></sub><span class="hidden">⇙</span><span class="skolem">fsx</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> call_source_Def_empty<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">n''</span><span class="main">.</span> valid_SDG_node <span class="bound">n''</span> <span class="main">∧</span> parent_node <span class="bound">n''</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">c'</span>
          <span class="main">⟶</span> <span class="skolem">V</span> <span class="main">∉</span> Def<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="bound">n''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>SDG_Def_parent_Def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> all <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">c'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">n''</span><span class="main">.</span> valid_SDG_node <span class="bound">n''</span> <span class="main">∧</span> parent_node <span class="bound">n''</span> <span class="main">∈</span> set <span class="main">(</span>sourcenodes <span class="main">(</span><span class="skolem">a'</span><span class="main">#</span><span class="skolem">as</span><span class="main">)</span><span class="main">)</span> 
          <span class="main">⟶</span> <span class="skolem">V</span> <span class="main">∉</span> Def<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="bound">n''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>sourcenodes_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">c'</span> <span class="main">-</span><span class="skolem">a'</span><span class="main">#</span><span class="skolem">as</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="skolem">n'</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">∈</span> HRB_slice <span class="free">S</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> Use<span class="hidden">⇘</span><sub>SDG</sub><span class="hidden">⇙</span> <span class="skolem">n'</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>rvI<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> True
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">c'</span><span class="main">)</span> <span class="main">=</span> <span class="free">get_proc</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> intra_proc_additional_edge<span class="main"><span class="keyword3">,</span></span>
            <span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_proc_intra <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">c'</span> <span class="main">=</span> <span class="skolem">Qx</span><span class="main">:</span><span class="skolem">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">px</span></sub><span class="hidden">⇙</span><span class="skolem">fsx</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">c'</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">px</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_proc_call<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_proc_return<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">px</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">c'</span> <span class="main">=</span> <span class="skolem">Qx</span><span class="main">:</span><span class="skolem">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">px</span></sub><span class="hidden">⇙</span><span class="skolem">fsx</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ins</span></span> <span class="skolem"><span class="skolem">outs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>callee_in_procs<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> slice_kind<span class="main">:</span><span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> 
          <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="main">(</span><span class="main">λ</span><span class="bound">cf</span> <span class="bound">cf'</span><span class="main">.</span> rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="bound">cf'</span> <span class="bound">cf</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> slice_kind_Return_in_slice<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> sx<span class="main">:</span><span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">=</span> 
          <span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">,</span>
          snd <span class="skolem">cfx</span><span class="main">)</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> sx'<span class="main">:</span><span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">=</span> 
          <span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">,</span>
          snd <span class="skolem">cfx'</span><span class="main">)</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
        <span class="keyword1"><span class="command">with</span></span> rvs1 <span class="keyword1"><span class="command">have</span></span> rvs'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs'</span><span class="main">.</span> 
          <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
          fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">from</span></span> slice_kind <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> snds<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span><span class="main">.</span>
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span>
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="improper">i</span></span><span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"Suc <span class="main">(</span>Suc <span class="improper">nat</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> allE<span class="main">)</span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          <span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> 
          <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
          <span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> 
          <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> 
            <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span>
            <span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> 
            <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span>"</span></span>
          <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="main">)</span>
            <span class="keyword3"><span class="command">case</span></span> True
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">i</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
              <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="skolem">V</span>"</span></span>
              <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>in_set_conv_nth<span class="main">)</span>
            <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
            <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>"</span></span>
              <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ParamDefs_return_target_length<span class="main">)</span>
            <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
            <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"Actual_out<span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">,</span><span class="skolem">i</span><span class="main">)</span> <span class="main">∈</span> HRB_slice <span class="free">S</span>"</span></span><span class="main">)</span>
              <span class="keyword3"><span class="command">case</span></span> True
              <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
                <span class="quoted"><span class="quoted">‹length<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="skolem">V</span>›</span></span><span class="main">[</span><span class="operator">THEN</span> sym<span class="main">]</span>
              <span class="keyword1"><span class="command">have</span></span> rspp_eq<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> 
                <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> 
                <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">(</span><span class="skolem">outs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span>"</span></span>
                <span class="quoted"><span class="quoted">"<span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> 
                <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> 
                <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">(</span><span class="skolem">outs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span>"</span></span>
                <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>rspp_Actual_out_in_slice<span class="main">)</span>
              <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> set <span class="skolem">outs</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>outs_in_Use<span class="main">)</span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span>
              <span class="keyword1"><span class="command">proof</span></span>
                <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
                <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span>
                <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"parent_node <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span> <span class="main">-</span><span class="main">[]</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> parent_node <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span>
                  <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>empty_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
                <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∈</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span> 
                  <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
                <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span>
                  <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> rvI<span class="main"><span class="keyword3">,</span></span>
                    <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>CFG_Use_SDG_Use <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>SDG_to_CFG_set_def sourcenodes_def<span class="main">)</span>
              <span class="keyword1"><span class="command">qed</span></span>
              <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> set <span class="skolem">outs</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> set <span class="skolem">outs</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
              <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="skolem">m</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> set <span class="skolem">outs</span><span class="main">.</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span> <span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
              <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
                <span class="quoted"><span class="quoted">‹length<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>›</span></span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">(</span><span class="skolem">outs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">(</span><span class="skolem">outs</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
              <span class="keyword1"><span class="command">with</span></span> rspp_eq <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
            <span class="keyword1"><span class="command">next</span></span>
              <span class="keyword3"><span class="command">case</span></span> False
              <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
                <span class="quoted"><span class="quoted">‹length<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="skolem">V</span>›</span></span><span class="main">[</span><span class="operator">THEN</span> sym<span class="main">]</span>
              <span class="keyword1"><span class="command">have</span></span> rspp_eq<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> 
                <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> 
                <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span>"</span></span>
                <span class="quoted"><span class="quoted">"<span class="main">(</span>rspp <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> 
                <span class="main">(</span>HRB_slice <span class="free">S</span><span class="main">)</span> <span class="skolem">outs</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span>fst <span class="skolem">cf'</span><span class="main">)</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> 
                <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">)</span>"</span></span>
                <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>rspp_Actual_out_notin_slice<span class="main">)</span>
              <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
                <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
                <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>›</span></span>
                <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span> <span class="main">=</span> <span class="skolem">V</span>›</span></span><span class="main">[</span><span class="operator">THEN</span> sym<span class="main">]</span>
              <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span> <span class="main">=</span>
                <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
              <span class="keyword1"><span class="command">with</span></span> rspp_eq <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
            <span class="keyword1"><span class="command">qed</span></span>
          <span class="keyword1"><span class="command">next</span></span>
            <span class="keyword3"><span class="command">case</span></span> False
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
              <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
              <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
              <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
              <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>rspp_def map_merge_def<span class="main">)</span>
          <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">with</span></span> sx sx'
        <span class="keyword1"><span class="command">have</span></span> rv'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> 
          <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> 
          <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span> sx
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span> sx'
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs'</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs'</span> <span class="skolem">asx</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> rvs' snds rv' calculation<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> False
        <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> slice_kind<span class="main">:</span><span class="quoted"><span class="quoted">"slice_kind <span class="free">S</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> True<span class="main">)</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="main">(</span><span class="main">λ</span><span class="bound">cf</span> <span class="bound">cf'</span><span class="main">.</span> <span class="bound">cf'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> slice_kind_Return<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>"</span></span>
          <span class="quoted"><span class="quoted">"transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
        <span class="keyword1"><span class="command">from</span></span> slice_kind <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> snd <span class="main">(</span><span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span><span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> snds<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span><span class="main">.</span>
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span> <span class="main">=</span>
          snd <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">from</span></span> rvs1 <span class="keyword1"><span class="command">have</span></span> rvs'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound"><span class="bound">i</span></span><span class="main">&lt;</span>length <span class="skolem">cs'</span><span class="main">.</span> 
          <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="main">(</span><span class="skolem">cs'</span> <span class="main">!</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
          fst <span class="main">(</span><span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">!</span> Suc <span class="bound">i</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> 
          <span class="main">(</span>fst <span class="skolem">cfx</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">cfx'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> rv'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">.</span>
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
          state_val <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">)</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as</span><span class="main">)</span> 
          <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">as'</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> 
          <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">cf</span><span class="main">#</span><span class="skolem">cfx</span><span class="main">#</span><span class="skolem">cfs</span>›</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹length <span class="skolem">s'</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>transfer <span class="main">(</span>slice_kind <span class="free">S</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="main">=</span> Suc <span class="main">(</span>length <span class="skolem">cs'</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">s'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">#</span><span class="skolem">cfx'</span><span class="main">#</span><span class="skolem">cfs'</span>›</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹upd_cs <span class="skolem">cs'</span> <span class="skolem">as</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="skolem">cs'</span> <span class="skolem">asx</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> rvs' snds rv' calculation<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="skolem">as'</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="NonInterferenceInter-rv_Low_Use_Low"><span class="command">lemma</span></span> rv_Low_Use_Low<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="free">m</span> <span class="main">=</span> <span class="free">Main</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span><span class="main">.</span> <span class="free">cf</span> <span class="bound">V</span> <span class="main">=</span> <span class="free">cf'</span> <span class="bound">V</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="free">as</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Nil
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>path_valid_node <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="free">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">-</span><span class="main">[]</span><span class="keyword1">→<span class="hidden">⇩</span><sub>ι</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>empty_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_path_def<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="free">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> HRB_slice <span class="free">S</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>HRB_slice_refl<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>rvI CFG_Use_SDG_Use <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>sourcenodes_def<span class="main">)</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">as'</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">m</span></span> <span class="quoted"><span class="free">as'</span></span> <span class="skolem">m'</span><span class="main"><span class="main">≡</span></span><span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>path.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons_path <span class="skolem">m''</span> <span class="skolem">as</span> <span class="skolem">a</span> <span class="skolem">m</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">m''</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m''</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> Nil <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span><span class="main">.</span> <span class="free">cf</span> <span class="bound">V</span> <span class="main">=</span> <span class="free">cf'</span> <span class="bound">V</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span>›</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>slice_kinds_def<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">ax</span> <span class="skolem">asx</span><span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True <span class="keyword1"><span class="command">with</span></span> UseLow <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="free">as'</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Nil
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Exit_successor_of_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> Low_source_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> False <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> Low_neq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">ax'</span> <span class="skolem">asx'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="free">as</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹<span class="free">as</span> <span class="main">=</span> <span class="skolem">ax</span><span class="main">#</span><span class="skolem">asx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="free">m</span> <span class="main">=</span> <span class="free">Main</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="main">[]</span> <span class="free">as</span> <span class="main">∧</span> upd_cs <span class="main">[]</span> <span class="free">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> vpa_Main_slpa<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="main"><span class="main">_</span></span> <span class="main"><span class="main">_</span></span> <span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">m</span></span></span></span></span></span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="keyword1"><span class="free"><span class="keyword1"><span class="free">(_Low_)</span></span></span></span></span></span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">,</span></span>
        <span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>get_proc_Low <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>valid_call_list_def<span class="main">)</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="main">[]</span> <span class="free">as</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"upd_cs <span class="main">[]</span> <span class="free">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="free">as'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹<span class="free">as'</span> <span class="main">=</span> <span class="skolem">ax'</span><span class="main">#</span><span class="skolem">asx'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="free">m</span> <span class="main">=</span> <span class="free">Main</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="main">[]</span> <span class="free">as'</span> <span class="main">∧</span> upd_cs <span class="main">[]</span> <span class="free">as'</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> vpa_Main_slpa<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="main"><span class="main">_</span></span> <span class="main"><span class="main">_</span></span> <span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">m</span></span></span></span></span></span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="keyword1"><span class="free"><span class="keyword1"><span class="free">(_Low_)</span></span></span></span></span></span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">,</span></span>
        <span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>get_proc_Low <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>valid_call_list_def<span class="main">)</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"same_level_path_aux <span class="main">[]</span> <span class="free">as'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="main">[]</span> <span class="free">as</span>›</span></span> <span class="quoted"><span class="quoted">‹upd_cs <span class="main">[]</span> <span class="free">as</span> <span class="main">=</span> <span class="main">[]</span>›</span></span>
        <span class="quoted"><span class="quoted">‹same_level_path_aux <span class="main">[]</span> <span class="free">as'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">m</span> <span class="main">-</span><span class="free">as'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="free">m</span><span class="main">)</span><span class="main">.</span> <span class="free">cf</span> <span class="bound">V</span> <span class="main">=</span> <span class="free">cf'</span> <span class="bound">V</span>›</span></span> <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
        <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
        <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">erule</span> slpa_rv_Low_Use_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>



<span class="keyword1" id="NonInterferenceInter-nonInterference_path_to_Low"><span class="command">lemma</span></span> nonInterference_path_to_Low<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">cf</span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf'</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> 
         map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">asx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
    state_val <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"slice_edges <span class="free">S</span> <span class="main">[]</span> <span class="free">as</span> <span class="main">=</span> slice_edges <span class="free">S</span> <span class="main">[]</span> <span class="skolem">asx</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">≠</span> <span class="main">[]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> fundamental_property_of_static_slicing<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">asx'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"slice_edges <span class="free">S</span> <span class="main">[]</span> <span class="free">as'</span> <span class="main">=</span> 
    slice_edges <span class="free">S</span> <span class="main">[]</span> <span class="skolem">asx'</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">≠</span> <span class="main">[]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">asx'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> fundamental_property_of_static_slicing<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">cf</span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf'</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="keyword1">rv</span> <span class="free">S</span> <span class="main">(</span>CFG_node <span class="keyword1"><span class="free">(_Entry_)</span></span><span class="main">)</span><span class="main">.</span> <span class="free">cf</span> <span class="bound">V</span> <span class="main">=</span> <span class="free">cf'</span> <span class="bound">V</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>lowEquivalence_relevant_nodes_Entry<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">asx</span> <span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span><span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">asx'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span>
    <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> rv_Low_Use_Low<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>get_proc_Entry<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers <span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
    state_val <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="keyword1"><span class="free">(_Low_)</span></span><span class="main">.</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>slice_kinds <span class="free">S</span> <span class="skolem">asx'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> 
    state_val <span class="main">(</span>transfers<span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
    <span class="quoted"><span class="quoted">‹transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">≠</span> <span class="main">[]</span>›</span></span> 
    <span class="quoted"><span class="quoted">‹transfers <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">≠</span> <span class="main">[]</span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lowEquivalence_def UseLow neq_Nil_conv<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">theorem</span></span> nonInterference_path<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">cf</span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf'</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> 
  map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="skolem"><span class="skolem">xs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">as</span> <span class="main">=</span> <span class="skolem">x</span><span class="main">#</span><span class="skolem">xs</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">x</span> <span class="main">-</span><span class="skolem">xs</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">as</span> <span class="main">=</span> <span class="main">[]</span>"</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main"><span class="keyword3">,</span></span><span class="operator">drule</span> empty_path_nodes<span class="main"><span class="keyword3">,</span></span><span class="operator">drule</span> Entry_noteq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path <span class="free">as</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>valid_node_cases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Entry
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> Exit
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">x</span> <span class="main">-</span><span class="skolem">xs</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">xs</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> Entry_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">z</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> Exit <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as</span> <span class="main">=</span> <span class="skolem">x</span><span class="main">#</span><span class="skolem">xs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">xs</span> <span class="main">=</span> <span class="main">[]</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">z</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">x</span> <span class="main">-</span><span class="skolem">xs</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x'</span></span> <span class="skolem"><span class="skolem">xs'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">xs</span> <span class="main">=</span> <span class="skolem">xs'</span><span class="main">@</span><span class="main">[</span><span class="skolem">x'</span><span class="main">]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">x</span> <span class="main">-</span><span class="skolem">xs'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>Exit_path_Low_path<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>Cons_path<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_path <span class="free">as</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as</span> <span class="main">=</span> <span class="skolem">x</span><span class="main">#</span><span class="skolem">xs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">xs</span> <span class="main">=</span> <span class="skolem">xs'</span><span class="main">@</span><span class="main">[</span><span class="skolem">x'</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path <span class="main">(</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>valid_path_def <span class="quasi_keyword">del</span><span class="main"><span class="main">:</span></span>valid_path_aux.simps<span class="main">)</span>
      <span class="main">(</span><span class="operator">rule</span> valid_path_aux_split<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as</span> <span class="main">=</span> <span class="skolem">x</span><span class="main">#</span><span class="skolem">xs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">xs</span> <span class="main">=</span> <span class="skolem">xs'</span><span class="main">@</span><span class="main">[</span><span class="skolem">x'</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">as</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">x'</span><span class="main">]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> 
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def preds_split<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="skolem"><span class="skolem">ys</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">as'</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">#</span><span class="skolem">ys</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">y</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">y</span> <span class="main">-</span><span class="skolem">ys</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">as'</span> <span class="main">=</span> <span class="main">[]</span>"</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">clarsimp</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main"><span class="keyword3">,</span></span><span class="operator">drule</span> empty_path_nodes<span class="main"><span class="keyword3">,</span></span><span class="operator">drule</span> Entry_noteq_Exit<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="free">as'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path <span class="free">as'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>valid_node_cases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Entry
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> Exit
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">y</span> <span class="main">-</span><span class="skolem">ys</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ys</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> Entry_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">z</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">y</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> Exit <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">z</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as'</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">#</span><span class="skolem">ys</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ys</span> <span class="main">=</span> <span class="main">[]</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">z</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">y</span> <span class="main">-</span><span class="skolem">ys</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Exit_)</span></span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">y'</span></span> <span class="skolem"><span class="skolem">ys'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ys</span> <span class="main">=</span> <span class="skolem">ys'</span><span class="main">@</span><span class="main">[</span><span class="skolem">y'</span><span class="main">]</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">y</span> <span class="main">-</span><span class="skolem">ys'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">y'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>Exit_path_Low_path<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">y</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>Cons_path<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_path <span class="free">as'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as'</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">#</span><span class="skolem">ys</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ys</span> <span class="main">=</span> <span class="skolem">ys'</span><span class="main">@</span><span class="main">[</span><span class="skolem">y'</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path <span class="main">(</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>valid_path_def <span class="quasi_keyword">del</span><span class="main"><span class="main">:</span></span>valid_path_aux.simps<span class="main">)</span>
      <span class="main">(</span><span class="operator">rule</span> valid_path_aux_split<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as'</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">#</span><span class="skolem">ys</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ys</span> <span class="main">=</span> <span class="skolem">ys'</span><span class="main">@</span><span class="main">[</span><span class="skolem">y'</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">as'</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">y'</span><span class="main">]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="free">as'</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> 
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def preds_split<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">cf</span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf'</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span> <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">x</span><span class="main">#</span><span class="skolem">xs'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> 
    map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">y</span><span class="main">#</span><span class="skolem">ys'</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> nonInterference_path_to_Low<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">as</span> <span class="main">=</span> <span class="skolem">x</span><span class="main">#</span><span class="skolem">xs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">xs</span> <span class="main">=</span> <span class="skolem">xs'</span><span class="main">@</span><span class="main">[</span><span class="skolem">x'</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">as'</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">#</span><span class="skolem">ys</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ys</span> <span class="main">=</span> <span class="skolem">ys'</span><span class="main">@</span><span class="main">[</span><span class="skolem">y'</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">y'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>map <span class="free">kind</span> <span class="skolem">xs'</span><span class="main">)</span> <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def transfers_split<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>map <span class="free">kind</span> <span class="skolem">ys'</span><span class="main">)</span> <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">y</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf'</span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span><span class="main">)</span><span class="main"><span class="keyword3">,</span></span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>kinds_def transfers_split<span class="main">)</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The second theorem assumes that we have a operational semantics,
whose evaluations are written <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⟨c,s⟩ ⇒ ⟨c',s'⟩›</span></span></span></span> and which conforms 
to the CFG. The correctness theorem then states that if no high variable
influenced a low variable and the initial states were low equivalent, the
reulting states are again low equivalent:›</span></span>


<span class="keyword1"><span class="command">locale</span></span> NonInterferenceInter <span class="main">=</span> 
  NonInterferenceInterGraph <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> 
    <span class="quoted"><span class="free">get_proc</span></span> <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span> 
    <span class="quoted"><span class="free">H</span></span> <span class="quoted"><span class="free">L</span></span> <span class="quoted"><span class="free">High</span></span> <span class="quoted"><span class="free">Low</span></span> <span class="main">+</span>
  SemanticsProperty <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span>
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span> <span class="quoted"><span class="free">sem</span></span> <span class="quoted"><span class="free">identifies</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">sourcenode</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">targetnode</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">kind</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">valid_edge</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> bool"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Entry</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Entry'_')</span>"</span><span class="main">)</span>  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_proc</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'pname</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_return_edges</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'edge</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">procs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'pname</span> <span class="main">×</span> <span class="tfree">'var</span> list <span class="main">×</span> <span class="tfree">'var</span> list<span class="main">)</span> list"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Main</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'pname</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Exit</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span>  <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Exit'_')</span>"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Def</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Use</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamDefs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> list"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamUses</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set list"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">sem</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'com</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span> <span class="main">⇀</span> <span class="tfree">'val</span><span class="main">)</span> list <span class="main">⇒</span> <span class="tfree">'com</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span> <span class="main">⇀</span> <span class="tfree">'val</span><span class="main">)</span> list <span class="main">⇒</span> bool"</span></span> 
    <span class="main">(</span><span class="quoted">"<span class="keyword3">(</span><span class="keyword3">(1</span><span class="keyword1">⟨</span>_<span class="keyword1">,</span><span class="keyword3">/</span>_<span class="keyword1">⟩</span><span class="keyword3">)</span> <span class="keyword1">⇒</span><span class="keyword3">/ </span><span class="keyword3">(1</span><span class="keyword1">⟨</span>_<span class="keyword1">,</span><span class="keyword3">/</span>_<span class="keyword1">⟩</span><span class="keyword3">)</span><span class="keyword3">)</span>"</span> <span class="main">[</span>0<span class="main">,</span>0<span class="main">,</span>0<span class="main">,</span>0<span class="main">]</span> 81<span class="main">)</span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">identifies</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'com</span> <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">≜</span> _"</span> <span class="main">[</span>51<span class="main">,</span>0<span class="main">]</span> 80<span class="main">)</span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">H</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">L</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">High</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span>  <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_High'_')</span>"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Low</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'node</span>"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">'('_Low'_')</span>"</span><span class="main">)</span> <span class="main">+</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">final</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'com</span> <span class="main">⇒</span> bool"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> final_edge_Low<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">final</span> <span class="free">c</span><span class="main">;</span> <span class="free">n</span> <span class="main"><span class="free">≜</span></span> <span class="free">c</span><span class="main">⟧</span> 
    <span class="main">⟹</span> <span class="main">∃</span><span class="bound">a</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a</span> <span class="main">=</span> <span class="free">n</span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∧</span> <span class="free">kind</span> <span class="bound">a</span> <span class="main">=</span> <span class="main">⇑</span>id"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The following theorem needs the explicit edge from <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(_High_)›</span></span></span></span>
  to <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>n›</span></span></span></span>. An approach using a <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>init›</span></span></span></span> predicate for initial statements,
  being reachable from <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(_High_)›</span></span></span></span> via a <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(λs. True)<span class="hidden">⇩</span><sub>√</sub>›</span></span></span></span> edge,
  does not work as the same statement could be identified by several nodes, some
  initial, some not. E.g., in the program \texttt{while (True) Skip;;Skip}
  two nodes identify this inital statement: the initial node and the node
  within the loop (because of loop unrolling).›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> nonInterference<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="free">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="free">n</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main"><span class="free">≜</span></span> <span class="free">c</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">final</span> <span class="free">c'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">⟨</span></span><span class="free">c</span><span class="main"><span class="free">,</span></span><span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main"><span class="free">⟩</span></span> <span class="main"><span class="free">⇒</span></span> <span class="main"><span class="free">⟨</span></span><span class="free">c'</span><span class="main"><span class="free">,</span></span><span class="free">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main"><span class="free">⟩</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">⟨</span></span><span class="free">c</span><span class="main"><span class="free">,</span></span><span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main"><span class="free">⟩</span></span> <span class="main"><span class="free">⇒</span></span> <span class="main"><span class="free">⟨</span></span><span class="free">c'</span><span class="main"><span class="free">,</span></span><span class="free">s<span class="hidden">⇩</span><sub>2</sub></span><span class="main"><span class="free">⟩</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="free">s<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> High_target_Entry_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main"><span class="free">≜</span></span> <span class="free">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">⟨</span></span><span class="free">c</span><span class="main"><span class="free">,</span></span><span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main"><span class="free">⟩</span></span> <span class="main"><span class="free">⇒</span></span> <span class="main"><span class="free">⟨</span></span><span class="free">c'</span><span class="main"><span class="free">,</span></span><span class="free">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main"><span class="free">⟩</span></span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="skolem"><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="skolem"><span class="skolem">cfs<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main"><span class="free">≜</span></span> <span class="free">c'</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="skolem">cfs<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"map fst <span class="skolem">cfs<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="free">s<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>fundamental_property<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="free">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="free">n</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>Cons_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">final</span> <span class="free">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main"><span class="free">≜</span></span> <span class="free">c'</span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⇑</span>id"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>final_edge_Low<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">-</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>path_edge<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>path_Append <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Cons_path<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>valid_path_aux_Append<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="free">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="free">n</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">get_proc</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_proc_intra <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> get_proc_High <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="free">get_proc</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_proc_intra <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> get_proc_Low <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span>→<span class="hidden">⇘</span><sub>sl</sub><span class="hidden">⇙</span>* <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main">)</span>
      <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>vpa_Main_slpa <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="free">Main</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">Main</span>›</span></span>
             <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def valid_call_list_def slp_def 
                  same_level_path_def <span class="quasi_keyword">simp</span> <span class="quasi_keyword">del</span><span class="main"><span class="main">:</span></span>valid_path_aux.simps<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cfx</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> cfx<span class="main">:</span><span class="quoted"><span class="quoted">"transfers <span class="main">(</span>map <span class="free">kind</span> <span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="main">(</span><span class="skolem">cfx</span><span class="main">,</span><span class="skolem">r</span><span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>slp_callstack_length_equal <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>kinds_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> 
    <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span> cfx 
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>kinds_def preds_split<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main"><span class="free">≜</span></span> <span class="free">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">⟨</span></span><span class="free">c</span><span class="main"><span class="free">,</span></span><span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main"><span class="free">⟩</span></span> <span class="main"><span class="free">⇒</span></span> <span class="main"><span class="free">⟨</span></span><span class="free">c'</span><span class="main"><span class="free">,</span></span><span class="free">s<span class="hidden">⇩</span><sub>2</sub></span><span class="main"><span class="free">⟩</span></span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="skolem"><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="skolem"><span class="skolem">cfs<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main"><span class="free">≜</span></span> <span class="free">c'</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"transfers <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="skolem">cfs<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"map fst <span class="skolem">cfs<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="free">s<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>fundamental_property<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="free">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="free">n</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>Cons_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">final</span> <span class="free">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main"><span class="free">≜</span></span> <span class="free">c'</span>›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⇑</span>id"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>final_edge_Low<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>path_edge<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>path_Append <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Entry_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> Cons_path<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">-</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>valid_path_aux_Append<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="main">[]</span> <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="free">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="free">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">(_High_)</span></span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="free">a</span> <span class="main">=</span> <span class="free">n</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">get_proc</span> <span class="keyword1"><span class="free">(_High_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_proc_intra <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> get_proc_High <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="free">get_proc</span> <span class="keyword1"><span class="free">(_Low_)</span></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>get_proc_intra <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> get_proc_Low <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">-</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span>→<span class="hidden">⇘</span><sub>sl</sub><span class="hidden">⇙</span>* <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main">)</span>
      <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>vpa_Main_slpa <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="skolem">n<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="free">Main</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">get_proc</span> <span class="free">n</span> <span class="main">=</span> <span class="free">Main</span>›</span></span>
             <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def valid_call_list_def slp_def 
                  same_level_path_def <span class="quasi_keyword">simp</span> <span class="quasi_keyword">del</span><span class="main"><span class="main">:</span></span>valid_path_aux.simps<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cfx'</span></span> <span class="skolem"><span class="skolem">r'</span></span> 
    <span class="keyword2"><span class="keyword">where</span></span> cfx'<span class="main">:</span><span class="quoted"><span class="quoted">"transfers <span class="main">(</span>map <span class="free">kind</span> <span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="main">(</span><span class="skolem">cfx'</span><span class="main">,</span><span class="skolem">r'</span><span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>slp_callstack_length_equal <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>kinds_def<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> 
    <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span> cfx' 
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>kinds_def preds_split<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> <span class="main">[</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_High_)</span></span> <span class="main">∉</span> <span class="main">⌊</span>HRB_slice <span class="free">S</span>⌋<span class="hidden">⇘</span><sub>CFG</sub><span class="hidden">⇙</span>›</span></span> <span class="quoted"><span class="quoted">‹CFG_node <span class="keyword1"><span class="free">(_Low_)</span></span> <span class="main">∈</span> <span class="free">S</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
    <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">(_Entry_)</span></span> <span class="main">-</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="keyword1"><span class="free">(_Low_)</span></span>›</span></span> 
    <span class="quoted"><span class="quoted">‹preds <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">≈<span class="hidden">⇩</span><sub>L</sub></span> 
        map fst <span class="main">(</span>transfers <span class="main">(</span>kinds <span class="main">(</span><span class="skolem">ax</span><span class="main">#</span><span class="main">(</span><span class="main">(</span><span class="free">a</span><span class="main">#</span><span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">@</span><span class="main">[</span><span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> nonInterference_path_to_Low<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="free">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⇑</span>id›</span></span>
    <span class="quoted"><span class="quoted">‹transfers <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="skolem">cfs<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹map fst <span class="skolem">cfs<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="free">s<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
    <span class="quoted"><span class="quoted">‹transfers <span class="main">(</span>kinds <span class="skolem">as<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">[</span><span class="main">(</span><span class="free">cf<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>undefined<span class="main">)</span><span class="main">]</span> <span class="main">=</span> <span class="skolem">cfs<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹map fst <span class="skolem">cfs<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="free">s<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="free">s<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main">)</span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="free">s<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span class="keyword3">,</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>kinds_def transfers_split<span class="main">)</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

</pre>
</div><div id="LiftingInter">
<div class="head">
<h1>Theory LiftingInter</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Framework Graph Lifting for Noninterference›</span></span>

<span class="keyword1"><span class="command">theory</span></span> LiftingInter 
<span class="keyword2"><span class="keyword">imports</span></span> <a href="NonInterferenceInter.html">NonInterferenceInter</a> 
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹In this section, we show how a valid CFG from the slicing framework in
\cite{Wasserrab:08} can be lifted to fulfil all properties of the 
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>NonInterferenceIntraGraph›</span></span></span></span> locale. Basically, we redefine the
hitherto existing <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Entry›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Exit›</span></span></span></span> nodes as new
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>High›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Low›</span></span></span></span> nodes, and introduce two new nodes
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>NewEntry›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>NewExit›</span></span></span></span>. Then, we have to lift all functions
to operate on this new graph.›</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Liftings›</span></span>

<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹The datatypes›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="tfree">'node</span> LDCFG_node <span class="main">=</span> Node <span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span>
  <span class="main">|</span> NewEntry
  <span class="main">|</span> NewExit


<span class="keyword1"><span class="command">type_synonym</span></span> <span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge <span class="main">=</span> 
  <span class="quoted"><span class="quoted">"<span class="tfree">'node</span> LDCFG_node <span class="main">×</span> <span class="main">(</span><span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind<span class="main">)</span> <span class="main">×</span> <span class="tfree">'node</span> LDCFG_node"</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Lifting basic definitions using <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">typ</span></span> <span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'edge</span></span></span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">typ</span></span> <span class="quoted"><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>›</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">lift_valid_edge</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span><span class="main">)</span> <span class="main">⇒</span>
  <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> 
  <span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge <span class="main">⇒</span> 
  bool"</span></span>
<span class="keyword2"><span class="keyword">for</span></span> <span class="entity">valid_edge</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">src</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">trg</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">knd</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">E</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">X</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span>

<span class="keyword2"><span class="keyword">where</span></span> lve_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">valid_edge</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">;</span> <span class="free">src</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">≠</span> <span class="free">E</span> <span class="main">∨</span> <span class="free">trg</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">≠</span> <span class="free">X</span><span class="main">;</span> 
    <span class="free"><span class="bound"><span class="entity">e</span></span></span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">src</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span><span class="main">,</span><span class="free">knd</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">,</span>Node <span class="main">(</span><span class="free">trg</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">⟧</span>
  <span class="main">⟹</span> <span class="free">lift_valid_edge</span> <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">E</span> <span class="free">X</span> <span class="free"><span class="bound"><span class="entity">e</span></span></span>"</span></span>

  <span class="main">|</span> lve_Entry_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">e</span></span></span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">E</span><span class="main">)</span> 
  <span class="main">⟹</span> <span class="free">lift_valid_edge</span> <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">E</span> <span class="free">X</span> <span class="free"><span class="bound"><span class="entity">e</span></span></span>"</span></span>

  <span class="main">|</span> lve_Exit_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">e</span></span></span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">X</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span> 
  <span class="main">⟹</span> <span class="free">lift_valid_edge</span> <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">E</span> <span class="free">X</span> <span class="free"><span class="bound"><span class="entity">e</span></span></span>"</span></span>

  <span class="main">|</span> lve_Entry_Exit_edge<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">e</span></span></span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span> 
  <span class="main">⟹</span> <span class="free">lift_valid_edge</span> <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">E</span> <span class="free">X</span> <span class="free"><span class="bound"><span class="entity">e</span></span></span>"</span></span>


<span class="keyword1"><span class="command">lemma</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">¬</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">E</span> <span class="free">X</span> <span class="main">(</span>Node <span class="free">E</span><span class="main">,</span><span class="free">et</span><span class="main">,</span>Node <span class="free">X</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>



<span class="keyword1"><span class="command">fun</span></span> <span class="entity">lift_get_proc</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'pname</span><span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'pname</span> <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node <span class="main">⇒</span> <span class="tfree">'pname</span>"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">lift_get_proc</span> <span class="free"><span class="bound"><span class="entity">get_proc</span></span></span> <span class="free"><span class="bound"><span class="entity">Main</span></span></span> <span class="main">(</span>Node <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">get_proc</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_get_proc</span> <span class="free"><span class="bound"><span class="entity">get_proc</span></span></span> <span class="free"><span class="bound"><span class="entity">Main</span></span></span> NewEntry <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">Main</span></span></span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_get_proc</span> <span class="free"><span class="bound"><span class="entity">get_proc</span></span></span> <span class="free"><span class="bound"><span class="entity">Main</span></span></span> NewExit <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">Main</span></span></span>"</span></span>


<span class="keyword1"><span class="command">inductive_set</span></span> <span class="entity">lift_get_return_edges</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'edge</span> set<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> 
  <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind<span class="main">)</span> 
  <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge 
  <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge set"</span></span>
<span class="keyword2"><span class="keyword">for</span></span> <span class="entity">get_return_edges</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'edge</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">valid_edge</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> bool"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">src</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">trg</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="tfree">'node</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">knd</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'edge</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">e</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge"</span></span>
<span class="keyword2"><span class="keyword">where</span></span> lift_get_return_edgesI<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">⟦</span><span class="free">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">src</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span><span class="main">,</span><span class="free">knd</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">,</span>Node <span class="main">(</span><span class="free">trg</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">;</span> <span class="free">valid_edge</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">;</span> <span class="free"><span class="bound"><span class="entity">a'</span></span></span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">;</span> 
  <span class="free"><span class="bound"><span class="entity">e'</span></span></span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">src</span> <span class="free"><span class="bound"><span class="entity">a'</span></span></span><span class="main">)</span><span class="main">,</span><span class="free">knd</span> <span class="free"><span class="bound"><span class="entity">a'</span></span></span><span class="main">,</span>Node <span class="main">(</span><span class="free">trg</span> <span class="free"><span class="bound"><span class="entity">a'</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">⟧</span>
  <span class="main">⟹</span> <span class="free"><span class="bound"><span class="entity">e'</span></span></span> <span class="main">∈</span> <span class="free">lift_get_return_edges</span> <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">src</span> <span class="free">trg</span> <span class="free">knd</span> <span class="free">e</span>"</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Lifting the Def and Use sets›</span></span>

<span class="keyword1"><span class="command">inductive_set</span></span> <span class="entity">lift_Def_set</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> 
                       <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'node</span> LDCFG_node <span class="main">×</span> <span class="tfree">'var</span><span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">for</span></span> <span class="entity">Def</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set<span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">E</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">X</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">H</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">L</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span>

<span class="keyword2"><span class="keyword">where</span></span> lift_Def_node<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">∈</span> <span class="free">Def</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">⟹</span> <span class="main">(</span>Node <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">)</span> <span class="main">∈</span> <span class="free">lift_Def_set</span> <span class="free">Def</span> <span class="free">E</span> <span class="free">X</span> <span class="free">H</span> <span class="free">L</span>"</span></span>

  <span class="main">|</span> lift_Def_High<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">∈</span> <span class="free">H</span> <span class="main">⟹</span> <span class="main">(</span>Node <span class="free">E</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">)</span> <span class="main">∈</span> <span class="free">lift_Def_set</span> <span class="free">Def</span> <span class="free">E</span> <span class="free">X</span> <span class="free">H</span> <span class="free">L</span>"</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">lift_Def</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> 
                       <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">lift_Def</span> <span class="free"><span class="bound"><span class="entity">Def</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">H</span></span></span> <span class="free"><span class="bound"><span class="entity">L</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">≡</span> <span class="main">{</span><span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">,</span><span class="bound">V</span><span class="main">)</span> <span class="main">∈</span> lift_Def_set <span class="free"><span class="bound"><span class="entity">Def</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">H</span></span></span> <span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">}</span>"</span></span>


<span class="keyword1"><span class="command">inductive_set</span></span> <span class="entity">lift_Use_set</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> 
                       <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'node</span> LDCFG_node <span class="main">×</span> <span class="tfree">'var</span><span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">for</span></span> <span class="entity">Use</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">E</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">X</span><span class="main">::</span><span class="tfree"><span class="quoted"><span class="tfree">'node</span></span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">H</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="entity">L</span><span class="main">::</span><span class="quoted"><span class="quoted">"<span class="tfree">'var</span> set"</span></span>

<span class="keyword2"><span class="keyword">where</span></span> 
  lift_Use_node<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">∈</span> <span class="free">Use</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">⟹</span> <span class="main">(</span>Node <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">)</span> <span class="main">∈</span> <span class="free">lift_Use_set</span> <span class="free">Use</span> <span class="free">E</span> <span class="free">X</span> <span class="free">H</span> <span class="free">L</span>"</span></span>

  <span class="main">|</span> lift_Use_High<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">∈</span> <span class="free">H</span> <span class="main">⟹</span> <span class="main">(</span>Node <span class="free">E</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">)</span> <span class="main">∈</span> <span class="free">lift_Use_set</span> <span class="free">Use</span> <span class="free">E</span> <span class="free">X</span> <span class="free">H</span> <span class="free">L</span>"</span></span>

  <span class="main">|</span> lift_Use_Low<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">∈</span> <span class="free">L</span> <span class="main">⟹</span> <span class="main">(</span>Node <span class="free">X</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">)</span> <span class="main">∈</span> <span class="free">lift_Use_set</span> <span class="free">Use</span> <span class="free">E</span> <span class="free">X</span> <span class="free">H</span> <span class="free">L</span>"</span></span>


<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">lift_Use</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'node</span> <span class="main">⇒</span> 
                       <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'var</span> set <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node <span class="main">⇒</span> <span class="tfree">'var</span> set"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">lift_Use</span> <span class="free"><span class="bound"><span class="entity">Use</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">H</span></span></span> <span class="free"><span class="bound"><span class="entity">L</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">≡</span> <span class="main">{</span><span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">,</span><span class="bound">V</span><span class="main">)</span> <span class="main">∈</span> lift_Use_set <span class="free"><span class="bound"><span class="entity">Use</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">H</span></span></span> <span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">}</span>"</span></span>


<span class="keyword1"><span class="command">fun</span></span> <span class="entity">lift_ParamUses</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> set list<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node <span class="main">⇒</span> <span class="tfree">'var</span> set list"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamUses</span> <span class="free"><span class="bound"><span class="entity">ParamUses</span></span></span> <span class="main">(</span>Node <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span>  <span class="free"><span class="bound"><span class="entity">ParamUses</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamUses</span> <span class="free"><span class="bound"><span class="entity">ParamUses</span></span></span> NewEntry <span class="main">=</span> <span class="main">[]</span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamUses</span> <span class="free"><span class="bound"><span class="entity">ParamUses</span></span></span> NewExit <span class="main">=</span> <span class="main">[]</span>"</span></span>


<span class="keyword1"><span class="command">fun</span></span> <span class="entity">lift_ParamDefs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'node</span> <span class="main">⇒</span> <span class="tfree">'var</span> list<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node <span class="main">⇒</span> <span class="tfree">'var</span> list"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamDefs</span> <span class="free"><span class="bound"><span class="entity">ParamDefs</span></span></span> <span class="main">(</span>Node <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span>  <span class="free"><span class="bound"><span class="entity">ParamDefs</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamDefs</span> <span class="free"><span class="bound"><span class="entity">ParamDefs</span></span></span> NewEntry <span class="main">=</span> <span class="main">[]</span>"</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">lift_ParamDefs</span> <span class="free"><span class="bound"><span class="entity">ParamDefs</span></span></span> NewExit <span class="main">=</span> <span class="main">[]</span>"</span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹The lifting lemmas›</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Lifting the CFG locales›</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">src</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">src</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">≡</span> fst <span class="free"><span class="bound"><span class="entity">a</span></span></span>"</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">trg</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge <span class="main">⇒</span> <span class="tfree">'node</span> LDCFG_node"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">trg</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">≡</span> snd<span class="main">(</span>snd <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">knd</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'edge</span><span class="main">,</span><span class="tfree">'node</span><span class="main">,</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> LDCFG_edge <span class="main">⇒</span> 
  <span class="main">(</span><span class="tfree">'var</span><span class="main">,</span><span class="tfree">'val</span><span class="main">,</span><span class="tfree">'ret</span><span class="main">,</span><span class="tfree">'pname</span><span class="main">)</span> edge_kind"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">knd</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">≡</span> fst<span class="main">(</span>snd <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span>"</span></span>


<span class="keyword1" id="LiftingInter-lift_CFG"><span class="command">lemma</span></span> lift_CFG<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"CFG src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit_wf <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> wf<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> Postdomination <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> pd<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> NewEntry"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> NewEntry <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> NewEntry"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span> 
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> src <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> trg <span class="skolem">a'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> lve_edge <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">erule</span> lift_valid_edge.cases<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">f</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="free">Main</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Main_no_call_target<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">f'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="free">Main</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Main_no_return_source<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">ins</span> <span class="bound">outs</span><span class="main">.</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="bound">ins</span><span class="main">,</span> <span class="bound">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>callee_in_procs<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>get_proc_intra 
                  <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>get_proc_Entry get_proc_Exit<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> 
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>get_proc_call<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>get_proc_return<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> all<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">⟶</span> 
               <span class="main">(</span><span class="main">∃</span><span class="bound">Qx</span> <span class="bound">rx</span> <span class="bound">fsx</span><span class="main">.</span> <span class="free">kind</span> <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Qx</span><span class="main">:</span><span class="bound">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fsx</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>call_edges_only<span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a'</span> 
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a'</span> <span class="main">=</span> trg <span class="skolem">a</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Qx</span> <span class="bound">rx</span> <span class="bound">fsx</span><span class="main">.</span> knd <span class="skolem">a'</span> <span class="main">=</span> <span class="bound">Qx</span><span class="main">:</span><span class="bound">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fsx</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">ax'</span> <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">note</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> trg <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax'</span>›</span></span> all <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Qx</span> <span class="bound">rx</span> <span class="bound">fsx</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="bound">Qx</span><span class="main">:</span><span class="bound">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fsx</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> Node <span class="free">Entry</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> trg <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> trg <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> trg <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">a'</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a'</span> <span class="main">∧</span>
               trg <span class="bound">a'</span> <span class="main">=</span> trg <span class="skolem">a</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Qx</span> <span class="bound">rx</span> <span class="bound">fsx</span><span class="main">.</span> knd <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Qx</span><span class="main">:</span><span class="bound">rx</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fsx</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> all<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">⟶</span> 
            <span class="main">(</span><span class="main">∃</span><span class="bound">Qx</span> <span class="bound">fx</span><span class="main">.</span> <span class="free">kind</span> <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Qx</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fx</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>return_edges_only<span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a'</span> 
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a'</span> <span class="main">=</span> src <span class="skolem">a</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Qx</span> <span class="bound">fx</span><span class="main">.</span> knd <span class="skolem">a'</span> <span class="main">=</span> <span class="bound">Qx</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fx</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">ax'</span> <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">note</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax'</span>›</span></span> all <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Qx</span> <span class="bound">fx</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="bound">Qx</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fx</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> Node <span class="free">Entry</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_source<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">a'</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a'</span> <span class="main">∧</span>
               src <span class="bound">a'</span> <span class="main">=</span> src <span class="skolem">a</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Qx</span> <span class="bound">fx</span><span class="main">.</span> knd <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Qx</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fx</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> 
      <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">ax</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_return_edges</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_return_edge_call<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> 
        lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> 
        <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">e</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_get_return_edgesI<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> 
      <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">a'</span> <span class="skolem">e'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_return_edges_valid<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">fs</span></span> 
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>only_call_get_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="skolem"><span class="skolem">f'</span></span> 
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>call_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">get_proc</span><span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_proc_return<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> get_proc_Entry <span class="quoted"><span class="quoted">‹<span class="free">get_proc</span><span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">p</span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="free">Main</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Main_no_return_source<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
      <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> knd <span class="skolem">a</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">a'</span> <span class="skolem">e'</span><span class="main">)</span> 
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">p</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="bound">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> only_call_get_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> 
      <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q'</span> <span class="bound">f'</span><span class="main">.</span> knd <span class="skolem">a'</span> <span class="main">=</span> <span class="bound">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">f'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">a'</span> <span class="skolem">e'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q'</span> <span class="bound">f'</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="bound">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">f'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> call_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a'</span> <span class="main">∧</span>
      <span class="main">(</span><span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> knd <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> 
      <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="bound">a'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="bound">a'</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span><span class="main">)</span> <span class="main">∧</span> 
        <span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="bound">a'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> return_needs_call<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="skolem"><span class="skolem">fs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> imp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">x</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="bound">x</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span><span class="main">)</span> <span class="main">∧</span> 
        <span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>ex1E<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_no_call_source<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_edge.lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"knd <span class="var">?e'</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">a'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span>
        <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="var">?e'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_get_return_edgesI<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> knd <span class="skolem">x</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>"</span></span> 
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span>
          <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> knd <span class="skolem">x</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">y</span>"</span></span> 
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">y</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">y</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span>
          <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">x</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">ax'</span> <span class="skolem">e</span><span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ax'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax'</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> get_return_edges_valid<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax'</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ax'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> edge_det<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> knd <span class="skolem">x</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">r</span> <span class="bound">fs</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="bound">Q</span><span class="main">:</span><span class="bound">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="bound">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ax'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span> imp
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span> 
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ex1I<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
      <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a''</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a''</span> <span class="main">∧</span>
      src <span class="bound">a''</span> <span class="main">=</span> trg <span class="skolem">a</span> <span class="main">∧</span> trg <span class="bound">a''</span> <span class="main">=</span> src <span class="skolem">a'</span> <span class="main">∧</span> knd <span class="bound">a''</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">a'</span> <span class="skolem">e'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>intra_proc_additional_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ex</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax'</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?ex</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a'</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
      <span class="free">targetnode</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a''</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a''</span> <span class="main">∧</span>
      src <span class="bound">a''</span> <span class="main">=</span> src <span class="skolem">a</span> <span class="main">∧</span> trg <span class="bound">a''</span> <span class="main">=</span> trg <span class="skolem">a'</span> <span class="main">∧</span> knd <span class="bound">a''</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_get_return_edges.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lift_get_return_edgesI <span class="skolem">ax</span> <span class="skolem">a'</span> <span class="skolem">e'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>call_return_node_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ex</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a'</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">ax</span>›</span></span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">fs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>only_call_get_return_edges<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_no_call_source<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax'</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?ex</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a'</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">ax'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">cf</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a'</span> <span class="main">∧</span>
      src <span class="bound">a'</span> <span class="main">=</span> src <span class="skolem">a</span> <span class="main">∧</span> intra_kind <span class="main">(</span>knd <span class="bound">a'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∧</span>
        intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">a'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> call_only_one_intra_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind<span class="main">(</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">)</span>"</span></span> 
        <span class="keyword2"><span class="keyword">and</span></span> imp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">x</span> <span class="main">∧</span> <span class="free">sourcenode</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∧</span> intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">x</span><span class="main">)</span>
        <span class="main">⟶</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>ex1E<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_no_call_source<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_edge.lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"src <span class="var">?e'</span> <span class="main">=</span> src <span class="skolem">e</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹intra_kind<span class="main">(</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="var">?e'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> 
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">x</span> <span class="main">=</span> src <span class="skolem">e</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">ax</span> <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">ex</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">x</span> <span class="main">=</span> src <span class="skolem">e</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">ex</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> imp <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">ex</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ex</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">x</span> <span class="main">=</span> src <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">x</span> <span class="main">=</span> src <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_source<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">x</span> <span class="main">=</span> src <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ex1I<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a'</span> <span class="main">∧</span>
      trg <span class="bound">a'</span> <span class="main">=</span> trg <span class="skolem">a</span> <span class="main">∧</span> intra_kind <span class="main">(</span>knd <span class="bound">a'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">a'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">a'</span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">∧</span>
        intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">a'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> return_only_one_intra_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind<span class="main">(</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">)</span>"</span></span> 
        <span class="keyword2"><span class="keyword">and</span></span> imp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">x</span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">∧</span> intra_kind<span class="main">(</span><span class="free">kind</span> <span class="bound">x</span><span class="main">)</span>
        <span class="main">⟶</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>ex1E<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a'</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_no_return_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_edge.lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"trg <span class="var">?e'</span> <span class="main">=</span> trg <span class="skolem">e</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹intra_kind<span class="main">(</span><span class="free">kind</span> <span class="skolem">a'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="var">?e'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> 
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">x</span> <span class="main">=</span> trg <span class="skolem">e</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="var">?e'</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">ax</span> <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">ex</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">x</span> <span class="main">=</span> trg <span class="skolem">e</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">ex</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> imp <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ax</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">ex</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ex</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">x</span> <span class="main">=</span> trg <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">x</span> <span class="main">=</span> trg <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">ex</span><span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">x</span> <span class="main">=</span> trg <span class="skolem">e</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ex1I<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>1</sub></span> <span class="skolem">r<span class="hidden">⇩</span><sub>1</sub></span> <span class="skolem">p</span> <span class="skolem">fs<span class="hidden">⇩</span><sub>1</sub></span> <span class="skolem">Q<span class="hidden">⇩</span><sub>2</sub></span> <span class="skolem">r<span class="hidden">⇩</span><sub>2</sub></span> <span class="skolem">fs<span class="hidden">⇩</span><sub>2</sub></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>1</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>2</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>2</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="skolem"><span class="skolem">x'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> a<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">x</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> a'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">x'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x'</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>1</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>2</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>2</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>1</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="skolem">Q<span class="hidden">⇩</span><sub>2</sub></span><span class="main">:</span><span class="skolem">r<span class="hidden">⇩</span><sub>2</sub></span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">x'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> same_proc_call_unique_target<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> a a' <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> trg <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> unique_callers <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"distinct_fst <span class="free">procs</span>"</span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">ins</span> <span class="skolem">outs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> distinct_formal_ins<span class="main">[</span><span class="operator">OF</span> this<span class="main">]</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"distinct <span class="skolem">ins</span>"</span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">ins</span> <span class="skolem">outs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> distinct_formal_outs<span class="main">[</span><span class="operator">OF</span> this<span class="main">]</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"distinct <span class="skolem">outs</span>"</span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="LiftingInter-lift_CFG_wf"><span class="command">lemma</span></span> lift_CFG_wf<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"CFG_wf src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span> <span class="main">(</span>lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span> <span class="main">(</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span>
  <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span><span class="main">)</span> <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit_wf <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> wf<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> Postdomination <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFG<span class="main">:</span>CFG <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span> 
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFG wf pd<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> NewEntry <span class="main">=</span> <span class="main">{}</span> <span class="main">∧</span>
          lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> NewEntry <span class="main">=</span> <span class="main">{}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Use_set.cases lift_Def_set.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">ins</span> <span class="skolem">outs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">ins</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length<span class="main">(</span><span class="free">ParamUses</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">ins</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> ParamUses_call_source_length<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"distinct <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"distinct <span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> distinct_ParamDefs<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">ParamDefs</span> <span class="free">Entry</span> <span class="main">=</span> <span class="main">[]</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">ParamDefs</span> <span class="free">Entry</span> <span class="main">≠</span> <span class="main">[]</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="skolem"><span class="skolem">Vs</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">ParamDefs</span> <span class="free">Entry</span> <span class="main">=</span> <span class="skolem">V</span><span class="main">#</span><span class="skolem">Vs</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">ParamDefs</span> <span class="free">Entry</span>"</span></span><span class="main">)</span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span><span class="free">ParamDefs</span> <span class="free">Entry</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>ParamDefs_in_Def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> Entry_empty <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> Node <span class="free">Entry</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span> <span class="skolem">ins</span> <span class="skolem">outs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"length <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span><span class="skolem">ins</span><span class="main">,</span><span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"length<span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> length <span class="skolem">outs</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> ParamDefs_return_target_length<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_node src trg 
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> <span class="skolem">n</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="skolem">n</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="skolem">n</span> <span class="main">=</span> NewEntry<span class="main">)</span> <span class="main">∨</span> <span class="skolem">n</span> <span class="main">=</span> NewExit<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFG.valid_node_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">erule</span> disjE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewEntry"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="skolem">n</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
       <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewExit"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="skolem">n</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="skolem">n</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="main">(</span><span class="free">ParamDefs</span> <span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> ParamDefs_in_Def<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Def_node<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">ins</span> <span class="skolem">outs</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="skolem">ins</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> set <span class="skolem">ins</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> ins_in_Def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Def_node<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span> <span class="main">≠</span> <span class="main">{}</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> call_source_Def_empty<span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_no_call_source<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span> 
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_node src trg 
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> <span class="skolem">n</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">(</span>set <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span> <span class="skolem">n</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="skolem">n</span> <span class="main">=</span> NewEntry<span class="main">)</span> <span class="main">∨</span> <span class="skolem">n</span> <span class="main">=</span> NewExit<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFG.valid_node_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">erule</span> disjE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewEntry"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">(</span>set <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span> <span class="skolem">n</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewExit"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">(</span>set <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span> <span class="skolem">n</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">(</span>set <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span> <span class="skolem">n</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">(</span>set <span class="main">(</span><span class="free">ParamUses</span> <span class="skolem">m</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> ParamUses_in_Use<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_node<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span> <span class="skolem">ins</span> <span class="skolem">outs</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> set <span class="skolem">outs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> set <span class="skolem">outs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> outs_in_Use<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_node<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">V</span> <span class="skolem">s</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∉</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"state_val <span class="main">(</span>transfer <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> state_val <span class="skolem">s</span> <span class="skolem">V</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> 
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">e</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∉</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∉</span> <span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> lift_Def_node<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∉</span> <span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"state_val <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> state_val <span class="skolem">s</span> <span class="skolem">V</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_intra_edge_no_Def_equal<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="free">kind</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> Node <span class="free">Entry</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">s</span> <span class="skolem">s'</span>
    <span class="keyword3"><span class="command">assume</span></span> assms<span class="main">:</span><span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
      <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span><span class="main">.</span>
      state_val <span class="main">(</span>transfer <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="main">(</span>transfer <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"state_val <span class="main">(</span>transfer <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="skolem">V</span> <span class="main">=</span> state_val <span class="main">(</span>transfer <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> Node <span class="free">Entry</span>"</span></span><span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> True
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">from</span></span> Entry_Exit_edge <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a'</span>"</span></span>
            <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
            <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="bound">Q</span><span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
          <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span><span class="main">)</span>
            <span class="keyword3"><span class="command">case</span></span> True
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span>
              <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Exit</span>›</span></span>
            <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>edge_det<span class="main">)</span>
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">next</span></span>
            <span class="keyword3"><span class="command">case</span></span> False
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span>
              <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="free">Exit</span>›</span></span>
              <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span>
            <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>deterministic <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
          <span class="keyword1"><span class="command">qed</span></span>
          <span class="keyword1"><span class="command">from</span></span> True <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span> Entry_empty
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">H</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases<span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> True <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Exit</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">H</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_High<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span><span class="main">.</span> 
            state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">H</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"state_val <span class="skolem">s</span> <span class="skolem">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q</span><span class="main">.</span> <span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="bound">Q</span><span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main"><span class="keyword3">,</span></span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> False
          <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V'</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V'</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V'</span> <span class="main">∈</span> lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>"</span></span>
              <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_node<span class="main">)</span>
          <span class="keyword1"><span class="command">}</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span><span class="main">.</span> 
            state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> this <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
            <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
            state_val <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">erule</span> CFG_intra_edge_transfer_uses_only_Use<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span> False
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Def</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span><span class="main">)</span> <span class="bound">V</span> <span class="main">=</span>
            state_val <span class="main">(</span>transfer <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span><span class="main">)</span> <span class="bound">V</span>›</span></span>
            <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>NewEntry<span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> Node <span class="free">Entry</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>Entry_noteq_Exit <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>Exit_empty<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">e</span><span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">s</span> <span class="skolem">s'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"snd <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"length <span class="skolem">s</span> <span class="main">=</span> length <span class="skolem">s'</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">Use</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>lift_Use_node<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹snd <span class="main">(</span>hd <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>hd <span class="skolem">s'</span><span class="main">)</span>›</span></span>
        this <span class="quoted"><span class="quoted">‹length <span class="skolem">s</span> <span class="main">=</span> length <span class="skolem">s'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_edge_Uses_pred_equal<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s'</span></span><span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Entry_Exit_edge <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">s</span></span><span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">ins</span> <span class="skolem">outs</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"length <span class="skolem">fs</span> <span class="main">=</span> length <span class="skolem">ins</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_call_edge_length<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">a'</span> <span class="skolem">Q'</span> <span class="skolem">r'</span> <span class="skolem">p'</span> <span class="skolem">fs'</span> <span class="skolem">s</span> <span class="skolem">s'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span><span class="main">:</span><span class="skolem">r'</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">fs'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> src <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a'</span><span class="main">)</span> <span class="skolem">s</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>›</span></span>
      <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> a<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">x</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">x</span><span class="main">)</span> <span class="skolem">s</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>›</span></span>
      <span class="quoted"><span class="quoted">‹knd <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span><span class="main">:</span><span class="skolem">r'</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">fs'</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">a'</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x'</span></span> <span class="keyword2"><span class="keyword">where</span></span> a'<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">x'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">x'</span><span class="main">)</span><span class="main">)</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a'</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="skolem">Q'</span><span class="main">:</span><span class="skolem">r'</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">fs'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">x'</span><span class="main">)</span> <span class="skolem">s</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a'</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> src <span class="skolem">a'</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">x'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="skolem">Q'</span><span class="main">:</span><span class="skolem">r'</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">fs'</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x'</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">x</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">x'</span><span class="main">)</span> <span class="skolem">s</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">x'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_call_determ<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> a a' <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="skolem">a'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span> <span class="skolem">i</span> <span class="skolem">ins</span> <span class="skolem">outs</span> <span class="skolem">s</span> <span class="skolem">s'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">ins</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_ParamUses <span class="free">ParamUses</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"params <span class="skolem">fs</span> <span class="main">(</span>state_val <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span> <span class="main">=</span> CFG.params <span class="skolem">fs</span> <span class="main">(</span>state_val <span class="skolem">s'</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
        <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span>lift_ParamUses <span class="free">ParamUses</span> <span class="main">(</span>src <span class="skolem">e</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">i</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>›</span></span>
        <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="main">(</span><span class="free">ParamUses</span> <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">!</span><span class="skolem">i</span><span class="main">.</span> state_val <span class="skolem">s</span> <span class="bound">V</span> <span class="main">=</span> state_val <span class="skolem">s'</span> <span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">&lt;</span> length <span class="skolem">ins</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s</span>›</span></span> <span class="quoted"><span class="quoted">‹pred <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span> <span class="skolem">s'</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_call_edge_params<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">p</span> <span class="skolem">f'</span> <span class="skolem">ins</span> <span class="skolem">outs</span> <span class="skolem">cf</span> <span class="skolem">cf'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f'</span> <span class="skolem">cf</span> <span class="skolem">cf'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span> <span class="main">(</span>trg <span class="skolem">a</span><span class="main">)</span> <span class="main">[:=]</span> map <span class="skolem">cf</span> <span class="skolem">outs</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">e</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">ins</span><span class="main">,</span> <span class="skolem">outs</span><span class="main">)</span> <span class="main">∈</span> set <span class="free">procs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f'</span> <span class="skolem">cf</span> <span class="skolem">cf'</span> <span class="main">=</span> <span class="skolem">cf'</span><span class="main">(</span><span class="free">ParamDefs</span> <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span> <span class="main">[:=]</span> map <span class="skolem">cf</span> <span class="skolem">outs</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFG_return_edge_fun<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">a'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> src <span class="skolem">a'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">≠</span> trg <span class="skolem">a'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">a</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span>knd <span class="skolem">a'</span><span class="main">)</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">Q</span> <span class="bound">Q'</span><span class="main">.</span> knd <span class="skolem">a</span> <span class="main">=</span> <span class="main">(</span><span class="bound">Q</span><span class="main">)<span class="hidden">⇩</span><sub>√</sub></span> <span class="main">∧</span> knd <span class="skolem">a'</span> <span class="main">=</span> <span class="main">(</span><span class="bound">Q'</span><span class="main">)<span class="hidden">⇩</span><sub>√</sub></span> <span class="main">∧</span> 
                 <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="main">(</span><span class="bound">Q</span> <span class="bound">s</span> <span class="main">⟶</span> <span class="main">¬</span> <span class="bound">Q'</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">Q'</span> <span class="bound">s</span> <span class="main">⟶</span> <span class="main">¬</span> <span class="bound">Q</span> <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>›</span></span>
        <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">≠</span> trg <span class="skolem">a'</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">e</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span>knd <span class="skolem">a'</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> lve_edge <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>deterministic<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_Exit_edge <span class="skolem">e'</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="skolem">e'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span> NewExit<span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> src <span class="skolem">e'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_source<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="LiftingInter-lift_CFGExit"><span class="command">lemma</span></span> lift_CFGExit<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"CFGExit src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span> NewExit"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit_wf <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> wf<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> Postdomination <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFG<span class="main">:</span>CFG <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span> 
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFG wf pd<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> NewExit"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> NewExit <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> NewExit"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a</span><span class="main">.</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="bound">a</span> <span class="main">∧</span>
      src <span class="bound">a</span> <span class="main">=</span> NewEntry <span class="main">∧</span> trg <span class="bound">a</span> <span class="main">=</span> NewExit <span class="main">∧</span> knd <span class="bound">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_Exit_edge<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="LiftingInter-lift_CFGExit_wf"><span class="command">lemma</span></span> lift_CFGExit_wf<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"CFGExit_wf src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span> NewExit <span class="main">(</span>lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span> <span class="main">(</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span>
  <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span><span class="main">)</span> <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit_wf <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> wf<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> Postdomination <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFG_wf<span class="main">:</span>CFG_wf <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span> 
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_ParamDefs <span class="free">ParamDefs</span>"</span></span> <span class="quoted"><span class="quoted">"lift_ParamUses <span class="free">ParamUses</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFG_wf wf pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit<span class="main">:</span>CFGExit <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted">NewExit</span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFGExit wf pd<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> NewExit <span class="main">=</span> <span class="main">{}</span> <span class="main">∧</span>
      lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span> NewExit <span class="main">=</span> <span class="main">{}</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases lift_Use_set.cases<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Lifting the SDG›</span></span>



<span class="keyword1" id="LiftingInter-lift_Postdomination"><span class="command">lemma</span></span> lift_Postdomination<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> inner<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit.inner_node <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">nx</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Postdomination src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span> NewExit"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit_wf <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> wf<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> Postdomination <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> CFGExit<span class="main">:</span>CFGExit <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted">NewExit</span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFGExit wf pd<span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∨</span> <span class="skolem">m</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>valid_node_def<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">∨</span> <span class="skolem">m</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_node src trg
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> True
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> False
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node<span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> True
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Exit_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Exit</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> False
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node<span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">targetnode</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">note</span></span> lift_valid_node <span class="main">=</span> this
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="skolem">as</span> <span class="skolem">n'</span> <span class="skolem">cs</span> <span class="skolem">m</span> <span class="skolem">m'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"valid_path_aux <span class="skolem">cs</span> <span class="skolem">as</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">c</span> <span class="main">∈</span> set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">cs'</span> <span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path_aux knd
      <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
      <span class="bound">cs'</span> <span class="bound">es</span> <span class="main">∧</span> 
      list_all2 <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="bound">c</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span> <span class="bound">cs'</span> 
       <span class="main">∧</span> CFG.CFG.path src trg
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
      <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span><span class="quoted"><span class="skolem">m</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>vpa_induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>vpa_empty <span class="skolem">cs</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="main">[]</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="skolem">m'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="main">[]</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> path_valid_node<span class="main">)</span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cs'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">cs'</span> <span class="main">=</span> 
        map <span class="main">(</span><span class="main">λ</span><span class="bound">c</span><span class="main">.</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="bound">c</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"list_all2 
        <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="bound">c</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span> <span class="skolem">cs'</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>list_all2_conv_all_nth<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cs'</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">[]</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.empty_path lift_valid_node<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>vpa_intra <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="main">⟦</span><span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span><span class="main">;</span> <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="bound">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span><span class="main">⟧</span> <span class="main">⟹</span>
        <span class="main">∃</span><span class="bound">cs'</span> <span class="bound">es</span><span class="main">.</span> CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="bound">cs'</span> <span class="bound">es</span> <span class="main">∧</span>
        list_all2 <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span>
        <span class="bound">cs'</span> <span class="main">∧</span> CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="bound">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span> <span class="main">∧</span> <span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> True
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> True <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m'</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">drule</span> path_Exit_source<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> False
        <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> False <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> 
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> this<span class="main">]</span> 
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cs'</span></span> <span class="skolem"><span class="skolem">es</span></span>
          <span class="keyword2"><span class="keyword">where</span></span> valid_path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="skolem">cs'</span> <span class="skolem">es</span>"</span></span> 
          <span class="keyword2"><span class="keyword">and</span></span> list<span class="main">:</span><span class="quoted"><span class="quoted">"list_all2 
          <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span> <span class="skolem">cs'</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">)</span>›</span></span> valid_path <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="skolem">cs'</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> path <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> list <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>vpa_Call <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span> <span class="skolem">Q</span> <span class="skolem">r</span> <span class="skolem">p</span> <span class="skolem">fs</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="main">⟦</span><span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span><span class="main">;</span> <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> 
        <span class="bound">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span><span class="main">⟧</span> <span class="main">⟹</span>
        <span class="main">∃</span><span class="bound">cs'</span> <span class="bound">es</span><span class="main">.</span> CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="bound">cs'</span> <span class="bound">es</span> <span class="main">∧</span>
        list_all2 <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> 
        <span class="main">(</span><span class="skolem">a</span><span class="main">#</span><span class="skolem">cs</span><span class="main">)</span> <span class="bound">cs'</span> <span class="main">∧</span> CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="bound">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span> 
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_no_call_source<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">cs</span><span class="main">)</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> this<span class="main">]</span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cs'</span></span> <span class="skolem"><span class="skolem">es</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> valid_path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="skolem">cs'</span> <span class="skolem">es</span>"</span></span> 
        <span class="keyword2"><span class="keyword">and</span></span> list<span class="main">:</span><span class="quoted"><span class="quoted">"list_all2 
        <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="skolem">a</span><span class="main">#</span><span class="skolem">cs</span><span class="main">)</span> <span class="skolem">cs'</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> list <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cx</span></span> <span class="skolem"><span class="skolem">csx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">cs'</span> <span class="main">=</span> <span class="skolem">cx</span><span class="main">#</span><span class="skolem">csx</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> cx<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">cx</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> list'<span class="main">:</span><span class="quoted"><span class="quoted">"list_all2 
        <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span> <span class="skolem">csx</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>list_all2_Cons1<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> valid_path cx <span class="quoted"><span class="quoted">‹<span class="skolem">cs'</span> <span class="main">=</span> <span class="skolem">cx</span><span class="main">#</span><span class="skolem">csx</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span><span class="main">:</span><span class="skolem">r</span>↪<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">fs</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="skolem">csx</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> path <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> list' <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>vpa_ReturnEmpty <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span> <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="main">⟦</span><span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span><span class="main">;</span> <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="main">[]</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="bound">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span><span class="main">⟧</span> <span class="main">⟹</span>
        <span class="main">∃</span><span class="bound">cs'</span> <span class="bound">es</span><span class="main">.</span> CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="bound">cs'</span> <span class="bound">es</span> <span class="main">∧</span>
        list_all2 <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> 
        <span class="main">[]</span> <span class="bound">cs'</span> <span class="main">∧</span> CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="bound">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_no_return_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> _ this<span class="main">]</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">es</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> valid_path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">[]</span> <span class="skolem">es</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> valid_path <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">[]</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> path <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="main">[]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>vpa_ReturnCons <span class="skolem">cs</span> <span class="skolem">a</span> <span class="skolem">as</span> <span class="skolem">Q</span> <span class="skolem">p</span> <span class="skolem">f</span> <span class="skolem">c'</span> <span class="skolem">cs'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> IH <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="main">⟦</span><span class="bound">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span><span class="main">;</span> <span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span><span class="main">;</span> <span class="bound">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span><span class="main">⟧</span> <span class="main">⟹</span>
        <span class="main">∃</span><span class="bound">csx</span> <span class="bound">es</span><span class="main">.</span> CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="bound">csx</span> <span class="bound">es</span> <span class="main">∧</span>
        list_all2 <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> 
        <span class="skolem">cs'</span> <span class="bound">csx</span> <span class="main">∧</span> CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="bound">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">-</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>path_split_Cons<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">c'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?e</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_no_return_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="skolem">m'</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> IH<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→*</span> <span class="skolem">m'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">c</span><span class="main">∈</span>set <span class="skolem">cs'</span><span class="main">.</span> <span class="free">valid_edge</span> <span class="bound">c</span>›</span></span> this<span class="main">]</span> 
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">csx</span></span> <span class="skolem"><span class="skolem">es</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> valid_path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="skolem">csx</span> <span class="skolem">es</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> list<span class="main">:</span><span class="quoted"><span class="quoted">"list_all2 
        <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs'</span> <span class="skolem">csx</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> path<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">c'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="free">get_return_edges</span> <span class="skolem">c'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?e</span> <span class="main">∈</span> lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span>
        <span class="free">targetnode</span> <span class="free">kind</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">c'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_get_return_edgesI<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> valid_path <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.valid_path_aux knd
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
        <span class="main">(</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">c'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">#</span><span class="skolem">csx</span><span class="main">)</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> list <span class="quoted"><span class="quoted">‹<span class="skolem">cs</span> <span class="main">=</span> <span class="skolem">c'</span> <span class="main">#</span> <span class="skolem">cs'</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"list_all2 
        <span class="main">(</span><span class="main">λ</span><span class="bound">c</span> <span class="bound">c'</span><span class="main">.</span> <span class="bound">c'</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="bound">c</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="bound">c</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="bound">c</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">cs</span> 
        <span class="main">(</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">c'</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">c'</span><span class="main">)</span><span class="main">)</span><span class="main">#</span><span class="skolem">csx</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> path <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">a</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="var">?e</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="main">(</span><span class="var">?e</span><span class="main">#</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">kind</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">hence</span></span> lift_valid_path<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">m</span> <span class="bound">as</span> <span class="bound">m'</span><span class="main">.</span> <span class="main">⟦</span><span class="bound">m</span> <span class="main">-</span><span class="bound">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="bound">m'</span><span class="main">;</span> <span class="bound">m</span> <span class="main">≠</span> <span class="free">Entry</span> <span class="main">∨</span> <span class="bound">m'</span> <span class="main">≠</span> <span class="free">Exit</span><span class="main">⟧</span> 
    <span class="main">⟹</span> <span class="main">∃</span><span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
    <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
    <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
    <span class="main">(</span>Node <span class="bound">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="bound">m'</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>vp_def valid_path_def CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_node src trg
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> <span class="skolem">n</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="skolem">n</span> <span class="main">=</span> NewEntry<span class="main">)</span> <span class="main">∨</span> <span class="skolem">n</span> <span class="main">=</span> NewExit<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">as</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
      <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
      NewEntry <span class="bound">as</span> <span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">erule</span> disjE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewEntry"</span></span> 
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
        NewEntry <span class="main">[]</span> <span class="skolem">n</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.empty_path 
          <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewExit"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
        <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_Exit_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        NewEntry <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>CFGExit.path_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> NewExit›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
        NewEntry <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> <span class="skolem">n</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">m</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>valid_node_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> Entry
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          NewEntry <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span> <span class="skolem">n</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> Exit
        <span class="keyword1"><span class="command">from</span></span> inner <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> inner_node_Exit_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_edge.lve_edge <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="free">Exit</span><span class="main">)</span><span class="main">]</span> 
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> slp_edge<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="free">Exit</span><span class="main">)</span><span class="main">]</span> 
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def 
            intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Exit</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_source<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>NewEntry<span class="main">)</span> <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> slp_edge'<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>NewEntry<span class="main">)</span> <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> inner_is_valid<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">asx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">Entry</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="free">sourcenode</span> <span class="skolem">ax</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Entry_path<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Exit</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_path<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">es</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
          <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">(</span><span class="skolem">es</span><span class="main">@</span><span class="main">[</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="free">Exit</span><span class="main">)</span><span class="main">]</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> CFGExit.vp_slp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge' <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> NewEntry
          <span class="main">(</span><span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span><span class="main">@</span>
          <span class="main">(</span><span class="skolem">es</span><span class="main">@</span><span class="main">[</span><span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="free">Exit</span><span class="main">)</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.slp_vp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Exit</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> inner
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>NewEntry<span class="main">)</span> <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> slp_edge<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>NewEntry<span class="main">)</span> <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">as</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">Entry</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="skolem">m</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Entry_path<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="skolem">m</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">es</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> NewEntry <span class="main">(</span><span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>Node <span class="free">Entry</span><span class="main">)</span><span class="main">]</span><span class="main">@</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.slp_vp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_node src trg
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> <span class="skolem">n</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="skolem">n</span> <span class="main">=</span> NewEntry<span class="main">)</span> <span class="main">∨</span> <span class="skolem">n</span> <span class="main">=</span> NewExit<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">as</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
      <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
      <span class="skolem">n</span> <span class="bound">as</span> NewExit"</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">erule</span> disjE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewEntry"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
        <span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_Exit_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.path src trg
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        NewEntry <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>CFGExit.path_edge<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> NewEntry›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
        <span class="skolem">n</span> <span class="main">[</span><span class="main">(</span>NewEntry<span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> False<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewExit"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
        <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
        <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
        <span class="skolem">n</span> <span class="main">[]</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.empty_path 
          <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">n</span> <span class="main">=</span> Node <span class="bound">m</span> <span class="main">∧</span> valid_node <span class="bound">m</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="skolem">m</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>valid_node_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> Entry
        <span class="keyword1"><span class="command">from</span></span> inner <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ax</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">ax</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inner_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule</span> inner_node_Entry_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="free">Entry</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_edge.lve_edge <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Entry</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span><span class="main">]</span> 
          <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹intra_kind <span class="main">(</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> slp_edge<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Entry</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span><span class="main">]</span> 
          <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def 
            intra_kind_def<span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">ax</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Exit_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> slp_edge'<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"valid_node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> inner_is_valid<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">asx</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">-</span><span class="skolem">asx</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="free">Exit</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Exit_path<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">targetnode</span> <span class="skolem">ax</span> <span class="main">≠</span> <span class="free">Entry</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_path<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">es</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
          <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">(</span><span class="main">[</span><span class="main">(</span>Node <span class="free">Entry</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span><span class="main">]</span><span class="main">@</span><span class="skolem">es</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.slp_vp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge' <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span>
          <span class="main">(</span><span class="main">(</span><span class="main">[</span><span class="main">(</span>Node <span class="free">Entry</span><span class="main">,</span><span class="free">kind</span> <span class="skolem">ax</span><span class="main">,</span>Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">ax</span><span class="main">)</span><span class="main">)</span><span class="main">]</span><span class="main">@</span><span class="skolem">es</span><span class="main">)</span><span class="main">@</span>
          <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span><span class="main">)</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> CFGExit.vp_slp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Entry</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> Exit
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Exit_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span class="free">Exit</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="skolem">n</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.vp_def CFGExit.valid_path_def<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> inner
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Exit_edge<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"CFG.path src trg
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>CFGExit.Cons_path CFGExit.empty_path
                       <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.valid_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> slp_edge<span class="main">:</span><span class="quoted"><span class="quoted">"CFG.CFG.same_level_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span>
          <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span> <span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>CFGExit.slp_def CFGExit.same_level_path_def<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹valid_node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">as</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span> <span class="main">-</span><span class="skolem">as</span><span class="main">→<span class="hidden">⇩</span><sub>√</sub>*</span> <span class="free">Exit</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span>Exit_path<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹inner_node <span class="skolem">m</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">es</span><span class="main">.</span> CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="bound">es</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_valid_path <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>inner_node_def<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">es</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="skolem">es</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> slp_edge <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"CFG.CFG.valid_path' src trg knd
          <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span>
          <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> 
          <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> <span class="main">(</span>Node <span class="skolem">m</span><span class="main">)</span> <span class="main">(</span><span class="skolem">es</span><span class="main">@</span><span class="main">[</span><span class="main">(</span>Node <span class="free">Exit</span><span class="main">,</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span><span class="main">,</span>NewExit<span class="main">)</span><span class="main">]</span><span class="main">)</span> NewExit"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> CFGExit.vp_slp_Append<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> Node <span class="skolem">m</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">n</span> <span class="skolem">n'</span>
    <span class="keyword3"><span class="command">assume</span></span> method_exit1<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit.CFGExit.method_exit src knd
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewExit <span class="skolem">n</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> method_exit2<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit.CFGExit.method_exit src knd
      <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewExit <span class="skolem">n'</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> lift_eq<span class="main">:</span><span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="skolem">n</span> <span class="main">=</span> lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="skolem">n'</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> method_exit1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> <span class="skolem">n'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.method_exit_cases<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> NewExit"</span></span>
      <span class="keyword1"><span class="command">from</span></span> method_exit2 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.method_exit_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">=</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> NewExit›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">f</span> <span class="skolem">p</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">=</span> src <span class="skolem">a</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> CFGExit.get_proc_return<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> CFGExit.get_proc_Exit lift_eq <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> NewExit›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">p</span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="free">Main</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.Main_no_return_source<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">Q</span> <span class="skolem">f</span> <span class="skolem">p</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">=</span> src <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"method_exit <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>method_exit_def<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> method_exit2 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.method_exit_cases<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">=</span> NewExit"</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>›</span></span>
          <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span> <span class="main">(</span>src <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">p</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span><span class="main">(</span><span class="operator">rule</span> CFGExit.get_proc_return<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> CFGExit.get_proc_Exit lift_eq <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">=</span> NewExit›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">p</span> <span class="main">=</span> <span class="free">Main</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Q</span>↩<span class="hidden">⇘</span><sub><span class="free">Main</span></sub><span class="hidden">⇙</span><span class="skolem">f</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> CFGExit.Main_no_return_source<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a'</span> <span class="skolem">Q'</span> <span class="skolem">f'</span> <span class="skolem">p'</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n'</span> <span class="main">=</span> src <span class="skolem">a'</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a'</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"knd <span class="skolem">a'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">valid_edge</span> <span class="skolem">x'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a'</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>"</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">kind</span> <span class="skolem">x'</span> <span class="main">=</span> <span class="skolem">Q'</span>↩<span class="hidden">⇘</span><sub><span class="skolem">p'</span></sub><span class="hidden">⇙</span><span class="skolem">f'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"method_exit <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>method_exit_def<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹method_exit <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> lift_eq <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">=</span> src <span class="skolem">a'</span>›</span></span>
          <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a'</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">sourcenode</span> <span class="skolem">x'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>method_exit_unique<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹src <span class="skolem">a'</span> <span class="main">=</span> Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">x'</span><span class="main">)</span>›</span></span>
          <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> src <span class="skolem">a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n'</span> <span class="main">=</span> src <span class="skolem">a'</span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="LiftingInter-lift_SDG"><span class="command">lemma</span></span> lift_SDG<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> SDG<span class="main">:</span><span class="quoted"><span class="quoted">"SDG <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> inner<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit.inner_node <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">nx</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"SDG src trg knd
  <span class="main">(</span>lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span><span class="main">)</span> NewEntry
  <span class="main">(</span>lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span><span class="main">)</span> 
  <span class="main">(</span>lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span><span class="main">)</span> 
  <span class="free">procs</span> <span class="free">Main</span> NewExit <span class="main">(</span>lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span> <span class="main">(</span>lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span><span class="main">)</span>
  <span class="main">(</span>lift_ParamDefs <span class="free">ParamDefs</span><span class="main">)</span> <span class="main">(</span>lift_ParamUses <span class="free">ParamUses</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> SDG <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> SDG<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> wf<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit_wf <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span>
    <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">unfold_locales</span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> pd<span class="main">:</span><span class="quoted"><span class="quoted">"Postdomination <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
    <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">unfold_locales</span><span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> wf'<span class="main">:</span>CFGExit_wf <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted">NewExit</span> <span class="quoted"><span class="quoted">"lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_ParamDefs <span class="free">ParamDefs</span>"</span></span> <span class="quoted"><span class="quoted">"lift_ParamUses <span class="free">ParamUses</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_CFGExit_wf wf pd<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> pd'<span class="main">:</span>Postdomination <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span>
    <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span> <span class="quoted">NewEntry</span>
    <span class="quoted"><span class="quoted">"lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span>
    <span class="quoted"><span class="quoted">"lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span> 
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted">NewExit</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Postdomination wf pd inner<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">unfold_locales</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Low-deterministic security via the lifted graph›</span></span>

<span class="keyword1" id="LiftingInter-Lift_NonInterferenceGraph"><span class="command">lemma</span></span> Lift_NonInterferenceGraph<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">valid_edge</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">sourcenode</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">targetnode</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">kind</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Entry</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Exit</span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_proc</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">get_return_edges</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">procs</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Main</span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Def</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">Use</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamDefs</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">ParamUses</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">H</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">L</span>
  <span class="keyword2"><span class="keyword">defines</span></span> lve<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lve</span> <span class="main">≡</span> lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lget_proc<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lget_proc</span> <span class="main">≡</span> lift_get_proc <span class="free">get_proc</span> <span class="free">Main</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lget_return_edges<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lget_return_edges</span> <span class="main">≡</span> 
  lift_get_return_edges <span class="free">get_return_edges</span> <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lDef<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lDef</span> <span class="main">≡</span> lift_Def <span class="free">Def</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> lUse<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lUse</span> <span class="main">≡</span> lift_Use <span class="free">Use</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">H</span> <span class="free">L</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lParamDefs<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lParamDefs</span> <span class="main">≡</span> lift_ParamDefs <span class="free">ParamDefs</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lParamUses<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">lParamUses</span> <span class="main">≡</span> lift_ParamUses <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> SDG<span class="main">:</span><span class="quoted"><span class="quoted">"SDG <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">get_proc</span> 
  <span class="free">get_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> <span class="free">Exit</span> <span class="free">Def</span> <span class="free">Use</span> <span class="free">ParamDefs</span> <span class="free">ParamUses</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> inner<span class="main">:</span><span class="quoted"><span class="quoted">"CFGExit.inner_node <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">valid_edge</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="free">nx</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∩</span> <span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∪</span> <span class="free">L</span> <span class="main">=</span> UNIV"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"NonInterferenceInterGraph src trg knd <span class="free">lve</span> NewEntry <span class="free">lget_proc</span> 
  <span class="free">lget_return_edges</span> <span class="free">procs</span> <span class="free">Main</span> NewExit <span class="free">lDef</span> <span class="free">lUse</span> <span class="free">lParamDefs</span> <span class="free">lParamUses</span> <span class="free">H</span> <span class="free">L</span> 
  <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">interpret</span></span> SDG <span class="quoted"><span class="free">sourcenode</span></span> <span class="quoted"><span class="free">targetnode</span></span> <span class="quoted"><span class="free">kind</span></span> <span class="quoted"><span class="free">valid_edge</span></span> <span class="quoted"><span class="free">Entry</span></span> <span class="quoted"><span class="free">get_proc</span></span> 
    <span class="quoted"><span class="free">get_return_edges</span></span> <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted"><span class="free">Exit</span></span> <span class="quoted"><span class="free">Def</span></span> <span class="quoted"><span class="free">Use</span></span> <span class="quoted"><span class="free">ParamDefs</span></span> <span class="quoted"><span class="free">ParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> SDG<span class="main">)</span>
  <span class="keyword1"><span class="command">interpret</span></span> SDG'<span class="main">:</span>SDG <span class="quoted">src</span> <span class="quoted">trg</span> <span class="quoted">knd</span> <span class="quoted"><span class="free">lve</span></span> <span class="quoted">NewEntry</span> <span class="quoted"><span class="free">lget_proc</span></span> <span class="quoted"><span class="free">lget_return_edges</span></span>
    <span class="quoted"><span class="free">procs</span></span> <span class="quoted"><span class="free">Main</span></span> <span class="quoted">NewExit</span> <span class="quoted"><span class="free">lDef</span></span> <span class="quoted"><span class="free">lUse</span></span> <span class="quoted"><span class="free">lParamDefs</span></span> <span class="quoted"><span class="free">lParamUses</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_SDG SDG inner <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lve lget_proc lget_return_edges lDef
                      lUse lParamDefs lParamUses<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">lve</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> NewEntry"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> NewExit <span class="main">∨</span> trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Entry</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a</span><span class="main">.</span> <span class="free">lve</span> <span class="bound">a</span> <span class="main">∧</span> src <span class="bound">a</span> <span class="main">=</span> NewEntry <span class="main">∧</span> trg <span class="bound">a</span> <span class="main">=</span> Node <span class="free">Entry</span> <span class="main">∧</span> knd <span class="bound">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Entry_edge <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">lve</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Entry</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">lve</span> <span class="skolem">a</span>›</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹trg <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Entry</span>›</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> NewEntry"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹trg <span class="skolem">e</span> <span class="main">=</span> Node <span class="free">Entry</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">targetnode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Entry</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Entry_target<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">lve</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> NewExit"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> NewEntry <span class="main">∨</span> src <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Exit</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_valid_edge.cases <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">a</span><span class="main">.</span> <span class="free">lve</span> <span class="bound">a</span> <span class="main">∧</span> src <span class="bound">a</span> <span class="main">=</span> Node <span class="free">Exit</span> <span class="main">∧</span> trg <span class="bound">a</span> <span class="main">=</span> NewExit <span class="main">∧</span> knd <span class="bound">a</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)<span class="hidden">⇩</span><sub>√</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lve_Exit_edge <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">lve</span> <span class="skolem">a</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"src <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Exit</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">lve</span> <span class="skolem">a</span>›</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"lift_valid_edge <span class="free">valid_edge</span> <span class="free">sourcenode</span> <span class="free">targetnode</span> <span class="free">kind</span> <span class="free">Entry</span> <span class="free">Exit</span> <span class="skolem">a</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>lve<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> this <span class="quoted"><span class="quoted">‹src <span class="skolem">a</span> <span class="main">=</span> Node <span class="free">Exit</span>›</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"trg <span class="skolem">a</span> <span class="main">=</span> NewExit"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>lift_valid_edge.induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>lve_edge <span class="skolem">a</span> <span class="skolem">e</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">e</span> <span class="main">=</span> <span class="main">(</span>Node <span class="main">(</span><span class="free">sourcenode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">,</span> <span class="free">kind</span> <span class="skolem">a</span><span class="main">,</span> Node <span class="main">(</span><span class="free">targetnode</span> <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹src <span class="skolem">e</span> <span class="main">=</span> Node <span class="free">Exit</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">sourcenode</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">Exit</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">valid_edge</span> <span class="skolem">a</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Exit_source<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> lDef <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">lDef</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">=</span> <span class="free">H</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Def_set.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Def_High<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> Entry_noteq_Exit lUse <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">lUse</span> <span class="main">(</span>Node <span class="free">Entry</span><span class="main">)</span> <span class="main">=</span> <span class="free">H</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Use_set.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_High<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> Entry_noteq_Exit lUse <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">lUse</span> <span class="main">(</span>Node <span class="free">Exit</span><span class="main">)</span> <span class="main">=</span> <span class="free">L</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span>lift_Use_set.cases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span>lift_Use_Low<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">H</span> <span class="main">∩</span> <span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∩</span> <span class="free">L</span> <span class="main">=</span> <span class="main">{}</span>"</span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">H</span> <span class="main">∪</span> <span class="free">L</span> <span class="main">=</span> UNIV›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">H</span> <span class="main">∪</span> <span class="free">L</span> <span class="main">=</span> UNIV"</span></span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>



</pre>
</div>