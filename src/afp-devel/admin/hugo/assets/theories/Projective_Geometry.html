<div id="Projective_Plane_Axioms">
<div class="head">
<h1>Theory Projective_Plane_Axioms</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Projective_Plane_Axioms
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We introduce the types of points and lines and an incidence relation between them.
<span class="antiquoted"><span class="antiquoted">▪</span></span> A set of axioms for the projective plane (the models of these axioms are 
n-dimensional with n <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>≥›</span></span></span></span> 2). 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹The Axioms of the Projective Plane›</span></span>

<span class="comment1">(* One has a type of points *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"Points"</span>

<span class="comment1">(* One has a type of lines *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"Lines"</span>

<span class="comment1">(* One has an incidence relation between points and lines *)</span>
<span class="keyword1"><span class="command">consts</span></span> incid <span class="main">::</span> <span class="quoted"><span class="quoted">"Points <span class="main">⇒</span> Lines <span class="main">⇒</span> bool"</span></span>

<span class="comment1">(* Ax1: Any two (distinct) points lie on a (unique) line *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">l</span><span class="main">.</span> incid <span class="free">P</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="free">Q</span> <span class="bound">l</span>"</span></span>

<span class="comment1">(* Ax2: Any two (distinct) lines meet in a (unique) point *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">P</span><span class="main">.</span> incid <span class="bound">P</span> <span class="free">l</span> <span class="main">∧</span> incid <span class="bound">P</span> <span class="free">m</span>"</span></span>

<span class="comment1">(* The uniqueness part *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax_uniqueness<span class="main">:</span> <span class="quoted"><span class="quoted">"incid <span class="free">P</span> <span class="free">l</span> <span class="main">⟶</span> incid <span class="free">Q</span> <span class="free">l</span> <span class="main">⟶</span> incid <span class="free">P</span> <span class="free">m</span> <span class="main">⟶</span> incid <span class="free">Q</span> <span class="free">m</span> <span class="main">⟶</span> <span class="free">P</span> <span class="main">=</span> <span class="free">Q</span> <span class="main">∨</span> <span class="free">l</span> <span class="main">=</span> <span class="free">m</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct4</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Points <span class="main">⇒</span> Points <span class="main">⇒</span> Points <span class="main">⇒</span> Points <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct4</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax3: There exists four points such that no three of them are collinear *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
ax3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span><span class="main">.</span> distinct4 <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">l</span><span class="main">.</span> 
<span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">B</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">C</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">D</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">C</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">B</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">D</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">D</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">B</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">C</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span>incid <span class="bound">B</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">C</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">D</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span>incid <span class="bound">B</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">D</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">C</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span>incid <span class="bound">C</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">D</span> <span class="bound">l</span> <span class="main">⟶</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">A</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">B</span> <span class="bound">l</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>


<span class="keyword2"><span class="keyword">end</span></span></pre>
</div><div id="Pappus_Property">
<div class="head">
<h1>Theory Pappus_Property</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Pappus_Property
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Projective_Plane_Axioms">Projective_Plane_Axioms</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>
 
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We give two formulations of Pappus's property for a configuration of nine points
 [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>is_pappus1›</span></span></span></span>] [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>is_pappus2›</span></span></span></span>].
<span class="antiquoted"><span class="antiquoted">▪</span></span> We prove the equivalence of these two formulations [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>pappus_equiv›</span></span></span></span>].
<span class="antiquoted"><span class="antiquoted">▪</span></span> We state Pappus property for a plane [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>is_pappus›</span></span></span></span>]. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Pappus's Property›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">col</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">col</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">l</span><span class="main">.</span> incid <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="bound">l</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct6</span> <span class="main">::</span>
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct6</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">lines</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Points <span class="main">⇒</span> Points <span class="main">⇒</span> Lines set"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">lines</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> <span class="main">{</span><span class="bound">l</span><span class="main">.</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="bound">l</span><span class="main">}</span>"</span></span>

<span class="keyword1" id="Pappus_Property-uniq_line"><span class="command">lemma</span></span> uniq_line<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">≠</span> <span class="free">Q</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">∈</span> lines <span class="free">P</span> <span class="free">Q</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">∈</span> lines <span class="free">P</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">=</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms lines_def ax_uniqueness 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">line</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Points <span class="main">⇒</span> Points <span class="main">⇒</span> Lines"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">line</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> <span class="main">@</span><span class="bound">l</span><span class="main">.</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="bound">l</span>"</span></span>


<span class="comment1">(* The point P is the intersection of the lines AB and CD. For P to be well-defined,
A and B should be distinct, C and D should be distinct, and the lines AB and CD should
be distinct *)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_a_proper_intersec</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_a_proper_intersec</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span>
<span class="main">∧</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span>"</span></span>

<span class="comment1">(* We state a first form of Pappus's property *)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_pappus1</span> <span class="main">::</span> 
<span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">=&gt;</span> bool "</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_pappus1</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> 
  distinct6 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span>
  <span class="main">⟶</span> is_a_proper_intersec <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">⟶</span> is_a_proper_intersec <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span>
  <span class="main">⟶</span> is_a_proper_intersec <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> 
  <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_a_intersec</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_a_intersec</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≡</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span>"</span></span>

<span class="comment1">(* We state a second form of Pappus's property *)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_pappus2</span> <span class="main">::</span>
<span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_pappus2</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> 
  <span class="main">(</span>distinct6 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">∨</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> 
  <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span> line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span> 
  <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span><span class="main">)</span> 
  <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span> is_a_intersec <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> 
  <span class="main">⟶</span> is_a_intersec <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">⟶</span> is_a_intersec <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> 
  <span class="main">⟶</span> col <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span>"</span></span>

<span class="keyword1" id="Pappus_Property-is_a_proper_intersec_is_a_intersec"><span class="command">lemma</span></span> is_a_proper_intersec_is_a_intersec<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms is_a_intersec_def is_a_proper_intersec_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="comment1">(* The first and the second forms of Pappus's property are equivalent *)</span>
<span class="keyword1" id="Pappus_Property-pappus21"><span class="command">lemma</span></span> pappus21<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus2 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pappus1 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms is_pappus2_def is_pappus1_def is_a_proper_intersec_is_a_intersec 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pappus_Property-col_AAB"><span class="command">lemma</span></span> col_AAB<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">A</span> <span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ax1 col_def<span class="main">)</span>

<span class="keyword1" id="Pappus_Property-col_ABA"><span class="command">lemma</span></span> col_ABA<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> ax1 col_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Property-col_ABB"><span class="command">lemma</span></span> col_ABB<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ax1 col_def<span class="main">)</span>

<span class="keyword1" id="Pappus_Property-incidA_lAB"><span class="command">lemma</span></span> incidA_lAB<span class="main">:</span> <span class="quoted"><span class="quoted">"incid <span class="free">A</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> ax1 line_def someI_ex<span class="main">)</span>

<span class="keyword1" id="Pappus_Property-incidB_lAB"><span class="command">lemma</span></span> incidB_lAB<span class="main">:</span> <span class="quoted"><span class="quoted">"incid <span class="free">B</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> ax1 line_def someI_ex<span class="main">)</span>

<span class="keyword1" id="Pappus_Property-degenerate_hexagon_is_pappus"><span class="command">lemma</span></span> degenerate_hexagon_is_pappus<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∨</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∨</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> ax_uniqueness col_def distinct6_def 
        incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness col_def 
        distinct6_def incidA_lAB incidB_lAB that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">C</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> ax_uniqueness 
        col_def distinct6_def incidA_lAB incidB_lAB<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="free">A</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> assms<span class="main">(</span>7<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pappus_Property-pappus12"><span class="command">lemma</span></span> pappus12<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus1 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pappus2 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span><span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> 
  <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
  <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> h1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> h2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">B</span>"</span></span> <span class="comment1">(* in this case P = A = B and P, Q, R lie on AC' *)</span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">=</span> <span class="free">A</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> 
  <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> ax_uniqueness col_def 
            incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">A</span> <span class="free">C'</span> <span class="main">∧</span> col <span class="free">Q</span> <span class="free">A</span> <span class="free">C'</span> <span class="main">∧</span> col <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">=</span> <span class="free">A</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> col_AAB 
          is_a_intersec_def that 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> 
          <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">C</span>"</span></span> <span class="comment1">(* case where P = A = C = Q and P,Q,R belong to AB' *)</span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">=</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> 
        <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="main">∧</span> col <span class="free">Q</span> <span class="free">A</span> <span class="free">B'</span> <span class="main">∧</span> col <span class="free">R</span> <span class="free">A</span> <span class="free">B'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="main">=</span> <span class="free">A</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> col_def 
        is_a_intersec_def that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> 
        <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">A'</span>"</span></span> <span class="comment1">(* very degenerate case, all the 9 points are collinear*)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> 
        ax_uniqueness col_ABA col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">=</span> <span class="free">C</span>"</span></span> <span class="comment1">(* case where B = C = Q and P,Q,R belong to A'B *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">=</span> <span class="free">B'</span>"</span></span> <span class="comment1">(* very degenerate case, the 9 points are collinear *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        ax_uniqueness col_AAB col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span> <span class="main">=</span> <span class="free">C'</span>"</span></span> <span class="comment1">(* again, very degenerate case, the 9 points are collinear *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> 
        ax_uniqueness col_ABB col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span> <span class="main">=</span> <span class="free">B'</span>"</span></span> <span class="comment1">(* case where P = A' = B', and P,Q,R belong to A'C *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span> <span class="main">=</span> <span class="free">C'</span>"</span></span> <span class="comment1">(* case where R = A' = B', the points P,Q,R belong to A'B *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span> <span class="main">=</span> <span class="free">C'</span>"</span></span> <span class="comment1">(* case where Q = B' = C', the points P,Q,R belong to AB' *)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
      <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> ax_uniqueness col_def incidA_lAB incidB_lAB is_a_intersec_def that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">A'</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">C</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span><span class="main">≠</span> <span class="free">B'</span>
    <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> a1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
        <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> distinct6_def that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
        <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> is_a_intersec_def 
        is_a_proper_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
        <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> is_a_intersec_def 
        is_a_proper_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">∧</span> 
        <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> is_a_intersec_def 
        is_a_proper_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> a1 assms h1 h2 is_pappus1_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">=</span> <span class="free">A'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">=</span> <span class="free">B</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">=</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">A'</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">C</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">A'</span> <span class="main">=</span> <span class="free">B'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A'</span> <span class="main">=</span> <span class="free">C'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">B</span> <span class="main">=</span> <span class="free">B'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">B</span> <span class="main">=</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="free">B'</span> <span class="main">=</span> <span class="free">C'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">C</span> <span class="main">=</span> <span class="free">C'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>  
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> degenerate_hexagon_is_pappus that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> degenerate_hexagon_is_pappus that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A'</span> <span class="free">C</span> <span class="main">=</span> line <span class="free">A</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> degenerate_hexagon_is_pappus that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
      <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> distinct6_def is_a_intersec_def 
          is_a_proper_intersec_def that<span class="main">(</span>1<span class="main">)</span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> distinct6_def is_a_intersec_def 
          is_a_proper_intersec_def that<span class="main">(</span>2<span class="main">)</span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_proper_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> distinct6_def is_a_intersec_def 
          is_a_proper_intersec_def that<span class="main">(</span>3<span class="main">)</span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>›</span></span> 
          <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>›</span></span> <span class="quoted"><span class="quoted">‹is_a_proper_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>›</span></span> assms is_pappus1_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span><span class="main">;</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span><span class="main">;</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹line <span class="free">A</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="free">A'</span> <span class="free">C</span> <span class="main">=</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"is_pappus2 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">B</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">B'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">B</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C</span> 
      <span class="main">∧</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="free">A'</span> <span class="main">≠</span> <span class="free">C</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C</span><span class="main">;</span> col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span><span class="main">;</span> col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span><span class="main">;</span> is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span><span class="main">;</span> is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span><span class="main">;</span> is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span><span class="main">;</span> col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span><span class="main">;</span> col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span><span class="main">;</span> is_a_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span><span class="main">;</span> is_a_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span><span class="main">;</span> is_a_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> 
        is_pappus2_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pappus_Property-pappus_equiv"><span class="command">lemma</span></span> pappus_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">"is_pappus1 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span> <span class="main">=</span> is_pappus2 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> pappus12 pappus21 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="comment1">(* Finally, we give Pappus's property for a plane stating that the diagonal points 
of any hexagon of that plane, whose vertices lie alternately on two lines, are collinear *)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_pappus</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_pappus</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span> <span class="bound">E</span> <span class="bound">F</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> is_pappus2 <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span> <span class="bound">E</span> <span class="bound">F</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span>"</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Pascal_Property">
<div class="head">
<h1>Theory Pascal_Property</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Pascal_Property
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Projective_Plane_Axioms">Projective_Plane_Axioms</a> <a href="#Pappus_Property">Pappus_Property</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> A hexagon is pascal if its three opposite sides meet in collinear points [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>is_pascal›</span></span></span></span>].
<span class="antiquoted"><span class="antiquoted">▪</span></span> A plane is pascal, or has Pascal's property, if for every hexagon of that plane
Pascal property is stable under any permutation of that hexagon. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Pascal's Property›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">inters</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Lines <span class="main">⇒</span> Lines <span class="main">⇒</span> Points set"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">inters</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">≡</span> <span class="main">{</span><span class="bound">P</span><span class="main">.</span> incid <span class="bound">P</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">∧</span> incid <span class="bound">P</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1" id="Pascal_Property-inters_is_singleton"><span class="command">lemma</span></span> inters_is_singleton<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">=</span> <span class="free">Q</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ax_uniqueness inters_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">inter</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Lines <span class="main">⇒</span> Lines <span class="main">⇒</span> Points"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">inter</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">≡</span> <span class="main">@</span><span class="bound">P</span><span class="main">.</span> <span class="bound">P</span> <span class="main">∈</span> inters <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span>"</span></span>

<span class="keyword1" id="Pascal_Property-uniq_inter"><span class="command">lemma</span></span> uniq_inter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">P</span> <span class="free">l</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">P</span> <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> inters_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">Q</span><span class="main">.</span> <span class="bound">Q</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span> <span class="main">⟶</span> <span class="bound">Q</span> <span class="main">=</span> <span class="free">P</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>›</span></span> assms<span class="main">(</span>1<span class="main">)</span> inters_is_singleton 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> <span class="free">P</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>›</span></span> assms<span class="main">(</span>1<span class="main">)</span> inter_def inters_is_singleton 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* The configuration of a hexagon where the three pairs of opposite sides meet in 
collinear points *)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_pascal</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">is_pascal</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="main">≡</span> distinct6 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span>
<span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="main">⟶</span> 
<span class="main">(</span><span class="keyword1">let</span> <span class="bound">P</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="keyword1">in</span>
<span class="keyword1">let</span> <span class="bound">Q</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="keyword1">in</span>
<span class="keyword1">let</span> <span class="bound">R</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="keyword1">in</span> 
col <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Pascal_Property-col_rot_CW"><span class="command">lemma</span></span> col_rot_CW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">R</span> <span class="free">P</span> <span class="free">Q</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms col_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-col_2cycle"><span class="command">lemma</span></span> col_2cycle<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">R</span> <span class="free">Q</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms col_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-distinct6_rot_CW"><span class="command">lemma</span></span> distinct6_rot_CW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span> <span class="free">F</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">F</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms distinct6_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-lines_comm"><span class="command">lemma</span></span> lines_comm<span class="main">:</span> <span class="quoted"><span class="quoted">"lines <span class="free">P</span> <span class="free">Q</span> <span class="main">=</span> lines <span class="free">Q</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> lines_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-line_comm"><span class="command">lemma</span></span> line_comm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">≠</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="free">P</span> <span class="free">Q</span> <span class="main">=</span> line <span class="free">Q</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ax_uniqueness incidA_lAB incidB_lAB<span class="main">)</span>
  
<span class="keyword1" id="Pascal_Property-inters_comm"><span class="command">lemma</span></span> inters_comm<span class="main">:</span> <span class="quoted"><span class="quoted">"inters <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> inters <span class="free">m</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> inters_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-inter_comm"><span class="command">lemma</span></span> inter_comm<span class="main">:</span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> inter <span class="free">m</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> inter_def inters_comm<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-inter_line_line_comm"><span class="command">lemma</span></span> inter_line_line_comm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span> <span class="main">≠</span> <span class="free">D</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">D</span> <span class="free">C</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms line_comm 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-inter_line_comm_line"><span class="command">lemma</span></span> inter_line_comm_line<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">B</span> <span class="free">A</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms line_comm 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-inter_comm_line_line_comm"><span class="command">lemma</span></span> inter_comm_line_line_comm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span> <span class="main">≠</span> <span class="free">D</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">≠</span> line <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">D</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> inter_comm line_comm<span class="main">)</span>

<span class="comment1">(* Pascal's property is stable under the 6-cycle [A B C D E F] *)</span>
<span class="keyword1" id="Pascal_Property-is_pascal_rot_CW"><span class="command">lemma</span></span> is_pascal_rot_CW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span> <span class="free">F</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">F</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">P</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">D</span> <span class="free">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">E</span> <span class="free">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
    <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">F</span> <span class="free">A</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">F</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">≠</span> line <span class="free">D</span> <span class="free">E</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C</span> <span class="main">≠</span> line <span class="free">E</span> <span class="free">F</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">F</span> <span class="free">A</span> <span class="main">≠</span> line <span class="free">C</span> <span class="free">D</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> P_def Q_def R_def assms col_rot_CW distinct6_def inter_comm is_pascal_def line_comm 
      that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">F</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> P_def Q_def R_def is_pascal_def line_comm<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* We recall that the group of permutations S_6 is generated by the 2-cycle [1 2]
and the 6-cycle [1 2 3 4 5 6] *)</span>

<span class="comment1">(* Assuming Pappus's property, Pascal's property is stable under the 2-cycle [A B] *)</span>

<span class="keyword1" id="Pascal_Property-incid_C_AB"><span class="command">lemma</span></span> incid_C_AB<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">A</span> <span class="free">l</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">B</span> <span class="free">l</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">C</span> <span class="free">l</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">C</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ax_uniqueness incidA_lAB incidB_lAB 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-incid_inters_left"><span class="command">lemma</span></span> incid_inters_left<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">P</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms inters_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-incid_inters_right"><span class="command">lemma</span></span> incid_inters_right<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">P</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms incid_inters_left inters_comm 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-inter_in_inters"><span class="command">lemma</span></span> inter_in_inters<span class="main">:</span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">P</span><span class="main">.</span> <span class="bound">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> inters_def ax2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">P</span><span class="main">.</span> <span class="bound">P</span> <span class="main">∈</span> inters <span class="free">l</span> <span class="free">m</span>›</span></span> inter_def some_eq_ex<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pascal_Property-incid_inter_left"><span class="command">lemma</span></span> incid_inter_left<span class="main">:</span> <span class="quoted"><span class="quoted">"incid <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> incid_inters_left inter_in_inters 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-incid_inter_right"><span class="command">lemma</span></span> incid_inter_right<span class="main">:</span> <span class="quoted"><span class="quoted">"incid <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> incid_inter_left inter_comm 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="Pascal_Property-col_A_B_ABl"><span class="command">lemma</span></span> col_A_B_ABl<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="free">l</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> col_def incidA_lAB incidB_lAB incid_inter_left 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-col_A_B_lAB"><span class="command">lemma</span></span> col_A_B_lAB<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="main">(</span>inter <span class="free">l</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> col_A_B_ABl inter_comm 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Pascal_Property-inter_is_a_intersec"><span class="command">lemma</span></span> inter_is_a_intersec<span class="main">:</span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="main">(</span>inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span><span class="main">)</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> col_A_B_ABl col_A_B_lAB col_rot_CW is_a_intersec_def<span class="main">)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">line_ext</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Lines <span class="main">⇒</span> Points set"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">line_ext</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">≡</span> <span class="main">{</span><span class="bound">P</span><span class="main">.</span> incid <span class="bound">P</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1" id="Pascal_Property-line_left_inter_1"><span class="command">lemma</span></span> line_left_inter_1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> line_ext <span class="free">l</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∉</span> line_ext <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="free">P</span> <span class="main">=</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> CollectD CollectI assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> incidA_lAB incidB_lAB incid_inter_left 
      incid_inter_right line_ext_def uniq_inter<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-line_left_inter_2"><span class="command">lemma</span></span> line_left_inter_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> line_ext <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∉</span> line_ext <span class="free">l</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="free">P</span> <span class="main">=</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms inter_comm line_left_inter_1 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="Pascal_Property-line_right_inter_1"><span class="command">lemma</span></span> line_right_inter_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> line_ext <span class="free">l</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∉</span> line_ext <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="free">P</span> <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="main">=</span> <span class="free">l</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms line_comm line_left_inter_1<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-line_right_inter_2"><span class="command">lemma</span></span> line_right_inter_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∈</span> line_ext <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">∉</span> line_ext <span class="free">l</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="free">P</span> <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="main">=</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms inter_comm line_comm line_left_inter_1<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-inter_ABC_1"><span class="command">lemma</span></span> inter_ABC_1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">≠</span> line <span class="free">C</span> <span class="free">A</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">A</span><span class="main">)</span> <span class="main">=</span> <span class="free">A</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ax_uniqueness incidA_lAB incidB_lAB incid_inter_left incid_inter_right 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-line_inter_2"><span class="command">lemma</span></span> line_inter_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">≠</span> inter <span class="free">l'</span> <span class="free">m</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span> <span class="main">(</span>inter <span class="free">l'</span> <span class="free">m</span><span class="main">)</span> <span class="main">=</span> <span class="free">m</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ax_uniqueness incidA_lAB incidB_lAB incid_inter_right 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-col_line_ext_1"><span class="command">lemma</span></span> col_line_ext_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> CollectI assms ax_uniqueness col_def incidA_lAB incidB_lAB line_ext_def<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-inter_line_ext_1"><span class="command">lemma</span></span> inter_line_ext_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">∈</span> line_ext <span class="free">n</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">n</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> inter <span class="free">l</span> <span class="free">n</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> ax_uniqueness incid_inter_left incid_inter_right line_ext_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pascal_Property-inter_line_ext_2"><span class="command">lemma</span></span> inter_line_ext_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">∈</span> line_ext <span class="free">n</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">m</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">≠</span> <span class="free">n</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="free">m</span> <span class="main">=</span> inter <span class="free">m</span> <span class="free">n</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms inter_comm inter_line_ext_1<span class="main">)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">pascal_prop</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">pascal_prop</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span> <span class="bound">E</span> <span class="bound">F</span><span class="main">.</span> is_pascal <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span> <span class="bound">E</span> <span class="bound">F</span> <span class="main">⟶</span> is_pascal <span class="bound">B</span> <span class="bound">A</span> <span class="bound">C</span> <span class="bound">D</span> <span class="bound">E</span> <span class="bound">F</span>"</span></span>

<span class="keyword1" id="Pascal_Property-pappus_pascal"><span class="command">lemma</span></span> pappus_pascal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="skolem">A</span> <span class="skolem">B</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">A</span> <span class="skolem">B</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">X</span></span> <span class="skolem"><span class="skolem">Y</span></span> <span class="skolem"><span class="skolem">Z</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">X</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Y</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Z</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">=</span> line <span class="skolem">E</span> <span class="skolem">F</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> X_def Y_def ax_uniqueness col_ABA col_rot_CW distinct6_def incidB_lAB incid_inter_left 
          incid_inter_right line_comm that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> X_def Y_def col_ABA col_rot_CW distinct6_def inter_ABC_1 line_comm that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> 
          that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>"</span></span> 
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> col_A_B_ABl W_def<span class="main">)</span>
      <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">P</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">B</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> P_def Q_def R_def <span class="quoted"><span class="quoted">‹is_pascal <span class="skolem">A</span> <span class="skolem">B</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> col_2cycle distinct6_def is_pascal_def 
          line_comm that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> that<span class="main">(</span>5<span class="main">)</span> that<span class="main">(</span>6<span class="main">)</span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="comment1">(* Below we take care of a few degenerate cases *)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">Q</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_ABA col_def 
            distinct6_def incidA_lAB incidB_lAB incid_inter_left inter_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">R</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>›</span></span> col_2cycle col_A_B_ABl col_rot_CW distinct6_def incidA_lAB 
            incidB_lAB incid_inter_left incid_inter_right that uniq_inter<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">A</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">Q</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">R</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_def incidA_lAB incid_inter_left 
            incid_inter_right line_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">C</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">R</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_def incidA_lAB incid_inter_left 
            incid_inter_right line_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def W_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">Q</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_def distinct6_def incidB_lAB 
            incid_inter_left incid_inter_right line_comm that<span class="main">)</span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">R</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Q_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_A_B_lAB 
            col_rot_CW distinct6_def incidB_lAB incid_inter_right inter_comm line_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">A</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_ABA col_def distinct6_def incidA_lAB incidB_lAB 
            incid_inter_left incid_inter_right that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">C</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> P_def Q_def W_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness 
            distinct6_def incidA_lAB incid_inter_left line_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def W_def X_def Z_def col_ABA line_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">A</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def W_def X_def Y_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_ABA col_def col_rot_CW distinct6_def 
            incidA_lAB incidB_lAB incid_inter_right inter_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">C</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_def distinct6_def incidA_lAB incidB_lAB 
            incid_inter_left inter_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> R_def W_def <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>›</span></span> 
            ax_uniqueness incidA_lAB incidB_lAB incid_inter_left incid_inter_right that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">=</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> P_def Q_def R_def W_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">R</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_def distinct6_def incidA_lAB 
            incidB_lAB incid_inter_left incid_inter_right that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">=</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> P_def W_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness incidB_lAB 
            incid_inter_left incid_inter_right that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">P</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">R</span><span class="main">)</span><span class="main">)</span> 
      <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">P</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">R</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> is_pappus_def is_pappus2_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>›</span></span> <span class="quoted"><span class="quoted">‹col <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span>›</span></span>
          <span class="quoted"><span class="quoted">‹col <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>›</span></span> inter_is_a_intersec inter_line_line_comm 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> P_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> incidB_lAB line_ext_def that uniq_inter 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span>›</span></span> ax_uniqueness incidA_lAB 
            incid_inter_left incid_inter_right line_comm line_ext_def mem_Collect_eq that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> P_def W_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness 
            distinct6_def incidA_lAB incidB_lAB that<span class="main">)</span>
          <span class="comment1">(* We can resume our proof with the non-degenerate case *)</span>
      <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">P</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">B</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span>
        <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> CollectI P_def Q_def ax_uniqueness incidA_lAB incidB_lAB incid_inter_left 
            incid_inter_right line_ext_def that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
          <span class="comment1">(* Again, we need to take care of a few particular cases *)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> W_def <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> inter_ABC_1 inter_comm that<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> R_def <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>›</span></span> ax_uniqueness incidA_lAB 
          incid_inter_left incid_inter_right line_ext_def that 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> P_def W_def <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> that<span class="main">)</span>
          <span class="comment1">(* We resume the general case *)</span>
      <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">P</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">R</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> CollectI P_def R_def W_def ax_uniqueness incidA_lAB incidB_lAB incid_inter_left 
            incid_inter_right line_ext_def that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
          <span class="comment1">(* Once again, first we need to handle a particular case, namely C ∈ AF, then 
            we resume the general case *)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> R_def <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>›</span></span> ax_uniqueness incidA_lAB 
          incid_inter_left incid_inter_right line_ext_def that 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">R</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> R_def incidA_lAB line_ext_def line_right_inter_1 that 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> R_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> ax_uniqueness col_line_ext_1 distinct6_def f1 f2 f3 
            incidA_lAB incidB_lAB incid_inter_left that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> W_def <span class="quoted"><span class="quoted">‹distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span>›</span></span> ax_uniqueness distinct6_def f2 
            incidA_lAB incidB_lAB incid_inter_left incid_inter_right inter_line_ext_2 that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> 
            that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">Q</span> <span class="skolem">W</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> calculation col_2cycle col_A_B_ABl col_line_ext_1 distinct6_def that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> 
            that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span><span class="main">)</span>
      <span class="main">(</span>inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">B</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def W_def col_A_B_ABl col_rot_CW that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> 
            that<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> P_def W_def X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">C</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">C</span> <span class="main">∈</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">Q</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="skolem">R</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹Pascal_Property.inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">=</span> Pascal_Property.inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">R</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">A</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">C</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>distinct6 <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">R</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">W</span><span class="main">;</span> <span class="skolem">C</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span><span class="main">;</span> <span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">B</span><span class="main">;</span> line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">;</span> <span class="skolem">A</span> <span class="main">∉</span> line_ext <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span><span class="main">;</span> Pascal_Property.inter <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span> <span class="main">≠</span> Pascal_Property.inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="main">(</span>Pascal_Property.inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">C</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>Pascal_Property.inter <span class="main">(</span>line <span class="skolem">C</span> <span class="skolem">D</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>Pascal_Property.inter <span class="main">(</span>line <span class="skolem">A</span> <span class="skolem">B</span><span class="main">)</span> <span class="main">(</span>line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">)</span><span class="main">)</span>›</span></span> 
            <span class="quoted"><span class="quoted">‹line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">B</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> <span class="quoted"><span class="quoted">‹line <span class="skolem">E</span> <span class="skolem">F</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">F</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> distinct6_def line_comm<span class="main">)</span>
     <span class="keyword1"><span class="command">qed</span></span>
     <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span>
       <span class="keyword1"><span class="command">using</span></span> X_def Y_def Z_def <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">=</span> line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
         <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
         <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>distinct6 <span class="skolem">B</span> <span class="skolem">A</span> <span class="skolem">C</span> <span class="skolem">D</span> <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">A</span> <span class="skolem">C</span> <span class="main">≠</span> line <span class="skolem">E</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">≠</span> line <span class="skolem">B</span> <span class="skolem">F</span><span class="main">;</span> line <span class="skolem">B</span> <span class="skolem">A</span> <span class="main">≠</span> line <span class="skolem">D</span> <span class="skolem">E</span><span class="main">;</span> line <span class="skolem">C</span> <span class="skolem">D</span> <span class="main">=</span> line <span class="skolem">A</span> <span class="skolem">F</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">Z</span>›</span></span> 
         is_pascal_def 
       <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span> <span class="keyword1"><span class="command">using</span></span> pascal_prop_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pascal_Property-is_pascal_under_alternate_vertices"><span class="command">lemma</span></span> is_pascal_under_alternate_vertices<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">A</span> <span class="free">B'</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms pascal_prop_def is_pascal_rot_CW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>

<span class="keyword1" id="Pascal_Property-col_inter"><span class="command">lemma</span></span> col_inter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span> <span class="free">F</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">D</span> <span class="free">E</span> <span class="free">F</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">E</span> <span class="free">F</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">D</span> <span class="free">E</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms ax_uniqueness col_def distinct6_def incidA_lAB incidB_lAB<span class="main">)</span>

<span class="keyword1" id="Pascal_Property-pascal_pappus1"><span class="command">lemma</span></span> pascal_pappus1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pappus1 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">a1</span></span> <span class="skolem"><span class="skolem">a2</span></span> <span class="skolem"><span class="skolem">a3</span></span> <span class="skolem"><span class="skolem">a4</span></span> <span class="skolem"><span class="skolem">a5</span></span> <span class="skolem"><span class="skolem">a6</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a1</span> <span class="main">=</span> distinct6 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a2</span> <span class="main">=</span> col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"<span class="skolem">a3</span> <span class="main">=</span> col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a4</span> <span class="main">=</span> is_a_proper_intersec <span class="free">P</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a5</span> <span class="main">=</span> is_a_proper_intersec <span class="free">Q</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">C</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a6</span> <span class="main">=</span> is_a_proper_intersec <span class="free">R</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">C</span>"</span></span> 
  <span class="comment1">(* i.e. we have assumed a Pappus configuration *)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"inter <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="skolem">a1</span></span> <span class="quoted"><span class="skolem">a2</span></span> <span class="quoted"><span class="skolem">a3</span></span> <span class="quoted"><span class="skolem">a4</span></span> <span class="quoted"><span class="skolem">a5</span></span> <span class="quoted"><span class="skolem">a6</span></span>
    <span class="keyword1"><span class="command">using</span></span> a1_def a2_def a3_def col_inter that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="skolem">a1</span></span> <span class="quoted"><span class="skolem">a2</span></span> <span class="quoted"><span class="skolem">a3</span></span> <span class="quoted"><span class="skolem">a4</span></span> <span class="quoted"><span class="skolem">a5</span></span> <span class="quoted"><span class="skolem">a6</span></span>
    <span class="keyword1"><span class="command">using</span></span> a1_def col_ABA is_pascal_def that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> that<span class="main">(</span>5<span class="main">)</span> that<span class="main">(</span>6<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_pascal <span class="free">A</span> <span class="free">B'</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="skolem">a1</span></span> <span class="quoted"><span class="skolem">a2</span></span> <span class="quoted"><span class="skolem">a3</span></span> <span class="quoted"><span class="skolem">a4</span></span> <span class="quoted"><span class="skolem">a5</span></span> <span class="quoted"><span class="skolem">a6</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms is_pascal_under_alternate_vertices that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> that<span class="main">(</span>5<span class="main">)</span> that<span class="main">(</span>6<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="skolem">a1</span></span> <span class="quoted"><span class="skolem">a2</span></span> <span class="quoted"><span class="skolem">a3</span></span> <span class="quoted"><span class="skolem">a4</span></span> <span class="quoted"><span class="skolem">a5</span></span> <span class="quoted"><span class="skolem">a6</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> a1_def a4_def a5_def a6_def ax_uniqueness col_def distinct6_def incidB_lAB incid_inter_left 
        incid_inter_right is_a_proper_intersec_def is_pascal_def line_comm that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> 
        that<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"is_pappus1 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="skolem">a1</span><span class="main">;</span> <span class="skolem">a2</span><span class="main">;</span> <span class="skolem">a3</span><span class="main">;</span> <span class="skolem">a4</span><span class="main">;</span> <span class="skolem">a5</span><span class="main">;</span> <span class="skolem">a6</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="free">Q</span> <span class="free">R</span>›</span></span> a1_def a2_def a3_def a4_def a5_def a6_def 
        is_pappus1_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pascal_Property-pascal_pappus"><span class="command">lemma</span></span> pascal_pappus<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms is_pappus_def pappus12 pascal_pappus1<span class="main">)</span>

<span class="keyword1"><span class="command">theorem</span></span> pappus_iff_pascal<span class="main">:</span> <span class="quoted"><span class="quoted">"is_pappus <span class="main">=</span> pascal_prop"</span></span>
  <span class="keyword1"><span class="command">using</span></span> pappus_pascal pascal_pappus 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword2"><span class="keyword">end</span></span>





</pre>
</div><div id="Desargues_Property">
<div class="head">
<h1>Theory Desargues_Property</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Desargues_Property
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Projective_Plane_Axioms">Projective_Plane_Axioms</a> <a href="#Pappus_Property">Pappus_Property</a> <a href="#Pascal_Property">Pascal_Property</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We formalize Desargues's property, [<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>desargues_prop›</span></span></span></span>], that states that if two triangles are perspective 
from a point, then they are perspective from a line. 
Note that some planes satisfy that property and some others don't, hence Desargues's property is
not a theorem though it is a theorem in projective space geometry. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Desargues's Property›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct3</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct3</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">triangle</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">triangle</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> distinct3 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">meet_in</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"Lines <span class="main">⇒</span> Lines <span class="main">=&gt;</span> Points <span class="main">=&gt;</span> bool "</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">meet_in</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">≡</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span>"</span></span>

<span class="keyword1" id="Desargues_Property-meet_col_1"><span class="command">lemma</span></span> meet_col_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms col_def incidA_lAB incidB_lAB meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Desargues_Property-meet_col_2"><span class="command">lemma</span></span> meet_col_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C</span> <span class="free">D</span><span class="main">)</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">C</span> <span class="free">D</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms meet_col_1 meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">meet_3_in</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Lines<span class="main">,</span> Lines<span class="main">,</span> Lines<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">meet_3_in</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">≡</span> meet_in <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">∧</span> meet_in <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>

<span class="keyword1" id="Desargues_Property-meet_all_3"><span class="command">lemma</span></span> meet_all_3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_3_in <span class="free">l</span> <span class="free">m</span> <span class="free">n</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="free">m</span> <span class="free">n</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms meet_3_in_def meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Desargues_Property-meet_comm"><span class="command">lemma</span></span> meet_comm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="free">l</span> <span class="free">m</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="free">m</span> <span class="free">l</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Desargues_Property-meet_3_col_1"><span class="command">lemma</span></span> meet_3_col_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_3_in <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="free">m</span> <span class="free">n</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms meet_3_in_def meet_col_2 meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1" id="Desargues_Property-meet_3_col_2"><span class="command">lemma</span></span> meet_3_col_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_3_in <span class="free">l</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="free">n</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms col_def incidA_lAB incidB_lAB meet_3_in_def meet_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Desargues_Property-meet_3_col_3"><span class="command">lemma</span></span> meet_3_col_3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"meet_3_in <span class="free">l</span> <span class="free">m</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms meet_3_col_2 meet_3_in_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct7</span> <span class="main">::</span>
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct7</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">E</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">F</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">E</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">∧</span>
<span class="main">(</span><span class="free"><span class="bound"><span class="entity">F</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct3l</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>Lines<span class="main">,</span> Lines<span class="main">,</span> Lines<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct3l</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span>"</span></span>

<span class="comment1">(* From now on we give less general statements on purpose to avoid a lot of uninteresting 
degenerate cases, since we can hardly think of any interesting application where one would need 
to instantiate a statement on such degenerate case, hence our statements and proofs will be more 
textbook-like. For the working mathematician the only thing that probably matters is the main
theorem without considering all the degenerate cases for which the statement might still hold. *)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">desargues_config</span> <span class="main">::</span> 
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">=&gt;</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">desargues_config</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="free"><span class="bound"><span class="entity">N</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> distinct7 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">∧</span> <span class="main">¬</span> col <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> 
<span class="main">∧</span> <span class="main">¬</span> col <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">∧</span> distinct3l <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="main">∧</span> 
meet_3_in <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">∧</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">∧</span> 
<span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="main">∧</span> meet_in <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="main">∧</span>
meet_in <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">N</span></span></span> <span class="main">∧</span> meet_in <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>

<span class="keyword1" id="Desargues_Property-distinct7_rot_CW"><span class="command">lemma</span></span> distinct7_rot_CW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"distinct7 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="free">E</span> <span class="free">F</span> <span class="free">G</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"distinct7 <span class="free">C</span> <span class="free">A</span> <span class="free">B</span> <span class="free">F</span> <span class="free">D</span> <span class="free">E</span> <span class="free">G</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms distinct7_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="comment1">(* Desargues configurations are stable under any rotation (i,j,k) of {1,2,3} *)</span>
<span class="keyword1" id="Desargues_Property-desargues_config_rot_CW"><span class="command">lemma</span></span> desargues_config_rot_CW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">C</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">P</span> <span class="free">M</span> <span class="free">N</span> <span class="free">R</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms col_rot_CW desargues_config_def distinct3l_def distinct7_rot_CW line_comm 
      meet_3_in_def meet_all_3 meet_comm<span class="main">)</span>

<span class="keyword1" id="Desargues_Property-desargues_config_rot_CCW"><span class="command">lemma</span></span> desargues_config_rot_CCW<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">B</span> <span class="free">C</span> <span class="free">A</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A'</span> <span class="free">N</span> <span class="free">P</span> <span class="free">M</span> <span class="free">R</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms desargues_config_rot_CW<span class="main">)</span>

<span class="comment1">(* With the two following definitions we repackage the definition of a Desargues configuration in a 
"high-level", i.e. textbook-like, way. *)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">are_perspective_from_point</span> <span class="main">::</span> 
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">are_perspective_from_point</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> distinct7 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">∧</span> triangle <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">∧</span>
triangle <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">∧</span> distinct3l <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="main">∧</span> 
meet_3_in <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">are_perspective_from_line</span> <span class="main">::</span>
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">are_perspective_from_line</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">≡</span> distinct6 <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span> triangle <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">⟶</span>
triangle <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span> line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="main">⟶</span>
col <span class="main">(</span>inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Desargues_Property-meet_in_inter"><span class="command">lemma</span></span> meet_in_inter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">l</span> <span class="main">≠</span> <span class="free">m</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"meet_in <span class="free">l</span> <span class="free">m</span> <span class="main">(</span>inter <span class="free">l</span> <span class="free">m</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> incid_inter_left incid_inter_right meet_in_def<span class="main">)</span>

<span class="keyword1" id="Desargues_Property-perspective_from_point_desargues_config"><span class="command">lemma</span></span> perspective_from_point_desargues_config<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"are_perspective_from_point <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">B'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
    <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">C</span> <span class="main">≠</span> line <span class="free">A'</span> <span class="free">C'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C</span> <span class="main">≠</span> line <span class="free">B'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>inter <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span><span class="main">)</span> 
    <span class="main">(</span>inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span><span class="main">)</span> <span class="free">R</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> are_perspective_from_point_def assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> col_line_ext_1 
      desargues_config_def distinct3_def incidB_lAB inter_line_ext_2 line_comm meet_in_inter 
      triangle_def uniq_inter<span class="main">)</span>

<span class="comment1">(* Now, we state Desargues's property in a textbook-like form *)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">desargues_prop</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">desargues_prop</span> <span class="main">≡</span> 
<span class="main">∀</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">A'</span> <span class="bound">B'</span> <span class="bound">C'</span> <span class="bound">P</span><span class="main">.</span> 
  are_perspective_from_point <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">A'</span> <span class="bound">B'</span> <span class="bound">C'</span> <span class="bound">P</span> <span class="main">⟶</span> are_perspective_from_line <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">A'</span> <span class="bound">B'</span> <span class="bound">C'</span>"</span></span>

<span class="keyword2"><span class="keyword">end</span></span>






</pre>
</div><div id="Pappus_Desargues">
<div class="head">
<h1>Theory Pappus_Desargues</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Pappus_Desargues
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Projective_Plane_Axioms">Projective_Plane_Axioms</a> <a href="#Pappus_Property">Pappus_Property</a> <a href="#Pascal_Property">Pascal_Property</a> <a href="#Desargues_Property">Desargues_Property</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ 
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We prove Hessenberg's theorem ([<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>hessenberg_theorem›</span></span></span></span>]): Pappus's property implies Desargues's 
property in a projective plane. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Hessenberg's Theorem›</span></span>

<span class="keyword1" id="Pappus_Desargues-col_ABC_ABD_1"><span class="command">lemma</span></span> col_ABC_ABD_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">D</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">B</span> <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms ax_uniqueness col_def<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-col_ABC_ABD_2"><span class="command">lemma</span></span> col_ABC_ABD_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">D</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">C</span> <span class="free">D</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms ax_uniqueness col_def<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-col_line_eq_1"><span class="command">lemma</span></span> col_line_eq_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">≠</span> <span class="free">C</span>"</span></span><span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms ax_uniqueness col_def incidA_lAB incidB_lAB<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-col_line_eq_2"><span class="command">lemma</span></span> col_line_eq_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">B</span> <span class="main">=</span> line <span class="free">A</span> <span class="free">C</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms col_line_eq_1 col_rot_CW line_comm<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_1"><span class="command">lemma</span></span> desargues_config_not_col_1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A</span> <span class="free">A'</span> <span class="free">B'</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">A'</span> <span class="free">B'</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">A'</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct7_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">A'</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def meet_3_col_1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> a1 <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">B'</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> col_ABC_ABD_1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> a1 <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">A'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms ax_uniqueness col_def desargues_config_def f1 incidA_lAB incidB_lAB<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A'</span> <span class="main">≠</span> <span class="free">B'</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct7_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">B'</span> <span class="main">≠</span> <span class="free">R</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct7_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">A'</span> <span class="free">B'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> col_line_eq_1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B'</span> <span class="free">R</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">B'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> a1 assms col_2cycle col_AAB col_line_eq_1 desargues_config_def f6 meet_3_col_2<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">A'</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">B'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹line <span class="free">B'</span> <span class="free">R</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">B'</span>›</span></span> f4 f7<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct3l_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> f8<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">A'</span> <span class="free">B'</span> <span class="main">⟹</span> False"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_2"><span class="command">lemma</span></span> desargues_config_not_col_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">B</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_1 desargues_config_rot_CCW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_3"><span class="command">lemma</span></span> desargues_config_not_col_3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">C</span> <span class="free">C'</span> <span class="free">B'</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms col_line_eq_1 col_rot_CW desargues_config_def desargues_config_not_col_2 
      desargues_config_rot_CW distinct3l_def meet_3_in_def meet_col_1 meet_col_2<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_4"><span class="command">lemma</span></span> desargues_config_not_col_4<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A</span> <span class="free">A'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_3 desargues_config_rot_CCW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_5"><span class="command">lemma</span></span> desargues_config_not_col_5<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">B</span> <span class="free">B'</span> <span class="free">A'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_3 desargues_config_rot_CW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_6"><span class="command">lemma</span></span> desargues_config_not_col_6<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">C</span> <span class="free">C'</span> <span class="free">A'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_1 desargues_config_rot_CW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_7"><span class="command">lemma</span></span> desargues_config_not_col_7<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A</span> <span class="free">B</span> <span class="free">B'</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">B'</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> a1 assms col_ABB col_ABC_ABD_2 col_rot_CW desargues_config_def desargues_config_not_col_5 
        meet_3_col_2<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">A'</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def meet_3_col_1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">A'</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms col_AAB desargues_config_not_col_4 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct7_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">A'</span> <span class="main">=</span> line <span class="free">A</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> col_line_eq_2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">R</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> a1 assms col_2cycle col_ABC_ABD_2 desargues_config_not_col_1 f2 f4<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">R</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">B'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹line <span class="free">A</span> <span class="free">R</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">R</span>›</span></span> a1 assms col_AAB col_line_eq_1 desargues_config_def 
        desargues_config_not_col_2 f1<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> f7 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">A'</span> <span class="main">=</span> line <span class="free">B</span> <span class="free">B'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_def distinct3l_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">B'</span> <span class="main">⟹</span> False"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_8"><span class="command">lemma</span></span> desargues_config_not_col_8<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A</span> <span class="free">C</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms col_ABA col_line_eq_1 col_rot_CW desargues_config_def desargues_config_not_col_3 
      desargues_config_not_col_7 distinct3l_def meet_3_col_1 meet_3_col_2 meet_3_col_3<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_9"><span class="command">lemma</span></span> desargues_config_not_col_9<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">B</span> <span class="free">A</span> <span class="free">A'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_8 desargues_config_rot_CCW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
 
<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_10"><span class="command">lemma</span></span> desargues_config_not_col_10<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">B</span> <span class="free">C</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_7 desargues_config_rot_CCW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_11"><span class="command">lemma</span></span> desargues_config_not_col_11<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">C</span> <span class="free">A</span> <span class="free">A'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_7 desargues_config_rot_CW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
 
<span class="keyword1" id="Pappus_Desargues-desargues_config_not_col_12"><span class="command">lemma</span></span> desargues_config_not_col_12<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">C</span> <span class="free">B</span> <span class="free">B'</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms desargues_config_not_col_8 desargues_config_rot_CW 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Pappus_Desargues-col_inter"><span class="command">lemma</span></span> col_inter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">≠</span> <span class="free">C</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"inter <span class="free">l</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">=</span> inter <span class="free">l</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms col_line_eq_1 col_line_eq_2<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-lemma_1"><span class="command">lemma</span></span> lemma_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?thesis</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> that<span class="main">)</span>
<span class="comment1">(* The proof consists in three successive applications of Pappus property *)</span>
  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="skolem"><span class="skolem">E</span></span> <span class="skolem"><span class="skolem">X</span></span> <span class="skolem"><span class="skolem">F</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">E</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span> <span class="main">(</span>line <span class="free">R</span> <span class="skolem">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">X</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A</span> <span class="free">C'</span><span class="main">)</span> <span class="main">(</span>line <span class="free">R</span> <span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">F</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">(</span>line <span class="free">R</span> <span class="skolem">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">E</span> <span class="free">M</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct6 <span class="free">C</span> <span class="free">C'</span> <span class="free">R</span> <span class="skolem">Q</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Q_def <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_ABB col_A_B_ABl 
          col_A_B_lAB col_line_eq_2 col_rot_CW desargues_config_def desargues_config_not_col_12 
          desargues_config_not_col_2 desargues_config_not_col_3 desargues_config_not_col_7 
          desargues_config_not_col_9 distinct6_def incidA_lAB line_comm meet_3_col_1 meet_3_col_2<span class="main">)</span> 
    <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="free">C</span> <span class="free">C'</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_def meet_3_col_3 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span> <span class="quoted"><span class="quoted">"col <span class="skolem">Q</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> Q_def col_2cycle col_A_B_ABl col_rot_CW 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">E</span> <span class="free">C</span> <span class="free">A</span> <span class="skolem">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> E_def col_2cycle inter_is_a_intersec is_a_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">M</span> <span class="free">C</span> <span class="free">B</span> <span class="skolem">Q</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_2cycle col_ABB col_ABC_ABD_1 col_A_B_lAB col_rot_CW 
          desargues_config_def is_a_intersec_def meet_col_1 meet_col_2<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">X</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> X_def col_2cycle inter_is_a_intersec is_a_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="skolem">X</span> <span class="skolem">E</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> is_pappus2_def is_pappus_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="skolem">E</span> <span class="free">M</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> col_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="skolem">X</span> <span class="skolem">F</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct6 <span class="free">A'</span> <span class="free">A</span> <span class="free">R</span> <span class="skolem">Q</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Q_def <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_AAB col_A_B_ABl 
          col_A_B_lAB col_line_eq_1 col_rot_CW desargues_config_def desargues_config_not_col_2 
          desargues_config_not_col_3 desargues_config_not_col_4 desargues_config_not_col_6 
          desargues_config_not_col_7 distinct6_def incidB_lAB meet_3_col_2 meet_3_col_3<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">A</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_ABA col_line_eq_1 desargues_config_def meet_3_col_1<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="skolem">Q</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Q_def col_A_B_lAB col_rot_CW<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"is_a_intersec <span class="main">(</span>inter <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span><span class="main">)</span> <span class="free">A'</span> <span class="free">B'</span> <span class="skolem">Q</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def col_def incidA_lAB incid_inter_left inter_is_a_intersec is_a_intersec_def<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="free">A'</span> <span class="free">B'</span> <span class="skolem">Q</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_def meet_in_def uniq_inter 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">X</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> X_def assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_def col_line_eq_2 desargues_config_def desargues_config_not_col_9 
          f2 inter_is_a_intersec is_a_intersec_def line_comm meet_3_col_2<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">F</span> <span class="free">A'</span> <span class="free">C'</span> <span class="skolem">Q</span> <span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> F_def inter_is_a_intersec inter_line_line_comm<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> assms<span class="main">(</span>2<span class="main">)</span> 
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="skolem">X</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> is_pappus2_def is_pappus_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">≠</span> <span class="free">C'</span> <span class="main">∧</span> <span class="skolem">X</span> <span class="main">≠</span> <span class="skolem">E</span> <span class="main">∧</span> line <span class="skolem">Q</span> <span class="free">C'</span> <span class="main">≠</span> line <span class="skolem">X</span> <span class="skolem">E</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> E_def Q_def X_def <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> col_ABB 
            col_A_B_ABl col_A_B_lAB col_line_eq_2 col_rot_CW desargues_config_def 
            desargues_config_not_col_10 desargues_config_not_col_2 desargues_config_not_col_8 
            incidB_lAB incid_C_AB line_comm meet_3_col_1 meet_3_col_2 meet_3_col_3<span class="main">)</span> 
      <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">E</span> <span class="main">≠</span> <span class="free">A</span> <span class="main">∧</span> <span class="free">C'</span> <span class="main">≠</span> <span class="skolem">F</span> <span class="main">∧</span> line <span class="skolem">E</span> <span class="free">A</span> <span class="main">≠</span> line <span class="free">C'</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> E_def F_def Q_def X_def <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span><span class="main">;</span> <span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">E</span> <span class="free">M</span>›</span></span> 
            assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> ax_uniqueness col_def desargues_config_def desargues_config_not_col_10 
            desargues_config_not_col_3 f1 incidA_lAB incidB_lAB incid_inter_left incid_inter_right 
            meet_in_def that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">≠</span> <span class="free">A</span> <span class="main">∧</span> <span class="skolem">X</span> <span class="main">≠</span> <span class="skolem">F</span> <span class="main">∧</span> line <span class="skolem">Q</span> <span class="free">A</span> <span class="main">≠</span> line <span class="skolem">X</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> F_def Q_def X_def <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
            ax_uniqueness col_def desargues_config_def desargues_config_not_col_10 
            desargues_config_not_col_2 desargues_config_not_col_7 incidA_lAB incidB_lAB incid_inter_left 
            incid_inter_right meet_3_col_2 meet_3_col_3<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="skolem">Q</span> <span class="skolem">E</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> E_def F_def col_def incidB_lAB incid_inter_right 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="skolem">X</span> <span class="free">C'</span> <span class="free">A</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> X_def col_2cycle col_A_B_ABl col_rot_CW 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">M</span> <span class="skolem">Q</span> <span class="free">C'</span> <span class="skolem">X</span> <span class="skolem">E</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span><span class="main">;</span> <span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="skolem">X</span> <span class="skolem">E</span> <span class="free">M</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
            col_ABB col_A_B_lAB col_def col_line_eq_1 desargues_config_def incidB_lAB is_a_intersec_def 
            meet_in_def that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">N</span> <span class="skolem">E</span> <span class="free">A</span> <span class="free">C'</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> E_def F_def assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> ax_uniqueness col_rot_CW desargues_config_def f2 incidA_lAB 
            incidB_lAB incid_inter_left is_a_intersec_def meet_col_1 meet_col_2<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f8<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="skolem">Q</span> <span class="free">A</span> <span class="skolem">X</span> <span class="skolem">F</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Q_def <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span><span class="main">;</span> <span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">P</span> <span class="skolem">X</span> <span class="skolem">F</span>›</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
            ax_uniqueness col_rot_CW desargues_config_def f3 incidA_lAB incidB_lAB incid_inter_left 
            is_a_intersec_def meet_col_2 meet_comm that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> f7 <span class="keyword2"><span class="keyword">and</span></span> f8 <span class="keyword2"><span class="keyword">and</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> is_pappus2_def is_pappus_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span><span class="main">¬</span> incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span><span class="main">;</span> <span class="main">¬</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">⟧</span> <span class="main">⟹</span> col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> corollary_1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> <span class="main">(</span><span class="main">(</span>incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
  <span class="main">(</span>incid <span class="free">C</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">B'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="free">B</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">A'</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_rot_CW desargues_config_rot_CCW lemma_1 line_comm<span class="main">)</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">triangle_circumscribes_triangle</span> <span class="main">::</span> 
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">triangle_circumscribes_triangle</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> incid <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">)</span> <span class="main">∧</span>
incid <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">(</span>line <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Pappus_Desargues-lemma_2"><span class="command">lemma</span></span> lemma_2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">C</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">B'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"incid <span class="free">B</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">A'</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> triangle_circumscribes_triangle <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="main">∨</span> triangle_circumscribes_triangle <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms ax_uniqueness col_def desargues_config_not_col_1 
      desargues_config_not_col_11 desargues_config_not_col_12 desargues_config_not_col_2 
      desargues_config_not_col_3 desargues_config_not_col_9 incidA_lAB incidB_lAB 
      triangle_circumscribes_triangle_def<span class="main">)</span>

<span class="keyword1" id="Pappus_Desargues-lemma_3"><span class="command">lemma</span></span> lemma_3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
    <span class="quoted"><span class="quoted">"triangle_circumscribes_triangle <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="skolem"><span class="skolem">T</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">C'</span> <span class="free">P</span><span class="main">)</span> <span class="main">(</span>line <span class="free">R</span> <span class="free">A</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="main">=</span> inter <span class="main">(</span>line <span class="free">C'</span> <span class="free">P</span><span class="main">)</span> <span class="main">(</span>line <span class="free">R</span> <span class="free">B</span><span class="main">)</span>"</span></span>
<span class="comment1">(* The collinearity of M N P follows from three applications of Pappus property *)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">N</span> <span class="skolem">S</span> <span class="free">B'</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct6 <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_AAB col_line_eq_2 col_rot_CW desargues_config_def 
          desargues_config_not_col_1 desargues_config_not_col_12 desargues_config_not_col_2 
          desargues_config_not_col_5 desargues_config_not_col_7 desargues_config_not_col_8 
          desargues_config_not_col_9 distinct6_def line_comm meet_3_col_1 meet_3_col_2 meet_col_1 
          meet_col_2<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> col_rot_CW desargues_config_def meet_3_col_3 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_rot_CW desargues_config_def line_comm meet_col_1<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">B'</span> <span class="free">R</span> <span class="free">B</span> <span class="free">P</span> <span class="free">C</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> col_def desargues_config_def incidB_lAB is_a_intersec_def 
          meet_3_col_2 meet_in_def triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">S</span> <span class="free">R</span> <span class="free">A</span> <span class="free">P</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> S_def col_2cycle inter_is_a_intersec is_a_intersec_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"line <span class="free">B</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">B</span> <span class="free">A</span>›</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness distinct6_def incidA_lAB incidB_lAB 
          triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">N</span> <span class="free">C</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> desargues_config_def inter_is_a_intersec line_comm meet_in_def uniq_inter<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">B'</span> <span class="free">N</span> <span class="skolem">S</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> is_pappus2_def is_pappus_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">N</span> <span class="skolem">S</span> <span class="free">B'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> col_rot_CW<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="skolem">T</span> <span class="free">A'</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct6 <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">A</span> <span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_ABA col_line_eq_2 col_rot_CW desargues_config_def desargues_config_not_col_1 
          desargues_config_not_col_12 desargues_config_not_col_2 desargues_config_not_col_5 
          desargues_config_not_col_7 desargues_config_not_col_8 desargues_config_not_col_9 distinct6_def 
          line_comm meet_3_col_1 meet_3_col_2 meet_col_1 meet_col_2<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> col_rot_CW desargues_config_def meet_3_col_3 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">A</span> <span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> col_rot_CW desargues_config_def meet_col_1 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">P</span> <span class="free">C</span> <span class="main">=</span> line <span class="free">A'</span> <span class="free">B'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">A</span> <span class="free">B</span>›</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness desargues_config_def 
          distinct6_def incidA_lAB incidB_lAB meet_in_def triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="free">R</span> <span class="free">A</span> <span class="main">=</span> line <span class="free">A</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹distinct6 <span class="free">R</span> <span class="free">C</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">A</span> <span class="free">B</span>›</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_AAB col_line_eq_2 desargues_config_def 
          desargues_config_not_col_1 distinct6_def line_comm meet_3_col_1<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">A'</span> <span class="free">R</span> <span class="free">A</span> <span class="free">P</span> <span class="free">C</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> col_def incidA_lAB incidB_lAB is_a_intersec_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"line <span class="free">A</span> <span class="free">C'</span> <span class="main">=</span> line <span class="free">B'</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness distinct6_def f1 incidA_lAB incidB_lAB 
          triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">M</span> <span class="free">C</span> <span class="free">B</span> <span class="free">A</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_rot_CW desargues_config_def is_a_intersec_def line_comm meet_col_1 
          meet_col_2<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f8<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="skolem">T</span> <span class="free">R</span> <span class="free">B</span> <span class="free">P</span> <span class="free">C'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> T_def distinct6_def f1 inter_comm_line_line_comm inter_is_a_intersec line_comm<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> f7 <span class="keyword2"><span class="keyword">and</span></span> f8 <span class="keyword2"><span class="keyword">and</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">A'</span> <span class="free">M</span> <span class="skolem">T</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> is_pappus2_def is_pappus_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="skolem">T</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> col_rot_CW<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">≠</span> <span class="skolem">T</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">A</span> <span class="main">∧</span> line <span class="skolem">S</span> <span class="skolem">T</span> <span class="main">≠</span> line <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> T_def <span class="quoted"><span class="quoted">‹col <span class="free">N</span> <span class="skolem">S</span> <span class="free">B'</span>›</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness col_AAB col_line_eq_2 col_rot_CW 
          desargues_config_def desargues_config_not_col_10 desargues_config_not_col_7 
          desargues_config_not_col_9 incidB_lAB incid_inter_left incid_inter_right 
          line_comm meet_3_col_2 meet_3_col_3 meet_col_1 meet_col_2 triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="skolem">T</span> <span class="main">≠</span> <span class="free">A'</span> <span class="main">∧</span> line <span class="free">A</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="skolem">T</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> T_def assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_def desargues_config_def desargues_config_not_col_1 
          desargues_config_not_col_9 incidB_lAB incid_C_AB incid_inter_left line_comm meet_in_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">≠</span> <span class="free">B'</span> <span class="main">∧</span> <span class="free">B</span> <span class="main">≠</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> S_def assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ax_uniqueness col_A_B_ABl col_line_eq_2 col_rot_CW 
          desargues_config_def desargues_config_not_col_2 desargues_config_not_col_5 
          desargues_config_not_col_7 incidA_lAB incidB_lAB incid_inter_right inter_comm line_comm 
          meet_3_col_2 meet_in_def triangle_circumscribes_triangle_def<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"line <span class="skolem">S</span> <span class="free">B'</span> <span class="main">≠</span> line <span class="free">B</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_def desargues_config_not_col_5 incidA_lAB incidB_lAB<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="skolem">S</span> <span class="free">A</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> S_def assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_ABC_ABD_1 col_A_B_lAB col_rot_CW desargues_config_def 
          desargues_config_not_col_8 meet_3_col_1 meet_3_col_3<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">B</span> <span class="skolem">T</span> <span class="free">B'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> T_def assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_def col_line_eq_2 desargues_config_def desargues_config_not_col_10 
          incidB_lAB incid_inter_right line_comm meet_3_col_2 meet_3_col_3<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">P</span> <span class="skolem">S</span> <span class="skolem">T</span> <span class="free">B</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> S_def T_def assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> col_ABC_ABD_1 col_A_B_ABl col_def desargues_config_def incidA_lAB 
          incidB_lAB is_a_intersec_def meet_in_def<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f8<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">M</span> <span class="free">A</span> <span class="free">B'</span> <span class="skolem">T</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹col <span class="free">M</span> <span class="skolem">T</span> <span class="free">A'</span>›</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> col_rot_CW desargues_config_def f2 incidA_lAB incidB_lAB 
          is_a_intersec_def meet_col_2 triangle_circumscribes_triangle_def uniq_inter<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> f9<span class="main">:</span><span class="quoted"><span class="quoted">"is_a_intersec <span class="free">N</span> <span class="skolem">S</span> <span class="free">B'</span> <span class="free">B</span> <span class="free">A'</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹col <span class="free">N</span> <span class="skolem">S</span> <span class="free">B'</span>›</span></span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> col_def desargues_config_def incidA_lAB is_a_intersec_def 
        meet_in_def triangle_circumscribes_triangle_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> f7 <span class="keyword2"><span class="keyword">and</span></span> f8 <span class="keyword2"><span class="keyword">and</span></span> f9 <span class="keyword2"><span class="keyword">and</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"col <span class="free">P</span> <span class="free">M</span> <span class="free">N</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> is_pappus2_def is_pappus_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> col_rot_CW<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> pappus_desargues<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> <span class="main">(</span><span class="main">(</span>incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
  <span class="main">(</span>incid <span class="free">C</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">B'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="free">B</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">A'</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms corollary_1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="main">∨</span> triangle_circumscribes_triangle <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="main">∨</span> triangle_circumscribes_triangle <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>incid <span class="free">A</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">C'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="free">C</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">B'</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span> 
    <span class="main">∧</span> <span class="main">(</span>incid <span class="free">B</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">∨</span> incid <span class="free">A'</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> lemma_2 that 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"triangle_circumscribes_triangle <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms lemma_3 that 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"triangle_circumscribes_triangle <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"distinct7 <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">R</span>"</span></span> 
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> desargues_config_def distinct7_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> desargues_config_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">¬</span> col <span class="free">A</span> <span class="free">B</span> <span class="free">C</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> desargues_config_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"distinct3l <span class="main">(</span>line <span class="free">A'</span> <span class="free">A</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C'</span> <span class="free">C</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> desargues_config_def line_comm<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"meet_3_in <span class="main">(</span>line <span class="free">A'</span> <span class="free">A</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">B</span><span class="main">)</span> <span class="main">(</span>line <span class="free">C'</span> <span class="free">C</span><span class="main">)</span> <span class="free">R</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> desargues_config_def line_comm<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> desargues_config_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"meet_in <span class="main">(</span>line <span class="free">B'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">(</span>line <span class="free">B</span> <span class="free">C</span><span class="main">)</span> <span class="free">M</span> <span class="main">∧</span> meet_in <span class="main">(</span>line <span class="free">A'</span> <span class="free">C'</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">C</span><span class="main">)</span> <span class="free">N</span> <span class="main">∧</span> 
      meet_in <span class="main">(</span>line <span class="free">A'</span> <span class="free">B'</span><span class="main">)</span> <span class="main">(</span>line <span class="free">A</span> <span class="free">B</span><span class="main">)</span> <span class="free">P</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> desargues_config_def meet_comm 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword2"><span class="keyword">and</span></span> f5 <span class="keyword2"><span class="keyword">and</span></span> f6 <span class="keyword2"><span class="keyword">and</span></span> f7 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"desargues_config <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">M</span> <span class="free">N</span> <span class="free">P</span> <span class="free">R</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> desargues_config_def<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> lemma_3 that 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword2"><span class="keyword">and</span></span> f4 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"col <span class="free">M</span> <span class="free">N</span> <span class="free">P</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> hessenberg_thereom<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"is_pappus"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"desargues_prop"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> are_perspective_from_line_def assms col_def desargues_prop_def pappus_desargues 
      perspective_from_point_desargues_config<span class="main">)</span>

<span class="keyword1"><span class="command">corollary</span></span> pascal_desargues<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"pascal_prop"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"desargues_prop"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms hessenberg_thereom pascal_pappus<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>


    













</pre>
</div><div id="Higher_Projective_Space_Rank_Axioms">
<div class="head">
<h1>Theory Higher_Projective_Space_Rank_Axioms</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Higher_Projective_Space_Rank_Axioms
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> Following <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> Magaud_2012<span class="antiquote"><span class="antiquote">}</span></span></span></span> we introduce a set of axioms for projective space geometry based on
the notions of matroid and rank.
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹A Based-rank Set of Axioms for Projective Space Geometry›</span></span>

<span class="comment1">(* We have a type of points *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"Points"</span>

<span class="comment1">(* We have a rank function "rk" on the sets of points *)</span>
<span class="keyword1"><span class="command">consts</span></span> rk <span class="main">::</span> <span class="quoted"><span class="quoted">"Points set <span class="main">⇒</span> nat"</span></span>

<span class="comment1">(* The function rk satisfies the following axioms *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
matroid_ax_1a<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≥</span> <span class="main">0</span>"</span></span> <span class="comment1">(* Useless if rk is defined with values in ℕ, not ℤ *)</span> <span class="keyword2"><span class="keyword">and</span></span>
matroid_ax_1b<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≤</span> card <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
matroid_ax_2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">⊆</span> <span class="free">Y</span> <span class="main">⟶</span> rk <span class="free">X</span> <span class="main">≤</span> rk <span class="free">Y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
matroid_ax_3<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span> <span class="main">+</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∩</span> <span class="free">Y</span><span class="main">)</span> <span class="main">≤</span> rk <span class="free">X</span> <span class="main">+</span> rk <span class="free">Y</span>"</span></span>

<span class="comment1">(* To capture higher projective geometry, we need to introduce the following additional axioms *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
rk_ax_singleton<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="main">1</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
rk_ax_couple<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">≠</span> <span class="free">Q</span> <span class="main">⟶</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span><span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
rk_ax_pasch<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">J</span><span class="main">.</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="bound">J</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="bound">J</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
rk_ax_3_pts<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">C</span><span class="main">.</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="bound">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span><span class="bound">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="bound">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
rk_ax_dim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span><span class="main">.</span> rk <span class="main">{</span><span class="bound">A</span><span class="main">,</span><span class="bound">B</span><span class="main">,</span><span class="bound">C</span><span class="main">,</span><span class="bound">D</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>

<span class="comment1">(* Note that the rank-based axioms system above deals only with points. 
Projective geometry developped this way is dimension-independent and it can be scaled to any dimension
without adding any entity to the theory or modifying the language of the theory *)</span>

<span class="keyword2"><span class="keyword">end</span></span>





</pre>
</div><div id="Matroid_Rank_Properties">
<div class="head">
<h1>Theory Matroid_Rank_Properties</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Matroid_Rank_Properties
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Higher_Projective_Space_Rank_Axioms">Higher_Projective_Space_Rank_Axioms</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> In this file we introduce the basic lemmas and properties derived from our based-rank axioms
that will allow us to simplify our future proofs.
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Proof Techniques Using Ranks›</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-matroid_ax_3_alt"><span class="command">lemma</span></span> matroid_ax_3_alt<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">I</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∩</span> <span class="free">Y</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="free">Y</span><span class="main">)</span> <span class="main">+</span> rk <span class="free">I</span> <span class="main">≤</span> rk <span class="free">X</span> <span class="main">+</span> rk <span class="free">Y</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> add.commute add_le_cancel_right assms matroid_ax_2 matroid_ax_3 order_trans<span class="main">)</span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_uniqueness"><span class="command">lemma</span></span> rk_uniqueness<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>›</span></span> insert_commute le_inf_iff 
        matroid_ax_3_alt subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Un_upper1 Un_upper2 <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>›</span></span> add_diff_cancel_left' 
        add_diff_cancel_right' add_mono antisym assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> le_diff_conv matroid_ax_2<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_left Un_upper1 <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>›</span></span> insert_is_Un le_inf_iff 
        matroid_ax_3_alt<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> i1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> <span class="numeral">2</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> i2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> insertI1 insert_subset matroid_ax_2 subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> i1 <span class="keyword2"><span class="keyword">and</span></span> i2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right Un_upper2 assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> matroid_ax_2 order_trans sup_bot.right_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> le_inf_iff matroid_ax_3_alt order_trans subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> i3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> i4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span><span class="free">B</span><span class="main">,</span><span class="free">C</span><span class="main">,</span><span class="free">D</span><span class="main">,</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span> <span class="main">+</span> rk<span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">3</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> i3 <span class="keyword2"><span class="keyword">and</span></span> i4 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">M</span><span class="main">,</span><span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">D</span><span class="main">,</span> <span class="free">M</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> add_le_cancel_left add_numeral_left antisym 
        insert_absorb2 numeral_Bit1 numeral_One numeral_plus_one one_add_one one_le_numeral 
        order_trans rk_ax_couple rk_ax_singleton<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* The following lemma allows to derive that there exists two lines that do not meet, i.e that belong
to two different planes *)</span>
<span class="keyword1" id="Matroid_Rank_Properties-rk_ax_dim_alt"><span class="command">lemma</span></span> rk_ax_dim_alt<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span><span class="main">.</span> <span class="main">∀</span><span class="bound">M</span><span class="main">.</span> rk <span class="main">{</span><span class="bound">A</span><span class="main">,</span><span class="bound">B</span><span class="main">,</span><span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span> <span class="main">∨</span> rk <span class="main">{</span><span class="bound">C</span><span class="main">,</span><span class="bound">D</span><span class="main">,</span><span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="skolem"><span class="skolem">C</span></span> <span class="skolem"><span class="skolem">D</span></span> <span class="keyword2"><span class="keyword">where</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_ax_dim 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">.</span> rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span> <span class="main">∨</span> rk <span class="main">{</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="skolem">M</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> le_inf_iff matroid_ax_3_alt order_trans subset_insertI<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Suc_leI Suc_le_mono Suc_numeral add_Suc_right add_leD1 add_mono le_antisym 
          not_le numeral_3_eq_3 numeral_One numeral_plus_one one_add_one rk_ax_singleton that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
          that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">,</span><span class="skolem">M</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_commute matroid_ax_2 order_trans subset_insertI that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span> <span class="main">∨</span> rk <span class="main">{</span><span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">,</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span> "</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="bound">D</span><span class="main">.</span> <span class="main">∀</span><span class="bound">M</span><span class="main">.</span> rk <span class="main">{</span><span class="bound">A</span><span class="main">,</span> <span class="bound">B</span><span class="main">,</span> <span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span> <span class="main">∨</span> rk <span class="main">{</span><span class="bound">C</span><span class="main">,</span> <span class="bound">D</span><span class="main">,</span> <span class="bound">M</span><span class="main">}</span> <span class="main">≠</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_empty"><span class="command">lemma</span></span> rk_empty<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">{}</span> <span class="main">=</span> <span class="main">0</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{}</span> <span class="main">≥</span> <span class="main">0</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{}</span> <span class="main">≤</span> <span class="main">0</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> card.empty matroid_ax_1b<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{}</span> <span class="main">=</span> <span class="main">0</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-matroid_ax_2_alt"><span class="command">lemma</span></span> matroid_ax_2_alt<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≤</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span><span class="main">)</span> <span class="main">∧</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span><span class="main">)</span> <span class="main">≤</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">⊆</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≤</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> matroid_ax_2<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">x</span><span class="main">}</span> <span class="main">≤</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> One_nat_def card.empty card_Suc_eq insert_absorb insert_not_empty matroid_ax_1b<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">x</span><span class="main">}</span><span class="main">)</span> <span class="main">≤</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> add_leD1 le_antisym matroid_ax_3 rk_ax_singleton<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-matroid_ax_3_alt'"><span class="command">lemma</span></span> matroid_ax_3_alt'<span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">⟶</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">⟶</span> rk <span class="free">X</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> i1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≤</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> i2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≥</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">}</span><span class="main">)</span> <span class="main">∪</span> <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">+</span> rk <span class="free">X</span> <span class="main">≤</span> rk <span class="free">X</span> <span class="main">+</span> rk <span class="free">X</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>›</span></span> inf_sup_ord<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> le_inf_iff 
          matroid_ax_3_alt<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">≤</span> rk <span class="free">X</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">⟶</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">z</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">⟶</span> rk <span class="free">X</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">y</span><span class="main">,</span> <span class="free">z</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> antisym i1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_ext"><span class="command">lemma</span></span> rk_ext<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="free">X</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">P</span><span class="main">.</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="bound">P</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="skolem"><span class="skolem">C</span></span> <span class="skolem"><span class="skolem">D</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span><span class="skolem">B</span><span class="main">,</span><span class="skolem">C</span><span class="main">,</span><span class="skolem">D</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_ax_dim 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_upper2 <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span>›</span></span> matroid_ax_2 sup.coboundedI2 sup.orderE<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt' that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk<span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> that<span class="main">(</span>4<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span> <span class="main">∨</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span> <span class="main">∨</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span> <span class="main">∨</span> 
    rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Suc_le_eq Suc_numeral Un_upper2 <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span>›</span></span> 
        <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span><span class="main">;</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span><span class="main">;</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">C</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span><span class="main">;</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span><span class="main">⟧</span> <span class="main">⟹</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">,</span> <span class="skolem">C</span><span class="main">,</span> <span class="skolem">D</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span>›</span></span> 
        add.right_neutral add_Suc_right assms antisym_conv1 matroid_ax_2 matroid_ax_2_alt 
        not_less semiring_norm<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> sup.coboundedI2 sup.orderE<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">P</span> <span class="main">.</span> rk <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="bound">P</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> rk <span class="free">X</span> <span class="main">+</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_singleton"><span class="command">lemma</span></span> rk_singleton <span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">P</span><span class="main">.</span> rk <span class="main">{</span><span class="bound">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">P</span><span class="main">}</span> <span class="main">≤</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> One_nat_def card.empty card_Suc_eq insert_absorb insert_not_empty matroid_ax_1b<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">P</span><span class="main">}</span> <span class="main">≥</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_ax_singleton 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> antisym 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_singleton_bis"><span class="command">lemma</span></span> rk_singleton_bis <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">B</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms rk_singleton<span class="main">)</span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_couple"><span class="command">lemma</span></span> rk_couple <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_is_Un matroid_ax_2_alt one_add_one rk_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms rk_ax_couple<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?thesis</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> f1 le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_triple_le"><span class="command">lemma</span></span> rk_triple_le <span class="main">:</span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_numeral Un_commute insert_absorb2 insert_is_Un linear matroid_ax_2_alt numeral_2_eq_2 
      numeral_3_eq_3 numeral_le_one_iff numeral_plus_one rk_couple rk_singleton semiring_norm<span class="main"><span class="main">(</span></span>70<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_couple_to_singleton"><span class="command">lemma</span></span> rk_couple_to_singleton <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">B</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">≠</span> <span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> that<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">=</span> <span class="free">B</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Matroid_Rank_Properties-rk_triple_to_rk_couple"><span class="command">lemma</span></span> rk_triple_to_rk_couple <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_1b
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> one_le_numeral rk_ax_couple rk_couple rk_singleton_bis<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="free">C</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms rk_ax_couple rk_singleton_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>›</span></span> le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>
















    



</pre>
</div><div id="Desargues_2D">
<div class="head">
<h1>Theory Desargues_2D</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Desargues_2D
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Higher_Projective_Space_Rank_Axioms">Higher_Projective_Space_Rank_Axioms</a> <a href="#Matroid_Rank_Properties">Matroid_Rank_Properties</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We prove Desargues's theorem: if two triangles ABC and A'B'C' are perspective from a point P (ie. 
the lines AA', BB' and CC' are concurrent in P), then they are perspective from a line (ie. the points
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>α = BC ∩ B'C'›</span></span></span></span>, <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>β = AC ∩ A'C'›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>γ = AB ∩ A'B'›</span></span></span></span> are collinear).
In this file we restrict ourself to the case where the two triangles ABC and A'B'C' are coplanar. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Desargues's Theorem: The Coplanar Case›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">desargues_config_2D</span> <span class="main">::</span> 
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">⇒</span> bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">desargues_config_2D</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">β</span></span></span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span> <span class="main">≡</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> 
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span>
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">β</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">β</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">α</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">α</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> 
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> 
<span class="comment1">― ‹We add the following non-degeneracy conditions›</span>
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> 
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>

<span class="keyword1" id="Desargues_2D-coplanar_ABCA'B'C'P"><span class="command">lemma</span></span> coplanar_ABCA'B'C'P <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right Un_upper2 le_antisym sup_bot.right_neutral<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-non_colinear_A'B'P"><span class="command">lemma</span></span> non_colinear_A'B'P <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_triple_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_mono insert_subset subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute rk_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f2 assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f2 matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> eq_iff insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f3 assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_non_collinear_P"><span class="command">lemma</span></span> desargues_config_2D_non_collinear_P <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> non_colinear_A'B'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> 
      assms<span class="main">(</span>3<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> non_colinear_A'B'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> 
      assms<span class="main">(</span>4<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> non_colinear_A'B'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>3<span class="main">)</span> 
      assms<span class="main">(</span>4<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_A'B'PQ"><span class="command">lemma</span></span> rk_A'B'PQ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Suc_numeral card.insert card.empty finite.emptyI finite_insert insert_absorb 
        insert_not_empty linear nat_add_left_cancel_le numeral_3_eq_3 numeral_Bit0 numeral_code<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> 
        numeral_le_one_iff numerals<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> one_plus_numeral semiring_norm<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>69<span class="main"><span class="main">)</span></span> 
        semiring_norm<span class="main"><span class="main">(</span></span>70<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_1b dual_order.trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> le_diff_conv 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms non_colinear_A'B'P coplanar_ABCA'B'C'P
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> diff_add_inverse2 le_trans<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> f1 eq_iff<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkA'B'PQ_rkA'C'PQ_rkB'C'PQ"><span class="command">lemma</span></span> desargues_config_2D_rkA'B'PQ_rkA'C'PQ_rkB'C'PQ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_A'B'PQ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_A'B'PQ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_A'B'PQ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_A'B'PR"><span class="command">lemma</span></span> rk_A'B'PR <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"card <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Suc_numeral assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> card.empty card_insert_disjoint dual_order.trans finite.emptyI 
        finite_insert insert_absorb linear nat_add_left_cancel_le numeral_2_eq_2 numeral_3_eq_3 
        numeral_Bit0 numeral_code<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> numeral_le_one_iff rk_singleton rk_triple_le semiring_norm<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> 
        semiring_norm<span class="main"><span class="main">(</span></span>69<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> dual_order.trans matroid_ax_1b 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 assms<span class="main">(</span>3<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_mono subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f4
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> f1 le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_A'C'PR"><span class="command">lemma</span></span> rk_A'C'PR <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> rk_A'B'PR 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Desargues_2D-rk_B'C'PR"><span class="command">lemma</span></span> rk_B'C'PR <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> rk_A'C'PR 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Desargues_2D-rk_ABA'"><span class="command">lemma</span></span> rk_ABA' <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> eq_iff insert_absorb2 insert_commute non_colinear_A'B'P rk_couple<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> le_antisym rk_triple_le<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_non_collinear"><span class="command">lemma</span></span> desargues_config_2D_non_collinear <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> rk_ABA' 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> rk_ABA'
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> rk_ABA'
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_Aa"><span class="command">lemma</span></span> rk_Aa <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> add_le_imp_le_diff 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>4<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> rk_singleton that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> One_nat_def assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> le_numeral_extra<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> nat_add_left_cancel_le numeral_2_eq_2 
        numeral_3_eq_3 one_add_one rk_couple rk_triple_le that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> numeral_eq_one_iff rk_couple semiring_norm<span class="main"><span class="main">(</span></span>85<span class="main"><span class="main">)</span></span> that<span class="main">)</span> 
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">)</span> matroid_ax_3_alt'<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> insert_commute that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> One_nat_def Un_insert_right add.right_neutral add_Suc_right insert_commute matroid_ax_2_alt 
        numeral_2_eq_2 numeral_3_eq_3 sup_bot.right_neutral that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> f1 rk_ABA'
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span>›</span></span> 
        add_diff_cancel_right' add_leD2 le_less_trans not_le 
        ordered_cancel_comm_monoid_diff_class.add_diff_inverse 
        ordered_cancel_comm_monoid_diff_class.le_add_diff that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="main">(</span>rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>5<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_couple rk_singleton_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkAa_rkBb_rkCc"><span class="command">lemma</span></span> desargues_config_2D_rkAa_rkBb_rkCc <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_Aa assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> rk_triple_le<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_Aa assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_commute rk_triple_le<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_Aa<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">c</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> 
      desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute rk_triple_le<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_ABPRa"><span class="command">lemma</span></span> rk_ABPRa <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_A'B'PR assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 assms<span class="main">(</span>2<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insertI1 insert_subset subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 assms<span class="main">(</span>1<span class="main">)</span> f2
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_ABPa"><span class="command">lemma</span></span> rk_ABPa <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 assms<span class="main">(</span>6<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_iff subsetI<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> rk_Aa 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span> rk_ABPRa 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2 assms<span class="main">(</span>10<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> add_le_imp_le_diff diff_add_inverse2 order_trans<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkABPa_rkABPb_rkABPc"><span class="command">lemma</span></span> desargues_config_2D_rkABPa_rkABPb_rkABPc <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_ABCA'B'C'P 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> 
      rk_A'B'PQ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2 assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> 
      assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span> rk_ABPa 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2 assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>9<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> 
      assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>10<span class="main">)</span> rk_ABPa<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">b</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">C'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> rk_ABPRa<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">c</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
        f1 assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> f2
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 f3
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> dual_order.trans<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">C</span><span class="main">,</span><span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> f4 assms<span class="main">(</span>12<span class="main">)</span> desargues_config_2D_rkAa_rkBb_rkCc assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span> assms<span class="main">(</span>11<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 f1
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> insert_iff subsetI<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> f6
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> f5
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_AA'C"><span class="command">lemma</span></span> rk_AA'C <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_AA'C'"><span class="command">lemma</span></span> rk_AA'C' <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> insert_commute rk_AA'C<span class="main">)</span>

<span class="keyword1" id="Desargues_2D-rk_AA'Ca"><span class="command">lemma</span></span> rk_AA'Ca <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> dual_order.trans insert_commute insert_mono insert_subset subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> empty_subsetI insert_commute insert_mono semiring_norm<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> le_diff_conv 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 assms<span class="main">(</span>1<span class="main">)</span> f2
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_AA'C'a"><span class="command">lemma</span></span> rk_AA'C'a <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> insert_commute rk_AA'Ca<span class="main">)</span>

<span class="keyword1" id="Desargues_2D-rk_Ra"><span class="command">lemma</span></span> rk_Ra <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">=</span> <span class="free">a</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_couple_to_singleton 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> matroid_ax_3_alt'
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_empty_right Un_insert_right insert_commute that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>4<span class="main">)</span> f1 assms<span class="main">(</span>5<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right add_le_cancel_right insert_is_Un le_antisym matroid_ax_2 subset_insertI that<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute that<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>7<span class="main">)</span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f2 f3 assms<span class="main">(</span>6<span class="main">)</span> that 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> f4 f5 assms<span class="main">(</span>8<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Suc_1 Suc_le_eq add_Suc add_Suc_right nat_1_add_1 not_le numeral_2_eq_2 numeral_3_eq_3 
        numeral_Bit0 order.trans rk_couple rk_singleton_bis<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkRa_rkRb_rkRc"><span class="command">lemma</span></span> desargues_config_2D_rkRa_rkRb_rkRc <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> coplanar_ABCA'B'C'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> desargues_config_2D_non_collinear assms<span class="main">(</span>1<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> desargues_config_2D_non_collinear assms<span class="main">(</span>1<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> desargues_config_2D_non_collinear assms<span class="main">(</span>1<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2 rk_Ra<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 f3 rk_Ra<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 f4 rk_Ra<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>10<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_acACβ"><span class="command">lemma</span></span> rk_acACβ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono add_Suc_right numeral_3_eq_3 numeral_nat<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numerals<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
        rk_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 f2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> order_trans<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 assms<span class="main">(</span>6<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> dual_order.trans insert_commute insert_mono insert_subset subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> le_diff_conv 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f4 assms<span class="main">(</span>5<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>›</span></span> 
        ab_semigroup_add_class.add_ac<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> add_2_eq_Suc' add_diff_cancel_right' add_le_imp_le_diff 
        card.empty card.insert dual_order.antisym finite.intros<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> insert_absorb insert_not_empty 
        matroid_ax_1b nat_1_add_1 numeral_3_eq_3 numeral_Bit0 order.trans rk_ax_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right Un_upper2 dual_order.trans sup_bot.comm_neutral<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f3 le_antisym 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_acA'C'β"><span class="command">lemma</span></span> rk_acA'C'β <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> assms rk_acACβ  
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Desargues_2D-plane_representation_change"><span class="command">lemma</span></span> plane_representation_change <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> matroid_ax_2_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> add.commute dual_order.trans insert_commute matroid_ax_2 nat_add_left_cancel_le 
        subset_insertI<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">4</span>›</span></span> antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkABCP"><span class="command">lemma</span></span> desargues_config_2D_rkABCP <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> empty_subsetI insert_mono<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span><span class="main">]</span> coplanar_ABCA'B'C'P 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 f2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 antisym  
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-desargues_config_2D_rkABCabc"><span class="command">lemma</span></span> desargues_config_2D_rkABCabc <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_ABCA'B'C'P 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_A'B'PQ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">Q</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> 
      assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> rk_ABPa 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 f3
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> dual_order.trans<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_rkABCP 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f4 assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> f5
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_abc"><span class="command">lemma</span></span> rk_abc <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> rk_triple_le<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> desargues_config_2D_rkABCabc assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>13<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span> 
      assms<span class="main">(</span>12<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> dual_order.trans insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> coplanar_ABCA'B'C'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_non_collinear<span class="main">(</span>3<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> 
      assms<span class="main">(</span>8<span class="main">)</span> assms<span class="main">(</span>14<span class="main">)</span> rk_Ra<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 f4 assms<span class="main">(</span>11<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_non_collinear<span class="main">(</span>2<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f2 assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      rk_Ra<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span> assms<span class="main">(</span>13<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f5 f6 assms<span class="main">(</span>10<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f7 assms<span class="main">(</span>9<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Suc_eq_plus1 Suc_le_mono Suc_numeral add.assoc card.empty card.insert 
        dual_order.trans finite.intros<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> insert_absorb insert_not_empty le_antisym matroid_ax_1b 
        one_add_one rk_ax_singleton semiring_norm<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>›</span></span> le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_acβ"><span class="command">lemma</span></span> rk_acβ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_abc assms 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute rk_triple_to_rk_couple<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> empty_subsetI insert_mono<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_AA'C assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> coplanar_ABCA'B'C'P assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_ABPa assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> 
        desargues_config_2D_rkA'B'PQ_rkA'C'PQ_rkB'C'PQ<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f2 f3 f4 rk_AA'Ca<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_acACβ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">A'</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
      assms<span class="main">(</span>9<span class="main">)</span> assms<span class="main">(</span>11<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> rk_triple_to_rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_AA'C'a<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> desargues_config_2D_non_collinear_P<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> f3 f4 insert_commute 
        rk_AA'C<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_acA'C'β<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">A</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
      assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> insert_commute rk_triple_to_rk_couple<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span>›</span></span> dual_order.trans<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 f5 f6
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">2</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>›</span></span> le_antisym 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_abγ"><span class="command">lemma</span></span> rk_abγ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">C</span> <span class="free">B</span> <span class="free">A'</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">γ</span> <span class="free">β</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">β</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_acβ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>10<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> 
        assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_bcα"><span class="command">lemma</span></span> rk_bcα <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">B</span> <span class="free">A</span> <span class="free">C</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">β</span> <span class="free">α</span> <span class="free">γ</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_acβ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>10<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> 
        assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_abcαβγ"><span class="command">lemma</span></span> rk_abcαβγ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> rk_abγ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span> assms 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_acβ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span> assms 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_bcα<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span> assms
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono add_Suc_right numeral_3_eq_3 numeral_nat<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numerals<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
        rk_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 rk_abc<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_upper2 assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>10<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> 
        assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> insert_mono le_antisym sup_bot.comm_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_abc<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span> assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>10<span class="main">)</span> assms<span class="main">(</span>11<span class="main">)</span> assms<span class="main">(</span>12<span class="main">)</span> assms<span class="main">(</span>13<span class="main">)</span> 
      assms<span class="main">(</span>14<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> assms<span class="main">(</span>5<span class="main">)</span> assms<span class="main">(</span>6<span class="main">)</span> assms<span class="main">(</span>7<span class="main">)</span> assms<span class="main">(</span>8<span class="main">)</span> assms<span class="main">(</span>9<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_triple_to_rk_couple rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f3 f4 f5
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>›</span></span> empty_subsetI insert_mono le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_ABCαβγ"><span class="command">lemma</span></span> rk_ABCαβγ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
<span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> f1 f2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono add_Suc_right numeral_3_eq_3 numeral_nat<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numerals<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> 
        rk_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>›</span></span> empty_subsetI insert_mono le_antisym<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>›</span></span> rk_couple rk_triple_to_rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f3 f4 f5
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>›</span></span> empty_subsetI insert_mono le_antisym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_αβγ"><span class="command">lemma</span></span> rk_αβγ <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
<span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">Q</span><span class="main">,</span> <span class="free">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
<span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> desargues_config_2D_rkABCabc<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">R</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span><span class="main">]</span> assms 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">}</span>›</span></span> dual_order.trans<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">a</span><span class="main">,</span> <span class="free">b</span><span class="main">,</span> <span class="free">c</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 rk_ABCαβγ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span> rk_abcαβγ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">Q</span></span> <span class="quoted"><span class="free">a</span></span> <span class="quoted"><span class="free">b</span></span> <span class="quoted"><span class="free">c</span></span> <span class="quoted"><span class="free">R</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Suc_1 Suc_le_eq add_Suc_right add_le_imp_le_diff assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>10<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> 
        assms<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>14<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> 
        assms<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> diff_add_inverse2 le_antisym nat_1_add_1 not_less numeral_3_eq_3 one_plus_numeral 
        rk_triple_le semiring_norm<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_αβγ_special_case_1"><span class="command">lemma</span></span> rk_αβγ_special_case_1 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A'</span> <span class="main">=</span> <span class="free">P</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> rk_couple_to_singleton<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> add_le_cancel_right insert_commute rk_triple_to_rk_couple<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f5<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute le_antisym matroid_ax_2 subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="skolem">a</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="skolem">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> rk_AA'Ca rk_acACβ
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right Un_upper2 <span class="quoted"><span class="quoted">‹<span class="free">A'</span> <span class="main">=</span> <span class="free">P</span>›</span></span> insert_commute matroid_ax_2 sup_bot.right_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">β</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">β</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">β</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> f5 f6
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">β</span> <span class="main">=</span> <span class="free">C</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">A'</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹<span class="free">A'</span> <span class="main">=</span> <span class="free">P</span>›</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> add_le_cancel_right insert_commute rk_triple_to_rk_couple<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f7<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute le_antisym matroid_ax_2 subset_insertI<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="skolem">a</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="skolem">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">a</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f8<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> rk_AA'Ca rk_acACβ
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right Un_upper2 <span class="quoted"><span class="quoted">‹<span class="free">A'</span> <span class="main">=</span> <span class="free">P</span>›</span></span> insert_commute matroid_ax_2 sup_bot.right_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">γ</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">γ</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">γ</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="main">1</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> f7 f8
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">γ</span> <span class="main">=</span> <span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_couple 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">β</span> <span class="main">=</span> <span class="free">C</span> ›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute order_refl<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_αβγ_special_case_2"><span class="command">lemma</span></span> rk_αβγ_special_case_2 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">B</span> <span class="free">A</span> <span class="free">C</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">β</span> <span class="free">α</span> <span class="free">γ</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ_special_case_1<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_2D-rk_αβγ_special_case_3"><span class="command">lemma</span></span> rk_αβγ_special_case_3 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D  <span class="free">C</span> <span class="free">B</span> <span class="free">A</span> <span class="free">C'</span> <span class="free">B'</span> <span class="free">A'</span> <span class="free">P</span> <span class="free">γ</span> <span class="free">β</span> <span class="free">α</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
      desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_commute<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ_special_case_1<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">α</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> desargues_2D <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_2D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_ABCA'B'C'P
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f1 rk_ext<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_left add.commute one_plus_numeral order_refl semiring_norm<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> semiring_norm<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> 
        sup_bot.left_neutral<span class="main">)</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_ax_3_pts 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_singleton assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> add_Suc_right eval_nat_numeral<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">A</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> dual_order.trans insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="skolem">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="skolem">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f2 rk_ax_pasch 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_singleton assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> add_Suc_right eval_nat_numeral<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">B</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> dual_order.trans insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="skolem">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="skolem">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f3 rk_ax_pasch 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">P</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">C</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_singleton assms desargues_config_2D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_1 Suc_eq_plus1 Suc_le_mono <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> add_Suc_right eval_nat_numeral<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="skolem">R</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> dual_order.trans insert_commute subset_insertI<span class="main">)</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">c</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="skolem">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="skolem">R</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="skolem">c</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> f4 rk_ax_pasch 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span> <span class="quoted"><span class="skolem">Q</span></span> <span class="quoted"><span class="skolem">a</span></span> <span class="quoted"><span class="skolem">b</span></span> <span class="quoted"><span class="skolem">c</span></span> <span class="quoted"><span class="skolem">R</span></span><span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">}</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">P</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="skolem">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="skolem">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="skolem">Q</span><span class="main">,</span> <span class="skolem">R</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="skolem">R</span><span class="main">,</span> <span class="free">A</span><span class="main">,</span> <span class="skolem">a</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="skolem">R</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="skolem">b</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>›</span></span> assms that<span class="main">(</span>1<span class="main">)</span> that<span class="main">(</span>2<span class="main">)</span> that<span class="main">(</span>3<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ_special_case_1 assms that 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ_special_case_2 assms that
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> rk_αβγ_special_case_3 assms that
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟦</span>rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span><span class="main">;</span> rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span><span class="main">;</span> rk <span class="main">{</span><span class="free">C'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span><span class="main">⟧</span> <span class="main">⟹</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>›</span></span> 
      <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span> <span class="main">⟹</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>›</span></span> <span class="quoted"><span class="quoted">‹rk <span class="main">{</span><span class="free">B'</span><span class="main">,</span> <span class="free">P</span><span class="main">}</span> <span class="main">=</span> <span class="main">1</span> <span class="main">⟹</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>›</span></span> 
      rk_couple rk_singleton_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Desargues_3D">
<div class="head">
<h1>Theory Desargues_3D</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Desargues_3D
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <a href="#Higher_Projective_Space_Rank_Axioms">Higher_Projective_Space_Rank_Axioms</a> <a href="#Matroid_Rank_Properties">Matroid_Rank_Properties</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We prove Desargues's theorem: if two triangles ABC and A'B'C' are perspective from a point P (ie. 
the lines AA', BB' and CC' are concurrent in P), then they are perspective from a line (ie. the points
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>α = BC ∩ B'C'›</span></span></span></span>, <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>β = AC ∩ A'C'›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>γ = AB ∩ A'B'›</span></span></span></span> are collinear).
In this file we restrict ourself to the case where the two triangles ABC and A'B'C' are not coplanar. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Desargues's Theorem: The Non-coplanar Case›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">desargues_config_3D</span> <span class="main">::</span> 
  <span class="quoted"><span class="quoted">"<span class="main">[</span>Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">,</span> Points<span class="main">]</span> <span class="main">=&gt;</span> bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">desargues_config_3D</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">β</span></span></span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span> <span class="main">≡</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span> <span class="main">∧</span> 
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span> <span class="main">∧</span> 
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">α</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">α</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">β</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">C'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">β</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span> rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span> <span class="main">∧</span>
rk <span class="main">{</span><span class="free"><span class="bound"><span class="entity">A'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">B'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">γ</span></span></span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>

<span class="keyword1" id="Desargues_3D-coplanar_4"><span class="command">lemma</span></span> coplanar_4 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> empty_subsetI insert_mono<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right add_One_commute add_mono assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> matroid_ax_2_alt 
        nat_1_add_1 numeral_plus_one rk_singleton semiring_norm<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> sup_bot.right_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right add_One_commute assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> matroid_ax_2_alt numeral_plus_one 
        semiring_norm<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> sup_bot.right_neutral<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_4"><span class="command">lemma</span></span> desargues_config_3D_coplanar_4 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-coplanar_4_bis"><span class="command">lemma</span></span> coplanar_4_bis <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> coplanar_4 insert_commute<span class="main">)</span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_4_bis"><span class="command">lemma</span></span> desargues_config_3D_coplanar_4_bis <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-coplanar_4_ter"><span class="command">lemma</span></span> coplanar_4_ter <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> coplanar_4 insert_commute<span class="main">)</span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_4_ter"><span class="command">lemma</span></span> desargues_config_3D_coplanar_4_ter <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4_ter 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_4_ter 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-coplanar_5"><span class="command">lemma</span></span> coplanar_5 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> coplanar_4
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Un_assoc Un_commute add.commute add_Suc_right assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> insert_is_Un 
        le_antisym matroid_ax_2_alt numeral_2_eq_2 numeral_3_eq_3 one_add_one<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> coplanar_4_bis
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> One_nat_def Un_assoc Un_commute add.commute add_Suc_right assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> insert_is_Un 
        le_antisym matroid_ax_2_alt numeral_2_eq_2 numeral_3_eq_3 one_add_one<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt'
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_assoc assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> insert_is_Un<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_5"><span class="command">lemma</span></span> desargues_config_3D_coplanar_5 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def coplanar_5 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def coplanar_5 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1" id="Desargues_3D-coplanar_5_bis"><span class="command">lemma</span></span> coplanar_5_bis <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> assms coplanar_5 insert_commute<span class="main">)</span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_5_bis"><span class="command">lemma</span></span> desargues_config_3D_coplanar_5_bis <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_5_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_5_bis 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-coplanar_6"><span class="command">lemma</span></span> coplanar_6 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> f1<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> coplanar_5_bis assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>3<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> coplanar_5 assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>4<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> f3<span class="main">:</span><span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> coplanar_4 assms<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> f1 <span class="keyword2"><span class="keyword">and</span></span> f2 <span class="keyword2"><span class="keyword">and</span></span> f3 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt'<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">β</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">γ</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_left sup_bot.left_neutral<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_coplanar_6"><span class="command">lemma</span></span> desargues_config_3D_coplanar_6 <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_6 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">=</span> <span class="numeral">3</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> coplanar_6 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Desargues_3D-desargues_config_3D_non_coplanar"><span class="command">lemma</span></span> desargues_config_3D_non_coplanar <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≥</span> <span class="numeral">4</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="numeral">4</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_2 assms desargues_config_3D_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">B</span></span> <span class="quoted"><span class="free">C</span></span> <span class="quoted"><span class="free">A'</span></span> <span class="quoted"><span class="free">B'</span></span> <span class="quoted"><span class="free">C'</span></span> <span class="quoted"><span class="free">P</span></span> <span class="quoted"><span class="free">α</span></span> <span class="quoted"><span class="free">β</span></span> <span class="quoted"><span class="free">γ</span></span><span class="main">]</span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> desargues_3D <span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"desargues_config_3D <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">A'</span> <span class="free">B'</span> <span class="free">C'</span> <span class="free">P</span> <span class="free">α</span> <span class="free">β</span> <span class="free">γ</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> matroid_ax_3_alt<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> insert_commute<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">+</span> rk <span class="main">{</span><span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">-</span> rk <span class="main">{</span><span class="free">A</span><span class="main">,</span> <span class="free">B</span><span class="main">,</span> <span class="free">C</span><span class="main">,</span> <span class="free">A'</span><span class="main">,</span> <span class="free">B'</span><span class="main">,</span> <span class="free">C'</span><span class="main">,</span> <span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"rk <span class="main">{</span><span class="free">α</span><span class="main">,</span> <span class="free">β</span><span class="main">,</span> <span class="free">γ</span><span class="main">}</span> <span class="main">≤</span> <span class="numeral">2</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> assms desargues_config_3D_coplanar_6 desargues_config_3D_non_coplanar
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>








</pre>
</div><div id="Projective_Space_Axioms">
<div class="head">
<h1>Theory Projective_Space_Axioms</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Projective_Space_Axioms
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We introduce the types of points and lines and an incidence relation between them.
<span class="antiquoted"><span class="antiquoted">▪</span></span> A set of axioms for the (3-dimensional) projective space. 
An alternative set of axioms could use planes as basic objects in addition to points and lines  
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹The axioms of the Projective Space›</span></span>

<span class="comment1">(* One has a type of points *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"points"</span>
<span class="comment1">(* We don't need an axiom for the existence of at least one point, 
since we know that the type "points" is not empty *)</span>

<span class="comment1">(* One has a type of lines *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"lines"</span>
<span class="comment1">(* idem *)</span>

<span class="comment1">(* There is a relation of incidence between points and lines *)</span>
<span class="keyword1"><span class="command">consts</span></span> incid <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">⇒</span> lines <span class="main">⇒</span> bool"</span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="comment1">(* The relation of incidence is decidable *)</span>
incid_dec<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>incid <span class="free">P</span> <span class="free">l</span><span class="main">)</span> <span class="main">∨</span> <span class="main">¬</span><span class="main">(</span>incid <span class="free">P</span> <span class="free">l</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="comment1">(* Ax1: Any two distinct points are incident with just one line *)</span>
ax1_existence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">l</span><span class="main">.</span> <span class="main">(</span>incid <span class="free">P</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="free">M</span> <span class="bound">l</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax1_uniqueness<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>incid <span class="free">P</span> <span class="free">k</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">M</span> <span class="free">k</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">P</span> <span class="free">l</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">M</span> <span class="free">l</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free">P</span> <span class="main">=</span> <span class="free">M</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free">k</span> <span class="main">=</span> <span class="free">l</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct4</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">⇒</span> points <span class="main">⇒</span> points <span class="main">⇒</span> points <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct4</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span><span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax2: If A B C D are four distinct points such that AB meets CD then AC meets BD.
Sometimes this is called Pasch's axiom, but according to Wikipedia it is misleading
since Pasch's axiom refers to something else. *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax2<span class="main">:</span> <span class="quoted"><span class="quoted">"distinct4 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">A</span> <span class="free">lAB</span> <span class="main">∧</span> incid <span class="free">B</span> <span class="free">lAB</span><span class="main">)</span> 
<span class="main">⟶</span> <span class="main">(</span>incid <span class="free">C</span> <span class="free">lCD</span> <span class="main">∧</span> incid <span class="free">D</span> <span class="free">lCD</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">A</span> <span class="free">lAC</span> <span class="main">∧</span> incid <span class="free">C</span> <span class="free">lAC</span><span class="main">)</span> <span class="main">⟶</span> 
<span class="main">(</span>incid <span class="free">B</span> <span class="free">lBD</span> <span class="main">∧</span> incid <span class="free">D</span> <span class="free">lBD</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">I</span><span class="main">.</span><span class="main">(</span>incid <span class="bound">I</span> <span class="free">lAB</span> <span class="main">∧</span> incid <span class="bound">I</span> <span class="free">lCD</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> 
<span class="main">(</span><span class="main">∃</span><span class="bound">J</span><span class="main">.</span><span class="main">(</span>incid <span class="bound">J</span> <span class="free">lAC</span> <span class="main">∧</span> incid <span class="bound">J</span> <span class="free">lBD</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct3</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">=&gt;</span> points <span class="main">=&gt;</span> points <span class="main">=&gt;</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct3</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(** Dimension-related axioms **)</span>
<span class="comment1">(* Ax3: Every line is incident with at least three points.
As I understand it, this axiom makes sure that lines are not degenerated into points
and since it asks for three distinct points, not only 2, it captures the idea that
lines are continuous, i.e. there is always a point between two distinct points. *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span><span class="main">.</span> distinct3 <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">A</span> <span class="free">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">B</span> <span class="free">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">C</span> <span class="free">l</span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax4: There exists two lines that do not meet, 
hence the geometry is at least 3-dimensional *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">l</span> <span class="bound">m</span><span class="main">.</span><span class="main">∀</span><span class="bound">P</span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">P</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">P</span> <span class="bound">m</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">meet</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"lines <span class="main">⇒</span> lines <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">meet</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">P</span><span class="main">.</span> <span class="main">(</span>incid <span class="bound">P</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">∧</span> incid <span class="bound">P</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">meet_in</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"lines <span class="main">⇒</span> lines <span class="main">⇒</span> points <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">meet_in</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">≡</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">∧</span> incid <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct3_line</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"lines <span class="main">⇒</span> lines <span class="main">⇒</span> lines <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct3_line</span> <span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">m</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">l</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">m</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax5: The geometry is not 4-dimensional, hence it is exactly 3-dimensional *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax5<span class="main">:</span> <span class="quoted"><span class="quoted">"distinct3_line <span class="free">l1</span> <span class="free">l2</span> <span class="free">l3</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">l4</span> <span class="bound">J1</span> <span class="bound">J2</span> <span class="bound">J3</span><span class="main">.</span> distinct3 <span class="bound">J1</span> <span class="bound">J2</span> <span class="bound">J3</span> <span class="main">∧</span> 
meet_in <span class="free">l1</span> <span class="bound">l4</span> <span class="bound">J1</span> <span class="main">∧</span> meet_in <span class="free">l2</span> <span class="bound">l4</span> <span class="bound">J2</span> <span class="main">∧</span> meet_in <span class="free">l3</span> <span class="bound">l4</span> <span class="bound">J3</span><span class="main">)</span>"</span></span>


<span class="keyword2"><span class="keyword">end</span></span></pre>
</div><div id="Higher_Projective_Space_Axioms">
<div class="head">
<h1>Theory Higher_Projective_Space_Axioms</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">theory</span></span> Higher_Projective_Space_Axioms
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">(* Author: Anthony Bordg, University of Cambridge, apdb3@cam.ac.uk .*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹
Contents:
<span class="antiquoted"><span class="antiquoted">▪</span></span> We introduce the types of points and lines and an incidence relation between them.
<span class="antiquoted"><span class="antiquoted">▪</span></span> A set of axioms for higher projective spaces, i.e. we allow models of dimension <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>&gt;›</span></span></span></span> 3. 
›</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹The axioms for Higher Projective Geometry›</span></span>

<span class="comment1">(* One has a type of points *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"points"</span>

<span class="comment1">(* One has a type of lines *)</span>
<span class="keyword1"><span class="command">typedecl</span></span> <span class="quoted">"lines"</span>

<span class="comment1">(* One has a relation of incidence between points and lines *)</span>
<span class="keyword1"><span class="command">consts</span></span> incid <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">⇒</span> lines <span class="main">⇒</span> bool"</span></span>

<span class="comment1">(* We have the following axioms *)</span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="comment1">(* Ax1: Any two distinct points are incident with just one line *)</span>
ax1_existence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">l</span><span class="main">.</span> <span class="main">(</span>incid <span class="free">P</span> <span class="bound">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="free">M</span> <span class="bound">l</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax1_uniqueness<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>incid <span class="free">P</span> <span class="free">k</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">M</span> <span class="free">k</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">P</span> <span class="free">l</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">M</span> <span class="free">l</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free">P</span> <span class="main">=</span> <span class="free">M</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free">k</span> <span class="main">=</span> <span class="free">l</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct4</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">⇒</span> points <span class="main">⇒</span> points <span class="main">⇒</span> points <span class="main">⇒</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct4</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">D</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">D</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax2: If A B C D are four distinct points such that AB meets CD, then AC meets BD.
Sometimes this is called Pasch's axiom, but according to Wikipedia it is misleading
since Pasch's axiom refers to something else. *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax2<span class="main">:</span> <span class="quoted"><span class="quoted">"distinct4 <span class="free">A</span> <span class="free">B</span> <span class="free">C</span> <span class="free">D</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">A</span> <span class="free">lAB</span> <span class="main">∧</span> incid <span class="free">B</span> <span class="free">lAB</span><span class="main">)</span> 
<span class="main">⟶</span> <span class="main">(</span>incid <span class="free">C</span> <span class="free">lCD</span> <span class="main">∧</span> incid <span class="free">D</span> <span class="free">lCD</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>incid <span class="free">A</span> <span class="free">lAC</span> <span class="main">∧</span> incid <span class="free">C</span> <span class="free">lAC</span><span class="main">)</span> <span class="main">⟶</span> 
<span class="main">(</span>incid <span class="free">B</span> <span class="free">lBD</span> <span class="main">∧</span> incid <span class="free">D</span> <span class="free">lBD</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">I</span><span class="main">.</span><span class="main">(</span>incid <span class="bound">I</span> <span class="free">lAB</span> <span class="main">∧</span> incid <span class="bound">I</span> <span class="free">lCD</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> 
<span class="main">(</span><span class="main">∃</span><span class="bound">J</span><span class="main">.</span><span class="main">(</span>incid <span class="bound">J</span> <span class="free">lAC</span> <span class="main">∧</span> incid <span class="bound">J</span> <span class="free">lBD</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">distinct3</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"points <span class="main">=&gt;</span> points <span class="main">=&gt;</span> points <span class="main">=&gt;</span> bool"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<span class="quoted"><span class="quoted">"<span class="free">distinct3</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">≠</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span>"</span></span>

<span class="comment1">(** Dimension-related axioms **)</span>
<span class="comment1">(* Ax3: Every line is incident with at least three points.
As I understand it, this axiom makes sure that lines are not degenerated into points
and since it asks for three distinct points, not only 2, it captures the idea that
lines have unlimited extent, i.e. there is always a point between two distinct points. *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span><span class="main">.</span> distinct3 <span class="bound">A</span> <span class="bound">B</span> <span class="bound">C</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">A</span> <span class="free">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">B</span> <span class="free">l</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>incid <span class="bound">C</span> <span class="free">l</span><span class="main">)</span>"</span></span>

<span class="comment1">(* Ax4: There exists two lines that do not meet, hence the geometry is at least 3-dimensional *)</span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
ax4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">l</span> <span class="bound">m</span><span class="main">.</span><span class="main">∀</span><span class="bound">P</span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span>incid <span class="bound">P</span> <span class="bound">l</span> <span class="main">∧</span> incid <span class="bound">P</span> <span class="bound">m</span><span class="main">)</span>"</span></span>


<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div>