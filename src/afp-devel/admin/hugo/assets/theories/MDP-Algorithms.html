<div id='Examples'><body>
<div class="head">
<h1>Theory Value_Iteration</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Value_Iteration</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../MDP-Rewards/MDP_reward.html"><span>MDP-Rewards.MDP_reward</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Value Iteration</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>In the previous sections we derived that repeated application of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> "</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span>"</span><span class="antiquote"><span>}</span></span></span><span> to any bounded 
</span><span>function from states to the reals converges to the optimal value of the MDP </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> "</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span><span class="antiquote"><span>}</span></span></span><span>.
</span><span>
</span><span>We can turn this procedure into an algorithm that computes not only an approximation of 
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> "</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span><span class="antiquote"><span>}</span></span></span><span> but also a policy that is arbitrarily close to optimal.
</span><span>
</span><span>Most of the proofs rely on the assumption that the supremum in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> "</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span>"</span><span class="antiquote"><span>}</span></span></span><span> can always be attained.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The following lemma shows that the relation we use to prove termination of the value iteration 
</span><span>algorithm decreases in each step.
</span><span>In essence, the distance of the estimate to the optimal value decreases by a factor of at 
</span><span>least </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="antiquote"><span>}</span></span></span><span> per iteration.</span><span>âº</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_886..891">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_rel_dec|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_rel_dec|thm"><span class="entity_def" id="offset_892..902">vi_rel_dec</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_â</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span>disc_lt_one</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_886..891"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Information.html#Information.log_le|fact"><span>log_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_886..891"><span>assms</span></a><span> </span><span>disc_lt_one</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_mult|fact"><span>log_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_886..891"><span>assms</span></a><span> </span><span>disc_lt_one</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_inverse|fact"><span>log_inverse</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.right_inverse_eq|fact"><span>right_inverse_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_886..891"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.strict_implies_not_eq|fact"><span>order.strict_implies_not_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>disc_lt_one</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_eq_one|fact"><span>log_eq_one</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.dist_\&lt;L&gt;\&lt;^sub&gt;b_lt_dist_opt|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.dist_\&lt;L&gt;\&lt;^sub&gt;b_lt_dist_opt|thm"><span class="entity_def" id="offset_1841..1861">dist_â<span class="hidden">â©</span><sub>b</sub>_lt_dist_opt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1916..1919">le1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2031..2034">le2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span>contraction_â</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span>]</span></span><span> </span><span>disc_lt_one</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2031..2034"><span>le2</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_1916..1919"><span>le1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.term_measure|const"><span class="entity_def" id="offset_2273..2285">term_measure</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.nat|const"><span>nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>ceiling</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.pelims|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.cases|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.termination|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.pinduct|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.psimps|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.inducts|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.simps|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.induct|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.cases|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.intros|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_sumC.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.inducts|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.simps|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.induct|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.cases|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.intros|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.pelims|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.cases|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.termination|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.pinduct|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.psimps|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.inducts|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.simps|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.induct|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.cases|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.intros|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_sumC.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.inducts|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.simps|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.induct|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.cases|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.intros|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_def|axiom"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel_def|axiom"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_sumC_def|axiom"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph_def|axiom"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_dom|const"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_rel|const"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_sumC|const"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_graph|const"><span>function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration|const"><span class="entity_def" id="offset_2438..2453">value_iteration</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>value_iteration</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>value_iteration</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.elims|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.induct|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.simps|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.elims|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.induct|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration.simps|thm"><span class="entity_def" id="offset_2639..2650">termination</span></span></span></span></span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.relation|method"><span class="operator"><span>relation</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>Wellfounded.measure</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2273..2285"><span>term_measure</span></a><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>fail</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="skolem"><span>v</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2766..2767">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>Wellfounded.measure</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2273..2285"><span>term_measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2910..2917">gt_zero</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_2947..2954">dist_ge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2766..2767"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3058..3067">v_not_opt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2766..2767"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Information.html#Information.log_less|fact"><span>log_less</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_less_div_pos|fact"><span>mult_imp_less_div_pos</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_less_div_pos|fact"><span>mult_imp_less_div_pos</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_pos_lt|fact"><span>dist_pos_lt</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_3058..3067"><span>v_not_opt</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_1841..1861"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_lt_dist_opt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2910..2917"><span>gt_zero</span></a><span> </span><span>zero_le_disc</span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_strict_left_mono|fact"><span>mult_strict_left_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_div_pos_less|fact"><span>mult_imp_div_pos_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2947..2954"><span>dist_ge</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>argo</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_892..902"><span>vi_rel_dec</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2766..2767"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The distance between an estimate for the value and the optimal value can be bounded with respect to 
</span><span>the distance between the estimate and the result of applying it to </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.contraction_\&lt;L&gt;_dist|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.contraction_\&lt;L&gt;_dist|thm"><span class="entity_def" id="offset_3992..4010">contraction_â_dist</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.contraction_dist|fact"><span>contraction_dist</span></a><span> </span><span>contraction_â</span><span> </span><span>disc_lt_one</span><span> </span><span>zero_le_disc</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4136..4141">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.dist_\&lt;L&gt;\&lt;^sub&gt;b_opt_eps|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.dist_\&lt;L&gt;\&lt;^sub&gt;b_opt_eps|thm"><span class="entity_def" id="offset_4142..4158">dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_3992..4010"><span>contraction_â_dist</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_le_divide_eq|fact"><span>pos_le_divide_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_3992..4010"><span>contraction_â_dist</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4136..4141"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.mult_le_cancel_left_pos|fact"><span>mult_le_cancel_left_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4136..4141"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_less_eq|fact"><span>pos_divide_less_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_â</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The estimates above allow to give a bound on the error of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2438..2453"><span>value_iteration</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2639..2650"><span>value_iteration.simps</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5064..5069">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_error|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.value_iteration_error|thm"><span>value_iteration_error</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_2438..2453"><span>value_iteration</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5064..5069"><span>assms</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4142..4158"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2639..2650"><span>value_iteration.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_2639..2650"><span>value_iteration.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>After the value iteration terminates, one can easily obtain a stationary deterministic 
</span><span>epsilon-optimal policy.
</span><span>
</span><span>Such a policy does not exist in general, attainment of the supremum in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="antiquote"><span>}</span></span></span><span> is required.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy_def|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy_def|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy|const"><span class="entity_def" id="offset_5513..5524">find_policy</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy_def|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy_def|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy|const"><span class="entity_def" id="offset_5595..5604">vi_policy</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5513..5524"><span>find_policy</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_2438..2453"><span>value_iteration</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>We formalize the attainment of the supremum using a predicate </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi|const"><span class="entity_def" id="offset_5759..5761">vi</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5782..5787">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.\&lt;L&gt;\&lt;^sub&gt;b_iter_mono|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.\&lt;L&gt;\&lt;^sub&gt;b_iter_mono|thm"><span class="entity_def" id="offset_5788..5801">â<span class="hidden">â©</span><sub>b</sub>_iter_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5782..5787"><span>assms</span></a><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_mono</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5894..5899">lemma</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.add_ac|fact"><span>Groups.add_ac</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_add|fact"><span>funpow_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_swap1|fact"><span>funpow_swap1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5788..5801"><span>â<span class="hidden">â©</span><sub>b</sub>_iter_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5894..5899"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_add|fact"><span>funpow_add</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6280..6285">lemma</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.add_ac|fact"><span>Groups.add_ac</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_add|fact"><span>funpow_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_swap1|fact"><span>funpow_swap1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_5788..5801"><span>â<span class="hidden">â©</span><sub>b</sub>_iter_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6280..6285"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_add|fact"><span>funpow_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_apply|fact"><span>o_apply</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> 6.3.1 </span><span>*</span><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> a) </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>thm_6_3_1_b_aux</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>



</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6833..6840">context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The error of the resulting policy is bounded by the distance from its value to the value computed 
</span><span>by the value iteration plus the error in the value iteration itself.
</span><span>We show that both are less than </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> when the algorithm terminates.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7117..7122">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy_error_bound|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.find_policy_error_bound|thm"><span class="entity_def" id="offset_7123..7146">find_policy_error_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5513..5524"><span>find_policy</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5513..5524"><span>find_policy</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary</span><span> </span><span class="var"><span>?d</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> shorter proof:     by (auto simp: arg_max_SUP[OF find_policy_QR_is_arg_max] â<span class="hidden">â©</span><sub>b</sub>_split.rep_eq â_split_def )</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7491..7499">L_eq_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5513..5524"><span>find_policy</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>find_policy_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Sup_att</span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.has_arg_max_arg_max|fact"><span>has_arg_max_arg_max</span></a><span> </span><span>abs_L_le</span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><span>â_eq_SUP_det</span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>max_L_ex_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>r<span class="hidden">â©</span><sub>M</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><span>â_eq_SUP_det</span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Sup_att</span><span> </span><span>ex_dec_det</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.app_arg_max_ge|fact"><span>app_arg_max_ge</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>max_L_ex_def</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>is_dec_det_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_7491..7499"><span>L_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_â</span><span> </span><span>contraction_L</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>zero_le_disc</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_7117..7122"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_le_eq|fact"><span>pos_divide_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>disc_lt_one</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_right_le_imp_le|fact"><span>mult_right_le_imp_le</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4142..4158"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_7117..7122"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9602..9607">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy_opt|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.vi_policy_opt|thm"><span>vi_policy_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5595..5604"><span>vi_policy</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>vi_policy_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_9602..9607"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>value_iteration.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_7123..7146"><span>find_policy_error_bound</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_6833..6840"><span>value_iteration.simps</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9922..9927">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.lemma_6_3_1_d|fact"><span class="entity_def" id="Value_Iteration.MDP_att_\&lt;L&gt;.lemma_6_3_1_d|thm"><span>lemma_6_3_1_d</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_5759..5761"><span>vi</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4142..4158"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_9922..9927"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10141..10148">context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_act|locale"><span>MDP_act</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;_def|fact"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;_def|thm"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;_def_raw|axiom"><span class="entity_def" id="offset_10164..10174">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;|const"><span class="entity_def" id="offset_10176..10188">find_policy'</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><span>opt_acts</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;_def|fact"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;_def|thm"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;_def_raw|axiom"><span class="entity_def" id="offset_10237..10247">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;.cong|fact"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;.cong|thm"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;|const"><span class="entity_def" id="offset_10249..10259">vi_policy'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10176..10188"><span>find_policy'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_2438..2453"><span>value_iteration</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10307..10312">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;_error_bound|fact"><span class="entity_def" id="Value_Iteration.MDP_act.find_policy&apos;_error_bound|thm"><span class="entity_def" id="offset_10313..10337">find_policy'_error_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_10176..10188"><span>find_policy'</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_10176..10188"><span>find_policy'</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary</span><span> </span><span class="var"><span>?d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10568..10576">L_eq_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_10176..10188"><span>find_policy'</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10164..10174"><span>find_policy'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span>Î½_improving_opt_acts</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10568..10576"><span>L_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_â</span><span> </span><span>contraction_L</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>zero_le_disc</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10307..10312"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_le_eq|fact"><span>pos_divide_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>disc_lt_one</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_right_le_imp_le|fact"><span>mult_right_le_imp_le</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_4142..4158"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span></a><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10307..10312"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12124..12129">lemma</span></span></span><span> </span><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;_opt|fact"><span class="entity_def" id="Value_Iteration.MDP_act.vi_policy&apos;_opt|thm"><span>vi_policy'_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Value_Iteration.html#offset_10249..10259"><span>vi_policy'</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10237..10247"><span>vi_policy'_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_12124..12129"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10141..10148"><span>value_iteration.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10313..10337"><span>find_policy'_error_bound</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Value_Iteration.html#offset_10141..10148"><span>value_iteration.simps</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>
<body>
<div class="head">
<h1>Theory Policy_Iteration</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Policy_Iteration</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../MDP-Rewards/MDP_reward.html"><span>MDP-Rewards.MDP_reward</span></a><span>"</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Policy Iteration</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The Policy Iteration algorithms provides another way to find optimal policies under the expected 
</span><span>total reward criterion.
</span><span>It differs from Value Iteration in that it continuously improves an initial guess for an optimal 
</span><span>decision rule. Its execution can be subdivided into two alternating steps: policy evaluation and 
</span><span>policy improvement.
</span><span>
</span><span>Policy evaluation means the calculation of the value of the current decision rule.
</span><span>
</span><span>During the improvement phase, we choose the decision rule with the maximum value for L, 
</span><span>while we prefer to keep the old action selection in case of ties.</span><span>
</span><span>âº</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_att_\&lt;L&gt;.policy_eval|const"><span class="entity_def" id="offset_757..768">policy_eval</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_805..812">context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_act|locale"><span>MDP_act</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_def_raw|axiom"><span class="entity_def" id="offset_828..838">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement|const"><span class="entity_def" id="offset_840..858">policy_improvement</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><span>opt_acts</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step_def_raw|axiom"><span class="entity_def" id="offset_979..989">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step|const"><span class="entity_def" id="offset_991..1002">policy_step</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> todo: move check is_dec_det outside the recursion </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.pelims|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.cases|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.termination|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.pinduct|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.psimps|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.inducts|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.simps|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.induct|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.cases|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.intros|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_sumC.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.inducts|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.simps|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.induct|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.cases|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.intros|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.pelims|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.cases|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.termination|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.pinduct|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.psimps|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.inducts|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.simps|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.induct|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.cases|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.intros|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_sumC.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.inducts|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.simps|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.induct|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.cases|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.intros|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_def|axiom"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel_def|axiom"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_sumC_def|axiom"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph_def|axiom"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_dom|const"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_rel|const"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_sumC|const"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration_graph|const"><span>function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_iteration|const"><span class="entity_def" id="offset_1111..1127">policy_iteration</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>policy_iteration</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span>is_dec_det</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>policy_iteration</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The policy iteration algorithm as stated above does require that the supremum in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="antiquote"><span>}</span></span></span><span> is
</span><span>always attained.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>Each policy improvement returns a valid decision rule.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.is_dec_det_pi|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.is_dec_det_pi|thm"><span class="entity_def" id="offset_1482..1495">is_dec_det_pi</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_828..838"><span>policy_improvement_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>some_opt_acts_in_A</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_is_dec_det|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_is_dec_det|thm"><span class="entity_def" id="offset_1644..1673">policy_improvement_is_dec_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_828..838"><span>policy_improvement_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>is_dec_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>some_opt_acts_in_A</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1804..1809">lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_improving|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_improvement_improving|thm"><span class="entity_def" id="offset_1810..1838">policy_improvement_improving</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>is_opt_act_some</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>thm_6_2_10_a_aux'</span><span> </span><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>is_opt_act_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_828..838"><span>policy_improvement_def</span></a><span>
        </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_840..858"><span>policy_improvement</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1644..1673"><span>policy_improvement_is_dec_det</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1804..1809"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½_improving_alt</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2292..2297">lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.eval_policy_step_L|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.eval_policy_step_L|thm"><span class="entity_def" id="offset_2298..2316">eval_policy_step_L</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_979..989"><span>policy_step_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2292..2297"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1810..1838"><span>policy_improvement_improving</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>The sequence of policies generated by policy iteration has monotonically increasing 
</span><span>discounted reward.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2648..2653">lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.policy_eval_mon|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_eval_mon|thm"><span class="entity_def" id="offset_2654..2669">policy_eval_mon</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?dp</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>L</span><span> </span><span class="var"><span>?d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2648..2653"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2298..2316"><span>eval_policy_step_L</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>L</span><span> </span><span class="var"><span>?d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?dp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d'</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?dp</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>L_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?dp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_le_eq|fact"><span>diff_le_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.scaleR_blinfun.rep_eq|fact"><span>scaleR_blinfun.rep_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?dp</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lemma_6_1_2_b</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?dp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv_norm_le&apos;|fact"><span>inv_norm_le'</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>norm_ð«<span class="hidden">â©</span><sub>1</sub>_l_less</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_cong|fact"><span>suminf_cong</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½_stationary</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>If policy iteration terminates, i.e. </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>, then it does so with optimal value.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3793..3798">lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step_eq_imp_opt|fact"><span class="entity_def" id="Policy_Iteration.MDP_act.policy_step_eq_imp_opt|thm"><span class="entity_def" id="offset_3799..3821">policy_step_eq_imp_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_3793..3798"><span>assms</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2298..2316"><span>eval_policy_step_L</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_805..812"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>â_fix_imp_opt</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We prove termination of policy iteration only if both the state and action sets are finite.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.axioms|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.intro|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms.intro|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.axioms(2)|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.axioms(1)|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.intro|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms.intro|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_def|axiom"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms_def|axiom"><span class="entity_def" id="offset_4284..4290">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite|locale"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite|const"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite_axioms|const"><span>MDP_PI_finite</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_act|locale"><span>MDP_act</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="free"><span>arb_act</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span>
    </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.fin_states|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.fin_states|thm"><span class="entity_def" id="offset_4427..4437">fin_states</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.fin_actions|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.fin_actions|thm"><span class="entity_def" id="offset_4469..4480">fin_actions</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>If the state and action sets are both finite, 
</span><span>  then so is the set of deterministic decision rules </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> "</span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.finite_D\&lt;^sub&gt;D|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.finite_D\&lt;^sub&gt;D|thm"><span>finite_D<span class="hidden">â©</span><sub>D</sub></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?set</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4469..4480"><span>fin_actions</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4427..4437"><span>fin_states</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?set</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4427..4437"><span>fin_states</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_set_of_finite_funs|fact"><span>finite_set_of_finite_funs</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="var"><span>?set</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>is_dec_det_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.finite_rel|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.finite_rel|thm"><span class="entity_def" id="offset_5073..5083">finite_rel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span>is_dec_det</span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>is_dec_det</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> 
  </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5205..5208">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span>is_dec_det</span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>is_dec_det</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Policy_Iteration.html#offset_5205..5208"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>This auxiliary lemma shows that policy iteration terminates if no improvement to the value of 
</span><span>the policy could be made, as then the policy remains unchanged.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5502..5507">lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.eval_eq_imp_policy_eq|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.eval_eq_imp_policy_eq|thm"><span class="entity_def" id="offset_5508..5529">eval_eq_imp_policy_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5502..5507"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5502..5507"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>L_Î½_fix</span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5502..5507"><span>assms</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2298..2316"><span>eval_policy_step_L</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_757..768"><span>policy_eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5502..5507"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><span>â_eq_SUP_det</span><span> </span><span>SUP_step_det_eq</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5502..5507"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>is_dec_det_def</span></a><span> </span><span>L<span class="hidden">â©</span><sub>a</sub>_le</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.SUP_is_arg_max|fact"><span>SUP_is_arg_max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>r<span class="hidden">â©</span><sub>M</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_step_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_improvement_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>We are now ready to prove termination in the context of finite state-action spaces.
</span><span>Intuitively, the algorithm terminates as there are only finitely many decision rules,
</span><span>and in each recursive call the value of the decision rule increases.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.elims|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.induct|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.simps|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.elims|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.induct|thm"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration.simps|thm"><span class="entity_def" id="offset_6931..6942">termination</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.relation|method"><span class="operator"><span>relation</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5073..5083"><span>finite_rel</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.finite_acyclic_wf|fact"><span>finite_acyclic_wf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.preorder_class.acyclicI_order|fact"><span>acyclicI_order</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_7260..7261">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span>is_dec_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_2654..2669"><span>policy_eval_mon</span></a><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span>
    </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_5508..5529"><span>eval_eq_imp_policy_eq</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_eval_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.not_eq_order_implies_strict|fact"><span>order.not_eq_order_implies_strict</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1482..1495"><span>is_dec_det_pi</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_step_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_7260..7261"><span>h</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The termination proof gives us access to the induction rule/simplification lemmas associated 
</span><span>with the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a><span class="antiquote"><span>}</span></span></span><span> definition.
</span><span>Thus we can prove that the algorithm finds an optimal policy.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.is_dec_det_pi&apos;|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.is_dec_det_pi&apos;|thm"><span class="entity_def" id="offset_8070..8084">is_dec_det_pi'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>is_dec_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1482..1495"><span>is_dec_det_pi</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_6931..6942"><span>policy_iteration.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_step_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.pi_pi|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.pi_pi|thm"><span>pi_pi</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_991..1002"><span>policy_step</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_1482..1495"><span>is_dec_det_pi</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_6931..6942"><span>policy_iteration.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_4284..4290"><span>policy_step_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration_correct|fact"><span class="entity_def" id="Policy_Iteration.MDP_PI_finite.policy_iteration_correct|thm"><span>policy_iteration_correct</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_1111..1127"><span>policy_iteration</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_6931..6942"><span>policy_iteration.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_3799..3821"><span>policy_step_eq_imp_opt</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_8070..8084"><span>is_dec_det_pi'</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_6931..6942"><span>policy_iteration.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8685..8692">context</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_finite_type|locale"><span>MDP_finite_type</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The following proofs concern code generation, i.e. how to represent </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span class="antiquote"><span>}</span></span></span><span> as a matrix.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;_def|fact"><span>MDP_att_â_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;_axioms_def|fact"><span>MDP_att_â_axioms_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_8685..8692"><span>max_L_ex_def</span></a><span> 
      </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span> </span><span>MDP_reward_axioms</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.fun_to_matrix_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.fun_to_matrix_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.fun_to_matrix_def_raw|axiom"><span class="entity_def" id="offset_8971..8981">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.fun_to_matrix|const"><span>fun_to_matrix</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix|const"><span>matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat_def_raw|axiom"><span class="entity_def" id="offset_9038..9048">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.Ek_mat|const"><span>Ek_mat</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_finite_type.fun_to_matrix|const"><span>fun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat_def_raw|axiom"><span class="entity_def" id="offset_9101..9111">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_inv_mat|const"><span class="entity_def" id="offset_9113..9123">nu_inv_mat</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_finite_type.fun_to_matrix|const"><span>fun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat.cong|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat.cong|thm"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.nu_mat|const"><span>nu_mat</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_finite_type.fun_to_matrix|const"><span>fun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_finite_type.apply_nu_inv_mat|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.apply_nu_inv_mat|thm"><span>apply_nu_inv_mat</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_9113..9123"><span>nu_inv_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9395..9402">eq_onpI</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.eq_onp|const"><span>eq_onp</span></a><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.eq_onp_def|fact"><span>eq_onp_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.linear|const"><span>Real_Vector_Spaces.linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_scaleR_def|fact"><span>real_scaleR_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.linearI|fact"><span>linearI</span></a><span>
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scaleR_vec_def|fact"><span>scaleR_vec_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_9395..9402"><span>eq_onpI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.plus_vec_def|fact"><span>plus_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.plus_bfun.abs_eq|fact"><span>plus_bfun.abs_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.scaleR_bfun.abs_eq|fact"><span>scaleR_bfun.abs_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_right|fact"><span>blinfun.add_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_9038..9048"><span>Ek_mat_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_8971..8981"><span>fun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_9101..9111"><span>nu_inv_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_finite_type.bounded_linear_vec_lambda|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.bounded_linear_vec_lambda|thm"><span class="entity_def" id="offset_9938..9963">bounded_linear_vec_lambda</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/NthRoot.html#NthRoot.sqrt|const"><span>sqrt</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">â§</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_le_sum_abs|fact"><span>L2_set_le_sum_abs</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_def|fact"><span>L2_set_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_upper|fact"><span>cSup_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_bounded_above|fact"><span>sum_bounded_above</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.norm_vec_def|fact"><span>norm_vec_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_bfun_def|fact"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_def|fact"><span>L2_set_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.plus_vec_def|fact"><span>plus_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scaleR_vec_def|fact"><span>scaleR_vec_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_finite_type.bounded_linear_vec_lambda_blinfun|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.bounded_linear_vec_lambda_blinfun|thm"><span class="entity_def" id="offset_10606..10639">bounded_linear_vec_lambda_blinfun</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.bounded_linear_right|fact"><span>blinfun.bounded_linear_right</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_9938..9963"><span>bounded_linear_vec_lambda</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
      </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bounded_linear_bfun_nth|fact"><span>bounded_linear_bfun_nth</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_finite_type.invertible_nu_inv_max|fact"><span class="entity_def" id="Policy_Iteration.MDP_finite_type.invertible_nu_inv_max|thm"><span>invertible_nu_inv_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Policy_Iteration.html#offset_9113..9123"><span>nu_inv_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_9101..9111"><span>nu_inv_mat_def</span></a><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_8971..8981"><span>fun_to_matrix_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Determinants.html#Determinants.matrix_invertible|fact"><span>matrix_invertible</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv_norm_le&apos;|fact"><span>inv_norm_le'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear.linear|fact"><span>bounded_linear.linear</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_10606..10639"><span>bounded_linear_vec_lambda_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span>
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.least_arg_max_def|fact"><span class="entity_def" id="Policy_Iteration.least_arg_max_def|thm"><span class="entity_def" id="Policy_Iteration.least_arg_max_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Policy_Iteration.least_arg_max|const"><span>least_arg_max</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Policy_Iteration.MDP_ord.axioms|fact"><span class="entity_def" id="Policy_Iteration.MDP_ord.intro|fact"><span class="entity_def" id="Policy_Iteration.MDP_ord_def|fact"><span class="entity_def" id="Policy_Iteration.MDP_ord.axioms|thm"><span class="entity_def" id="Policy_Iteration.MDP_ord.intro|thm"><span class="entity_def" id="Policy_Iteration.MDP_ord_def|thm"><span class="entity_def" id="Policy_Iteration.MDP_ord_def|axiom"><span class="entity_def" id="offset_11373..11379">locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_ord|locale"><span class="entity_def" id="Policy_Iteration.MDP_ord|const"><span>MDP_ord</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_finite_type|locale"><span>MDP_finite_type</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder|class"><span>wellorder</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder|class"><span>wellorder</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_ord.\&lt;L&gt;_fin_eq_det|fact"><span class="entity_def" id="Policy_Iteration.MDP_ord.\&lt;L&gt;_fin_eq_det|thm"><span>â_fin_eq_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>SUP_step_det_eq</span><span> </span><span>â_eq_SUP_det</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Policy_Iteration.MDP_ord.\&lt;L&gt;\&lt;^sub&gt;b_fin_eq_det|fact"><span class="entity_def" id="Policy_Iteration.MDP_ord.\&lt;L&gt;\&lt;^sub&gt;b_fin_eq_det|thm"><span>â<span class="hidden">â©</span><sub>b</sub>_fin_eq_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>SUP_step_det_eq</span><span> </span><a class="entity_ref" href="Policy_Iteration.html#offset_11373..11379"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><span>â_eq_SUP_det</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_PI_finite|locale"><span>MDP_PI_finite</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>Least</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI|fact"><span>LeastI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'></head>


<body>
<div class="head">
<h1>Theory Modified_Policy_Iteration</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Modified_Policy_Iteration</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="Policy_Iteration.html"><span>Policy_Iteration</span></a><span>
    </span><a href="Value_Iteration.html"><span>Value_Iteration</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Modified Policy Iteration</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.axioms|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.intro|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.axioms(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.axioms(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.intro|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI_def|axiom"><span class="entity_def" id="offset_167..173">locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI|locale"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI|const"><span>MDP_MPI</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_finite_type|locale"><span>MDP_finite_type</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_act|locale"><span>MDP_act</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="free"><span>arb_act</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>arb_act</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Advantage Function </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B_def_raw|axiom"><span class="entity_def" id="offset_360..370">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B|const"><span class="entity_def" id="offset_372..373">B</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>The function </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_372..373"><span>B</span></a><span class="antiquote"><span>}</span></span></span><span> denotes the advantage of choosing the optimal action vs.
</span><span>  the current value estimate</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B_eq_\&lt;L&gt;|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B_eq_\&lt;L&gt;|thm"><span class="entity_def" id="offset_563..569">B_eq_â</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_372..373"><span>B</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_608..609">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_372..373"><span>B</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span>L</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_360..370"><span>B_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.add_diff_eq|fact"><span>add_diff_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_608..609"><span>*</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span>L</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span>L</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.bounded_const|fact"><span>bounded_const</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_minus_comp|fact"><span>bounded_minus_comp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span>L</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_le_eq|fact"><span>diff_le_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_le_eq|fact"><span>diff_le_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_372..373"><span>B</span></a><span class="antiquote"><span>}</span></span></span><span> is a bounded function.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_1281..1296">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_1297..1300">B<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_372..373"><span>B</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_563..569"><span>B_eq_â</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun_normI|fact"><span>bfun_normI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_triangle_ineq4|fact"><span>abs_triangle_ineq4</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_eq_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_eq_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_1477..1487">B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1281..1296"><span>B<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_563..569"><span>B_eq_â</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="offset_1563..1577">â<span class="hidden">â©</span><sub>b</sub>_eq_SUP_L<span class="hidden">â©</span><sub>a</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_eq_SUP_det</span><span> </span><span>SUP_step_det_eq</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Optimization of the Value Function over Multiple Steps</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_def_raw|axiom"><span class="entity_def" id="offset_1745..1755">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U|const"><span class="entity_def" id="offset_1757..1758">U</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1757..1758"><span>U</span></a><span class="antiquote"><span>}</span></span></span><span> expresses the value estimate obtained by optimizing the first </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="antiquote"><span>}</span></span></span><span> steps and 
</span><span>  afterwards using the current estimate.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_zero|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_zero|thm"><span class="entity_def" id="offset_1985..1991">U_zero</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1757..1758"><span>U</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_one_eq_\&lt;L&gt;|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U_one_eq_\&lt;L&gt;|thm"><span>U_one_eq_â</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1757..1758"><span>U</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_2194..2209">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_2210..2213">U<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1757..1758"><span>U</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="skolem"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>m</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>abs_Î½_fin_le</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_bound|fact"><span>norm_bound</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>m</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>X</sub>_const</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span><span> 
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2693..2694">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="skolem"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span>  </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>m</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_triangle_mono|fact"><span>norm_triangle_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1757..1758"><span>U</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2693..2694"><span>*</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun_normI|fact"><span>bfun_normI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_abs_le|fact"><span>cSup_abs_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_contraction|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_contraction|thm"><span class="entity_def" id="offset_2989..3004">U<span class="hidden">â©</span><sub>b</sub>_contraction</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3067..3070">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_3125..3127">le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?U</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>bounded_stationary_Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_3125..3127"><span>le</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.le_SUP_diff&apos;|fact"><span>le_SUP_diff'</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_plus_comp|fact"><span>bounded_plus_comp</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector.scale_right_diff_distrib|fact"><span>scale_right_diff_distrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><span>bounded_P</span><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub>'</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.bounded_SUP_mul|fact"><span>bounded_SUP_mul</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub>'</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>norm_ð«<span class="hidden">â©</span><sub>X</sub>_apply</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>X</sub>_const</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_3125..3127"><span>le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_3067..3070"><span>aux</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.linear|fact"><span>linear</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_conv|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_conv(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_conv(1)|thm"><span class="entity_def" id="offset_5026..5034">U<span class="hidden">â©</span><sub>b</sub>_conv</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5139..5140">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2989..3004"><span>U<span class="hidden">â©</span><sub>b</sub>_contraction</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>zero_le_disc</span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_Suc_less_one|fact"><span>power_Suc_less_one</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.banach&apos;|fact"><span>banach'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5139..5140"><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5139..5140"><span>*</span></a></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_convergent|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_convergent|thm"><span class="entity_def" id="offset_5504..5518">U<span class="hidden">â©</span><sub>b</sub>_convergent</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergentI|fact"><span>convergentI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5602..5607">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_mono|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_mono|thm"><span>U<span class="hidden">â©</span><sub>b</sub>_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>  </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_plus_comp|fact"><span>bounded_plus_comp</span></a><span> </span><span>bounded_stationary_Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfunD|fact"><span>less_eq_bfunD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>X</sub>_mono</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5602..5607"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>X</sub>_const</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5602..5607"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_6175..6185">U<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>L_iter</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_iter_le_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span>ex_dec</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6428..6433">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_iter_le_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_iter_le_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_6434..6447">L_iter_le_U<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="free"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6428..6433"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span>
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>L_iter</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_plus_comp|fact"><span>bounded_plus_comp</span></a><span> </span><span>bounded_stationary_Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.lim_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.lim_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_6680..6687">lim_U<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6747..6751">le_U</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6814..6815">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_improving_det</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>m</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>L_Î½_fix_iff</span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6814..6815"><span>d</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_swap1|fact"><span>funpow_swap1</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6434..6447"><span>L_iter_le_U<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>â_inc_le_opt</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6175..6185"><span>U<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_swap1|fact"><span>funpow_swap1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6747..6751"><span>le_U</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.theI&apos;|fact"><span>theI'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_tendsto|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_tendsto|thm"><span class="entity_def" id="offset_7590..7601">U<span class="hidden">â©</span><sub>b</sub>_tendsto</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_6680..6687"><span>lim_U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5504..5518"><span>U<span class="hidden">â©</span><sub>b</sub>_convergent</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergent_LIMSEQ_iff|fact"><span>convergent_LIMSEQ_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_fix_unique|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.U\&lt;^sub&gt;b_fix_unique|thm"><span class="entity_def" id="offset_7713..7727">U<span class="hidden">â©</span><sub>b</sub>_fix_unique</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.theI&apos;|fact"><span>theI'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.LIMSEQ_unique|fact"><span>LIMSEQ_unique</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_7590..7601"><span>U<span class="hidden">â©</span><sub>b</sub>_tendsto</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_5026..5034"><span>U<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_U\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_U\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="offset_7879..7891">dist_U<span class="hidden">â©</span><sub>b</sub>_opt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.abs_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_7713..7727"><span>U<span class="hidden">â©</span><sub>b</sub>_fix_unique</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1985..1991"><span>U_zero</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.not0_implies_Suc|fact"><span>not0_implies_Suc</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2989..3004"><span>U<span class="hidden">â©</span><sub>b</sub>_contraction</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Expressing a Single Step of Modified Policy Iteration</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The function </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>W</span></span></span><span class="antiquote"><span>}</span></span></span><span> equals the value computed by the Modified Policy Iteration Algorithm
</span><span>  in a single iteration.
</span><span>  The right hand addend in the definition describes the advantage of using the optimal action for 
</span><span>  the first m steps.</span><span>
  </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_def_raw|axiom"><span class="entity_def" id="offset_8512..8522">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W|const"><span class="entity_def" id="offset_8524..8525">W</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8576..8581">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_eq_L_iter|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_eq_L_iter|thm"><span class="entity_def" id="offset_8582..8593">W_eq_L_iter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="free"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8576..8581"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8512..8522"><span>W_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_left|fact"><span>blinfun.sum_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_right.sum|fact"><span>scaleR_right.sum</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow.simps|fact"><span>blinfunpow.simps</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow_assoc|fact"><span>blinfunpow_assoc</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.comm_monoid_add_class.sum.lessThan_Suc_shift|fact"><span>sum.lessThan_Suc_shift</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_left|fact"><span>blinfun.sum_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_iter</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9707..9712">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_le_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_le_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_9713..9721">W_le_U<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Î½_improving_D_MR</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_9707..9712"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>bounded_stationary_Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_mono|fact"><span>diff_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_plus_comp|fact"><span>bounded_plus_comp</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2194..2209"><span>U<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1745..1755"><span>U_def</span></a><span> </span><span>L_iter</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8582..8593"><span>W_eq_L_iter</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_10150..10151">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10150..10151"><span>*</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_9707..9712"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10379..10384">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_ge_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.W_ge_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_10385..10393">W_ge_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>u</span></span><span> </span><span class="free"><span>d'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10379..10384"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_mono</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_mono</span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10379..10384"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10379..10384"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8582..8593"><span>W_eq_L_iter</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10736..10741">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_le|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.B\&lt;^sub&gt;b_le|thm"><span class="entity_def" id="offset_10742..10748">B<span class="hidden">â©</span><sub>b</sub>_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span> </span><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10736..10741"><span>assms</span></a><span>     
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>â_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10736..10741"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11252..11257">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;L&gt;\&lt;^sub&gt;b_W_ge|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;L&gt;\&lt;^sub&gt;b_W_ge|thm"><span class="entity_def" id="offset_11258..11266">â<span class="hidden">â©</span><sub>b</sub>_W_ge</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>u</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_11252..11257"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.comm_monoid_add_class.sum.lessThan_Suc_shift|fact"><span>sum.lessThan_Suc_shift</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_subtractf|fact"><span>sum_subtractf</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8512..8522"><span>W_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.comm_monoid_add_class.sum.lessThan_Suc|fact"><span>sum.lessThan_Suc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.lessThan_Suc_atMost|fact"><span>lessThan_Suc_atMost</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10742..10748"><span>B<span class="hidden">â©</span><sub>b</sub>_le</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_11252..11257"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Computing the Bellman Operator over Multiple Steps</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_def_raw|axiom"><span class="entity_def" id="offset_12199..12209">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow|const"><span class="entity_def" id="offset_12210..12215">L_pow</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>L_pow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.sum_telescope&apos;|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.sum_telescope&apos;|thm"><span class="entity_def" id="offset_12330..12344">sum_telescope'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_group_add|class"><span>ab_group_add</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.sum_telescope|fact"><span>sum_telescope</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> eq 6.5.7 </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12474..12479">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_eq|thm"><span class="entity_def" id="offset_12480..12488">L_pow_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12474..12479"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_left|fact"><span>blinfun.sum_left</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow_assoc|fact"><span>blinfunpow_assoc</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow.simps|fact"><span>blinfunpow.simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_subtractf|fact"><span>sum_subtractf</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12330..12344"><span>sum_telescope'</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12199..12209"><span>L_pow_def</span></a><span> </span><span>L_iter</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.lessThan_Suc_atMost|fact"><span>lessThan_Suc_atMost</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.lessThan_Suc_atMost|fact"><span>lessThan_Suc_atMost</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13976..13981">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_eq_W|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_eq_W|thm"><span class="entity_def" id="offset_13982..13992">L_pow_eq_W</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_13976..13981"><span>assms</span></a><span> </span><span>policy_improvement_improving</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8582..8593"><span>W_eq_L_iter</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12199..12209"><span>L_pow_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14198..14203">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_\&lt;L&gt;\&lt;^sub&gt;b_mono_inv|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.L_pow_\&lt;L&gt;\&lt;^sub&gt;b_mono_inv|thm"><span class="entity_def" id="offset_14204..14222">L_pow_â<span class="hidden">â©</span><sub>b</sub>_mono_inv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14198..14203"><span>assms</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_13982..13992"><span>L_pow_eq_W</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_11258..11266"><span>â<span class="hidden">â©</span><sub>b</sub>_W_ge</span></a><span> </span><span>policy_improvement_improving</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Modified Policy Iteration Algorithm</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>d0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_14583..14585">d0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We first define a function that executes the algorithm for n steps.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.elims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.pelims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.termination|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.pinduct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.psimps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_sumC.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.elims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.simps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.simps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.pelims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.termination|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.pinduct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.psimps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.psimps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel.intros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_sumC.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.intros(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.intros(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_sumC_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_dom|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_rel|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_sumC|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi|const"><span class="entity_def" id="offset_14684..14687">mpi</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d0</span></span><span> </span><span class="free"><span>v0</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>mpi</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_def_raw|axiom"><span class="entity_def" id="offset_14879..14889">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val|const"><span class="entity_def" id="offset_14891..14898">mpi_val</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_def_raw|axiom"><span class="entity_def" id="offset_14916..14926">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol|const"><span class="entity_def" id="offset_14928..14935">mpi_pol</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_zero|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_zero|thm"><span>mpi_pol_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>policy_improvement</span><span> </span><span class="free"><span>d0</span></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_Suc|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_Suc|thm"><span class="entity_def" id="offset_15061..15072">mpi_pol_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>policy_improvement</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta&apos;|fact"><span>case_prod_beta'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_is_dec_det|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_is_dec_det|thm"><span class="entity_def" id="offset_15216..15234">mpi_pol_is_dec_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>policy_improvement_is_dec_det</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14583..14585"><span>d0</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.splits|fact"><span>prod.splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;nu&gt;_improving_mpi_pol|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.\&lt;nu&gt;_improving_mpi_pol|thm"><span class="entity_def" id="offset_15385..15404">Î½_improving_mpi_pol</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½_improving</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14583..14585"><span>d0</span></a><span> </span><span>policy_improvement_improving</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15216..15234"><span>mpi_pol_is_dec_det</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15061..15072"><span>mpi_pol_Suc</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_zero|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_zero|thm"><span class="entity_def" id="offset_15587..15599">mpi_val_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_Suc|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_Suc|thm"><span class="entity_def" id="offset_15663..15674">mpi_val_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta&apos;|fact"><span>case_prod_beta'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_eq|thm"><span class="entity_def" id="offset_15829..15839">mpi_val_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1297..1300"><span>B<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12480..12488"><span>L_pow_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15663..15674"><span>mpi_val_Suc</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Value Iteration is a special case of MPI where </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16108..16113">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_includes_value_it|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_includes_value_it|thm"><span>mpi_includes_value_it</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16108..16113"><span>assms</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15829..15839"><span>mpi_val_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Convergence Proof</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We define the sequence </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>w</span></span></span><span class="antiquote"><span>}</span></span></span><span> as an upper bound for the values of MPI.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.elims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.pelims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.termination|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.pinduct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.psimps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_sumC.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.elims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.simps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.simps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.pelims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.termination|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.pinduct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.psimps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.psimps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel.intros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_sumC.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.intros(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.intros(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_sumC_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_dom|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_rel|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_sumC|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w|const"><span class="entity_def" id="offset_16373..16374">w</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="offset_16453..16465">dist_Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_7879..7891"><span>dist_U<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_le_one|fact"><span>power_le_one</span></a><span>
      </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_idom_class.mult_left_le_one_le|fact"><span>mult_left_le_one_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_implies_order|fact"><span>order.strict_implies_order</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt_n|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt_n|thm"><span class="entity_def" id="offset_16680..16694">dist_Î½<span class="hidden">â©</span><sub>b</sub>_opt_n</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v0</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16453..16465"><span>dist_Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_conv|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.w_conv|thm"><span class="entity_def" id="offset_16851..16857">w_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v0</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.LIMSEQ_realpow_zero|fact"><span>LIMSEQ_realpow_zero</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_LIMSEQ_I|fact"><span>metric_LIMSEQ_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16680..16694"><span>dist_Î½<span class="hidden">â©</span><sub>b</sub>_opt_n</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.LIMSEQ_def|fact"><span>LIMSEQ_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>MPI converges monotonically to the optimal value from below. 
</span><span>  The iterates are sandwiched between </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="antiquote"><span>}</span></span></span><span> from below and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_2210..2213"><span>U<span class="hidden">â©</span><sub>b</sub></span></a><span class="antiquote"><span>}</span></span></span><span> from above.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17270..17277">theorem</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_conv|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_conv(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_conv(1)|thm"><span class="entity_def" id="offset_17278..17286">mpi_conv</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_17388..17394">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17436..17439">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17270..17277"><span>assms</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17388..17394"><span>y_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15829..15839"><span>mpi_val_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_left|fact"><span>blinfun.sum_left</span></a><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_nonneg|fact"><span>sum_nonneg</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17757..17760">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17773..17781">val_eq_W</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8524..8525"><span>W</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15663..15674"><span>mpi_val_Suc</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_8582..8593"><span>W_eq_L_iter</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12199..12209"><span>L_pow_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_17956..17957">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17757..17760"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_11258..11266"><span>â<span class="hidden">â©</span><sub>b</sub>_W_ge</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17956..17957"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15829..15839"><span>mpi_val_eq</span></a><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_left|fact"><span>blinfun.sum_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_nonneg|fact"><span>sum_nonneg</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16373..16374"><span>w</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17757..17760"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17773..17781"><span>val_eq_W</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_9713..9721"><span>W_le_U<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17757..17760"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_10385..10393"><span>W_ge_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17388..17394"><span>y_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1477..1487"><span>B<span class="hidden">â©</span><sub>b</sub>_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17773..17781"><span>val_eq_W</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17388..17394"><span>y_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17436..17439"><span>aux</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.tendsto_bfun_sandwich|fact"><span>tendsto_bfun_sandwich</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_16851..16857"><span>w_conv</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>$\epsilon$-Optimality</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This gives an upper bound on the error of MPI.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18893..18898">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_eps_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_eps_opt|thm"><span class="entity_def" id="offset_18899..18914">mpi_pol_eps_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15385..15404"><span>Î½_improving_mpi_pol</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>L</span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_L</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_L</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?v</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_19824..19825">*</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ring_class.left_diff_distrib|fact"><span>left_diff_distrib</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_18893..18898"><span>assms</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_19824..19825"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_20040..20045">False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20055..20057">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20040..20045"><span>False</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>zero_le_disc</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20040..20045"><span>False</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_18893..18898"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_less_divide_eq|fact"><span>pos_less_divide_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.mult_ac|fact"><span>Groups.mult_ac</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?v</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_19824..19825"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_le_divide_eq|fact"><span>pos_le_divide_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20055..20057"><span>**</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_pos|fact"><span>divide_nonneg_pos</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20040..20045"><span>False</span></a><span> </span><span>disc_lt_one</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.strict_iff_order|fact"><span>order.strict_iff_order</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>    
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20701..20706">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_pol_opt|thm"><span class="entity_def" id="offset_20707..20718">mpi_pol_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14928..14935"><span>mpi_pol</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_18899..18914"><span>mpi_pol_eps_opt</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20701..20706"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle_le|fact"><span>dist_triangle_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_right_mono|fact"><span>add_right_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dist_â<span class="hidden">â©</span><sub>b</sub>_opt_eps</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20701..20706"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21137..21142">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_term_ex|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_val_term_ex|thm"><span class="entity_def" id="offset_21143..21158">mpi_val_term_ex</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>dist_â<span class="hidden">â©</span><sub>b</sub>_lt_dist_opt</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_17278..17286"><span>mpi_conv</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21137..21142"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dist_â<span class="hidden">â©</span><sub>b</sub>_lt_dist_opt</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_LIMSEQ_I|fact"><span>metric_LIMSEQ_I</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.order_topology_class.tendsto_sandwich|fact"><span>tendsto_sandwich</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>e</span></span></span><span> </span><span class="main"><span>&gt;</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_LIMSEQ_D|fact"><span>metric_LIMSEQ_D</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21137..21142"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.not_eq_order_implies_strict|fact"><span>order.not_eq_order_implies_strict</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21137..21142"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>zero_le_disc</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_less_divide_eq|fact"><span>pos_less_divide_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Unbounded MPI</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>Î´</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.domintros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.pelims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.termination|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.pinduct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.psimps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_sumC.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.domintros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.pelims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.termination|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.pinduct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.psimps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.intros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_sumC.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.intros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_sumC_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_dom|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_rel|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_sumC|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_graph|const"><span class="entity_def" id="offset_22128..22136">function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>domintros</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo|const"><span class="entity_def" id="offset_22149..22157">mpi_algo</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi_algo</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span>  </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>mpi_algo</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We define a tailrecursive version of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span class="antiquote"><span>}</span></span></span><span> which more closely resembles </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.elims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.pelims|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.termination|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.pinduct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.psimps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_sumC.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.inducts|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.simps|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.induct|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.cases|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.intros|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.elims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.simps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.simps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.pelims|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.termination|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.pinduct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.psimps(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.psimps(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.intros|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_sumC.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.inducts|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.simps|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.induct|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.cases|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.intros(2)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.intros(1)|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_sumC_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph_def|axiom"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_dom|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_rel|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_sumC|const"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi&apos;|const"><span class="entity_def" id="offset_22486..22490">mpi'</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>mpi'</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22666..22671">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_Suc&apos;|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_Suc&apos;|thm"><span class="entity_def" id="offset_22672..22680">mpi_Suc'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22666..22671"><span>assms</span></a><span> </span><span>policy_improvement_is_dec_det</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.induct|fact"><span>nat.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22924..22929">lemma</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22486..22490"><span>mpi'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22924..22929"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.induct|fact"><span>nat.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23064..23067">Suc</span><span> </span><span class="skolem"><span>nat</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>policy_improvement_is_dec_det</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22672..22680"><span>mpi_Suc'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23064..23067"><span>Suc</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23064..23067"><span>Suc.IH</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23202..23207">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.termination_mpi_algo|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.termination_mpi_algo|thm"><span class="entity_def" id="offset_23208..23228">termination_mpi_algo</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22128..22136"><span>mpi_algo_dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_23316..23322">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23459..23465">least0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>P</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI_ex|fact"><span>LeastI_ex</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23316..23322"><span>n_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23202..23207"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_23625..23626">0</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23459..23465"><span>least0</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21143..21158"><span>mpi_val_term_ex</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23625..23626"><span>0</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23625..23626"><span>0</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22128..22136"><span>mpi_algo.domintros</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15587..15599"><span>mpi_val_zero</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23905..23908">Suc</span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>policy_improvement</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21143..21158"><span>mpi_val_term_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>âº</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>m</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc.prems</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Least_Suc|fact"><span>Nat.Least_Suc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI_ex|fact"><span>LeastI_ex</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_24357..24361">n_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc.prems</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22672..22680"><span>mpi_Suc'</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>is_dec_det_pi</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15587..15599"><span>mpi_val_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22128..22136"><span>mpi_algo_dom</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?d</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc.IH</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_24357..24361"><span>n_eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>âº</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23905..23908"><span>Suc.prems</span></a><span> </span><span>is_dec_det_pi</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14204..14222"><span>L_pow_â<span class="hidden">â©</span><sub>b</sub>_mono_inv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22128..22136"><span>mpi_algo.domintros</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_alg_rec|const"><span class="entity_def" id="offset_24960..24971">mpi_alg_rec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
           </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25178..25183">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_def&apos;|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_def&apos;|thm"><span class="entity_def" id="offset_25184..25197">mpi_algo_def'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_24960..24971"><span>mpi_alg_rec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22128..22136"><span>mpi_algo.psimps</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_23208..23228"><span>termination_mpi_algo</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25178..25183"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25348..25353">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_eq_mpi|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_eq_mpi|thm"><span class="entity_def" id="offset_25354..25369">mpi_algo_eq_mpi</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_25542..25548">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25542..25548"><span>n_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25348..25353"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_25758..25759">0</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25348..25353"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI_ex|fact"><span>LeastI_ex</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25758..25759"><span>0</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21143..21158"><span>mpi_val_term_ex</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25348..25353"><span>assms</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25758..25759"><span>0</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25184..25197"><span>mpi_algo_def'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25956..25959">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_25973..25977">not0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_15587..15599"><span>mpi_val_zero</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21143..21158"><span>mpi_val_term_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="skolem"><span>m</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25348..25353"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>asm</span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Least_Suc|fact"><span>Least_Suc</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_12210..12215"><span>L_pow</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>policy_improvement</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>policy_improvement_is_dec_det</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22672..22680"><span>mpi_Suc'</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14879..14889"><span>mpi_val_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25184..25197"><span>mpi_algo_def'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2-4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>2-4</span><span class="main"><span>)</span></span><span> </span><span>is_dec_det_pi</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22672..22680"><span>mpi_Suc'</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25973..25977"><span>not0</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14204..14222"><span>L_pow_â<span class="hidden">â©</span><sub>b</sub>_mono_inv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25956..25959"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26799..26804">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_algo_opt|thm"><span class="entity_def" id="offset_26805..26817">mpi_algo_opt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14891..14898"><span>mpi_val</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span>  </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?n</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>Least</span></a><span> </span><span class="var"><span>?P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14684..14687"><span>mpi</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="var"><span>?n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="var"><span>?n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25354..25369"><span>mpi_algo_eq_mpi</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI_ex|fact"><span>LeastI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_21143..21158"><span>mpi_val_term_ex</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_26799..26804"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_26799..26804"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_20707..20718"><span>mpi_pol_opt</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_14916..14926"><span>mpi_pol_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Initial Value Estimate </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>v0_mpi</span></span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We define an initial estimate of the value function for which Modified Policy Iteration 
</span><span>  always terminates.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.r_min|const"><span class="entity_def" id="offset_27467..27472">r_min</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>s'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi_def_raw|axiom"><span class="entity_def" id="offset_27495..27505">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi|const"><span class="entity_def" id="offset_27507..27513">v0_mpi</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_27536..27551">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_27552..27560">v0_mpi<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27507..27513"><span>v0_mpi</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.v0_mpi\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_27612..27627">v0_mpi<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfunI|fact"><span>less_eq_bfunI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cInf_lower2|fact"><span>cInf_lower2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>disc_lt_one</span><span> </span><span>zero_le_disc</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_imp_le|fact"><span>order_less_imp_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Path_Connected.html#Path_Connected.segment_bound_lemma|fact"><span>segment_bound_lemma</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_imp_le|fact"><span>order_less_imp_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>disc_lt_one</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_right_mono|fact"><span>divide_right_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27467..27472"><span>r_min</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>disc_lt_one</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.add_divide_distrib|fact"><span>add_divide_distrib</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_1563..1577"><span>â<span class="hidden">â©</span><sub>b</sub>_eq_SUP_L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27536..27551"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27495..27505"><span>v0_mpi_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>A_ne</span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>An Instance of Modified Policy Iteration with a Valid Conservative Initial Value Estimate</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_def|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_def|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_def_raw|axiom"><span class="entity_def" id="offset_28479..28489">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user.cong|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user.cong|thm"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user|const"><span class="entity_def" id="offset_28491..28499">mpi_user</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_22149..22157"><span>mpi_algo</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28590..28595">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_eq|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_eq|thm"><span>mpi_user_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28491..28499"><span>mpi_user</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_24960..24971"><span>mpi_alg_rec</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27552..27560"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27612..27627"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28590..28595"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28479..28489"><span>mpi_user_def</span></a><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_25184..25197"><span>mpi_algo_def'</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>is_dec_det_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28796..28801">lemma</span></span></span><span> </span><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_opt|fact"><span class="entity_def" id="Modified_Policy_Iteration.MDP_MPI.mpi_user_opt|thm"><span>mpi_user_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28491..28499"><span>mpi_user</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28479..28489"><span>mpi_user_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_28796..28801"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_26805..26817"><span>mpi_algo_opt</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_167..173"><span>is_dec_det_def</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#offset_27612..27627"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>y>
<div class="head">
<h1>Theory Matrix_Util</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Matrix_Util</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Analysis/Analysis.html"><span>HOL-Analysis.Analysis</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrices</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proposition</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.scalar_matrix_assoc&apos;|fact"><span class="entity_def" id="Matrix_Util.scalar_matrix_assoc&apos;|thm"><span>scalar_matrix_assoc'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_algebra_1|class"><span>real_algebra_1</span></a><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'m</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.semiring_0_class.sum_distrib_left|fact"><span>sum_distrib_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.mult_ac|fact"><span>mult_ac</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_sum_right|fact"><span>scaleR_sum_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Nonnegative Matrices</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_matrix_nonneg|fact"><span class="entity_def" id="Matrix_Util.nonneg_matrix_nonneg|thm"><span>nonneg_matrix_nonneg</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_446..451">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_mult_mono|fact"><span class="entity_def" id="Matrix_Util.matrix_mult_mono|thm"><span>matrix_mult_mono</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>E</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>E</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>E</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_446..451"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_446..451"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_446..451"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono|fact"><span>mult_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_matrix_mult|fact"><span class="entity_def" id="Matrix_Util.nonneg_matrix_mult|thm"><span>nonneg_matrix_mult</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field|class"><span>field</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_ring|class"><span>ordered_ring</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_nonneg|fact"><span>sum_nonneg</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.zero_le_mat_iff|fact"><span class="entity_def" id="Matrix_Util.zero_le_mat_iff|thm"><span>zero_le_mat_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero|class"><span>zero</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order|class"><span>order</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat_def|fact"><span>mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_mat_ge_zero|fact"><span class="entity_def" id="Matrix_Util.nonneg_mat_ge_zero|thm"><span>nonneg_mat_ge_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_nonneg|fact"><span>sum_nonneg</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_mat_mono|fact"><span class="entity_def" id="Matrix_Util.nonneg_mat_mono|thm"><span>nonneg_mat_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_ge_zero|fact"><span>nonneg_mat_ge_zero</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.vec.diff|fact"><span>vec.diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1394..1399">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_mult_imp_nonneg_mat|fact"><span class="entity_def" id="Matrix_Util.nonneg_mult_imp_nonneg_mat|thm"><span>nonneg_mult_imp_nonneg_mat</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_1553..1556">neg</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.zero_index|fact"><span>zero_index</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_1553..1556"><span>neg</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_1394..1399"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_mat_iff|fact"><span class="entity_def" id="Matrix_Util.nonneg_mat_iff|thm"><span>nonneg_mat_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_ge_zero|fact"><span>nonneg_mat_ge_zero</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mult_imp_nonneg_mat|fact"><span>nonneg_mult_imp_nonneg_mat</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.mat_le_iff|fact"><span class="entity_def" id="Matrix_Util.mat_le_iff|thm"><span>mat_le_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span>â¥</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_iff|fact"><span>nonneg_mat_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix Powers</span><span>âº</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> copied from Perron-Frobenius </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Util.matpow.simps|fact"><span class="entity_def" id="Matrix_Util.matpow_def|fact"><span class="entity_def" id="Matrix_Util.matpow.simps(2)|thm"><span class="entity_def" id="Matrix_Util.matpow.simps(1)|thm"><span class="entity_def" id="Matrix_Util.matpow_def|thm"><span class="entity_def" id="Matrix_Util.matpow_def|axiom"><span>primrec</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Util.matpow|const"><span>matpow</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_1|class"><span>semiring_1</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="entity_def" id="Matrix_Util.matpow.matpow_0|fact"><span class="entity_def" id="Matrix_Util.matpow.matpow_0|thm"><span>matpow_0</span></span></span><span class="main"><span>:</span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>matpow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="entity_def" id="Matrix_Util.matpow.matpow_Suc|fact"><span class="entity_def" id="Matrix_Util.matpow.matpow_Suc|thm"><span>matpow_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>matpow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>matpow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.nonneg_matpow|fact"><span class="entity_def" id="Matrix_Util.nonneg_matpow|thm"><span>nonneg_matpow</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matrix_mult|fact"><span>nonneg_matrix_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matpow_mono|fact"><span class="entity_def" id="Matrix_Util.matpow_mono|thm"><span>matpow_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>D</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_mult_mono|fact"><span>matrix_mult_mono</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matpow|fact"><span>nonneg_matpow</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matpow_scaleR|fact"><span class="entity_def" id="Matrix_Util.matpow_scaleR|thm"><span>matpow_scaleR</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_algebra_1|class"><span>real_algebra_1</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_2875..2878">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_2875..2878"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.scalar_matrix_assoc&apos;|fact"><span>scalar_matrix_assoc'</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.scalar_matrix_assoc&apos;|fact"><span>scalar_matrix_assoc'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scalar_matrix_assoc|fact"><span>scalar_matrix_assoc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_vector_mult_code&apos;|fact"><span class="entity_def" id="Matrix_Util.matrix_vector_mult_code&apos;|thm"><span>matrix_vector_mult_code'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_vector_mult_mono|fact"><span class="entity_def" id="Matrix_Util.matrix_vector_mult_mono|thm"><span>matrix_vector_mult_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_iff|fact"><span>nonneg_mat_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Triangular Matrices</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Util.lower_triangular_mat_def|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_mat_def|thm"><span class="entity_def" id="Matrix_Util.lower_triangular_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Util.strict_lower_triangular_mat_def|fact"><span class="entity_def" id="Matrix_Util.strict_lower_triangular_mat_def|thm"><span class="entity_def" id="Matrix_Util.strict_lower_triangular_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Matrix_Util.strict_lower_triangular_mat|const"><span>strict_lower_triangular_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Util.upper_triangular_mat_def|fact"><span class="entity_def" id="Matrix_Util.upper_triangular_mat_def|thm"><span class="entity_def" id="Matrix_Util.upper_triangular_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Matrix_Util.upper_triangular_mat|const"><span>upper_triangular_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.stlI|fact"><span class="entity_def" id="Matrix_Util.stlI|thm"><span>stlI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat|const"><span>strict_lower_triangular_mat</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat_def|fact"><span>strict_lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_mat_mat|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_mat_mat|thm"><span>lower_triangular_mat_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat_def|fact"><span>mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4025..4030">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_mult|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_mult|thm"><span>lower_triangular_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_4025..4030"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.neutral|fact"><span>sum.neutral</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.mult_zero_class.mult_not_zero|fact"><span>mult_not_zero</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.neqE|fact"><span>neqE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_trans|fact"><span>less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4300..4305">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_pow|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_pow|thm"><span>lower_triangular_pow</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_4300..4305"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mult|fact"><span>lower_triangular_mult</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_mat|fact"><span>lower_triangular_mat_mat</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4493..4498">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_suminf|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_suminf|thm"><span>lower_triangular_suminf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_4493..4498"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4784..4789">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_pow_eq|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_pow_eq|thm"><span>lower_triangular_pow_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_4784..4789"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_5014..5017">Suc</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>ltX</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5014..5017"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_pow|fact"><span>lower_triangular_pow</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5152..5155">ltY</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5014..5017"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_pow|fact"><span>lower_triangular_pow</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>j</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5014..5017"><span>Suc</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5152..5155"><span>ltY</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5014..5017"><span>Suc</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5152..5155"><span>ltY</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5879..5884">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.lower_triangular_mat_mult|fact"><span class="entity_def" id="Matrix_Util.lower_triangular_mat_mult|thm"><span>lower_triangular_mat_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5879..5884"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5879..5884"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_5879..5884"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Inverses</span><span>âº</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> from AFP/Rank_Nullity_Theorem </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_inv|fact"><span class="entity_def" id="Matrix_Util.matrix_inv(2)|thm"><span class="entity_def" id="Matrix_Util.matrix_inv(1)|thm"><span>matrix_inv</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_inv_left|fact"><span class="entity_def" id="Matrix_Util.matrix_inv_left|thm"><span>matrix_inv_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_inv_right|fact"><span class="entity_def" id="Matrix_Util.matrix_inv_right|thm"><span>matrix_inv_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="free"><span>M</span></span><span>âº</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible_def|fact"><span>invertible_def</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv_def|fact"><span>matrix_inv_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> from AFP/Rank_Nullity_Theorem </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Util.matrix_inv_unique|fact"><span class="entity_def" id="Matrix_Util.matrix_inv_unique|thm"><span>matrix_inv_unique</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_1|class"><span>semiring_1</span></a><span class="main"><span>}</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_6959..6961">AB</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_6984..6986">BA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_6959..6961"><span>AB</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#offset_6984..6986"><span>BA</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible_def|fact"><span>invertible_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_right|fact"><span>matrix_inv_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_mul_assoc|fact"><span>matrix_mul_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_mul_lid|fact"><span>matrix_mul_lid</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>body>
<div class="head">
<h1>Theory Blinfun_Matrix</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Blinfun_Matrix</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><span class="quoted"><span>"</span><a href="../MDP-Rewards/Blinfun_Util.html"><span>MDP-Rewards.Blinfun_Util</span></a><span>"</span></span><span> 
    </span><a href="Matrix_Util.html"><span>Matrix_Util</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Linear Functions and Matrices</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_def|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_def|thm"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix|const"><span>matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_def|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_def|thm"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.Blinfun|const"><span>Blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.plus_vec_eq|fact"><span class="entity_def" id="Blinfun_Matrix.plus_vec_eq|thm"><span>plus_vec_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.plus_vec_def|fact"><span>Finite_Cartesian_Product.plus_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_mult|thm"><span>matrix_to_blinfun_mult</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vector_scalar_mult_def|fact"><span>vector_scalar_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scalar_mult_eq_scaleR|fact"><span>scalar_mult_eq_scaleR</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>y</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span>y</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bounded_linear_bfun_nth|fact"><span>bounded_linear_bfun_nth</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_ident|fact"><span>bounded_linear_ident</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.eq_id_iff|fact"><span>eq_id_iff</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_vec_le_norm_bfun|fact"><span>norm_vec_le_norm_bfun</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_right_distrib|fact"><span>matrix_vector_right_distrib</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.plus_vec_eq|fact"><span>plus_vec_eq</span></a><span>
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Euclidean_Space.html#Cartesian_Euclidean_Space.matrix_vector_mul_bounded_linear|fact"><span>matrix_vector_mul_bounded_linear</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.Blinfun_inverse|fact"><span>Blinfun_inverse</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_def|fact"><span>matrix_to_blinfun_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult|thm"><span>blinfun_to_matrix_mult</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.axis_def|fact"><span>axis_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.sum_right|fact"><span>blinfun.sum_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.vec_bfun|fact"><span>vec_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.more_arith_simps|fact"><span>more_arith_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.mult_zero_class.mult_zero_right|fact"><span>mult_zero_right</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun_eqI|fact"><span>bfun_eqI</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult&apos;|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult&apos;|thm"><span>blinfun_to_matrix_mult'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>bfun.Bfun_inverse</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult|fact"><span>blinfun_to_matrix_mult</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.vec_bfun|fact"><span>vec_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth_inverse|fact"><span>vec_nth_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|thm"><span>blinfun_to_matrix_mult''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;|fact"><span>blinfun_to_matrix_mult'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_lambda_unique|fact"><span>vec_lambda_unique</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_inv|thm"><span>matrix_to_blinfun_inv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult|fact"><span>blinfun_to_matrix_mult</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_add|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_add|thm"><span>blinfun_to_matrix_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_eq|fact"><span>matrix_eq</span></a><span>  </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_add_rdistrib|fact"><span>matrix_vector_mult_add_rdistrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_left|fact"><span>blinfun.add_left</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.plus_vec_eq|fact"><span>plus_vec_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_diff|thm"><span>blinfun_to_matrix_diff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_add|fact"><span>blinfun_to_matrix_add</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_semigroup_add_class.add_right_imp_eq|fact"><span>add_right_imp_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_add_cancel|fact"><span>diff_add_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_scaleR|thm"><span>blinfun_to_matrix_scaleR</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_eq|fact"><span>matrix_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vector_scalar_mult_def|fact"><span>vector_scalar_mult_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scalar_mult_eq_scaleR|fact"><span>scalar_mult_eq_scaleR</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_add|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_add|thm"><span>matrix_to_blinfun_add</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_left|fact"><span>blinfun.add_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_add_rdistrib|fact"><span>matrix_vector_mult_add_rdistrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_diff|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_diff|thm"><span>matrix_to_blinfun_diff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_add|fact"><span>matrix_to_blinfun_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_eq_eq|fact"><span>diff_eq_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_scaleR|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_scaleR|thm"><span>matrix_to_blinfun_scaleR</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_add_rdistrib|fact"><span>matrix_vector_mult_add_rdistrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_comp|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_comp|thm"><span>matrix_to_blinfun_comp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_comp|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_comp|thm"><span>blinfun_to_matrix_comp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_eq|fact"><span>matrix_eq</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_id|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_id|thm"><span>blinfun_to_matrix_id</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_eq|fact"><span>matrix_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_id|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_id|thm"><span>matrix_to_blinfun_id</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5385..5390">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_inv\&lt;^sub&gt;L|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_inv\&lt;^sub&gt;L(2)|thm"><span class="entity_def" id="Blinfun_Matrix.matrix_to_blinfun_inv\&lt;^sub&gt;L(1)|thm"><span>matrix_to_blinfun_inv<span class="hidden">â©</span><sub>L</sub></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_5385..5390"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_right|fact"><span>matrix_inv_right</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_left|fact"><span>matrix_inv_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_id|fact"><span>matrix_to_blinfun_id</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_comp|fact"><span>matrix_to_blinfun_comp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_I|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6086..6091">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_inverse(2)|thm"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_inverse(1)|thm"><span>blinfun_to_matrix_inverse</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_6086..6091"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_6387..6388">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_comp|fact"><span>blinfun_to_matrix_comp</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_6086..6091"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_6579..6580">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_comp|fact"><span>blinfun_to_matrix_comp</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#offset_6387..6388"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible_def|fact"><span>invertible_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_6387..6388"><span>1</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_6579..6580"><span>2</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_right|fact"><span>matrix_inv_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_mul_assoc|fact"><span>matrix_mul_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_mul_lid|fact"><span>matrix_mul_lid</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_inv|thm"><span>blinfun_to_matrix_inv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_eq|fact"><span>matrix_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>bfun.Bfun_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.invertible_invertible\&lt;^sub&gt;L_I|fact"><span class="entity_def" id="Blinfun_Matrix.invertible_invertible\&lt;^sub&gt;L_I(2)|thm"><span class="entity_def" id="Blinfun_Matrix.invertible_invertible\&lt;^sub&gt;L_I(1)|thm"><span>invertible_invertible<span class="hidden">â©</span><sub>L</sub>_I</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv\&lt;^sub&gt;L|fact"><span>matrix_to_blinfun_inv<span class="hidden">â©</span><sub>L</sub></span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span>matrix_to_blinfun_inv</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span class="entity_def" id="Blinfun_Matrix.bounded_linear_blinfun_to_matrix|thm"><span>bounded_linear_blinfun_to_matrix</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a></a><span> </span><span class="keyword1"><span class="keyword1"><span>CARD</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="tfree"><span class="tfree"><span>'a</span></span></span><span class="main"><span class="main"><span>::</span></span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a></a><span> </span><span class="keyword1"><span class="keyword1"><span>CARD</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="tfree"><span class="tfree"><span>'b</span></span></span><span class="main"><span class="main"><span>::</span></span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_add|fact"><span>blinfun_to_matrix_add</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7926..7927">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_7997..7999">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_7926..7927"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_eq_maximum|fact"><span>cSup_eq_maximum</span></a><span> </span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>ia</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>ia</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.norm_vec_def|fact"><span>norm_vec_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.axis_def|fact"><span>axis_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_le_sum_abs|fact"><span>L2_set_le_sum_abs</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_le_sum_abs|fact"><span>L2_set_le_sum_abs</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>ia</span></span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_7997..7999"><span>**</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8868..8873">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.summable_blinfun_to_matrix|fact"><span class="entity_def" id="Blinfun_Matrix.summable_blinfun_to_matrix|thm"><span>summable_blinfun_to_matrix</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_8868..8873"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.summable|fact"><span>bounded_linear.summable</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_mono|fact"><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_mono|thm"><span>nonneg_blinfun_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_mono|fact"><span>nonneg_mat_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_nonneg|thm"><span>nonneg_blinfun_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_mono|fact"><span>nonneg_blinfun_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.zero_right|fact"><span>blinfun.zero_right</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.nonneg_id_blinfun|fact"><span class="entity_def" id="Blinfun_Matrix.nonneg_id_blinfun|thm"><span>nonneg_id_blinfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9634..9639">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.norm_nonneg_blinfun_one|fact"><span class="entity_def" id="Blinfun_Matrix.norm_nonneg_blinfun_one|thm"><span>norm_nonneg_blinfun_one</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.norm_blinfun_mono_eq_one|fact"><span>norm_blinfun_mono_eq_one</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_9634..9639"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9816..9821">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.matrix_le_norm_mono|fact"><span class="entity_def" id="Blinfun_Matrix.matrix_le_norm_mono|thm"><span>matrix_le_norm_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_9816..9821"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_nonzero_semiring_class.zero_le_one|fact"><span>zero_le_one</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>D</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_9816..9821"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_mono|fact"><span>nonneg_mat_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_10296..10297">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult|fact"><span>blinfun_to_matrix_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_9816..9821"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_9816..9821"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfunD|fact"><span>less_eq_bfunD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#offset_10296..10297"><span>*</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.norm_nonneg_blinfun_one|fact"><span>norm_nonneg_blinfun_one</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_to_matrix_matpow|thm"><span>blinfun_to_matrix_matpow</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_comp|fact"><span>blinfun_to_matrix_comp</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow_assoc|fact"><span>blinfunpow_assoc</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow.simps|fact"><span>blinfunpow.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_iff|fact"><span class="entity_def" id="Blinfun_Matrix.nonneg_blinfun_iff|thm"><span>nonneg_blinfun_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span class="main"><span>â¥</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_mat_iff|fact"><span>nonneg_mat_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>bfun.Bfun_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Matrix.blinfun_apply_mono|fact"><span class="entity_def" id="Blinfun_Matrix.blinfun_apply_mono|thm"><span>blinfun_apply_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>^</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>

<body>
<div class="head">
<h1>Theory Splitting_Methods</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Splitting_Methods</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="Blinfun_Matrix.html"><span>Blinfun_Matrix</span></a><span>
    </span><a href="Value_Iteration.html"><span>Value_Iteration</span></a><span>
    </span><a href="Policy_Iteration.html"><span>Policy_Iteration</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Value Iteration using Splitting Methods</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Regular Splittings for Matrices and Bounded Linear Functions</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.is_splitting_mat_def|fact"><span class="entity_def" id="Splitting_Methods.is_splitting_mat_def|thm"><span class="entity_def" id="Splitting_Methods.is_splitting_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.is_splitting_mat|const"><span>is_splitting_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span>
  </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.is_splitting_blin_def|fact"><span class="entity_def" id="Splitting_Methods.is_splitting_blin_def|thm"><span class="entity_def" id="Splitting_Methods.is_splitting_blin_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_mat|const"><span>is_splitting_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.is_splitting_blin_def&apos;|fact"><span class="entity_def" id="Splitting_Methods.is_splitting_blin_def&apos;|thm"><span>is_splitting_blin_def'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span>
  </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span>matrix_to_blinfun_inv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def|fact"><span>is_splitting_blin_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_mat_def|fact"><span>is_splitting_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Q</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span>matrix_to_blinfun_inv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.invertible_invertible\&lt;^sub&gt;L_I|fact"><span>invertible_invertible<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_973..978">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.is_splitting_blinD|fact"><span class="entity_def" id="Splitting_Methods.is_splitting_blinD(4)|thm"><span class="entity_def" id="Splitting_Methods.is_splitting_blinD(3)|thm"><span class="entity_def" id="Splitting_Methods.is_splitting_blinD(2)|thm"><span class="entity_def" id="Splitting_Methods.is_splitting_blinD(1)|thm"><span>is_splitting_blinD</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_973..978"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Splitting Methods for MDPs</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_QR.axioms|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.intro|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms.intro|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.axioms(2)|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.axioms(1)|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.intro|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms.intro|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms_def|axiom"><span class="entity_def" id="offset_1212..1218">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR|locale"><span class="entity_def" id="Splitting_Methods.MDP_QR|const"><span class="entity_def" id="Splitting_Methods.MDP_QR_axioms|const"><span>MDP_QR</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward.html#MDP_reward.MDP_finite_type|locale"><span>MDP_finite_type</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>  </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.is_splitting|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.is_splitting|thm"><span class="entity_def" id="offset_1478..1490">is_splitting</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_contraction|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_contraction|thm"><span class="entity_def" id="offset_1588..1602">QR_contraction</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.arg_max_ex_split|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.arg_max_ex_split|thm"><span class="entity_def" id="offset_1657..1673">arg_max_ex_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.inv_Q_mono|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.inv_Q_mono|thm"><span>inv_Q_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_mono|fact"><span>nonneg_blinfun_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.splitting_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.splitting_eq|thm"><span>splitting_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.Q_nonneg|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.Q_nonneg|thm"><span class="entity_def" id="offset_2034..2042">Q_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.Q_invertible|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.Q_invertible|thm"><span class="entity_def" id="offset_2143..2155">Q_invertible</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.R_nonneg|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.R_nonneg|thm"><span class="entity_def" id="offset_2226..2234">R_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blinD|fact"><span>is_splitting_blinD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a></a></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_mono|fact"><span>nonneg_blinfun_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.R_mono|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.R_mono|thm"><span>R_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2226..2234"><span>R_nonneg</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_nonneg|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_nonneg|thm"><span class="entity_def" id="offset_2514..2523">QR_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2034..2042"><span>Q_nonneg</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2226..2234"><span>R_nonneg</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_mono|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_mono|thm"><span>QR_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2514..2523"><span>QR_nonneg</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.norm_QR_less_one|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.norm_QR_less_one|thm"><span class="entity_def" id="offset_2774..2790">norm_QR_less_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_lessD|fact"><span>cSUP_lessD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.splitting|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.splitting|thm"><span class="entity_def" id="offset_2933..2942">splitting</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1478..1490"><span>is_splitting</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Discount Factor </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>QR_disc</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_disc|const"><span class="entity_def" id="offset_3099..3106">QR_disc</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_le_QR_disc|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.QR_le_QR_disc|thm"><span class="entity_def" id="offset_3156..3169">QR_le_QR_disc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.a_nonneg|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.a_nonneg|thm"><span class="entity_def" id="offset_3259..3267">a_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_ge_zero|fact"><span>norm_ge_zero</span></a><span> </span><span>ex_dec_det</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bellman-Operator</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_QR.L_split|const"><span class="entity_def" id="offset_3412..3419">L_split</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split_def_raw|axiom"><span class="entity_def" id="offset_3473..3483">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split|const"><span class="entity_def" id="offset_3485..3492">â_split</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3527..3532">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split_bfun_aux|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;_split_bfun_aux|thm"><span>â_split_bfun_aux</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_right|fact"><span>blinfun.add_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_triangle_ineq|fact"><span>norm_triangle_ineq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>    
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2774..2790"><span>norm_QR_less_one</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3527..3532"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_idom_class.mult_left_le_one_le|fact"><span>mult_left_le_one_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><span>norm_r_dec_le</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3527..3532"><span>assms</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>r<span class="hidden">â©</span><sub>M</sub>_nonneg</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.rep_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.abs_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.transfer|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.rsp|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.rep_eq|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.abs_eq|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.transfer|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.rsp|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_def|axiom"><span class="entity_def" id="offset_4488..4503">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split|const"><span class="entity_def" id="offset_4504..4513">â<span class="hidden">â©</span><sub>b</sub>_split</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_3485..3492"><span>â_split</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_def&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_def&apos;|thm"><span class="entity_def" id="offset_4582..4596">â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4488..4503"><span>â<span class="hidden">â©</span><sub>b</sub>_split.rep_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3473..3483"><span>â_split_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_contraction|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_contraction|thm"><span class="entity_def" id="offset_4698..4719">â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4792..4795">aux</span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4935..4936">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5083..5084">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4935..4936"><span>d</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4582..4596"><span>â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4582..4596"><span>â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4935..4936"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_5083..5084"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.le_norm_bfun|fact"><span>le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4935..4936"><span>d</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4792..4795"><span>aux</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_minus_commute|fact"><span>norm_minus_commute</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.dist_bfun.rep_eq|fact"><span>dist_bfun.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_lim|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_lim(2)|thm"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_lim(1)|thm"><span class="entity_def" id="offset_6192..6199">â<span class="hidden">â©</span><sub>b</sub>_lim</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.banach&apos;|fact"><span>banach'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a></span></a></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3259..3267"><span>a_nonneg</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4698..4719"><span>â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_tendsto_opt|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_tendsto_opt|thm"><span class="entity_def" id="offset_6406..6427">â<span class="hidden">â©</span><sub>b</sub>_split_tendsto_opt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>L</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6491..6496">l_fix</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6192..6199"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6551..6555">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_6591..6592">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?QR</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6491..6496"><span>l_fix</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4582..4596"><span>â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6491..6496"><span>l_fix</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_6905..6908">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6551..6555"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.le_diff_eq|fact"><span>le_diff_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7054..7060">inv_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2774..2790"><span>norm_QR_less_one</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7199..7210">summable_QR</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3259..3267"><span>a_nonneg</span></a><span>
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_comparison_test&apos;|fact"><span>summable_comparison_test'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_mono|fact"><span>power_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.norm_blinfunpow_le|fact"><span>norm_blinfunpow_le</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_comparison_test&apos;|fact"><span>summable_comparison_test'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="var"><span class="var"><span class="var"><span>?QR</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_7199..7210"><span>summable_QR</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_norm_cancel|fact"><span>summable_norm_cancel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_mult2|fact"><span>summable_mult2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfunpow_nonneg|fact"><span>blinfunpow_nonneg</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2514..2523"><span>QR_nonneg</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ|fact"><span>summable_LIMSEQ</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.LIMSEQ_le|fact"><span>LIMSEQ_le</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="var"><span>?QR</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.bounded_linear_apply_bfun|fact"><span>bounded_linear_apply_bfun</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_7199..7210"><span>summable_QR</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_comparison_test&apos;|fact"><span>summable_comparison_test'</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a></a></a><span> </span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>s</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_7054..7060"><span>inv_eq</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>L</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6905..6908"><span>aux</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2774..2790"><span>norm_QR_less_one</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6551..6555"><span>that</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?QR</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2774..2790"><span>norm_QR_less_one</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_compose|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2143..2155"><span>Q_invertible</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2143..2155"><span>Q_invertible</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6591..6592"><span>d</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfun_compose_diff_right|fact"><span>blinfun_compose_diff_right</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blinfun_compose_assoc|fact"><span>blinfun_compose_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½_stationary</span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2933..2942"><span>splitting</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6551..6555"><span>that</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_9275..9281">opt_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>thm_6_2_10</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9351..9352">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1657..1673"><span>arg_max_ex_split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6491..6496"><span>l_fix</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4582..4596"><span>â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_9351..9352"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2143..2155"><span>Q_invertible</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv_app2&apos;|fact"><span>inv_app2'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2933..2942"><span>splitting</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>norm_ð«<span class="hidden">â©</span><sub>1</sub>_l_less</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv_app1&apos;|fact"><span>inv_app1'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><span>Î½_stationary</span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>L</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_9275..9281"><span>opt_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1212..1218"><span>is_markovian_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.antisym|fact"><span>order.antisym</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6192..6199"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6491..6496"><span>l_fix</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.the1_equality|fact"><span>the1_equality</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6192..6199"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_fix|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split_fix|thm"><span>â<span class="hidden">â©</span><sub>b</sub>_split_fix</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6192..6199"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_6406..6427"><span>â<span class="hidden">â©</span><sub>b</sub>_split_tendsto_opt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.the_equality|fact"><span>the_equality</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10549..10554">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|thm"><span class="entity_def" id="offset_10555..10577">dist_â<span class="hidden">â©</span><sub>b</sub>_split_opt_eps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4698..4719"><span>â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_left_mono|fact"><span>add_left_mono</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_le_divide_eq|fact"><span>pos_le_divide_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4698..4719"><span>â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_10549..10554"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.mult_le_cancel_left_pos|fact"><span>mult_le_cancel_left_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3259..3267"><span>a_nonneg</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3259..3267"><span>a_nonneg</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_10549..10554"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_less_eq|fact"><span>pos_divide_less_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4698..4719"><span>â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11675..11680">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.L_split_fix|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.L_split_fix|thm"><span class="entity_def" id="offset_11681..11692">L_split_fix</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>L_Î½_fix</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1212..1218"><span>L_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2933..2942"><span>splitting</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_11675..11680"><span>assms</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_eq_eq|fact"><span>diff_eq_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_11675..11680"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_eq_eq|fact"><span>diff_eq_eq</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_cancel_iff|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_cancel_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_2143..2155"><span>Q_invertible</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12151..12156">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.L_split_contraction|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.L_split_contraction|thm"><span class="entity_def" id="offset_12157..12176">L_split_contraction</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12277..12280">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>lea</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.le_norm_bfun|fact"><span>le_norm_bfun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_12151..12156"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3156..3169"><span>QR_le_QR_disc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>u</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_12277..12280"><span>aux</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_12277..12280"><span>aux</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="skolem"><span>u</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13172..13177">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_QR.find_policy_QR_error_bound|fact"><span class="entity_def" id="Splitting_Methods.MDP_QR.find_policy_QR_error_bound|thm"><span class="entity_def" id="offset_13178..13204">find_policy_QR_error_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13293..13295">am</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13467..13475">L_eq_â<span class="hidden">â©</span><sub>b</sub></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4582..4596"><span>â<span class="hidden">â©</span><sub>b</sub>_split_def'</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13293..13295"><span>am</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13293..13295"><span>am</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_11681..11692"><span>L_split_fix</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>L_split</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13467..13475"><span>L_eq_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_4698..4719"><span>â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_12157..12176"><span>L_split_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13293..13295"><span>am</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13172..13177"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_le_eq|fact"><span>pos_divide_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_1588..1602"><span>QR_contraction</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_right_le_imp_le|fact"><span>mult_right_le_imp_le</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_10555..10577"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_split_opt_eps</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13172..13177"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="var"><span>?p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15199..15206">context</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_ord|locale"><span>MDP_ord</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15221..15226">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_one_sub_Q&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_one_sub_Q&apos;|thm"><span class="entity_def" id="offset_15227..15241">inv_one_sub_Q'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>onorm_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_I|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_I</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv_one_sub_Q|fact"><span>inv_one_sub_Q</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15221..15226"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>An important theorem: allows to compare the rate of convergence for different splittings</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15510..15515">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_splitting_le|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_splitting_le|thm"><span class="entity_def" id="offset_15516..15533">norm_splitting_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="free"><span>R1</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R1</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R2</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>R2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q1</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>Q1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q2</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="free"><span>Q2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15995..15999">have</span></span></span><span> 
    </span><span class="entity_def" id="offset_16005..16010">inv_Q</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span>splitting_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_16143..16151">nonneg_Q</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="skolem"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="skolem"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="skolem"><span>R</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="skolem"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_16384..16396">splitting_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15995..15999"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.eq_diff_eq|fact"><span>eq_diff_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16515..16523">R_nonneg</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15995..15999"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span>nonneg_Q</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15995..15999"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16384..16396"><span>splitting_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16515..16523"><span>R_nonneg</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16384..16396"><span>splitting_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_le_norm_mono|fact"><span>matrix_le_norm_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>norm_ð«<span class="hidden">â©</span><sub>1</sub>_l_less</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15227..15241"><span>inv_one_sub_Q'</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17190..17192">i1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_17274..17276">i2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16005..16010"><span>inv_Q</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>R2</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Q2</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16005..16010"><span>inv_Q</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>R1</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Q1</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17428..17436">Q1_le_Q2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.eq_diff_eq|fact"><span>eq_diff_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_add|fact"><span>blinfun_to_matrix_add</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17190..17192"><span>i1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17190..17192"><span>i1</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>le_n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_16143..16151"><span>nonneg_Q</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow_mono|fact"><span>matpow_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17428..17436"><span>Q1_le_Q2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_18255..18264">le_n_elem</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.summable|fact"><span>bounded_linear.summable</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ|fact"><span>summable_LIMSEQ</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17190..17192"><span>i1</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_18726..18729">le1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>k</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.tendsto_vec_nth|fact"><span>tendsto_vec_nth</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.summable|fact"><span>bounded_linear.summable</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ|fact"><span>summable_LIMSEQ</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17274..17276"><span>i2</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_19188..19191">le2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>k</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.tendsto_vec_nth|fact"><span>tendsto_vec_nth</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>k</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.lim_mono|fact"><span>Topological_Spaces.lim_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_18255..18264"><span>le_n_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_18726..18729"><span>le1</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_19188..19191"><span>le2</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17274..17276"><span>i2</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_17274..17276"><span>i2</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19835..19843">Q1_le_Q2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19917..19918">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_comp|fact"><span>blinfun_to_matrix_comp</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matrix_mult|fact"><span>nonneg_matrix_mult</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>disc_lt_one</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_19835..19843"><span>Q1_le_Q2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_ge_0_iff_ge|fact"><span>diff_ge_0_iff_ge</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>Q1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>Q2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_left|fact"><span>blinfun.add_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15510..15515"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_19917..19918"><span>*</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfunI|fact"><span>less_eq_bfunI</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun_nonneg|fact"><span>nonneg_blinfun_nonneg</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_ge_self|fact"><span>abs_ge_self</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Q1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>R1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.norm_nonneg_blinfun_one|fact"><span>norm_nonneg_blinfun_one</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_19917..19918"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Gauss Seidel Splitting</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definition of Upper and Lower Triangular Matrices</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec_def_raw|axiom"><span class="entity_def" id="offset_21421..21431">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec|const"><span class="entity_def" id="offset_21433..21438">P_dec</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper_def_raw|axiom"><span class="entity_def" id="offset_21483..21493">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_upper|const"><span class="entity_def" id="offset_21495..21502">P_upper</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower_def_raw|axiom"><span class="entity_def" id="offset_21554..21564">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_lower|const"><span class="entity_def" id="offset_21566..21573">P_lower</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U_def_raw|axiom"><span class="entity_def" id="offset_21626..21636">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U|const"><span class="entity_def" id="offset_21638..21641">ð«<span class="hidden">â©</span><sub>U</sub></span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L_def_raw|axiom"><span class="entity_def" id="offset_21677..21687">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L|const"><span class="entity_def" id="offset_21689..21692">ð«<span class="hidden">â©</span><sub>L</sub></span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec_elem|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.P_dec_elem|thm"><span class="entity_def" id="offset_21735..21745">P_dec_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>K_st_def</span></a><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.push_exp.rep_eq|fact"><span>push_exp.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_lambda_beta|fact"><span>vec_lambda_beta</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_expectation_bind|fact"><span>pmf_expectation_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>{</span></span></span></span><span class="free"><span class="free"><span class="free"><span>d</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>}</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>mk_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.axis_def|fact"><span>axis_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf|fact"><span>integral_measure_pmf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>j</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;U|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;U|thm"><span class="entity_def" id="offset_22058..22068">nonneg_ð«<span class="hidden">â©</span><sub>U</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21626..21636"><span>ð«<span class="hidden">â©</span><sub>U</sub>_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_dec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_dec|thm"><span class="entity_def" id="offset_22219..22231">nonneg_P_dec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_upper|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_upper|thm"><span class="entity_def" id="offset_22323..22337">nonneg_P_upper</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22219..22231"><span>nonneg_P_dec</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_lower|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_P_lower|thm"><span class="entity_def" id="offset_22454..22468">nonneg_P_lower</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22219..22231"><span>nonneg_P_dec</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;L|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;L|thm"><span class="entity_def" id="offset_22585..22595">nonneg_ð«<span class="hidden">â©</span><sub>L</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.nonneg_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="offset_22746..22756">nonneg_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.axis_def|fact"><span>axis_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub>_pos</span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.less_eq_bfunD|fact"><span>less_eq_bfunD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_le|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_le|thm"><span class="entity_def" id="offset_22951..22962">norm_ð«<span class="hidden">â©</span><sub>L</sub>_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22746..22756"><span>nonneg_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_le_norm_mono|fact"><span>matrix_le_norm_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_le_one|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_le_one|thm"><span class="entity_def" id="offset_23156..23171">norm_ð«<span class="hidden">â©</span><sub>L</sub>_le_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22951..22962"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_le</span></a><span> </span><span>norm_ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_less_one|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_\&lt;P&gt;\&lt;^sub&gt;L_less_one|thm"><span class="entity_def" id="offset_23236..23253">norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_nonzero_semiring_class.mult_left_le|fact"><span>mult_left_le</span></a><span> </span><span>disc_lt_one</span><span class="main"><span>]</span></span><span> </span><span>zero_le_disc</span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23156..23171"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_le_one</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L_le_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;L_le_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span>ð«<span class="hidden">â©</span><sub>L</sub>_le_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22219..22231"><span>nonneg_P_dec</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_apply_mono|fact"><span>blinfun_apply_mono</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22585..22595"><span>nonneg_ð«<span class="hidden">â©</span><sub>L</sub></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U_le_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.\&lt;P&gt;\&lt;^sub&gt;U_le_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span>ð«<span class="hidden">â©</span><sub>U</sub>_le_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22219..22231"><span>nonneg_P_dec</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21626..21636"><span>ð«<span class="hidden">â©</span><sub>U</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_apply_mono|fact"><span>blinfun_apply_mono</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22058..22068"><span>nonneg_ð«<span class="hidden">â©</span><sub>U</sub></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.row_P_upper_indep|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.row_P_upper_indep|thm"><span class="entity_def" id="offset_24002..24019">row_P_upper_indep</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.row_P_lower_indep|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.row_P_lower_indep|thm"><span class="entity_def" id="offset_24135..24152">row_P_lower_indep</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.triangular_mat_P_upper|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.triangular_mat_P_upper|thm"><span class="entity_def" id="offset_24268..24290">triangular_mat_P_upper</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat|const"><span>upper_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat_def|fact"><span>upper_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.slt_P_lower|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.slt_P_lower|thm"><span class="entity_def" id="offset_24393..24404">slt_P_lower</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat|const"><span>strict_lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat_def|fact"><span>strict_lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.lt_P_lower|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.lt_P_lower|thm"><span class="entity_def" id="offset_24521..24531">lt_P_lower</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Gauss Seidel is a Regular Splitting</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS_def_raw|axiom"><span class="entity_def" id="offset_24681..24691">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_GS|const"><span class="entity_def" id="offset_24693..24697">Q_GS</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS_def_raw|axiom"><span class="entity_def" id="offset_24728..24738">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_GS|const"><span class="entity_def" id="offset_24740..24744">R_GS</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.splitting_gauss|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.splitting_gauss|thm"><span class="entity_def" id="offset_24769..24784">splitting_gauss</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin|const"><span>is_splitting_blin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24728..24738"><span>R_GS_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21626..21636"><span>ð«<span class="hidden">â©</span><sub>U</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22323..22337"><span>nonneg_P_upper</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_0_class.mult_nonneg_nonneg|fact"><span>mult_nonneg_nonneg</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21626..21636"><span>ð«<span class="hidden">â©</span><sub>U</sub>_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_add|fact"><span>matrix_to_blinfun_add</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.arg_cong|fact"><span>arg_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span>matrix_to_blinfun_inv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21638..21641"><span>ð«<span class="hidden">â©</span><sub>U</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24728..24738"><span>R_GS_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector_class.scaleR_add_right|fact"><span>scaleR_add_right</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector_class.scaleR_add_right|fact"><span>scaleR_add_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25818..25822">n_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_nonzero_semiring_class.mult_left_le|fact"><span>mult_left_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23156..23171"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_le_one</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>zero_le_disc</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>disc_lt_one</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_25818..25822"><span>n_le</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_26164..26165">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.bounded_linear_vec_nth|fact"><span>bounded_linear_vec_nth</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matpow|fact"><span>nonneg_matpow</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22454..22468"><span>nonneg_P_lower</span></a><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_nonneg_nonneg|fact"><span>scaleR_nonneg_nonneg</span></a><span> </span><span>zero_le_disc</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.zero_le_power|fact"><span>zero_le_power</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_nonneg|fact"><span>suminf_nonneg</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span>
          </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> 
          </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matrix_nonneg|fact"><span>nonneg_matrix_nonneg</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span>
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span>
          </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.summable|fact"><span>bounded_linear.summable</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.bounded_linear_vec_nth|fact"><span>bounded_linear_vec_nth</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matpow|fact"><span>nonneg_matpow</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22454..22468"><span>nonneg_P_lower</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matrix_nonneg|fact"><span>nonneg_matrix_nonneg</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow_scaleR|fact"><span>matpow_scaleR</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_blinfun|const"><span>nonneg_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_26164..26165"><span>*</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.r_det\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_27661..27668">r_det<span class="hidden">â©</span><sub>b</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.r_vec|const"><span class="entity_def" id="offset_27712..27717">r_vec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_mat|const"><span class="entity_def" id="offset_27768..27773">Q_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_mat|const"><span class="entity_def" id="offset_27820..27825">R_mat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_mat_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_mat_def|thm"><span class="entity_def" id="offset_27865..27874">Q_mat_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.R_mat_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.R_mat_def|thm"><span class="entity_def" id="offset_28034..28043">R_mat_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24728..24738"><span>R_GS_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21626..21636"><span>ð«<span class="hidden">â©</span><sub>U</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.triangular_mat_R|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.triangular_mat_R|thm"><span class="entity_def" id="offset_28151..28167">triangular_mat_R</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat|const"><span>upper_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24268..24290"><span>triangular_mat_P_upper</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat_def|fact"><span>upper_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_def_raw|axiom"><span class="entity_def" id="offset_28291..28301">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv|const"><span class="entity_def" id="offset_28303..28309">GS_inv</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a></span><span class="antiquote"><span>}</span></span></span><span> can be expressed as an infinite sum of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span class="antiquote"><span>}</span></span></span><span>. 
</span><span>  It is therefore lower triangular.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_Q_mat_suminf|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_Q_mat_suminf|thm"><span class="entity_def" id="offset_28488..28504">inv_Q_mat_suminf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.lt_Q_inv|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.lt_Q_inv|thm"><span class="entity_def" id="offset_29279..29287">lt_Q_inv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat|const"><span>lower_triangular_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28488..28504"><span>inv_Q_mat_suminf</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.summable_blinfun_to_matrix|fact"><span>summable_blinfun_to_matrix</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_suminf|fact"><span>lower_triangular_suminf</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_pow|fact"><span>lower_triangular_pow</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Each row of the matrix </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> only depends on </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="antiquote"><span>}</span></span></span><span>'s actions in lower states.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29756..29761">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_Q_mat_indep|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.inv_Q_mat_indep|thm"><span class="entity_def" id="offset_29762..29777">inv_Q_mat_indep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow_scaleR|fact"><span>matpow_scaleR</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scaleR_vec_def|fact"><span>scaleR_vec_def</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29756..29761"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_pow_eq|fact"><span>lower_triangular_pow_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a></a></a><span> </span><span class="free"><span class="free"><span class="free"><span>d'</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24521..24531"><span>lt_P_lower</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24135..24152"><span>row_P_lower_indep</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>d'</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow|const"><span>matpow</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matpow_scaleR|fact"><span>matpow_scaleR</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scaleR_vec_def|fact"><span>scaleR_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21677..21687"><span>ð«<span class="hidden">â©</span><sub>L</sub>_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inv|fact"><span>blinfun_to_matrix_inv</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_matpow|fact"><span>blinfun_to_matrix_matpow</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21689..21692"><span>ð«<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.summable_inv_Q|fact"><span>summable_inv_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d'</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_compose|fact"><span>bounded_linear_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.bounded_linear_blinfun_to_matrix|fact"><span>bounded_linear_blinfun_to_matrix</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24681..24691"><span>Q_GS_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_23236..23253"><span>norm_ð«<span class="hidden">â©</span><sub>L</sub>_less_one</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>As a result, also </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a></span><span class="antiquote"><span>}</span></span></span><span> is independent of lower actions.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31898..31903">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_indep_high_states|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_indep_high_states|thm"><span class="entity_def" id="offset_31904..31924">GS_indep_high_states</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32018..32022">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31898..31903"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_32018..32022"><span>that</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24002..24019"><span>row_P_upper_indep</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32131..32136">hence</span></span></span><span> </span><span class="entity_def" id="offset_32137..32148">R_eq_upto_s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_32131..32136"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_32264..32269">Qr_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>    
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29279..29287"><span>lt_Q_inv</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29762..29777"><span>inv_Q_mat_indep</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31898..31903"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29279..29287"><span>lt_Q_inv</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31898..31903"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_33103..33108">QR_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>j</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
          </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29279..29287"><span>lt_Q_inv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>Finite_Cartesian_Product.row_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31898..31903"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29762..29777"><span>inv_Q_mat_indep</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_lambda_eta|fact"><span>vec_lambda_eta</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28151..28167"><span>triangular_mat_R</span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat_def|fact"><span>upper_triangular_mat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_32137..32148"><span>R_eq_upto_s</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_def|fact"><span>lower_triangular_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29279..29287"><span>lt_Q_inv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.mult_zero_class.mult_not_zero|fact"><span>mult_not_zero</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28151..28167"><span>triangular_mat_R</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.upper_triangular_mat_def|fact"><span>upper_triangular_mat_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult_def|fact"><span>matrix_matrix_mult_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_33103..33108"><span>QR_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_32264..32269"><span>Qr_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.vec.add|fact"><span>vec.add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_vector_mult_code&apos;|fact"><span>matrix_vector_mult_code'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This recursive definition mimics the computation of the GS iteration.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_rec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_rec|thm"><span class="entity_def" id="offset_34648..34658">GS_inv_rec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv|fact"><span>matrix_inv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27865..27874"><span>Q_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_35085..35090">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_inv_extend|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_inv_extend|thm"><span class="entity_def" id="offset_35091..35110">is_am_GS_inv_extend</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35371..35375">am_k</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderI|fact"><span>is_arg_max_linorderI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_34648..34658"><span>GS_inv_rec</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span>  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span>  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35085..35090"><span>assms</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_34648..34658"><span>GS_inv_rec</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35085..35090"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35085..35090"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_37912..37916">True</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35371..35375"><span>am_k</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35085..35090"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_37912..37916"><span>True</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderI|fact"><span>is_arg_max_linorderI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35085..35090"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35371..35375"><span>am_k</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_le|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_le|thm"><span class="entity_def" id="offset_38182..38198">is_arg_max_GS_le</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>s</span></span></span><span class="main"><span>â¤</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_38309..38313">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_38367..38371">True</span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_38376..38382">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_in|fact"><span>Max_in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38367..38371"><span>True</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38376..38382"><span>y_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d_opt</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_38505..38510">d_opt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d_opt</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38309..38313"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

    </span><span class="keyword3"><span class="command"><span>define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d_act</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_38641..38646">d_act</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>d_opt</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_38689..38693">le_y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38376..38382"><span>y_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_38753..38754">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_right|fact"><span>matrix_inv_right</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27865..27874"><span>Q_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38753..38754"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_39571..39572">3</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_opt</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_opt</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><span>d_opt</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38689..38693"><span>le_y</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_39571..39572"><span>3</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span class="skolem"><span class="skolem"><span>d_opt</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="skolem"><span class="skolem"><span class="skolem"><span>x</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>:=</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>n</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>d_opt</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_opt</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_opt</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38641..38646"><span>d_act</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><span>d_opt</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38641..38646"><span>d_act</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>A_ne</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38753..38754"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_40765..40766">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a_opt</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_40863..40868">a_opt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_40765..40766"><span>*</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_41088..41096">am_a_opt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_40863..40868"><span>a_opt</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><span>d_opt</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38641..38646"><span>d_act</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.SUP_is_arg_max|fact"><span>SUP_is_arg_max</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41293..41298">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>d_opt</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s'</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38641..38646"><span>d_act</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_41293..41298"><span>that</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><span>d_opt</span></a></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>OF</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38689..38693"><a class="entity_ref" href="Splitting_Methods.html#offset_38689..38693"><span>le_y</span></a></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>OF</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_41293..41298"><a class="entity_ref" href="Splitting_Methods.html#offset_41293..41298"><span>that</span></a></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_41088..41096"><span>am_a_opt</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><a class="entity_ref" href="Splitting_Methods.html#offset_38505..38510"><span>d_opt</span></a></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>OF</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38689..38693"><a class="entity_ref" href="Splitting_Methods.html#offset_38689..38693"><span>le_y</span></a></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>OF</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_41293..41298"><a class="entity_ref" href="Splitting_Methods.html#offset_41293..41298"><span>that</span></a></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d_act</span></span><span> </span><span class="skolem"><span>a_opt</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>d_opt</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_41088..41096"><span>am_a_opt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.antisym_conv1|fact"><span>antisym_conv1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>finite_D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_is_arg_max_GS|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_is_arg_max_GS|thm"><span>ex_is_arg_max_GS</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_38182..38198"><span>is_arg_max_GS_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.pelims|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.termination|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.pinduct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.psimps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.inducts|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.intros|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_sumC.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.inducts|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.intros|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.pelims|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.termination|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.pinduct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.psimps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.inducts|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.simps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.intros|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_sumC.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.inducts|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.simps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.intros|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_sumC_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_dom|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_rel|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_sumC|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_graph|const"><span>function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun|const"><span class="entity_def" id="offset_42077..42087">GS_rec_fun</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>GS_rec_fun</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>GS_rec_fun</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.elims|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.elims|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun.simps|thm"><span class="entity_def" id="offset_42256..42267">termination</span></span></span></span></span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.relation|method"><span class="operator"><span>relation</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfI_min|fact"><span>wfI_min</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_42377..42378">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>u</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span class="skolem"><span>Q</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect_empty_eq|fact"><span>Collect_empty_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.equals0D|fact"><span>equals0D</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Setcompr_eq_image|fact"><span>Setcompr_eq_image</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42377..42378"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>x</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42256..42267"><span>GS_rec_fun.simps</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem_def_raw|axiom"><span class="entity_def" id="offset_42843..42853">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_elem|const"><span class="entity_def" id="offset_42855..42866">GS_rec_elem</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_elem|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_elem|thm"><span>GS_rec_fun_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42855..42866"><span>GS_rec_elem</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42843..42853"><span>GS_rec_elem_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42256..42267"><span>GS_rec_fun.simps</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_def_raw|axiom"><span class="entity_def" id="offset_43134..43144">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec|const"><span class="entity_def" id="offset_43146..43152">GS_rec</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_def&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_def&apos;|thm"><span class="entity_def" id="offset_43197..43208">GS_rec_def'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43134..43144"><span>GS_rec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42256..42267"><span>GS_rec_fun.simps</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq|thm"><span class="entity_def" id="offset_43431..43440">GS_rec_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43197..43208"><span>GS_rec_def'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.If_cases|fact"><span>sum.If_cases</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan_def|fact"><span>lessThan_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_def_raw|axiom"><span class="entity_def" id="offset_43736..43746">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step|const"><span class="entity_def" id="offset_43748..43759">GS_rec_step</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq&apos;|thm"><span class="entity_def" id="offset_43831..43841">GS_rec_eq'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43431..43440"><span>GS_rec_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_vec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_vec|thm"><span class="entity_def" id="offset_43950..43963">GS_rec_eq_vec</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_44039..44040">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="main"><span>]</span></span><span> </span><span>ex_dec_det</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43831..43841"><span>GS_rec_eq'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="skolem"><span>d</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44039..44040"><span>d</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44039..44040"><a class="entity_ref" href="Splitting_Methods.html#offset_44039..44040"><span>d</span></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44039..44040"><span>d</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_triv|fact"><span>fun_upd_triv</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>A_ne</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44039..44040"><span>d</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_44763..44778">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_44779..44791">GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner|const"><span class="entity_def" id="offset_44864..44880">GS_rec_fun_inner</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_def_raw|axiom"><span class="entity_def" id="offset_45029..45039">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter|const"><span class="entity_def" id="offset_45040..45051">GS_rec_iter</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>GS_rec_iter</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45148..45153">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_eq_GS_iter|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_eq_GS_iter|thm"><span class="entity_def" id="offset_45154..45175">GS_rec_fun_eq_GS_iter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>âª</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_45385..45386">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(â¤)</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.union_disjoint|fact"><span>sum.union_disjoint</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan_def|fact"><span>lessThan_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(â¤)</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45148..45153"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42256..42267"><span>GS_rec_fun.simps</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(â¤)</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45148..45153"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="free"><span>v_next</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45385..45386"><span>*</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45029..45039"><span>GS_rec_iter_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.foldl_upd_notin|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.foldl_upd_notin|thm"><span class="entity_def" id="offset_46012..46027">foldl_upd_notin</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.foldl_upd_notin&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.foldl_upd_notin&apos;|thm"><span class="entity_def" id="offset_46127..46143">foldl_upd_notin'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>Y</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46303..46308">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.sorted_list_of_set_split|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.sorted_list_of_set_split|thm"><span class="entity_def" id="offset_46309..46333">sorted_list_of_set_split</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46303..46308"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_46521..46524">Suc</span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_list_of_set_nonempty|fact"><span>sorted_list_of_set_nonempty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card.remove|fact"><span>card.remove</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card.empty|fact"><span>card.empty</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_46997..47001">True</span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_47012..47018">Min_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46997..47001"><span>True</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.eq_Min_iff|fact"><span>eq_Min_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_47012..47018"><span>Min_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_47012..47018"><span>Min_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46997..47001"><span>True</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_47012..47018"><span>Min_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_list_of_set_nonempty|fact"><span>sorted_list_of_set_nonempty</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46997..47001"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append.append_Cons|fact"><span>append_Cons</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.arg_cong|fact"><span>arg_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_48043..48048">False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_48058..48064">Min_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48043..48048"><span>False</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.eq_Min_iff|fact"><span>eq_Min_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>linorder_class.not_less</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_48204..48205">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48058..48064"><span>Min_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48043..48048"><span>False</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_less_iff|fact"><span>Min_less_iff</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48058..48064"><span>Min_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48204..48205"><span>2</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>      
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46521..46524"><span>Suc</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48043..48048"><span>False</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_48058..48064"><span>Min_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_list_of_set_nonempty|fact"><span>sorted_list_of_set_nonempty</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49124..49129">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.sorted_list_of_set_split&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.sorted_list_of_set_split&apos;|thm"><span class="entity_def" id="offset_49130..49155">sorted_list_of_set_split'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_49357..49361">True</span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49124..49129"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49357..49361"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_gr_iff|fact"><span>Min_gr_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span>  </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49124..49129"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49357..49361"><span>True</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_le_iff|fact"><span>Min_le_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49124..49129"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_49709..49714">False</span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_49723..49724">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>linorder_class.not_less</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49709..49714"><span>False</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49723..49724"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code|thm"><span class="entity_def" id="offset_49880..49895">GS_rec_fun_code</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_50031..50035">less</span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>s</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45154..45175"><span>GS_rec_fun_eq_GS_iter</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_50756..50757">1</span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_50792..50793">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.leI|fact"><span>leI</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_50756..50757"><span>1</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_gr_iff|fact"><span>Min_gr_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>{</span></a></span><span class="skolem"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>&lt;..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_50792..50793"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_le_iff|fact"><span>Min_le_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span> 
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>{</span></a></span><span class="skolem"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>&lt;..&lt;</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a></a></a><span class="main"><span class="main"><span class="main"><span>{</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>s</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>s'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>s</span></span></span></span><span class="main"><span class="main"><span class="main"><span>}</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_50756..50757"><span>1</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_50031..50035"><span>less.IH</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46127..46143"><span>foldl_upd_notin'</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code&apos;|thm"><span class="entity_def" id="offset_51574..51590">GS_rec_fun_code'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49880..49895"><span>GS_rec_fun_code</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_51814..51815">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.eq_Max_iff|fact"><span>eq_Max_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_less_iff|fact"><span>Min_less_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_51814..51815"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.leI|fact"><span>leI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49880..49895"><span>GS_rec_fun_code</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46127..46143"><span>foldl_upd_notin'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>s</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code&apos;&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_code&apos;&apos;|thm"><span>GS_rec_fun_code''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_51574..51590"><span>GS_rec_fun_code'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_elem|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_elem|thm"><span>GS_rec_eq_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43134..43144"><span>GS_rec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>



</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_elem|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_elem|thm"><span class="entity_def" id="offset_52407..52423">GS_rec_step_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan_def|fact"><span>lessThan_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.If_cases|fact"><span>sum.If_cases</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_52744..52749">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec_step_act|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec_step_act|thm"><span class="entity_def" id="offset_52750..52776">is_arg_max_GS_rec_step_act</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d'</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52744..52749"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52407..52423"><span>GS_rec_step_elem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53024..53029">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec_step_act&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec_step_act&apos;|thm"><span class="entity_def" id="offset_53030..53057">is_arg_max_GS_rec_step_act'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d'</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52750..52776"><span>is_arg_max_GS_rec_step_act</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53024..53029"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53271..53276">lemma</span></span></span><span>
  </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec|thm"><span class="entity_def" id="offset_53279..53296">is_arg_max_GS_rec</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53271..53276"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43950..43963"><span>GS_rec_eq_vec</span></a><span> </span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53480..53485">lemma</span></span></span><span>
  </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_rec&apos;|thm"><span class="entity_def" id="offset_53488..53506">is_arg_max_GS_rec'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53480..53485"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43950..43963"><span>GS_rec_eq_vec</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53690..53695">lemma</span></span></span><span>
  </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_GS_inv|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_GS_inv|thm"><span class="entity_def" id="offset_53698..53714">GS_rec_eq_GS_inv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53279..53296"><span>is_arg_max_GS_rec</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53690..53695"><span>assms</span></a><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27865..27874"><span>Q_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.add_diff_cancel|fact"><span>add_diff_cancel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_lid|fact"><span>matrix_vector_mul_lid</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_matrix_mult|const"><span>**</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>asm</span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_left|fact"><span>matrix_inv_left</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54619..54624">lemma</span></span></span><span>
  </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_eq_GS_inv|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_step_eq_GS_inv|thm"><span>GS_rec_step_eq_GS_inv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53698..53714"><span>GS_rec_eq_GS_inv</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54619..54624"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53279..53296"><span>is_arg_max_GS_rec</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54619..54624"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54833..54838">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.strict_lower_triangular_mat_mult|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.strict_lower_triangular_mat_mult|thm"><span class="entity_def" id="offset_54839..54871">strict_lower_triangular_mat_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat|const"><span>strict_lower_triangular_mat</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54833..54838"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat_def|fact"><span>strict_lower_triangular_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54833..54838"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54833..54838"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.strict_lower_triangular_mat_def|fact"><span>strict_lower_triangular_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_mat_invertible|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.Q_mat_invertible|thm"><span class="entity_def" id="offset_55490..55506">Q_mat_invertible</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.invertible|const"><span>invertible</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55613..55618">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_eq_GS_inv|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_eq_GS_inv|thm"><span class="entity_def" id="offset_55619..55631">GS_eq_GS_inv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55785..55789">have</span></span></span><span> </span><span class="entity_def" id="offset_55790..55791">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55613..55618"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53488..53506"><span>is_arg_max_GS_rec'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55785..55789"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55903..55908">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55903..55908"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Norm_Arith.html#Norm_Arith.pth_6|fact"><span>pth_6</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56109..56114">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27865..27874"><span>Q_mat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56109..56114"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55613..55618"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_29279..29287"><span>lt_Q_inv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_mult|fact"><span>lower_triangular_mat_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv_left|fact"><span>matrix_inv_left</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55490..55506"><span>Q_mat_invertible</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55613..55618"><span>assms</span></a><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_55790..55791"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56643..56648">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;|thm"><span class="entity_def" id="offset_56649..56677">is_arg_max_GS_imp_splitting'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56643..56648"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_56905..56909">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_56920..56921">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56643..56648"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56983..56987">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56905..56909"><span>less</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56983..56987"><span>that</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_57261..57262">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53488..53506"><span>is_arg_max_GS_rec'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56905..56909"><span>less</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56983..56987"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_mult|fact"><span>lower_triangular_mat_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24521..24531"><span>lt_P_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>      
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56905..56909"><span>less</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56983..56987"><span>that</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55619..55631"><span>GS_eq_GS_inv</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.lower_triangular_mat_mult|fact"><span>lower_triangular_mat_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24521..24531"><span>lt_P_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54839..54871"><span>strict_lower_triangular_mat_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24393..24404"><span>slt_P_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_57261..57262"><span>*</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_58574..58576">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span>  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.scaleR_matrix_vector_assoc|fact"><span>scaleR_matrix_vector_assoc</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27768..27773"><span>Q_mat</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_assoc|fact"><span>matrix_vector_mul_assoc</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.matrix_inv|fact"><span>matrix_inv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mul_lid|fact"><span>matrix_vector_mul_lid</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27820..27825"><span>R_mat</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_27865..27874"><span>Q_mat_def</span></a><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_58574..58576"><span>**</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56905..56909"><span>less</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56920..56921"><span>d</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_35091..35110"><span>is_am_GS_inv_extend</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_triv|fact"><span>fun_upd_triv</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_59490..59495">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_rec_step_indep|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_rec_step_indep|thm"><span>is_am_GS_rec_step_indep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53488..53506"><span>is_arg_max_GS_rec'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_59490..59495"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52407..52423"><span>GS_rec_step_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_59490..59495"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_59903..59908">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_rec_step_indep&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_rec_step_indep&apos;|thm"><span>is_am_GS_rec_step_indep'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53488..53506"><span>is_arg_max_GS_rec'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_59903..59908"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52407..52423"><span>GS_rec_step_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_59903..59908"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60317..60322">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;&apos;|thm"><span class="entity_def" id="offset_60323..60352">is_arg_max_GS_imp_splitting''</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60317..60322"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_60612..60616">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_60627..60628">d</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60317..60322"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60700..60704">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60612..60616"><span>less</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60700..60704"><span>that</span></a><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_60979..60980">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>asm</span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_34648..34658"><span>GS_inv_rec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_61198..61199">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27712..27717"><span>r_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_31904..31924"><span>GS_indep_high_states</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54839..54871"><span>strict_lower_triangular_mat_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24393..24404"><span>slt_P_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/SMT.html#SMT.array_rules|fact"><span>array_rules</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60979..60980"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60612..60616"><span>less</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60612..60616"><span>less</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_60700..60704"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54839..54871"><span>strict_lower_triangular_mat_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24393..24404"><span>slt_P_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_61198..61199"><span>*</span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_62067..62068">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60627..60628"><span>d</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53030..53057"><span>is_arg_max_GS_rec_step_act'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>d</span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>d</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_62216..62220">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62067..62068"><span>*</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62216..62220"><span>that</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53488..53506"><span>is_arg_max_GS_rec'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62067..62068"><span>*</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55619..55631"><span>GS_eq_GS_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62216..62220"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60612..60616"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_62508..62513">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;&apos;&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting&apos;&apos;&apos;|thm"><span class="entity_def" id="offset_62514..62544">is_arg_max_GS_imp_splitting'''</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62508..62513"><span>assms</span></a><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_60323..60352"><span>is_arg_max_GS_imp_splitting''</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_62754..62759">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_GS_imp_splitting|thm"><span class="entity_def" id="offset_62760..62787">is_arg_max_GS_imp_splitting</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62754..62759"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56649..56677"><span>is_arg_max_GS_imp_splitting'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_gs_iff|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_arg_max_gs_iff|thm"><span class="entity_def" id="offset_63018..63035">is_arg_max_gs_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>s</span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>s</span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56649..56677"><span>is_arg_max_GS_imp_splitting'</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_60323..60352"><span>is_arg_max_GS_imp_splitting''</span></a><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_63277..63282">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_opt_indep_high|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_opt_indep_high|thm"><span class="entity_def" id="offset_63283..63300">GS_opt_indep_high</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span>is_dec_det</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderI|fact"><span>is_arg_max_linorderI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21554..21564"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43736..43746"><span>GS_rec_step_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>OF</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63277..63282"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15199..15206"><span>is_dec_det_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.mult_mat_vec_nth|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.mult_mat_vec_nth|thm"><span>mult_mat_vec_nth</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scalar_product|const"><span>scalar_product</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row|const"><span>row</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.row_def|fact"><span>row_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.scalar_product_def|fact"><span>scalar_product_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
(* duplicate *)
lemma ext_GS_opt_eq:
  assumes "(âs'. s' &lt; s â¹ is_arg_max (Î»d. GS_rec_step d v $ s') (Î»d. d â D<span class="hidden">â©</span><sub>D</sub>) d)"
  and "is_arg_max (Î»a. GS_rec_step (d(s := a)) v $ s) (Î»a. a â A s) a"
  and "d â D<span class="hidden">â©</span><sub>D</sub>"
shows "is_arg_max (Î»d. GS_rec_step d v $ s) (Î»d. d â D<span class="hidden">â©</span><sub>D</sub>) (d(s := a))"
proof (rule is_arg_max_linorderI)
  fix y
  assume "y â D<span class="hidden">â©</span><sub>D</sub>"
  have "GS_rec_step y v $ s = GS_rec_step (d (s := y s)) v $ s"
    unfolding P_lower_def P_upper_def P_dec_elem
    using GS_rec_step_elem by force
  also have "â¦ â¤ GS_rec_step (d (s := a)) v $ s"
    using is_arg_max_linorderD[OF assms(2)] â¹y â D<span class="hidden">â©</span><sub>D</sub>âº is_dec_det_def 
    by auto
  finally show "GS_rec_step y v $ s â¤ GS_rec_step (d(s := a)) v $ s".
next 
  show "d(s := a) â D<span class="hidden">â©</span><sub>D</sub>"
    using assms(3) is_arg_max_linorderD[OF assms(2)] is_dec_det_def
    by simp
qed
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65578..65583">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.ext_GS_opt_le|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.ext_GS_opt_le|thm"><span class="entity_def" id="offset_65584..65597">ext_GS_opt_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_65578..65583"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52750..52776"><span>is_arg_max_GS_rec_step_act</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63283..63300"><span>GS_opt_indep_high</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_GS_opt_le|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_GS_opt_le|thm"><span class="entity_def" id="offset_65982..65994">ex_GS_opt_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66121..66125">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_66179..66183">True</span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_66236..66237">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66179..66183"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_66352..66353">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66121..66125"><span>less</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66236..66237"><span>1</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_66502..66503">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_66635..66640">hence</span></span></span><span> </span><span>d'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66352..66353"><span>d</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63283..63300"><span>GS_opt_indep_high</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66635..66640"><span>that</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66502..66503"><span>a</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_66815..66819">have</span></span></span><span> </span><span>d'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_66815..66819"><span>that</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66502..66503"><span>a</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.is_arg_max_linorderD|fact"><span>is_arg_max_linorderD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66352..66353"><a class="entity_ref" href="Splitting_Methods.html#offset_66352..66353"><span>d</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66179..66183"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_65584..65597"><span>ext_GS_opt_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_66352..66353"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_67058..67063">False</span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_67068..67074">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_67134..67135">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_67272..67273">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67058..67063"><span>False</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67058..67063"><span>False</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67134..67135"><span>a</span></a><span> </span><span>SOME_is_dec_det</span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67068..67074"><span>d_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52750..52776"><span>is_arg_max_GS_rec_step_act</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67272..67273"><span>1</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_GS_opt|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_GS_opt|thm"><span class="entity_def" id="offset_67595..67604">ex_GS_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_65982..65994"><span>ex_GS_opt_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_GS_inv&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_GS_inv&apos;|thm"><span class="entity_def" id="offset_67730..67747">GS_rec_eq_GS_inv'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_67816..67817">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67595..67604"><span>ex_GS_opt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67816..67817"><span>d</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53279..53296"><span>is_arg_max_GS_rec</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43950..43963"><span>GS_rec_eq_vec</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62760..62787"><span>is_arg_max_GS_imp_splitting</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67816..67817"><span>d</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53698..53714"><span>GS_rec_eq_GS_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67816..67817"><span>d</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_eq_GS_inv|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_eq_GS_inv|thm"><span class="entity_def" id="offset_68239..68259">GS_rec_fun_eq_GS_inv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_42077..42087"><span>GS_rec_fun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67730..67747"><span>GS_rec_eq_GS_inv'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43134..43144"><span>GS_rec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.invertible_Q_GS|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.invertible_Q_GS|thm"><span class="entity_def" id="offset_68431..68446">invertible_Q_GS</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>d</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_55490..55506"><span>Q_mat_invertible</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.invertible_invertible\&lt;^sub&gt;L_I|fact"><span>invertible_invertible<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_opt_blinfun|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.ex_opt_blinfun|thm"><span class="entity_def" id="offset_68548..68562">ex_opt_blinfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27661..27668"><span>r_det<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span>is_dec_det</span><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27661..27668"><span>r_det<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.plus_bfun_def|fact"><span>plus_bfun_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_68431..68446"><span>invertible_Q_GS</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;|fact"><span>blinfun_to_matrix_mult'</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span>is_dec_det</span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_67595..67604"><span>ex_GS_opt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62760..62787"><span>is_arg_max_GS_imp_splitting</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_blinfun_to_matrix|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_inv_blinfun_to_matrix|thm"><span class="entity_def" id="offset_69123..69147">GS_inv_blinfun_to_matrix</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_27661..27668"><span>r_det<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28291..28301"><span>GS_inv_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.plus_bfun_def|fact"><span>plus_bfun_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_68431..68446"><span>invertible_Q_GS</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_mult&apos;&apos;|fact"><span>blinfun_to_matrix_mult''</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span> </span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_GS_QR_le_disc|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.norm_GS_QR_le_disc|thm"><span class="entity_def" id="offset_69399..69417">norm_GS_QR_le_disc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_15516..15533"><span>norm_splitting_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a></a><span> </span><span class="free"><span class="free"><span>d</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.is_splitting_blin_def&apos;|fact"><span>is_splitting_blin_def'</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.nonneg_id_blinfun|fact"><span>nonneg_id_blinfun</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22746..22756"><span>nonneg_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_nonneg_nonneg|fact"><span>scaleR_nonneg_nonneg</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28034..28043"><span>R_mat_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21483..21493"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.less_eq_vec_def|fact"><span>Finite_Cartesian_Product.less_eq_vec_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_22219..22231"><span>nonneg_P_dec</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21421..21431"><span>P_dec_def</span></a><span> </span><a class="entity_ref" href="Matrix_Util.html#Matrix_Util.nonneg_matrix_nonneg|fact"><span>nonneg_matrix_nonneg</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_70190..70199">sublocale</span></span></span><span> GS</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.MDP_QR|locale"><span>MDP_QR</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a></span><span>
  </span><span class="keyword2"><span class="keyword"><span>rewrites</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_4504..4513"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_69399..69417"><span>norm_GS_QR_le_disc</span></a><span> </span><span>ex_dec_det</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.MDP_QR|const"><span>MDP_QR</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24769..24784"><span>splitting_gauss</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_68548..68562"><span>ex_opt_blinfun</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split|const"><span>MDP_QR.â<span class="hidden">â©</span><sub>b</sub>_split</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24693..24697"><span>Q_GS</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24740..24744"><span>R_GS</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.MDP_QR.\&lt;L&gt;\&lt;^sub&gt;b_split.rep_eq|fact"><span>MDP_QR.â<span class="hidden">â©</span><sub>b</sub>_split.rep_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#Splitting_Methods.MDP_QR.\&lt;L&gt;_split_def|fact"><span>MDP_QR.â_split_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44763..44778"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_68239..68259"><span>GS_rec_fun_eq_GS_inv</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_69123..69147"><span>GS_inv_blinfun_to_matrix</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_measure|const"><span class="entity_def" id="offset_70751..70761">gs_measure</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.nat|const"><span>nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>ceiling</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_lt_dist_opt|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_lt_dist_opt|thm"><span class="entity_def" id="offset_70911..70937">dist_â<span class="hidden">â©</span><sub>b</sub>_split_lt_dist_opt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_71001..71004">le1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_71134..71137">le2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_fix</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.QR_disc</span></a></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.QR_contraction</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71134..71137"><span>le2</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71001..71004"><span>le1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_QR_disc_le_disc|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_QR_disc_le_disc|thm"><span class="entity_def" id="offset_71442..71460">GS_QR_disc_le_disc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_69399..69417"><span>norm_GS_QR_le_disc</span></a><span> </span><span>ex_dec_det</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71554..71559">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_rel_dec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_rel_dec|thm"><span class="entity_def" id="offset_71560..71570">gs_rel_dec</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.QR_contraction</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_69399..69417"><span>norm_GS_QR_le_disc</span></a><span> </span><span>disc_lt_one</span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71442..71460"><span>GS_QR_disc_le_disc</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71554..71559"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Information.html#Information.log_le|fact"><span>log_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71554..71559"><span>assms</span></a><span> </span><span>disc_lt_one</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_mult|fact"><span>log_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71554..71559"><span>assms</span></a><span> </span><span>disc_lt_one</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_inverse|fact"><span>log_inverse</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.right_inverse_eq|fact"><span>right_inverse_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71554..71559"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.strict_implies_not_eq|fact"><span>order.strict_implies_not_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>disc_lt_one</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log_eq_one|fact"><span>log_eq_one</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.pelims|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.termination|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.pinduct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.psimps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.inducts|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.intros|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_sumC.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.inducts|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.cases|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.intros|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.pelims|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.termination|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.pinduct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.psimps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.inducts|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.simps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.intros|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_sumC.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.inducts|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.simps|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.cases|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.intros|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_sumC_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph_def|axiom"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_dom|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_rel|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_sumC|const"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_graph|const"><span>function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration|const"><span class="entity_def" id="offset_72706..72718">gs_iteration</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gs_iteration</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>gs_iteration</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.elims|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.induct|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.simps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.elims|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.induct|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration.simps|thm"><span>termination</span></span></span></span></span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.relation|method"><span class="operator"><span>relation</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>Wellfounded.measure</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70751..70761"><span>gs_measure</span></a><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>fail</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="skolem"><span>v</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_73049..73050">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>eps</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>Wellfounded.measure</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70751..70761"><span>gs_measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_73209..73216">gt_zero</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_73246..73253">dist_ge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73049..73050"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_73366..73375">v_not_opt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73049..73050"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.log|const"><span>log</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Information.html#Information.log_less|fact"><span>log_less</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_less_div_pos|fact"><span>mult_imp_less_div_pos</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_less_div_pos|fact"><span>mult_imp_less_div_pos</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.neq_le_trans|fact"><span>neq_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>8</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_pos_lt|fact"><span>dist_pos_lt</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73366..73375"><span>v_not_opt</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70911..70937"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_split_lt_dist_opt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73209..73216"><span>gt_zero</span></a><span> </span><span>zero_le_disc</span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_strict_left_mono|fact"><span>mult_strict_left_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.mult_imp_div_pos_less|fact"><span>mult_imp_div_pos_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73246..73253"><span>dist_ge</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>argo</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71560..71570"><span>gs_rel_dec</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_73049..73050"><span>h</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.THE_fix_GS_rec_fun\&lt;^sub&gt;b|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.THE_fix_GS_rec_fun\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_74125..74145">THE_fix_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_fix</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The distance between an estimate for the value and the optimal value can be bounded with respect to 
</span><span>the distance between the estimate and the result of applying it to </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.contraction_\&lt;L&gt;_split_dist|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.contraction_\&lt;L&gt;_split_dist|thm"><span class="entity_def" id="offset_74435..74459">contraction_â_split_dist</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71442..71460"><span>GS_QR_disc_le_disc</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_74125..74145"><span>THE_fix_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.contraction_dist|fact"><span>contraction_dist</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74709..74714">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|thm"><span class="entity_def" id="offset_74715..74737">dist_â<span class="hidden">â©</span><sub>b</sub>_split_opt_eps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_74435..74459"><span>contraction_â_split_dist</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_le_divide_eq|fact"><span>pos_le_divide_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>contraction_â_dist</span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_74709..74714"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.mult_le_cancel_left_pos|fact"><span>mult_le_cancel_left_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_74709..74714"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_less_eq|fact"><span>pos_divide_less_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>argo</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_75390..75391">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_70190..70199"><span>GS.â<span class="hidden">â©</span><sub>b</sub>_split_contraction</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71442..71460"><span>GS_QR_disc_le_disc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.zero_le_dist|fact"><span>zero_le_dist</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Splitting_Methods.html#offset_75390..75391"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75678..75685">context</span></span></span><span> </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_ord|locale"><span>MDP_ord</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>       

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75709..75714">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_inv_extend&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.is_am_GS_inv_extend&apos;|thm"><span>is_am_GS_inv_extend'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_75997..75998">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>is_dec_det_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_76104..76105">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'s</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>linorder_class.Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63018..63035"><span>is_arg_max_gs_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76104..76105"><span>*</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63283..63300"><span>GS_opt_indep_high</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75997..75998"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.antisym_conv1|fact"><span>antisym_conv1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_63018..63035"><span>is_arg_max_gs_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75709..75714"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75997..75998"><span>a</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56649..56677"><span>is_arg_max_GS_imp_splitting'</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_def_raw|axiom"><span class="entity_def" id="offset_76793..76803">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;|const"><span class="entity_def" id="offset_76805..76819">opt_policy_gs'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_def_raw|axiom"><span class="entity_def" id="offset_76904..76914">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter|const"><span class="entity_def" id="offset_76916..76923">GS_iter</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max_def_raw|axiom"><span class="entity_def" id="offset_76988..76998">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_max|const"><span class="entity_def" id="offset_77000..77011">GS_iter_max</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76916..76923"><span>GS_iter</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77046..77051">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_iter|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_iter|thm"><span class="entity_def" id="offset_77052..77066">GS_rec_eq_iter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76916..76923"><span>GS_iter</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_24393..24404"><span>slt_P_lower</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77046..77051"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_54839..54871"><span>strict_lower_triangular_mat_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="free"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>P_upper_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77046..77051"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_21566..21573"><span>P_lower</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21495..21502"><span>P_upper</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21433..21438"><span>P_dec</span></a><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>Finite_Cartesian_Product.vec_eq_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vector_add_component|fact"><span>vector_add_component</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_diff_rdistrib|fact"><span>matrix_vector_mult_diff_rdistrib</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_step_def</span></a><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult_def|fact"><span>matrix_vector_mult_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_21735..21745"><span>P_dec_elem</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>P_lower_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>P_upper_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76904..76914"><span>GS_iter_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.distrib|fact"><span>sum.distrib</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77967..77972">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_iter_max|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_eq_iter_max|thm"><span class="entity_def" id="offset_77973..77991">GS_rec_eq_iter_max</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="free"><span>v'</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77052..77066"><span>GS_rec_eq_iter</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77967..77972"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43831..43841"><span>GS_rec_eq'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76988..76998"><span>GS_iter_max_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max_def_raw|axiom"><span class="entity_def" id="offset_78200..78210">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_iter_arg_max|const"><span class="entity_def" id="offset_78212..78227">GS_iter_arg_max</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76916..76923"><span>GS_iter</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code_def_raw|axiom"><span class="entity_def" id="offset_78294..78304">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code|const"><span class="entity_def" id="offset_78306..78320">GS_rec_am_code</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vd</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;_def_raw|axiom"><span class="entity_def" id="offset_78474..78484">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;|const"><span class="entity_def" id="offset_78486..78501">GS_rec_am_code'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vd</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code&apos;|thm"><span>GS_rec_am_code'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_78306..78320"><span>GS_rec_am_code</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78486..78501"><span>GS_rec_am_code'</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_78728..78729">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>{</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>&lt;..}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'s</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49130..49155"><span>sorted_list_of_set_split'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan_def|fact"><span>greaterThan_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_78306..78320"><span>GS_rec_am_code</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78486..78501"><span>GS_rec_am_code'</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78474..78484"><span>GS_rec_am_code'_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78728..78729"><span>*</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46127..46143"><span>foldl_upd_notin'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79141..79146">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_eq_GS_iter|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_eq_GS_iter|thm"><span class="entity_def" id="offset_79147..79172">opt_policy_gs'_eq_GS_iter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="free"><span>v'</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76793..76803"><span>opt_policy_gs'_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78200..78210"><span>GS_iter_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77052..77066"><span>GS_rec_eq_iter</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79141..79146"><span>assms</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>k</span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>d</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_eq_GS_iter&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_eq_GS_iter&apos;|thm"><span class="entity_def" id="offset_79412..79438">opt_policy_gs'_eq_GS_iter'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79147..79172"><span>opt_policy_gs'_eq_GS_iter</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_is_dec_det|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_is_dec_det|thm"><span class="entity_def" id="offset_79592..79617">opt_policy_gs'_is_dec_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76793..76803"><span>opt_policy_gs'_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>is_dec_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI2_ex|fact"><span>LeastI2_ex</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_is_arg_max|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs&apos;_is_arg_max|thm"><span class="entity_def" id="offset_79771..79796">opt_policy_gs'_is_arg_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79924..79928">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79924..79928"><span>less</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_80059..80060">*</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_62514..62544"><span>is_arg_max_GS_imp_splitting'''</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76793..76803"><span>opt_policy_gs'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span>A_ne</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI_ex|fact"><span>LeastI_ex</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79592..79617"><span>opt_policy_gs'_is_dec_det</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_53030..53057"><span>is_arg_max_GS_rec_step_act'</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_80059..80060"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.order_iff_strict|fact"><span>order.order_iff_strict</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_28303..28309"><span>GS_inv</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_56649..56677"><span>is_arg_max_GS_imp_splitting'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_78306..78320"><span>GS_rec_am_code</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_81032..81036">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_81093..81097">True</span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vd</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_81207..81213">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?old</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_81331..81332">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'s</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49130..49155"><span>sorted_list_of_set_split'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46127..46143"><span>foldl_upd_notin'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81331..81332"><span>1</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_81918..81919">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81207..81213"><span>x'_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81093..81097"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>meson</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82159..82163">have</span></span></span><span> </span><span class="entity_def" id="offset_82164..82170">fst_IH</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81918..81919"><span>1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82159..82163"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81032..81036"><span>less</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82159..82163"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82299..82303">have</span></span></span><span> </span><span class="entity_def" id="offset_82304..82311">fst_IH'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81093..81097"><span>True</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82299..82303"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81207..81213"><span>x'_def</span></a><span>  </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_82450..82458">fst_IH''</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82164..82170"><span>fst_IH</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82304..82311"><span>fst_IH'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_82730..82731">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81093..81097"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_82784..82786">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>y</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>y</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81207..81213"><span>x'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82730..82731"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82784..82786"><span>**</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77973..77991"><span>GS_rec_eq_iter_max</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span>s</span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="var"><span class="var"><span>?old</span></span></span><span> </span><span class="bound"><span class="bound"><span>s</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82164..82170"><span>fst_IH</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81093..81097"><span>True</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_81207..81213"><span>x'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_82450..82458"><span>fst_IH''</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79412..79438"><span>opt_policy_gs'_eq_GS_iter'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>    
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_83884..83889">False</span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79147..79172"><span>opt_policy_gs'_eq_GS_iter</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77973..77991"><span>GS_rec_eq_iter_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_83884..83889"><span>False</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code_eq|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_am_code_eq|thm"><span>GS_rec_am_code_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_78306..78320"><span>GS_rec_am_code</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_84261..84265">less</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_84322..84326">True</span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vd</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span>  </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84436..84442">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?old</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_84560..84561">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'s</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_49130..49155"><span>sorted_list_of_set_split'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>s'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46127..46143"><span>foldl_upd_notin'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84560..84561"><span>1</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_85149..85150">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84436..84442"><span>x'_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84322..84326"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>meson</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85391..85395">have</span></span></span><span> </span><span class="entity_def" id="offset_85396..85402">fst_IH</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85149..85150"><span>1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85391..85395"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84261..84265"><span>less</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85391..85395"><span>that</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85539..85543">have</span></span></span><span> </span><span class="entity_def" id="offset_85544..85551">fst_IH'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84322..84326"><span>True</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85539..85543"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84436..84442"><span>x'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_85710..85718">fst_IH''</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85396..85402"><span>fst_IH</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85544..85551"><span>fst_IH'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_85990..85991">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84322..84326"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_86044..86045">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>y</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84436..84442"><span>x'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85990..85991"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_86143..86144">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>y</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_86044..86045"><span>1</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_86143..86144"><span>2</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46309..46333"><span>sorted_list_of_set_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78212..78227"><span>GS_iter_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77973..77991"><span>GS_rec_eq_iter_max</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span>s</span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="var"><span class="var"><span>?old</span></span></span><span> </span><span class="bound"><span class="bound"><span>s</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84322..84326"><span>True</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_46012..46027"><span>foldl_upd_notin</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_84436..84442"><span>x'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge_iff|fact"><span>Max_ge_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85396..85402"><span>fst_IH</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_85710..85718"><span>fst_IH''</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79412..79438"><span>opt_policy_gs'_eq_GS_iter'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?old</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_43146..43152"><span>GS_rec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>    
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_87111..87116">False</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_87191..87192">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_78294..78304"><span>GS_rec_am_code_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79147..79172"><span>opt_policy_gs'_eq_GS_iter</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77973..77991"><span>GS_rec_eq_iter_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87111..87116"><span>False</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87191..87192"><span>*</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_arg_max|const"><span>GS_rec_iter_arg_max</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>GS_rec_iter_arg_max</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs_def_raw|axiom"><span class="entity_def" id="offset_87579..87589">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs|const"><span class="entity_def" id="offset_87591..87604">opt_policy_gs</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_44864..44880"><span>GS_rec_fun_inner</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs_eq&apos;|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.opt_policy_gs_eq&apos;|thm"><span class="entity_def" id="offset_87686..87703">opt_policy_gs_eq'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_87591..87604"><span>opt_policy_gs</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76805..76819"><span>opt_policy_gs'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87579..87589"><span>opt_policy_gs_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76793..76803"><span>opt_policy_gs'_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_fun_inner_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52407..52423"><span>GS_rec_step_elem</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>gs_iteration.simps</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_87951..87956">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_error|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.gs_iteration_error|thm"><span>gs_iteration_error</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_72706..72718"><span>gs_iteration</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87951..87956"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_74715..74737"><span>dist_â<span class="hidden">â©</span><sub>b</sub>_split_opt_eps</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>gs_iteration.simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>gs_iteration.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner_vec|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_fun_inner_vec|thm"><span>GS_rec_fun_inner_vec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_44864..44880"><span>GS_rec_fun_inner</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_43748..43759"><span>GS_rec_step</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_52407..52423"><span>GS_rec_step_elem</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_fun_inner_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_88381..88386">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.find_policy_error_bound_gs|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.find_policy_error_bound_gs|thm"><span class="entity_def" id="offset_88387..88413">find_policy_error_bound_gs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_87591..87604"><span>opt_policy_gs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_13178..13204"><span>GS.find_policy_QR_error_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_88381..88386"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>GS.QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71442..71460"><span>GS_QR_disc_le_disc</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span>  </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_88381..88386"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>GS.QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_88381..88386"><span>assms</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_71442..71460"><span>GS_QR_disc_le_disc</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>GS.QR_disc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_3099..3106"><span>GS.QR_disc</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec_det</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_3412..3419"><span>GS.L_split</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_87591..87604"><span>opt_policy_gs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_44779..44791"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87686..87703"><span>opt_policy_gs_eq'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="skolem"><span>d</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_69123..69147"><span>GS_inv_blinfun_to_matrix</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_79771..79796"><span>opt_policy_gs'_is_arg_max</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy_def|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy_def|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy_def_raw|axiom"><span class="entity_def" id="offset_89340..89350">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy.cong|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy.cong|thm"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy|const"><span class="entity_def" id="offset_89352..89364">vi_gs_policy</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_87591..87604"><span>opt_policy_gs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_72706..72718"><span>gs_iteration</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89410..89415">lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy_opt|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.vi_gs_policy_opt|thm"><span>vi_gs_policy_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span>Î½<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Splitting_Methods.html#offset_89352..89364"><span>vi_gs_policy</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>eps</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_89340..89350"><span>vi_gs_policy_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_89410..89415"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>gs_iteration.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_88387..88413"><span>find_policy_error_bound_gs</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>gs_iteration.simps</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_eq_iter_max|fact"><span class="entity_def" id="Splitting_Methods.MDP_ord.GS_rec_iter_eq_iter_max|thm"><span>GS_rec_iter_eq_iter_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Splitting_Methods.html#offset_45040..45051"><span>GS_rec_iter</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_77000..77011"><span>GS_iter_max</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_75678..75685"><span>GS_rec_iter_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76988..76998"><span>GS_iter_max_def</span></a><span> </span><a class="entity_ref" href="Splitting_Methods.html#offset_76904..76914"><span>GS_iter_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>>
<div class="head">
<h1>Theory Algorithms</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Algorithms</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><a href="Value_Iteration.html"><span>Value_Iteration</span></a><span>
    </span><a href="Policy_Iteration.html"><span>Policy_Iteration</span></a><span>
    </span><a href="Modified_Policy_Iteration.html"><span>Modified_Policy_Iteration</span></a><span>
    </span><a href="Splitting_Methods.html"><span>Splitting_Methods</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>div class="head">
<h1>Theory Code_DP</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Code_DP</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="Value_Iteration.html"><span>Value_Iteration</span></a><span>
    </span><a href="Policy_Iteration.html"><span>Policy_Iteration</span></a><span>
    </span><a href="Modified_Policy_Iteration.html"><span>Modified_Policy_Iteration</span></a><span>
    </span><a href="Splitting_Methods.html"><span>Splitting_Methods</span></a><span>

</span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/Code_Target_Numeral.html"><span>HOL-Library.Code_Target_Numeral</span></a><span>"</span></span><span>
</span><span class="quoted"><span>"</span><a href="../Gauss_Jordan/Code_Generation_IArrays.html"><span>Gauss_Jordan.Code_Generation_IArrays</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Code Generation for MDP Algorithms</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Least Argmax</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_311..316">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_list|fact"><span class="entity_def" id="Code_DP.least_list|thm"><span>least_list</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>LEAST</span></span><span> x </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.find|const"><span>find</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_311..316"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_465..469">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_520..525">False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>LEAST</span></span><span> x </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LEAST</span></span><span> x </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_520..525"><span>False</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_465..469"><span>Cons</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_520..525"><span>False</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_465..469"><span>Cons</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.Least_equality|fact"><span>Least_equality</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.least_enum_def|fact"><span class="entity_def" id="Code_DP.least_enum_def|thm"><span class="entity_def" id="Code_DP.least_enum_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.least_enum|const"><span>least_enum</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.find|const"><span>find</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_enum_eq|fact"><span class="entity_def" id="Code_DP.least_enum_eq|thm"><span>least_enum_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_enum|const"><span>least_enum</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_list|fact"><span>least_list</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_enum_def|fact"><span>least_enum_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.least_max_arg_max_list_def|fact"><span class="entity_def" id="Code_DP.least_max_arg_max_list_def|thm"><span class="entity_def" id="Code_DP.least_max_arg_max_list_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>init</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>am</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>am</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>init</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span>"</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.snd_least_max_arg_max_list|fact"><span class="entity_def" id="Code_DP.snd_least_max_arg_max_list|thm"><span>snd_least_max_arg_max_list</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MAX</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list_def|fact"><span>least_max_arg_max_list_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.linorder_class.max.assoc|fact"><span>max.assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_max_arg_max_list_snd_fst|fact"><span class="entity_def" id="Code_DP.least_max_arg_max_list_snd_fst|thm"><span>least_max_arg_max_list_snd_fst</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list_def|fact"><span>least_max_arg_max_list_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1588..1593">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.fst_least_max_arg_max_list|fact"><span class="entity_def" id="Code_DP.fst_least_max_arg_max_list|thm"><span>fst_least_max_arg_max_list</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list_def|fact"><span>least_max_arg_max_list_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_1588..1593"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.Least_equality|fact"><span>Least_equality</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_1992..1996">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_1992..1996"><span>Cons.IH</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.cong|fact"><span>cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>Least</span></a></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_2239..2244">False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_2446..2450">True</span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_1992..1996"><span>Cons</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_2239..2244"><span>False</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.Least_equality|fact"><span>Least_equality</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_2239..2244"><span>False</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_2446..2450"><span>True</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_1992..1996"><span>Cons</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.Least_equality|fact"><span>Least_equality</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.cong|fact"><span>cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>Least</span></a></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_2239..2244"><span>False</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_1992..1996"><span>Cons</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_1992..1996"><span>Cons.IH</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.least_arg_max_enum_def|fact"><span class="entity_def" id="Code_DP.least_arg_max_enum_def|thm"><span class="entity_def" id="Code_DP.least_arg_max_enum_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.least_arg_max_enum|const"><span>least_arg_max_enum</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.tl|const"><span>tl</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.least_max_arg_max_enum_def|fact"><span class="entity_def" id="Code_DP.least_max_arg_max_enum_def|thm"><span class="entity_def" id="Code_DP.least_max_arg_max_enum_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.least_max_arg_max_enum|const"><span>least_max_arg_max_enum</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_list|const"><span>least_max_arg_max_list</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.tl|const"><span>tl</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3344..3349">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_arg_max_enum_correct|fact"><span class="entity_def" id="Code_DP.least_arg_max_enum_correct|thm"><span>least_arg_max_enum_correct</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_arg_max_enum|const"><span>least_arg_max_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3516..3517">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.tl|const"><span>tl</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set_sel|fact"><span>list.set_sel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.exhaust_sel|fact"><span>list.exhaust_sel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_arg_max_enum_def|fact"><span>least_arg_max_enum_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Code_DP.html#offset_3344..3349"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.fst_least_max_arg_max_list|fact"><span>fst_least_max_arg_max_list</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_3516..3517"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3773..3778">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_max_arg_max_enum_correct1|fact"><span class="entity_def" id="Code_DP.least_max_arg_max_enum_correct1|thm"><span>least_max_arg_max_enum_correct1</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum|const"><span>least_max_arg_max_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3956..3957">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.tl|const"><span>tl</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set_sel|fact"><span>list.set_sel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.exhaust_sel|fact"><span>list.exhaust_sel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_3773..3778"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum_def|fact"><span>least_max_arg_max_enum_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.fst_least_max_arg_max_list|fact"><span>fst_least_max_arg_max_list</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_3956..3957"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4202..4207">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.least_max_arg_max_enum_correct2|fact"><span class="entity_def" id="Code_DP.least_max_arg_max_enum_correct2|thm"><span>least_max_arg_max_enum_correct2</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum|const"><span>least_max_arg_max_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MAX</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4363..4364">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.hd|const"><span>hd</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.tl|const"><span>tl</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>xs</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.exhaust_sel|fact"><span>list.exhaust_sel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.simps|fact"><span>list.simps</span></a><span class="main"><span>(</span></span><span>15</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_4202..4207"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum_def|fact"><span>least_max_arg_max_enum_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.snd_least_max_arg_max_list|fact"><span>snd_least_max_arg_max_list</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_4363..4364"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Functions as Vectors</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.arity_typerep_Fun|fact"><span class="entity_def" id="Code_DP.typerep_Fun_def|fact"><span class="entity_def" id="Code_DP.typerep_Fun_inst.typerep_Fun|fact"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_induct|fact"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_induct|fact"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_cases|fact"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_cases|fact"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_inject|fact"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_inject|fact"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_inverse|fact"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_inverse|fact"><span class="entity_def" id="Code_DP.Fun.Rep_Fun|fact"><span class="entity_def" id="Code_DP.Fun.type_definition_Fun|fact"><span class="entity_def" id="Code_DP.arity_type_Fun|fact"><span class="entity_def" id="Code_DP.arity_typerep_Fun|thm"><span class="entity_def" id="Code_DP.typerep_Fun_def|thm"><span class="entity_def" id="Code_DP.typerep_Fun_inst.typerep_Fun|thm"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_induct|thm"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_induct|thm"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_cases|thm"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_cases|thm"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_inject|thm"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_inject|thm"><span class="entity_def" id="Code_DP.Fun.Abs_Fun_inverse|thm"><span class="entity_def" id="Code_DP.Fun.Rep_Fun_inverse|thm"><span class="entity_def" id="Code_DP.Fun.Rep_Fun|thm"><span class="entity_def" id="Code_DP.Fun.type_definition_Fun|thm"><span class="entity_def" id="Code_DP.arity_type_Fun|thm"><span class="entity_def" id="Code_DP.typerep_Fun_def_raw|axiom"><span class="entity_def" id="Code_DP.typerep_Fun_inst.typerep_Fun_def|axiom"><span class="entity_def" id="Code_DP.Fun.type_definition_Fun|axiom"><span class="entity_def" id="Code_DP.arity_type_Fun|axiom"><span class="entity_def" id="Code_DP.typerep_Fun_inst.typerep_Fun|const"><span class="entity_def" id="Code_DP.Fun.Abs_Fun|const"><span class="entity_def" id="Code_DP.Fun.Rep_Fun|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Code_DP.Fun|type"><span>Fun</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.Quotient_Fun|fact"><span class="entity_def" id="Code_DP.Fun.domain|fact"><span class="entity_def" id="Code_DP.Fun.id_abs_transfer|fact"><span class="entity_def" id="Code_DP.Fun.bi_total|fact"><span class="entity_def" id="Code_DP.Fun.left_total|fact"><span class="entity_def" id="Code_DP.Fun.rep_transfer|fact"><span class="entity_def" id="Code_DP.Fun.right_total|fact"><span class="entity_def" id="Code_DP.Fun.bi_unique|fact"><span class="entity_def" id="Code_DP.Fun.right_unique|fact"><span class="entity_def" id="Code_DP.Fun.left_unique|fact"><span class="entity_def" id="Code_DP.arity_partial_term_of_Fun|fact"><span class="entity_def" id="Code_DP.partial_term_of_Fun_triv|fact"><span class="entity_def" id="Code_DP.partial_term_of_Fun_inst.partial_term_of_Fun|fact"><span class="entity_def" id="Code_DP.arity_term_of_Fun|fact"><span class="entity_def" id="Code_DP.term_of_Fun_triv|fact"><span class="entity_def" id="Code_DP.term_of_Fun_inst.term_of_Fun|fact"><span class="entity_def" id="Code_DP.Fun.pcr_cr_eq|fact"><span class="entity_def" id="Code_DP.pcr_Fun_def|fact"><span class="entity_def" id="Code_DP.cr_Fun_def|fact"><span class="entity_def" id="Code_DP.Fun.lifting|bundle"><span class="entity_def" id="Code_DP.Quotient_Fun|thm"><span class="entity_def" id="Code_DP.Fun.domain|thm"><span class="entity_def" id="Code_DP.Fun.id_abs_transfer|thm"><span class="entity_def" id="Code_DP.Fun.bi_total|thm"><span class="entity_def" id="Code_DP.Fun.left_total|thm"><span class="entity_def" id="Code_DP.Fun.rep_transfer|thm"><span class="entity_def" id="Code_DP.Fun.right_total|thm"><span class="entity_def" id="Code_DP.Fun.bi_unique|thm"><span class="entity_def" id="Code_DP.Fun.right_unique|thm"><span class="entity_def" id="Code_DP.Fun.left_unique|thm"><span class="entity_def" id="Code_DP.arity_partial_term_of_Fun|thm"><span class="entity_def" id="Code_DP.partial_term_of_Fun_triv|thm"><span class="entity_def" id="Code_DP.partial_term_of_Fun_inst.partial_term_of_Fun|thm"><span class="entity_def" id="Code_DP.arity_term_of_Fun|thm"><span class="entity_def" id="Code_DP.term_of_Fun_triv|thm"><span class="entity_def" id="Code_DP.term_of_Fun_inst.term_of_Fun|thm"><span class="entity_def" id="Code_DP.Fun.pcr_cr_eq|thm"><span class="entity_def" id="Code_DP.pcr_Fun_def|thm"><span class="entity_def" id="Code_DP.cr_Fun_def|thm"><span class="entity_def" id="Code_DP.partial_term_of_Fun_triv_raw|axiom"><span class="entity_def" id="Code_DP.partial_term_of_Fun_inst.partial_term_of_Fun_def|axiom"><span class="entity_def" id="Code_DP.term_of_Fun_triv_raw|axiom"><span class="entity_def" id="Code_DP.term_of_Fun_inst.term_of_Fun_def|axiom"><span class="entity_def" id="Code_DP.pcr_Fun_def_raw|axiom"><span class="entity_def" id="Code_DP.cr_Fun_def|axiom"><span class="entity_def" id="Code_DP.partial_term_of_Fun_inst.partial_term_of_Fun|const"><span class="entity_def" id="Code_DP.term_of_Fun_inst.term_of_Fun|const"><span class="entity_def" id="Code_DP.pcr_Fun|const"><span class="entity_def" id="Code_DP.cr_Fun|const"><span>setup_lifting</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.type_definition_Fun|fact"><span>type_definition_Fun</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.to_Fun.rep_eq|fact"><span class="entity_def" id="Code_DP.to_Fun.abs_eq|fact"><span class="entity_def" id="Code_DP.to_Fun.transfer|fact"><span class="entity_def" id="Code_DP.to_Fun.rsp|fact"><span class="entity_def" id="Code_DP.to_Fun_def|fact"><span class="entity_def" id="Code_DP.to_Fun.rep_eq|thm"><span class="entity_def" id="Code_DP.to_Fun.abs_eq|thm"><span class="entity_def" id="Code_DP.to_Fun.transfer|thm"><span class="entity_def" id="Code_DP.to_Fun.rsp|thm"><span class="entity_def" id="Code_DP.to_Fun_def|thm"><span class="entity_def" id="Code_DP.to_Fun_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.to_Fun|const"><span>to_Fun</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.fun_to_vec_def|fact"><span class="entity_def" id="Code_DP.fun_to_vec_def|thm"><span class="entity_def" id="Code_DP.fun_to_vec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.fun_to_vec|const"><span>fun_to_vec</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vec_to_fun.rep_eq|fact"><span class="entity_def" id="Code_DP.vec_to_fun.abs_eq|fact"><span class="entity_def" id="Code_DP.vec_to_fun.transfer|fact"><span class="entity_def" id="Code_DP.vec_to_fun.rsp|fact"><span class="entity_def" id="Code_DP.vec_to_fun_def|fact"><span class="entity_def" id="Code_DP.vec_to_fun.rep_eq|thm"><span class="entity_def" id="Code_DP.vec_to_fun.abs_eq|thm"><span class="entity_def" id="Code_DP.vec_to_fun.transfer|thm"><span class="entity_def" id="Code_DP.vec_to_fun.rsp|thm"><span class="entity_def" id="Code_DP.vec_to_fun_def|thm"><span class="entity_def" id="Code_DP.vec_to_fun_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vec_to_fun|const"><span>vec_to_fun</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.Fun_inverse|fact"><span class="entity_def" id="Code_DP.Fun_inverse|thm"><span>Fun_inverse</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Abs_Fun|const"><span>Abs_Fun</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Abs_Fun_inverse|fact"><span>Abs_Fun_inverse</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.zero_Fun.rep_eq|fact"><span class="entity_def" id="Code_DP.zero_Fun.abs_eq|fact"><span class="entity_def" id="Code_DP.zero_Fun.transfer|fact"><span class="entity_def" id="Code_DP.zero_Fun.rsp|fact"><span class="entity_def" id="Code_DP.zero_Fun_def|fact"><span class="entity_def" id="Code_DP.zero_Fun.rep_eq|thm"><span class="entity_def" id="Code_DP.zero_Fun.abs_eq|thm"><span class="entity_def" id="Code_DP.zero_Fun.transfer|thm"><span class="entity_def" id="Code_DP.zero_Fun.rsp|thm"><span class="entity_def" id="Code_DP.zero_Fun_def|thm"><span class="entity_def" id="Code_DP.zero_Fun_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.zero_Fun|const"><span>zero_Fun</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero|class"><span>zero</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>code_datatype</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun.rep_eq|fact"><span>vec_to_fun.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>equal</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>equal</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.equal_Fun_def|fact"><span class="entity_def" id="Code_DP.equal_Fun_inst.equal_Fun|fact"><span class="entity_def" id="Code_DP.equal_Fun_def|thm"><span class="entity_def" id="Code_DP.equal_Fun_inst.equal_Fun|thm"><span class="entity_def" id="Code_DP.equal_Fun_def_raw|axiom"><span class="entity_def" id="Code_DP.equal_Fun_inst.equal_Fun_def|axiom"><span class="entity_def" id="Code_DP.equal_Fun_inst.equal_Fun|const"><span class="entity_def" id="offset_5176..5186">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="class_parameter"><span>equal_Fun</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>equal</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.arity_equal_Fun|fact"><span class="entity_def" id="Code_DP.arity_equal_Fun|thm"><span>instance</span></span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_5176..5186"><span>equal_Fun_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun_inject|fact"><span>Rep_Fun_inject</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Functions as Vectors</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.Bfun_inverse_fin|fact"><span class="entity_def" id="Code_DP.Bfun_inverse_fin|thm"><span>Bfun_inverse_fin</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.bfun_to_vec_def|fact"><span class="entity_def" id="Code_DP.bfun_to_vec_def|thm"><span class="entity_def" id="Code_DP.bfun_to_vec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.bfun_to_vec|const"><span>bfun_to_vec</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vec_to_bfun_def|fact"><span class="entity_def" id="Code_DP.vec_to_bfun_def|thm"><span class="entity_def" id="Code_DP.vec_to_bfun_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_partial_term_of_bfun|fact"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_triv|fact"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_inst.partial_term_of_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_partial_term_of_bfun|thm"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_triv|thm"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_inst.partial_term_of_bfun|thm"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_triv_raw|axiom"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_inst.partial_term_of_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.partial_term_of_bfun_inst.partial_term_of_bfun|const"><span>code_datatype</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.apply_bfun_vec_to_bfun|fact"><span class="entity_def" id="Code_DP.apply_bfun_vec_to_bfun|thm"><span>apply_bfun_vec_to_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>IArrays with Lengths in the Type</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.arity_typerep_iarray_type|fact"><span class="entity_def" id="Code_DP.typerep_iarray_type_def|fact"><span class="entity_def" id="Code_DP.typerep_iarray_type_inst.typerep_iarray_type|fact"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_induct|fact"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_induct|fact"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_cases|fact"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_cases|fact"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_inject|fact"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_inject|fact"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_inverse|fact"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_inverse|fact"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type|fact"><span class="entity_def" id="Code_DP.iarray_type.type_definition_iarray_type|fact"><span class="entity_def" id="Code_DP.arity_type_iarray_type|fact"><span class="entity_def" id="Code_DP.arity_typerep_iarray_type|thm"><span class="entity_def" id="Code_DP.typerep_iarray_type_def|thm"><span class="entity_def" id="Code_DP.typerep_iarray_type_inst.typerep_iarray_type|thm"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_induct|thm"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_induct|thm"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_cases|thm"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_cases|thm"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_inject|thm"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_inject|thm"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type_inverse|thm"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type_inverse|thm"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type|thm"><span class="entity_def" id="Code_DP.iarray_type.type_definition_iarray_type|thm"><span class="entity_def" id="Code_DP.arity_type_iarray_type|thm"><span class="entity_def" id="Code_DP.typerep_iarray_type_def_raw|axiom"><span class="entity_def" id="Code_DP.typerep_iarray_type_inst.typerep_iarray_type_def|axiom"><span class="entity_def" id="Code_DP.iarray_type.type_definition_iarray_type|axiom"><span class="entity_def" id="Code_DP.arity_type_iarray_type|axiom"><span class="entity_def" id="Code_DP.typerep_iarray_type_inst.typerep_iarray_type|const"><span class="entity_def" id="Code_DP.iarray_type.Abs_iarray_type|const"><span class="entity_def" id="Code_DP.iarray_type.Rep_iarray_type|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Code_DP.iarray_type|type"><span>iarray_type</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>arr</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.iarray|type"><span>iarray</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.length|const"><span>IArray.length</span></a><span> </span><span class="bound"><span>arr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.Ex_list_of_length|fact"><span>Ex_list_of_length</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.iarray.IArray|const"><span>IArray</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.Quotient_iarray_type|fact"><span class="entity_def" id="Code_DP.iarray_type.domain_eq|fact"><span class="entity_def" id="Code_DP.iarray_type.domain_par_left_total|fact"><span class="entity_def" id="Code_DP.iarray_type.domain_par|fact"><span class="entity_def" id="Code_DP.iarray_type.domain|fact"><span class="entity_def" id="Code_DP.iarray_type.rep_transfer|fact"><span class="entity_def" id="Code_DP.iarray_type.right_total|fact"><span class="entity_def" id="Code_DP.iarray_type.bi_unique|fact"><span class="entity_def" id="Code_DP.iarray_type.right_unique|fact"><span class="entity_def" id="Code_DP.iarray_type.left_unique|fact"><span class="entity_def" id="Code_DP.arity_term_of_iarray_type|fact"><span class="entity_def" id="Code_DP.term_of_iarray_type_triv|fact"><span class="entity_def" id="Code_DP.term_of_iarray_type_inst.term_of_iarray_type|fact"><span class="entity_def" id="Code_DP.iarray_type.pcr_cr_eq|fact"><span class="entity_def" id="Code_DP.pcr_iarray_type_def|fact"><span class="entity_def" id="Code_DP.cr_iarray_type_def|fact"><span class="entity_def" id="Code_DP.iarray_type.lifting|bundle"><span class="entity_def" id="Code_DP.Quotient_iarray_type|thm"><span class="entity_def" id="Code_DP.iarray_type.domain_eq|thm"><span class="entity_def" id="Code_DP.iarray_type.domain_par_left_total|thm"><span class="entity_def" id="Code_DP.iarray_type.domain_par|thm"><span class="entity_def" id="Code_DP.iarray_type.domain|thm"><span class="entity_def" id="Code_DP.iarray_type.rep_transfer|thm"><span class="entity_def" id="Code_DP.iarray_type.right_total|thm"><span class="entity_def" id="Code_DP.iarray_type.bi_unique|thm"><span class="entity_def" id="Code_DP.iarray_type.right_unique|thm"><span class="entity_def" id="Code_DP.iarray_type.left_unique|thm"><span class="entity_def" id="Code_DP.arity_term_of_iarray_type|thm"><span class="entity_def" id="Code_DP.term_of_iarray_type_triv|thm"><span class="entity_def" id="Code_DP.term_of_iarray_type_inst.term_of_iarray_type|thm"><span class="entity_def" id="Code_DP.iarray_type.pcr_cr_eq|thm"><span class="entity_def" id="Code_DP.pcr_iarray_type_def|thm"><span class="entity_def" id="Code_DP.cr_iarray_type_def|thm"><span class="entity_def" id="Code_DP.term_of_iarray_type_triv_raw|axiom"><span class="entity_def" id="Code_DP.term_of_iarray_type_inst.term_of_iarray_type_def|axiom"><span class="entity_def" id="Code_DP.pcr_iarray_type_def_raw|axiom"><span class="entity_def" id="Code_DP.cr_iarray_type_def|axiom"><span class="entity_def" id="Code_DP.term_of_iarray_type_inst.term_of_iarray_type|const"><span class="entity_def" id="Code_DP.pcr_iarray_type|const"><span class="entity_def" id="Code_DP.cr_iarray_type|const"><span>setup_lifting</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.type_definition_iarray_type|fact"><span>type_definition_iarray_type</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.fun_to_iarray_t.rep_eq|fact"><span class="entity_def" id="Code_DP.fun_to_iarray_t.abs_eq|fact"><span class="entity_def" id="Code_DP.fun_to_iarray_t.transfer|fact"><span class="entity_def" id="Code_DP.fun_to_iarray_t.rsp|fact"><span class="entity_def" id="Code_DP.fun_to_iarray_t_def|fact"><span class="entity_def" id="Code_DP.fun_to_iarray_t.rep_eq|thm"><span class="entity_def" id="Code_DP.fun_to_iarray_t.abs_eq|thm"><span class="entity_def" id="Code_DP.fun_to_iarray_t.transfer|thm"><span class="entity_def" id="Code_DP.fun_to_iarray_t.rsp|thm"><span class="entity_def" id="Code_DP.fun_to_iarray_t_def|thm"><span class="entity_def" id="Code_DP.fun_to_iarray_t_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.fun_to_iarray_t|const"><span>fun_to_iarray_t</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type|type"><span>iarray_type</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.of_fun|const"><span>IArray.of_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.from_nat|const"><span>from_nat</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.iarray_t_sub.rep_eq|fact"><span class="entity_def" id="Code_DP.iarray_t_sub.abs_eq|fact"><span class="entity_def" id="Code_DP.iarray_t_sub.transfer|fact"><span class="entity_def" id="Code_DP.iarray_t_sub.rsp|fact"><span class="entity_def" id="Code_DP.iarray_t_sub_def|fact"><span class="entity_def" id="Code_DP.iarray_t_sub.rep_eq|thm"><span class="entity_def" id="Code_DP.iarray_t_sub.abs_eq|thm"><span class="entity_def" id="Code_DP.iarray_t_sub.transfer|thm"><span class="entity_def" id="Code_DP.iarray_t_sub.rsp|thm"><span class="entity_def" id="Code_DP.iarray_t_sub_def|thm"><span class="entity_def" id="Code_DP.iarray_t_sub_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.iarray_t_sub|const"><span>iarray_t_sub</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type|type"><span>iarray_type</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.sub|const"><span>IArray.sub</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat|const"><span>to_nat</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.iarray_to_vec.rep_eq|fact"><span class="entity_def" id="Code_DP.iarray_to_vec.abs_eq|fact"><span class="entity_def" id="Code_DP.iarray_to_vec.transfer|fact"><span class="entity_def" id="Code_DP.iarray_to_vec.rsp|fact"><span class="entity_def" id="Code_DP.iarray_to_vec_def|fact"><span class="entity_def" id="Code_DP.iarray_to_vec.rep_eq|thm"><span class="entity_def" id="Code_DP.iarray_to_vec.abs_eq|thm"><span class="entity_def" id="Code_DP.iarray_to_vec.transfer|thm"><span class="entity_def" id="Code_DP.iarray_to_vec.rsp|thm"><span class="entity_def" id="Code_DP.iarray_to_vec_def|thm"><span class="entity_def" id="Code_DP.iarray_to_vec_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type|type"><span>iarray_type</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.sub|const"><span>IArray.sub</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat|const"><span>to_nat</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vec_to_iarray.rep_eq|fact"><span class="entity_def" id="Code_DP.vec_to_iarray.abs_eq|fact"><span class="entity_def" id="Code_DP.vec_to_iarray.transfer|fact"><span class="entity_def" id="Code_DP.vec_to_iarray.rsp|fact"><span class="entity_def" id="Code_DP.vec_to_iarray_def|fact"><span class="entity_def" id="Code_DP.vec_to_iarray.rep_eq|thm"><span class="entity_def" id="Code_DP.vec_to_iarray.abs_eq|thm"><span class="entity_def" id="Code_DP.vec_to_iarray.transfer|thm"><span class="entity_def" id="Code_DP.vec_to_iarray.rsp|thm"><span class="entity_def" id="Code_DP.vec_to_iarray_def|thm"><span class="entity_def" id="Code_DP.vec_to_iarray_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vec_to_iarray|const"><span>vec_to_iarray</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>^</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type|type"><span>iarray_type</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.of_fun|const"><span>IArray.of_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.from_nat|const"><span>from_nat</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.length_iarray_type|fact"><span class="entity_def" id="Code_DP.length_iarray_type|thm"><span>length_iarray_type</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.list_of|const"><span>IArray.list_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|const"><span>Rep_iarray_type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type|type"><span>iarray_type</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|fact"><span>Rep_iarray_type</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.iarray_t_eq_iff|fact"><span class="entity_def" id="Code_DP.iarray_t_eq_iff|thm"><span>iarray_t_eq_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub|const"><span>iarray_t_sub</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub|const"><span>iarray_t_sub</span></a><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub.rep_eq|fact"><span>iarray_t_sub.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/IArray.html#IArray.sub_def|fact"><span>IArray.sub_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type_inject|fact"><span>Rep_iarray_type_inject</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/System_Of_Equations_IArrays.html#System_Of_Equations_IArrays.iarray_exhaust2|fact"><span>iarray_exhaust2</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.length_iarray_type|fact"><span>length_iarray_type</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_eq_iff_nth_eq|fact"><span>list_eq_iff_nth_eq</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_from_nat_id|fact"><span>to_nat_from_nat_id</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.iarray_to_vec_inv|fact"><span class="entity_def" id="Code_DP.iarray_to_vec_inv|thm"><span>iarray_to_vec_inv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray|const"><span>vec_to_iarray</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_less_card|fact"><span>to_nat_less_card</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec.rep_eq|fact"><span>iarray_to_vec.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray.rep_eq|fact"><span>vec_to_iarray.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vec_to_iarray_inv|fact"><span class="entity_def" id="Code_DP.vec_to_iarray_inv|thm"><span>vec_to_iarray_inv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray|const"><span>vec_to_iarray</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_less_card|fact"><span>to_nat_less_card</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec.rep_eq|fact"><span>iarray_to_vec.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray.rep_eq|fact"><span>vec_to_iarray.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_eq_iff|fact"><span>iarray_t_eq_iff</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub.rep_eq|fact"><span>iarray_t_sub.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Finite_Cartesian_Product.arity_partial_term_of_vec|fact"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_triv|fact"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_inst.partial_term_of_vec|fact"><span class="entity_def" id="Finite_Cartesian_Product.arity_partial_term_of_vec|thm"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_triv|thm"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_inst.partial_term_of_vec|thm"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_triv_raw|axiom"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_inst.partial_term_of_vec_def|axiom"><span class="entity_def" id="Finite_Cartesian_Product.partial_term_of_vec_inst.partial_term_of_vec|const"><span>code_datatype</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vec_nth_iarray_to_vec|fact"><span class="entity_def" id="Code_DP.vec_nth_iarray_to_vec|thm"><span>vec_nth_iarray_to_vec</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub|const"><span>iarray_t_sub</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec.rep_eq|fact"><span>iarray_to_vec.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_t_sub.rep_eq|fact"><span>iarray_t_sub.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vec_lambda_iarray_t|fact"><span class="entity_def" id="Code_DP.vec_lambda_iarray_t|thm"><span>vec_lambda_iarray_t</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.fun_to_iarray_t|const"><span>fun_to_iarray_t</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec.rep_eq|fact"><span>iarray_to_vec.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.fun_to_iarray_t.rep_eq|fact"><span>fun_to_iarray_t.rep_eq</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_less_card|fact"><span>to_nat_less_card</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.zero_iarray|fact"><span class="entity_def" id="Code_DP.zero_iarray|thm"><span>zero_iarray</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.fun_to_iarray_t|const"><span>fun_to_iarray_t</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec.rep_eq|fact"><span>iarray_to_vec.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.fun_to_iarray_t.rep_eq|fact"><span>fun_to_iarray_t.rep_eq</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_less_card|fact"><span>to_nat_less_card</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Value Iteration</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.axioms|fact"><span class="entity_def" id="Code_DP.vi_code.intro|fact"><span class="entity_def" id="Code_DP.vi_code_def|fact"><span class="entity_def" id="Code_DP.vi_code.axioms|thm"><span class="entity_def" id="Code_DP.vi_code.intro|thm"><span class="entity_def" id="Code_DP.vi_code_def|thm"><span class="entity_def" id="Code_DP.vi_code_def|axiom"><span class="entity_def" id="offset_7948..7954">locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code|locale"><span class="entity_def" id="Code_DP.vi_code|const"><span>vi_code</span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><a class="entity_ref" href="Policy_Iteration.html#Policy_Iteration.MDP_ord|locale"><span>MDP_ord</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder|class"><span>wellorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder|class"><span>wellorder</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.vi_test_def|fact"><span class="entity_def" id="Code_DP.vi_code.vi_test_def|thm"><span class="entity_def" id="Code_DP.vi_code.vi_test_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.vi_test.cong|fact"><span class="entity_def" id="Code_DP.vi_code.vi_test.cong|thm"><span class="entity_def" id="Code_DP.vi_code.vi_test|const"><span>vi_test</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>::</span></span><span class="tfree"><span>'s</span></span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v'</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.mono|fact"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.simps|fact"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.mono|thm"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.simps|thm"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial_def|axiom"><span class="entity_def" id="offset_8193..8209">partial_function</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>tailrec</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.cong|fact"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial.cong|thm"><span class="entity_def" id="Code_DP.vi_code.value_iteration_partial|const"><span class="entity_def" id="offset_8220..8243">value_iteration_partial</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>value_iteration_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>value_iteration_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.vi_eq_partial|fact"><span class="entity_def" id="Code_DP.vi_code.vi_eq_partial|thm"><span class="entity_def" id="offset_8409..8422">vi_eq_partial</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_8220..8243"><span>value_iteration_partial</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>value_iteration</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>value_iteration.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>value_iteration.simps</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_8193..8209"><span>value_iteration_partial.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.L_det_def|fact"><span class="entity_def" id="Code_DP.vi_code.L_det_def|thm"><span class="entity_def" id="Code_DP.vi_code.L_det_def_raw|axiom"><span class="entity_def" id="offset_8663..8673">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.L_det.cong|fact"><span class="entity_def" id="Code_DP.vi_code.L_det.cong|thm"><span class="entity_def" id="Code_DP.vi_code.L_det|const"><span class="entity_def" id="offset_8675..8680">L_det</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>L</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_L_det|fact"><span class="entity_def" id="Code_DP.vi_code.code_L_det|thm"><span>code_L_det</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_8675..8680"><span>L_det</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_8663..8673"><span>L_det_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span> </span><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_DP.vi_code.code_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span>code_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MAX</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span> </span><span>â<span class="hidden">â©</span><sub>b</sub>_fin_eq_det</span><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_eq_Max|fact"><span>cSup_eq_Max</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_value_iteration|fact"><span class="entity_def" id="Code_DP.vi_code.code_value_iteration|thm"><span>code_value_iteration</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>value_iteration</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_8220..8243"><span>value_iteration_partial</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>value_iteration.simps</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_8409..8422"><span>vi_eq_partial</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl_def|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl_def|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl_def|axiom"><span class="entity_def" id="offset_9287..9302">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.cong|fact"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl.cong|thm"><span class="entity_def" id="Code_DP.vi_code.find_policy_impl|const"><span class="entity_def" id="offset_9303..9319">find_policy_impl</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span>find_policy'</span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_find_policy_impl|fact"><span class="entity_def" id="Code_DP.vi_code.code_find_policy_impl|thm"><span class="entity_def" id="offset_9385..9406">code_find_policy_impl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_9303..9319"><span>find_policy_impl</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>opt_acts</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_9287..9302"><span>find_policy_impl_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>find_policy'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Abs_Fun_inject|fact"><span>Abs_Fun_inject</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_find_policy_impl_opt|fact"><span class="entity_def" id="Code_DP.vi_code.code_find_policy_impl_opt|thm"><span>code_find_policy_impl_opt</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_9303..9319"><span>find_policy_impl</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_arg_max_enum|const"><span>least_arg_max_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>is_opt_act_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_9385..9406"><span>code_find_policy_impl</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_arg_max_enum_correct|fact"><span>least_arg_max_enum_correct</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>A_ne</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_vi_policy&apos;|fact"><span class="entity_def" id="Code_DP.vi_code.code_vi_policy&apos;|thm"><span>code_vi_policy'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vi_policy'</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_9303..9319"><span>find_policy_impl</span></a><span> </span><span class="main"><span>(</span></span><span>value_iteration</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>vi_policy'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_9287..9302"><span>find_policy_impl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Policy Iteration</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.mono|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.simps|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.mono|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.simps|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial_def|axiom"><span class="entity_def" id="offset_9969..9985">partial_function</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>tailrec</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial|const"><span class="entity_def" id="offset_9996..10020">policy_iteration_partial</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>policy_iteration_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>policy_step</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>policy_iteration_partial</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.pi_eq_partial|fact"><span class="entity_def" id="Code_DP.vi_code.pi_eq_partial|thm"><span class="entity_def" id="offset_10154..10167">pi_eq_partial</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_9996..10020"><span>policy_iteration_partial</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>policy_iteration</span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>policy_iteration.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span>is_dec_det_pi</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>policy_step_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_9969..9985"><span>policy_iteration_partial.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.P_mat_def|fact"><span class="entity_def" id="Code_DP.vi_code.P_mat_def|thm"><span class="entity_def" id="Code_DP.vi_code.P_mat_def_raw|axiom"><span class="entity_def" id="offset_10404..10414">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.P_mat.cong|fact"><span class="entity_def" id="Code_DP.vi_code.P_mat.cong|thm"><span class="entity_def" id="Code_DP.vi_code.P_mat|const"><span class="entity_def" id="offset_10416..10421">P_mat</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;_def_raw|axiom"><span class="entity_def" id="offset_10464..10474">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.r_vec&apos;|const"><span class="entity_def" id="offset_10476..10482">r_vec'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;_def|axiom"><span class="entity_def" id="offset_10514..10529">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_eval&apos;|const"><span class="entity_def" id="offset_10530..10542">policy_eval'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>policy_eval</span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.mat_eq_blinfun|fact"><span class="entity_def" id="Code_DP.vi_code.mat_eq_blinfun|thm"><span class="entity_def" id="offset_10622..10636">mat_eq_blinfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_diff|fact"><span>blinfun_to_matrix_diff</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_id|fact"><span>blinfun_to_matrix_id</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_scaleR|fact"><span>blinfun_to_matrix_scaleR</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_def|fact"><span>blinfun_to_matrix_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_10404..10414"><span>P_mat_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>K_st_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/MDP_reward_Util.html#MDP_reward_Util.push_exp_def|fact"><span>push_exp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_def|fact"><span>matrix_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.axis_def|fact"><span>axis_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_distrib|fact"><span>if_distrib</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>mk_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf|fact"><span>integral_measure_pmf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_expectation_bind|fact"><span>pmf_expectation_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>pmf_bind</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.\&lt;nu&gt;\&lt;^sub&gt;b_vec|fact"><span class="entity_def" id="Code_DP.vi_code.\&lt;nu&gt;\&lt;^sub&gt;b_vec|thm"><span class="entity_def" id="offset_11075..11082">Î½<span class="hidden">â©</span><sub>b</sub>_vec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_10530..10542"><span>policy_eval'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10476..10482"><span>r_vec'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10476..10482"><span>r_vec'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10476..10482"><span>r_vec'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_mult|fact"><span>matrix_to_blinfun_mult</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_10464..10474"><span>r_vec'_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun|const"><span>matrix_to_blinfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix|const"><span>blinfun_to_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_10622..10636"><span>mat_eq_blinfun</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Code_DP.html#offset_10464..10474"><span>r_vec'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>r_dec<span class="hidden">â©</span><sub>b</sub>_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.matrix_to_blinfun_inv|fact"><span>matrix_to_blinfun_inv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_inv|const"><span>matrix_inv</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10476..10482"><span>r_vec'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span>ð«<span class="hidden">â©</span><sub>1</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>r_dec<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Î½_stationary</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_10514..10529"><span>policy_eval'.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>policy_eval_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.\&lt;nu&gt;\&lt;^sub&gt;b_vec_opt|fact"><span class="entity_def" id="Code_DP.vi_code.\&lt;nu&gt;\&lt;^sub&gt;b_vec_opt|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_vec_opt</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_10530..10542"><span>policy_eval'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec|const"><span>Matrix_To_IArray.iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.vec_to_iarray|const"><span>Matrix_To_IArray.vec_to_iarray</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Gauss_Jordan/Gauss_Jordan_PA.html#Gauss_Jordan_PA.Gauss_Jordan_PA|const"><span>Gauss_Jordan_PA</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.mat|const"><span>mat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10416..10421"><span>P_mat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.matrix_vector_mult|const"><span>*v</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10476..10482"><span>r_vec'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_11075..11082"><span>Î½<span class="hidden">â©</span><sub>b</sub>_vec</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_10622..10636"><span>mat_eq_blinfun</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Inverse.html#Inverse.matrix_inv_Gauss_Jordan_PA|fact"><span>matrix_inv_Gauss_Jordan_PA</span></a><span> </span><a class="entity_ref" href="Blinfun_Matrix.html#Blinfun_Matrix.blinfun_to_matrix_inverse|fact"><span>blinfun_to_matrix_inverse</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec_vec_to_iarray|fact"><span>iarray_to_vec_vec_to_iarray</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;_def|axiom"><span class="entity_def" id="offset_12677..12692">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_improvement&apos;|const"><span class="entity_def" id="offset_12693..12712">policy_improvement'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span>policy_improvement</span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_12693..12712"><span>policy_improvement'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span>L<span class="hidden">â©</span><sub>a</sub></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>is_opt_act_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_12677..12692"><span>policy_improvement'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>policy_improvement_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Abs_Fun_inject|fact"><span>Abs_Fun_inject</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;_def|axiom"><span class="entity_def" id="offset_13114..13129">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_step&apos;|const"><span class="entity_def" id="offset_13130..13142">policy_step'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span>policy_step</span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_13130..13142"><span>policy_step'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_12693..12712"><span>policy_improvement'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_10530..10542"><span>policy_eval'</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_13114..13129"><span>policy_step'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>policy_step_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_12677..12692"><span>policy_improvement'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_10514..10529"><span>policy_eval'_def</span></a><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;_def|axiom"><span class="entity_def" id="offset_13380..13395">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration_partial&apos;|const"><span class="entity_def" id="offset_13396..13421">policy_iteration_partial'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#offset_9996..10020"><span>policy_iteration_partial</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_13396..13421"><span>policy_iteration_partial'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_13130..13142"><span>policy_step'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_13396..13421"><span>policy_iteration_partial'</span></a><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_13380..13395"><span>policy_iteration_partial'.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_13114..13129"><span>policy_step'.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_9969..9985"><span>policy_iteration_partial.simps</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun_inject|fact"><span>Rep_Fun_inject</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;_def|axiom"><span class="entity_def" id="offset_13751..13766">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.policy_iteration&apos;|const"><span class="entity_def" id="offset_13767..13784">policy_iteration'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span>policy_iteration</span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_policy_iteration&apos;|fact"><span class="entity_def" id="Code_DP.vi_code.code_policy_iteration&apos;|thm"><span>code_policy_iteration'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_13767..13784"><span>policy_iteration'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_13396..13421"><span>policy_iteration_partial'</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_10154..10167"><span>pi_eq_partial</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_policy_iteration|fact"><span class="entity_def" id="Code_DP.vi_code.code_policy_iteration|thm"><span>code_policy_iteration</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>policy_iteration</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_13767..13784"><span>policy_iteration'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_13751..13766"><span>policy_iteration'.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Gauss-Seidel Iteration</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.mono|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.simps|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.mono|thm"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.simps|thm"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial_def|axiom"><span class="entity_def" id="offset_14241..14257">partial_function</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>tailrec</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.cong|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial.cong|thm"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial|const"><span class="entity_def" id="offset_14268..14288">gs_iteration_partial</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gs_iteration_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>gs_iteration_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial_eq|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_partial_eq|thm"><span class="entity_def" id="offset_14460..14483">gs_iteration_partial_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_14268..14288"><span>gs_iteration_partial</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>gs_iteration</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>eps</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>gs_iteration.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_14241..14257"><span>gs_iteration_partial.simps</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>gs_iteration.simps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.gs_iteration_code_opt|fact"><span class="entity_def" id="Code_DP.vi_code.gs_iteration_code_opt|thm"><span>gs_iteration_code_opt</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>gs_iteration</span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_14268..14288"><span>gs_iteration_partial</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_14460..14483"><span>gs_iteration_partial_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>gs_iteration.simps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.vec_upd_def|fact"><span class="entity_def" id="Code_DP.vi_code.vec_upd_def|thm"><span class="entity_def" id="Code_DP.vi_code.vec_upd_def_raw|axiom"><span class="entity_def" id="offset_14847..14857">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.GS_rec_eq_fold|fact"><span class="entity_def" id="Code_DP.vi_code.GS_rec_eq_fold|thm"><span class="entity_def" id="offset_14917..14931">GS_rec_eq_fold</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>GS_rec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_rec_iter</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>xs</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_15203..15207">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_14847..14857"><span>vec_upd_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_15203..15207"><span>Cons</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_commute|fact"><span>eq_commute</span></a><span> </span><span>GS_rec_iter_eq_iter_max</span><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_rec_def</span></a><span> </span><span>GS_rec_fun_code'</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.GS_rec_fun_code&apos;&apos;&apos;&apos;|fact"><span class="entity_def" id="Code_DP.vi_code.GS_rec_fun_code&apos;&apos;&apos;&apos;|thm"><span>GS_rec_fun_code''''</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Code_DP.html#offset_14917..14931"><span>GS_rec_eq_fold</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>GS_rec_eq_elem</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.GS_iter_max_code|fact"><span class="entity_def" id="Code_DP.vi_code.GS_iter_max_code|thm"><span>GS_iter_max_code</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>GS_iter_max</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MAX</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span>GS_iter</span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>A_ne</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_iter_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_eq_Max|fact"><span>cSup_eq_Max</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;_def|axiom"><span class="entity_def" id="offset_15814..15829">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.opt_policy_gs&apos;&apos;|const"><span class="entity_def" id="offset_15830..15845">opt_policy_gs''</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span>opt_policy_gs</span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_15814..15829"><span>opt_policy_gs''.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.GS_rec_am_code&apos;_prod|fact"><span class="entity_def" id="Code_DP.vi_code.GS_rec_am_code&apos;_prod|thm"><span class="entity_def" id="offset_15954..15974">GS_rec_am_code'_prod</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>GS_rec_am_code'</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>  </span><span class="bound"><span>d</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_arg_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16212..16213">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>z</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span class="main"><span>(</span></span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span class="main"><span>(</span></span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="skolem"><span>w</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16319..16320">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>vd</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span>GS_iter_arg_max</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>vd</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_arg_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>xs</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16792..16796">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_16212..16213"><span>1</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_16792..16796"><span>Cons.IH</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_max</span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_16319..16320"><span>2</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_apply|fact"><span>fun_upd_apply</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_rec_am_code'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.code_GS_rec_am_arr_opt|fact"><span class="entity_def" id="Code_DP.vi_code.code_GS_rec_am_arr_opt|thm"><span>code_GS_rec_am_arr_opt</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_15830..15845"><span>opt_policy_gs''</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>am</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum|const"><span>least_max_arg_max_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>am</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.least_enum|const"><span>least_enum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17350..17351">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_15830..15845"><span>opt_policy_gs''</span></a><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Abs_Fun|const"><span>Abs_Fun</span></a><span> </span><span class="main"><span>(</span></span><span>opt_policy_gs</span><span> </span><span class="skolem"><span>v'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_15814..15829"><span>opt_policy_gs''.abs_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17459..17460">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>opt_policy_gs</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>opt_policy_gs'</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Bfun_inverse_fin|fact"><span>Bfun_inverse_fin</span></a><span> </span><span>opt_policy_gs_eq'</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_lambda_eta|fact"><span>vec_lambda_eta</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17611..17612">3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>opt_policy_gs'</span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><span>GS_rec_am_code</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>GS_rec_am_code_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17720..17721">4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>GS_rec_am_code</span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_arg_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>v</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>GS_rec_am_code'</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_15954..15974"><span>GS_rec_am_code'_prod</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18001..18002">5</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span>GS_iter_arg_max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_arg_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>vec_nth</span></a><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>xs</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>d</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18381..18385">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_18381..18385"><span>Cons</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda_inverse|fact"><span>vec_lambda_inverse</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_14847..14857"><span>vec_upd_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_commute|fact"><span>eq_commute</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18601..18602">6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_15830..15845"><span>opt_policy_gs''</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.foldl|const"><span>foldl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code.vec_upd|const"><span>vec_upd</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span>GS_iter_arg_max</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>d</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_17350..17351"><span>1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_17459..17460"><span>2</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_17611..17612"><span>3</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_17720..17721"><span>4</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_18001..18002"><span>5</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta|fact"><span>case_prod_beta</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta|fact"><span>case_prod_beta</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum_correct1|fact"><span>least_max_arg_max_enum_correct1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum_correct2|fact"><span>least_max_arg_max_enum_correct2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.least_max_arg_max_enum_correct2|fact"><span>least_max_arg_max_enum_correct2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_18601..18602"><span>6</span></a><span> </span><span>fin_actions</span><span> </span><span>A_ne</span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_iter_max_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_iter_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>GS_iter_arg_max_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_eq_Max|fact"><span>cSup_eq_Max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_beta&apos;|fact"><span>split_beta'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Modified Policy Iteration</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19345..19354">sublocale</span></span></span><span> </span><a class="entity_ref" href="Modified_Policy_Iteration.html#Modified_Policy_Iteration.MDP_MPI|locale"><span>MDP_MPI</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>Least</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>MDP_act_axioms</span><span> </span><span>MDP_reward_axioms</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.d0_def|fact"><span class="entity_def" id="Code_DP.vi_code.d0_def|thm"><span class="entity_def" id="Code_DP.vi_code.d0_def_raw|axiom"><span class="entity_def" id="offset_19463..19473">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_DP.vi_code.d0.cong|fact"><span class="entity_def" id="Code_DP.vi_code.d0.cong|thm"><span class="entity_def" id="Code_DP.vi_code.d0|const"><span class="entity_def" id="offset_19475..19477">d0</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;_def|axiom"><span class="entity_def" id="offset_19503..19518">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.d0&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.d0&apos;|const"><span class="entity_def" id="offset_19519..19522">d0'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#offset_19475..19477"><span>d0</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.d0_dec_det|fact"><span class="entity_def" id="Code_DP.vi_code.d0_dec_det|thm"><span class="entity_def" id="offset_19555..19565">d0_dec_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19475..19477"><span>d0</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>A_ne</span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19463..19473"><span>d0_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_7948..7954"><span>is_dec_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.v0_code|fact"><span class="entity_def" id="Code_DP.vi_code.v0_code|thm"><span>v0_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun|const"><span>vec_to_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub>_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>v0_mpi_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_bfun_def|fact"><span>vec_to_bfun_def</span></a><span> </span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.d0&apos;_code|fact"><span class="entity_def" id="Code_DP.vi_code.d0&apos;_code|thm"><span>d0'_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19519..19522"><span>d0'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>Ï</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19503..19518"><span>d0'.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19463..19473"><span>d0_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun_inject|fact"><span>Rep_Fun_inject</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun_def|fact"><span>vec_to_fun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.step_value_code|fact"><span class="entity_def" id="Code_DP.vi_code.step_value_code|thm"><span>step_value_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_8675..8680"><span>L_det</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>L_pow_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_8663..8673"><span>L_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.fixp_induct|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.raw_induct|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.mono|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.simps|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.fixp_induct|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.raw_induct|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.mono|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.simps|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial_def|axiom"><span class="entity_def" id="offset_20022..20038">partial_function</span></span></span></span></span></span></span></span></span></span></span></span><span>  </span><span class="main"><span>(</span></span><span>tailrec</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.cong|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial.cong|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial|const"><span class="entity_def" id="offset_20050..20061">mpi_partial</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mpi_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>policy_improvement</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span>  </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d'</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>mpi_partial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>L_pow</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20276..20281">lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.mpi_partial_eq_algo|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial_eq_algo|thm"><span class="entity_def" id="offset_20282..20301">mpi_partial_eq_algo</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_20050..20061"><span>mpi_partial</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_algo</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_algo_dom</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>,</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_20276..20281"><span>assms</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>termination_mpi_algo</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_algo.pinduct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_algo.psimps</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_20022..20038"><span>mpi_partial.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.rep_eq|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.abs_eq|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.transfer|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.rsp|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;_def|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.rep_eq|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.abs_eq|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.transfer|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.rsp|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;_def|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;_def|axiom"><span class="entity_def" id="offset_20603..20618">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.cong|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;.cong|thm"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;|const"><span class="entity_def" id="offset_20619..20631">mpi_partial'</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun|type"><span>Fun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_DP.html#offset_20050..20061"><span>mpi_partial</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;_code|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_partial&apos;_code|thm"><span>mpi_partial'_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_20619..20631"><span>mpi_partial'</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_12693..12712"><span>policy_improvement'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span>â<span class="hidden">â©</span><sub>b</sub></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span>  </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d'</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_20619..20631"><span>mpi_partial'</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>L_pow</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_20603..20618"><span>mpi_partial'_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_20022..20038"><span>mpi_partial.simps</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_12677..12692"><span>policy_improvement'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.r_min_code|fact"><span class="entity_def" id="Code_DP.vi_code.r_min_code|thm"><span>r_min_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>r_min</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MIN</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>MIN</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cInf_eq_Min|fact"><span>cInf_eq_Min</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.vi_code.mpi_user_code|fact"><span class="entity_def" id="Code_DP.vi_code.mpi_user_code|thm"><span>mpi_user_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_user</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> 
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_20619..20631"><span>mpi_partial'</span></a><span> </span><span class="free"><span>eps</span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19519..19522"><span>d0'</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.Fun.Rep_Fun|const"><span>Rep_Fun</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>mpi_user_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta|fact"><span>case_prod_beta</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_20603..20618"><span>mpi_partial'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_20282..20301"><span>mpi_partial_eq_algo</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19345..19354"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub>_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19555..19565"><span>d0_dec_det</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_DP.html#offset_19503..19518"><span>d0'.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#offset_19463..19473"><span>d0_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Auxiliary Equations</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>MAX</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../MDP-Rewards/Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_eq_Max|fact"><span>cSup_eq_Max</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.member_code|fact"><span class="entity_def" id="Code_DP.member_code|thm"><span>member_code</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>del</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.coset|const"><span>List.coset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>Â¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.member|const"><span>List.member</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_member|fact"><span>in_set_member</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec|const"><span>Matrix_To_IArray.iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|const"><span>Rep_iarray_type</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|const"><span>Rep_iarray_type</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.vec_to_iarray_def|fact"><span>Matrix_To_IArray.vec_to_iarray_def</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec_vec_to_iarray|fact"><span>iarray_to_vec_vec_to_iarray</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray.rep_eq|fact"><span>vec_to_iarray.rep_eq</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_iarray_inv|fact"><span>vec_to_iarray_inv</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.vec_to_iarray_plus|fact"><span>vec_to_iarray_plus</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec|const"><span>iarray_to_vec</span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec|const"><span>Matrix_To_IArray.iarray_to_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|const"><span>Rep_iarray_type</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_type.Rep_iarray_type|const"><span>Rep_iarray_type</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/IArray_Addenda.html#IArray_Addenda.minus_iarray_def|fact"><span>minus_iarray_def</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.iarray_to_vec_def|fact"><span>Matrix_To_IArray.iarray_to_vec_def</span></a><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.iarray_to_vec_def|fact"><span>iarray_to_vec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec_eq_iff|fact"><span>vec_eq_iff</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.to_nat_less_card|fact"><span>to_nat_less_card</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_DP.matrix_to_iarray_minus|fact"><span class="entity_def" id="Code_DP.matrix_to_iarray_minus|thm"><span>matrix_to_iarray_minus</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.matrix_to_iarray|const"><span>matrix_to_iarray</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.matrix_to_iarray|const"><span>matrix_to_iarray</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.matrix_to_iarray|const"><span>matrix_to_iarray</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.matrix_to_iarray_def|fact"><span>matrix_to_iarray_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_def|fact"><span>o_def</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/IArray_Addenda.html#IArray_Addenda.minus_iarray_def|fact"><span>minus_iarray_def</span></a><span> </span><a class="entity_ref" href="../Gauss_Jordan/Matrix_To_IArray.html#Matrix_To_IArray.vec_to_iarray_def|fact"><span>Matrix_To_IArray.vec_to_iarray_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="../Gauss_Jordan/Gauss_Jordan_PA_IArrays.html#Gauss_Jordan_PA_IArrays.matrix_to_iarray_fst_Gauss_Jordan_PA|fact"><span>matrix_to_iarray_fst_Gauss_Jordan_PA</span></a><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'><div class="head">
<h1>Theory Code_Mod</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Code_Mod</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Code_DP.html"><span>Code_DP</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Code Generation for Concrete Finite MDPs</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>locale</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP|locale"><span>mod_MDP</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>transition</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>reward</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>discount</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Mod.mod_MDP.vi_test_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.d0_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.r_min_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.L_pow_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.P_mat_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.mk_markovian_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_step_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.L_det_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_test_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.d0_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.r_min_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.L_pow_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.P_mat_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.mk_markovian_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_step_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.L_det_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_test_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.d0_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.r_min_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.L_pow_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.P_mat_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.mk_markovian_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_step_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.L_det_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b_def|axiom"><span>sublocale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> mdp</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code|locale"><span>vi_code</span></a><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.is_empty|const"><span>Set.is_empty</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="quoted"><span class="free"><span>transition</span></span></span><span> 
  </span><span class="quoted"><span class="free"><span>reward</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>discount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="free"><span>discount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>discount</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;L&gt;\&lt;^sub&gt;b|const"><span>â<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.â<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.L_det.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.L_det.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.L_det|const"><span>L_det</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.L_det</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration|const"><span>value_iteration</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.value_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_policy&apos;|const"><span>vi_policy'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_policy'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy&apos;|const"><span>find_policy'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.find_policy'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.find_policy_impl|const"><span>find_policy_impl</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.find_policy_impl</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.is_opt_act|const"><span>is_opt_act</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.is_opt_act</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.value_iteration_partial|const"><span>value_iteration_partial</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.value_iteration_partial</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration|const"><span>policy_iteration</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.is_dec_det|const"><span>is_dec_det</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.is_dec_det</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_step.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_step.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_step|const"><span>policy_step</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_step</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_improvement|const"><span>policy_improvement</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_improvement</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval|const"><span>policy_eval</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.mk_markovian|const"><span>mk_markovian</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mk_markovian</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_eval&apos;|const"><span>policy_eval'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_partial&apos;|const"><span>policy_iteration_partial'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration_partial'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration&apos;|const"><span>policy_iteration'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_step&apos;|const"><span>policy_iteration_policy_step'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_step'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_eval&apos;|const"><span>policy_iteration_policy_eval'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.policy_iteration_policy_improvement&apos;|const"><span>policy_iteration_policy_improvement'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_improvement'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration|const"><span>gs_iteration</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.gs_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.gs_iteration_partial|const"><span>gs_iteration_partial</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.gs_iteration_partial</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_gs_policy|const"><span>vi_gs_policy</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_gs_policy</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs|const"><span>opt_policy_gs</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.opt_policy_gs</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.opt_policy_gs&apos;&apos;|const"><span>opt_policy_gs''</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.opt_policy_gs''</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.P_mat.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.P_mat.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.P_mat|const"><span>P_mat</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.P_mat</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.r_vec&apos;|const"><span>r_vec'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.r_vec'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_rec_fun\&lt;^sub&gt;b|const"><span>GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter_max|const"><span>GS_iter_max</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_iter_max</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.GS_iter|const"><span>GS_iter</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_iter</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_user|const"><span>mpi_user</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mpi_user</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi\&lt;^sub&gt;b|const"><span>v0_mpi<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.v0_mpi<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.mpi_partial&apos;|const"><span>mpi_partial'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mpi_partial'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.L_pow.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.L_pow.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.L_pow|const"><span>L_pow</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.L_pow</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.v0_mpi|const"><span>v0_mpi</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.v0_mpi</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.r_min.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.r_min.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.r_min|const"><span>r_min</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.r_min</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.d0.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.d0.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.d0|const"><span>d0</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.d0</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.d0&apos;|const"><span>d0'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.d0'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.\&lt;nu&gt;\&lt;^sub&gt;b|const"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.Î½<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP.vi_test.cong|fact"><span class="entity_def" id="Code_Mod.mod_MDP.vi_test.cong|thm"><span class="entity_def" id="Code_Mod.mod_MDP.vi_test|const"><span>vi_test</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_test</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.is_empty_def|fact"><span>Set.is_empty_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Mod.vi_test_def|fact"><span class="entity_def" id="Code_Mod.\&lt;nu&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.d0&apos;_def|fact"><span class="entity_def" id="Code_Mod.d0_def|fact"><span class="entity_def" id="Code_Mod.r_min_def|fact"><span class="entity_def" id="Code_Mod.v0_mpi_def|fact"><span class="entity_def" id="Code_Mod.L_pow_def|fact"><span class="entity_def" id="Code_Mod.mpi_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.v0_mpi\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mpi_user_def|fact"><span class="entity_def" id="Code_Mod.GS_iter_def|fact"><span class="entity_def" id="Code_Mod.GS_iter_max_def|fact"><span class="entity_def" id="Code_Mod.GS_rec_fun\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.r_vec&apos;_def|fact"><span class="entity_def" id="Code_Mod.P_mat_def|fact"><span class="entity_def" id="Code_Mod.opt_policy_gs&apos;&apos;_def|fact"><span class="entity_def" id="Code_Mod.opt_policy_gs_def|fact"><span class="entity_def" id="Code_Mod.vi_gs_policy_def|fact"><span class="entity_def" id="Code_Mod.gs_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.gs_iteration_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration_policy_improvement&apos;_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration_policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration_policy_step&apos;_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration&apos;_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mk_markovian_def|fact"><span class="entity_def" id="Code_Mod.policy_eval_def|fact"><span class="entity_def" id="Code_Mod.policy_improvement_def|fact"><span class="entity_def" id="Code_Mod.policy_step_def|fact"><span class="entity_def" id="Code_Mod.is_dec_det_def|fact"><span class="entity_def" id="Code_Mod.policy_iteration_def|fact"><span class="entity_def" id="Code_Mod.value_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.is_opt_act_def|fact"><span class="entity_def" id="Code_Mod.find_policy_impl_def|fact"><span class="entity_def" id="Code_Mod.find_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.vi_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.value_iteration_def|fact"><span class="entity_def" id="Code_Mod.L_det_def|fact"><span class="entity_def" id="Code_Mod.\&lt;L&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_user_code|fact"><span class="entity_def" id="Code_Mod.mdp.r_min_code|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;_code|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial_eq_algo|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.fixp_induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.raw_induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.mono|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.simps|fact"><span class="entity_def" id="Code_Mod.mdp.step_value_code|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;_code|fact"><span class="entity_def" id="Code_Mod.mdp.v0_code|fact"><span class="entity_def" id="Code_Mod.mdp.d0_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.d0&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.d0_def|fact"><span class="entity_def" id="Code_Mod.mdp.code_GS_rec_am_arr_opt|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;_prod|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_iter_max_code|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;&apos;&apos;&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_fold|fact"><span class="entity_def" id="Code_Mod.mdp.vec_upd_def|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_code_opt|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial_eq|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.mono|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.simps|fact"><span class="entity_def" id="Code_Mod.mdp.code_policy_iteration|fact"><span class="entity_def" id="Code_Mod.mdp.code_policy_iteration&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_vec_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_vec|fact"><span class="entity_def" id="Code_Mod.mdp.mat_eq_blinfun|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.r_vec&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.P_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.pi_eq_partial|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.mono|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.simps|fact"><span class="entity_def" id="Code_Mod.mdp.code_vi_policy&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.code_find_policy_impl_opt|fact"><span class="entity_def" id="Code_Mod.mdp.code_find_policy_impl|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl_def|fact"><span class="entity_def" id="Code_Mod.mdp.code_value_iteration|fact"><span class="entity_def" id="Code_Mod.mdp.code_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.code_L_det|fact"><span class="entity_def" id="Code_Mod.mdp.L_det_def|fact"><span class="entity_def" id="Code_Mod.mdp.vi_eq_partial|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.fixp_induct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.raw_induct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.mono|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.simps|fact"><span class="entity_def" id="Code_Mod.mdp.vi_test_def|fact"><span class="entity_def" id="Code_Mod.mdp.vi_code_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_user_opt|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_user_eq|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_user_def|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.v0_mpi_def|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_opt|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_eq_mpi|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_def&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.termination_mpi_algo|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_Suc&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.elims|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.termination|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.domintros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.termination|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_val_term_ex|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_opt|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_eps_opt|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_conv|fact"><span class="entity_def" id="Code_Mod.mdp.w_conv|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt_n|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="Code_Mod.mdp.w.elims|fact"><span class="entity_def" id="Code_Mod.mdp.w.induct|fact"><span class="entity_def" id="Code_Mod.mdp.w.simps|fact"><span class="entity_def" id="Code_Mod.mdp.w.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.w.cases|fact"><span class="entity_def" id="Code_Mod.mdp.w.termination|fact"><span class="entity_def" id="Code_Mod.mdp.w.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.w.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.w_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.w_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.w_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.w_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.w_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.w_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.w_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.w_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.w_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.w_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_includes_value_it|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_val_eq|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_val_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_val_zero|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_mpi_pol|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_is_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_zero|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_def|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_val_def|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.elims|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.termination|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.L_pow_\&lt;L&gt;\&lt;^sub&gt;b_mono_inv|fact"><span class="entity_def" id="Code_Mod.mdp.L_pow_eq_W|fact"><span class="entity_def" id="Code_Mod.mdp.L_pow_eq|fact"><span class="entity_def" id="Code_Mod.mdp.sum_telescope&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.L_pow_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_W_ge|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_le|fact"><span class="entity_def" id="Code_Mod.mdp.W_ge_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.W_le_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.W_eq_L_iter|fact"><span class="entity_def" id="Code_Mod.mdp.W_def|fact"><span class="entity_def" id="Code_Mod.mdp.dist_U\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_fix_unique|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_tendsto|fact"><span class="entity_def" id="Code_Mod.mdp.lim_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.L_iter_le_U\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_mono|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_convergent|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_conv|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_contraction|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.U_one_eq_\&lt;L&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.U_zero|fact"><span class="entity_def" id="Code_Mod.mdp.U_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_eq_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.B_eq_\&lt;L&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.B_def|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_MPI_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_eq_iter_max|fact"><span class="entity_def" id="Code_Mod.mdp.vi_gs_policy_opt|fact"><span class="entity_def" id="Code_Mod.mdp.vi_gs_policy_def|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_error_bound_gs|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_inner_vec|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_error|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs_eq&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_arg_max_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code_eq|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_is_arg_max|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_is_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_eq_GS_iter&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_eq_GS_iter|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_iter_arg_max_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_iter_max|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_iter|fact"><span class="entity_def" id="Code_Mod.mdp.GS_iter_max_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_iter_def|fact"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_inv_extend&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|fact"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;_split_dist|fact"><span class="entity_def" id="Code_Mod.mdp.THE_fix_GS_rec_fun\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.elims|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.induct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.simps|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.cases|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.termination|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.gs_rel_dec|fact"><span class="entity_def" id="Code_Mod.mdp.GS_QR_disc_le_disc|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_lt_dist_opt|fact"><span class="entity_def" id="Code_Mod.mdp.norm_GS_QR_le_disc|fact"><span class="entity_def" id="Code_Mod.mdp.GS_inv_blinfun_to_matrix|fact"><span class="entity_def" id="Code_Mod.mdp.ex_opt_blinfun|fact"><span class="entity_def" id="Code_Mod.mdp.invertible_Q_GS|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_eq_GS_inv|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_GS_inv&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.ex_GS_opt|fact"><span class="entity_def" id="Code_Mod.mdp.ex_GS_opt_le|fact"><span class="entity_def" id="Code_Mod.mdp.ext_GS_opt_le|fact"><span class="entity_def" id="Code_Mod.mdp.mult_mat_vec_nth|fact"><span class="entity_def" id="Code_Mod.mdp.GS_opt_indep_high|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_gs_iff|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;&apos;&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_rec_step_indep&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_rec_step_indep|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_eq_GS_inv|fact"><span class="entity_def" id="Code_Mod.mdp.Q_mat_invertible|fact"><span class="entity_def" id="Code_Mod.mdp.strict_lower_triangular_mat_mult|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_eq_GS_inv|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_GS_inv|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec_step_act&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec_step_act|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_elem|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_elem|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code|fact"><span class="entity_def" id="Code_Mod.mdp.sorted_list_of_set_split&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.sorted_list_of_set_split|fact"><span class="entity_def" id="Code_Mod.mdp.foldl_upd_notin&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.foldl_upd_notin|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_eq_GS_iter|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_inner_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_vec|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_def&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_elem|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_elem_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.elims|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.induct|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.simps|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.cases|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.termination|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.ex_is_arg_max_GS|fact"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_le|fact"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_inv_extend|fact"><span class="entity_def" id="Code_Mod.mdp.GS_inv_rec|fact"><span class="entity_def" id="Code_Mod.mdp.GS_indep_high_states|fact"><span class="entity_def" id="Code_Mod.mdp.inv_Q_mat_indep|fact"><span class="entity_def" id="Code_Mod.mdp.lt_Q_inv|fact"><span class="entity_def" id="Code_Mod.mdp.inv_Q_mat_suminf|fact"><span class="entity_def" id="Code_Mod.mdp.GS_inv_def|fact"><span class="entity_def" id="Code_Mod.mdp.triangular_mat_R|fact"><span class="entity_def" id="Code_Mod.mdp.R_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.Q_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.splitting_gauss|fact"><span class="entity_def" id="Code_Mod.mdp.R_GS_def|fact"><span class="entity_def" id="Code_Mod.mdp.Q_GS_def|fact"><span class="entity_def" id="Code_Mod.mdp.lt_P_lower|fact"><span class="entity_def" id="Code_Mod.mdp.slt_P_lower|fact"><span class="entity_def" id="Code_Mod.mdp.triangular_mat_P_upper|fact"><span class="entity_def" id="Code_Mod.mdp.row_P_lower_indep|fact"><span class="entity_def" id="Code_Mod.mdp.row_P_upper_indep|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;U_le_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;L_le_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_less_one|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_le_one|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_le|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;L|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_lower|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_upper|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_dec|fact"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;U|fact"><span class="entity_def" id="Code_Mod.mdp.P_dec_elem|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;L_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;U_def|fact"><span class="entity_def" id="Code_Mod.mdp.P_lower_def|fact"><span class="entity_def" id="Code_Mod.mdp.P_upper_def|fact"><span class="entity_def" id="Code_Mod.mdp.P_dec_def|fact"><span class="entity_def" id="Code_Mod.mdp.norm_splitting_le|fact"><span class="entity_def" id="Code_Mod.mdp.inv_one_sub_Q&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_fin_eq_det|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_fin_eq_det|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_ord_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.GS.find_policy_QR_error_bound|fact"><span class="entity_def" id="Code_Mod.mdp.GS.L_split_contraction|fact"><span class="entity_def" id="Code_Mod.mdp.GS.L_split_fix|fact"><span class="entity_def" id="Code_Mod.mdp.GS.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_fix|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_tendsto_opt|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_lim|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_contraction|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_def&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;_split_bfun_aux|fact"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;_split_def|fact"><span class="entity_def" id="Code_Mod.mdp.GS.a_nonneg|fact"><span class="entity_def" id="Code_Mod.mdp.GS.QR_le_QR_disc|fact"><span class="entity_def" id="Code_Mod.mdp.GS.splitting|fact"><span class="entity_def" id="Code_Mod.mdp.GS.norm_QR_less_one|fact"><span class="entity_def" id="Code_Mod.mdp.GS.QR_mono|fact"><span class="entity_def" id="Code_Mod.mdp.GS.QR_nonneg|fact"><span class="entity_def" id="Code_Mod.mdp.GS.R_mono|fact"><span class="entity_def" id="Code_Mod.mdp.GS.R_nonneg|fact"><span class="entity_def" id="Code_Mod.mdp.GS.Q_invertible|fact"><span class="entity_def" id="Code_Mod.mdp.GS.Q_nonneg|fact"><span class="entity_def" id="Code_Mod.mdp.GS.splitting_eq|fact"><span class="entity_def" id="Code_Mod.mdp.GS.inv_Q_mono|fact"><span class="entity_def" id="Code_Mod.mdp.GS.arg_max_ex_split|fact"><span class="entity_def" id="Code_Mod.mdp.GS.QR_contraction|fact"><span class="entity_def" id="Code_Mod.mdp.GS.is_splitting|fact"><span class="entity_def" id="Code_Mod.mdp.GS.MDP_QR_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_correct|fact"><span class="entity_def" id="Code_Mod.mdp.pi_pi|fact"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_pi&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.elims|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.induct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.simps|fact"><span class="entity_def" id="Code_Mod.mdp.eval_eq_imp_policy_eq|fact"><span class="entity_def" id="Code_Mod.mdp.finite_rel|fact"><span class="entity_def" id="Code_Mod.mdp.finite_D\&lt;^sub&gt;D|fact"><span class="entity_def" id="Code_Mod.mdp.fin_actions|fact"><span class="entity_def" id="Code_Mod.mdp.fin_states|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_PI_finite_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.vi_policy&apos;_opt|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy&apos;_error_bound|fact"><span class="entity_def" id="Code_Mod.mdp.vi_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step_eq_imp_opt|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval_mon|fact"><span class="entity_def" id="Code_Mod.mdp.eval_policy_step_L|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_improving|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_is_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_pi|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.cases|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.termination|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.policy_step_def|fact"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_opt_acts|fact"><span class="entity_def" id="Code_Mod.mdp.some_opt_acts_in_A|fact"><span class="entity_def" id="Code_Mod.mdp.is_opt_act_some|fact"><span class="entity_def" id="Code_Mod.mdp.is_opt_act_def|fact"><span class="entity_def" id="Code_Mod.mdp.arb_act_in|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_act_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.invertible_nu_inv_max|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_linear_vec_lambda_blinfun|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_linear_vec_lambda|fact"><span class="entity_def" id="Code_Mod.mdp.apply_nu_inv_mat|fact"><span class="entity_def" id="Code_Mod.mdp.nu_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.nu_inv_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.Ek_mat_def|fact"><span class="entity_def" id="Code_Mod.mdp.fun_to_matrix_def|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_finite_type_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.lemma_6_3_1_d|fact"><span class="entity_def" id="Code_Mod.mdp.vi_policy_opt|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_error_bound|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_iter_mono|fact"><span class="entity_def" id="Code_Mod.mdp.vi_policy_def|fact"><span class="entity_def" id="Code_Mod.mdp.find_policy_def|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_error|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_opt_eps|fact"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;_dist|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.elims|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.induct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.simps|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.pelims|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.cases|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.termination|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.pinduct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration.psimps|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.simps|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.induct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.cases|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.intros|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.inducts|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.simps|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.induct|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.cases|fact"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.intros|fact"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_lt_dist_opt|fact"><span class="entity_def" id="Code_Mod.mdp.vi_rel_dec|fact"><span class="entity_def" id="Code_Mod.mdp.policy_eval_def|fact"><span class="entity_def" id="Code_Mod.mdp.ex_improving_det|fact"><span class="entity_def" id="Code_Mod.mdp.ex_opt_det|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_L\&lt;^sub&gt;a_max|fact"><span class="entity_def" id="Code_Mod.mdp.arg_max_on_in|fact"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_le_arg_max|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_10_a_aux&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Sup_att|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_att_\&lt;L&gt;_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.L_iter_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_stationary_\&lt;nu&gt;\&lt;^sub&gt;b_fin|fact"><span class="entity_def" id="Code_Mod.mdp.L_iter|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_zero|fact"><span class="entity_def" id="Code_Mod.mdp.max_L_ex_def|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_3_1_b_aux|fact"><span class="entity_def" id="Code_Mod.mdp.lemma_6_3_1_a|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_det|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_le_det|fact"><span class="entity_def" id="Code_Mod.mdp.ex_det_dist_eps|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_11|fact"><span class="entity_def" id="Code_Mod.mdp.ex_det_eps|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_10|fact"><span class="entity_def" id="Code_Mod.mdp.opt_imp_opt_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_det|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_eq_SUP_det|fact"><span class="entity_def" id="Code_Mod.mdp.SUP_L\&lt;^sub&gt;a_eq_det|fact"><span class="entity_def" id="Code_Mod.mdp.integrable_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="Code_Mod.mdp.SUP_step_det_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_sup_att_dec|fact"><span class="entity_def" id="Code_Mod.mdp.SUP_step_MR_eq|fact"><span class="entity_def" id="Code_Mod.mdp.L_eq_L\&lt;^sub&gt;a_det|fact"><span class="entity_def" id="Code_Mod.mdp.L_eq_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_int|fact"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_bounded|fact"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_le|fact"><span class="entity_def" id="Code_Mod.mdp.improving_att_imp_det_opt|fact"><span class="entity_def" id="Code_Mod.mdp.conserving_imp_opt&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.conserving_imp_opt|fact"><span class="entity_def" id="Code_Mod.mdp.ex_improving_imp_conserving|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_alt&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_alt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_conserving|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_imp_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_ge|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_iff|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_alt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_improving|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_imp_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_ge|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_D_MR|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_iff|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_def|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_6&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_6|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_lim|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_fix|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_fix_iff_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_conv|fact"><span class="entity_def" id="Code_Mod.mdp.is_contraction_L|fact"><span class="entity_def" id="Code_Mod.mdp.contraction_L|fact"><span class="entity_def" id="Code_Mod.mdp.is_contraction_\&lt;L&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.bounded_P|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_fix_imp_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_inc_le_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_dec_ge_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pow_bfun_one|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_bfun_one|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;d_lim|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_tendsto_\&lt;nu&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_L_le|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_elem|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc_n_elem|fact"><span class="entity_def" id="Code_Mod.mdp.p_n_\&lt;pi&gt;_MR|fact"><span class="entity_def" id="Code_Mod.mdp.p_n_\&lt;pi&gt;_MD|fact"><span class="entity_def" id="Code_Mod.mdp.step_mono_elem|fact"><span class="entity_def" id="Code_Mod.mdp.step_mono|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_mono|fact"><span class="entity_def" id="Code_Mod.mdp.L_mono|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_mono|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_mono|fact"><span class="entity_def" id="Code_Mod.mdp.L_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_def|fact"><span class="entity_def" id="Code_Mod.mdp.L_bdd_above|fact"><span class="entity_def" id="Code_Mod.mdp.L_bounded&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.L_bounded|fact"><span class="entity_def" id="Code_Mod.mdp.apply_bfun_bdd_above|fact"><span class="entity_def" id="Code_Mod.mdp.apply_bfun_bounded_above|fact"><span class="entity_def" id="Code_Mod.mdp.L_\&lt;nu&gt;_fix_iff|fact"><span class="entity_def" id="Code_Mod.mdp.L_fix_\&lt;nu&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.L_\&lt;nu&gt;_fix|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_step|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_eq_\&lt;P&gt;\&lt;^sub&gt;X_one|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_stationary|fact"><span class="entity_def" id="Code_Mod.mdp.abs_L_le|fact"><span class="entity_def" id="Code_Mod.mdp.norm_L_le|fact"><span class="entity_def" id="Code_Mod.mdp.L_def|fact"><span class="entity_def" id="Code_Mod.mdp.lemma_6_1_2_b|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_suminf_pos|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_suminf_ge|fact"><span class="entity_def" id="Code_Mod.mdp.convergent_disc_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.disc_\&lt;P&gt;\&lt;^sub&gt;1_lim|fact"><span class="entity_def" id="Code_Mod.mdp.disc_\&lt;P&gt;\&lt;^sub&gt;1_tendsto|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_sum_ge|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_sum_pos|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_n_disc_pos|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_n_pos|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pos|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1_l_less|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1_pow|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_const|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pow|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_elem|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_as_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_MR|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DR|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DD|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_MD|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt|fact"><span class="entity_def" id="Code_Mod.mdp.sum_disc_bound&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.sum_disc_bound|fact"><span class="entity_def" id="Code_Mod.mdp.sum_disc_lim_l|fact"><span class="entity_def" id="Code_Mod.mdp.norm_bfun_disc_le&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.norm_bfun_disc_le|fact"><span class="entity_def" id="Code_Mod.mdp.summable_disc_norm|fact"><span class="entity_def" id="Code_Mod.mdp.summable_bfun_disc|fact"><span class="entity_def" id="Code_Mod.mdp.summable_norm_bfun_disc|fact"><span class="entity_def" id="Code_Mod.mdp.norm_P_n|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_sconst|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.disc_reward_tendsto|fact"><span class="entity_def" id="Code_Mod.mdp.summable_disc_reward_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_reward&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bounded_r|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bound_r|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;X_apply|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bounded_linear|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_0|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_def|fact"><span class="entity_def" id="Code_Mod.mdp.summable_disc_reward|fact"><span class="entity_def" id="Code_Mod.mdp.summable_discI|fact"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_I&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_I|fact"><span class="entity_def" id="Code_Mod.mdp.norm_l_pow_eq|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.norm_r_dec_le|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.r_dec_eq_r_K0|fact"><span class="entity_def" id="Code_Mod.mdp.abs_r_dec_le|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_eq_MR|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_le_\&lt;nu&gt;_opt|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_MD_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_as_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;nu&gt;_le|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_Pn|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_le|fact"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_le|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_\&lt;nu&gt;_trace|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_lim|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_def|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_eq_Pn|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_zero|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_fin_le|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_def|fact"><span class="entity_def" id="Code_Mod.mdp.expectation_abs_r_le|fact"><span class="entity_def" id="Code_Mod.mdp.integrable_r_nth|fact"><span class="entity_def" id="Code_Mod.mdp.measurable_r_nth|fact"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;nu&gt;_trace|fact"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;nu&gt;_trace_fin|fact"><span class="entity_def" id="Code_Mod.mdp.measurable_suminf_reward|fact"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_trace_fin_le|fact"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_trace_le|fact"><span class="entity_def" id="Code_Mod.mdp.summable_r_disc|fact"><span class="entity_def" id="Code_Mod.mdp.summable_disc|fact"><span class="entity_def" id="Code_Mod.mdp.r\&lt;^sub&gt;M_nonneg|fact"><span class="entity_def" id="Code_Mod.mdp.abs_r\&lt;^sub&gt;M_eq_r\&lt;^sub&gt;M|fact"><span class="entity_def" id="Code_Mod.mdp.abs_r_le_r\&lt;^sub&gt;M|fact"><span class="entity_def" id="Code_Mod.mdp.r\&lt;^sub&gt;M_def|fact"><span class="entity_def" id="Code_Mod.mdp.abs_disc_eq|fact"><span class="entity_def" id="Code_Mod.mdp.r_bounded&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.r_bfun|fact"><span class="entity_def" id="Code_Mod.mdp.r_bounded|fact"><span class="entity_def" id="Code_Mod.mdp.disc_lt_one|fact"><span class="entity_def" id="Code_Mod.mdp.zero_le_disc|fact"><span class="entity_def" id="Code_Mod.mdp.MDP_reward_axioms|fact"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_eq_\&lt;T&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_markovian_eq_Xn&apos;_bind|fact"><span class="entity_def" id="Code_Mod.mdp.Yn&apos;_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_split|fact"><span class="entity_def" id="Code_Mod.mdp.Suc_Xn&apos;_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.Suc_Xn&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_Pn&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.PSuc&apos;_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.PSuc&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_return_pmf|fact"><span class="entity_def" id="Code_Mod.mdp.X0&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.P0&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.pmf_K_st|fact"><span class="entity_def" id="Code_Mod.mdp.K_st_def|fact"><span class="entity_def" id="Code_Mod.mdp.K0&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.Yn&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_def|fact"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;T&gt;_bounded|fact"><span class="entity_def" id="Code_Mod.mdp.integral_\&lt;T&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.nn_integral_\&lt;T&gt;|fact"><span class="entity_def" id="Code_Mod.mdp.measurable_ident_Suc&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_sets|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_prob_space|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_return_eq|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_return|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq_return|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq_return_distr|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_def|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_as_markovian_eq|fact"><span class="entity_def" id="Code_Mod.mdp.is_policy_as_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.is_\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_as_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.Yn_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.Y0|fact"><span class="entity_def" id="Code_Mod.mdp.Yn_def|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_markovian_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_Xn_Y_cond&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_Xn_Y_cond|fact"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_0|fact"><span class="entity_def" id="Code_Mod.mdp.pmf_Y_cond_X|fact"><span class="entity_def" id="Code_Mod.mdp.pmf_Pn|fact"><span class="entity_def" id="Code_Mod.mdp.pmf_Pn_pair|fact"><span class="entity_def" id="Code_Mod.mdp.prob_Pn_X|fact"><span class="entity_def" id="Code_Mod.mdp.prob_K0_X|fact"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_def|fact"><span class="entity_def" id="Code_Mod.mdp.set_pmf_PSuc|fact"><span class="entity_def" id="Code_Mod.mdp.set_pmf_X0|fact"><span class="entity_def" id="Code_Mod.mdp.Xn_Suc&apos;|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_markovian_eq_Xn_bind|fact"><span class="entity_def" id="Code_Mod.mdp.Xn_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.X0|fact"><span class="entity_def" id="Code_Mod.mdp.Xn_def|fact"><span class="entity_def" id="Code_Mod.mdp.T_in_A|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_in_A|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_T|fact"><span class="entity_def" id="Code_Mod.mdp.Pn.simps|fact"><span class="entity_def" id="Code_Mod.mdp.Pn_def|fact"><span class="entity_def" id="Code_Mod.mdp.nn_integral_T|fact"><span class="entity_def" id="Code_Mod.mdp.integral_T|fact"><span class="entity_def" id="Code_Mod.mdp.T_eq_distr|fact"><span class="entity_def" id="Code_Mod.mdp.T_eq|fact"><span class="entity_def" id="Code_Mod.mdp.K0_MDP_cont_eq|fact"><span class="entity_def" id="Code_Mod.mdp.T_subprob_space|fact"><span class="entity_def" id="Code_Mod.mdp.T_subprob|fact"><span class="entity_def" id="Code_Mod.mdp.prob_space_T|fact"><span class="entity_def" id="Code_Mod.mdp.is_policy_MDP_cont|fact"><span class="entity_def" id="Code_Mod.mdp.space_T|fact"><span class="entity_def" id="Code_Mod.mdp.space_stream_space_ne|fact"><span class="entity_def" id="Code_Mod.mdp.sets_T|fact"><span class="entity_def" id="Code_Mod.mdp.T_def|fact"><span class="entity_def" id="Code_Mod.mdp.space_M|fact"><span class="entity_def" id="Code_Mod.mdp.count_space_M|fact"><span class="entity_def" id="Code_Mod.mdp.fst_K0|fact"><span class="entity_def" id="Code_Mod.mdp.set_pmf_K0|fact"><span class="entity_def" id="Code_Mod.mdp.pmf_K0|fact"><span class="entity_def" id="Code_Mod.mdp.vimage_pair|fact"><span class="entity_def" id="Code_Mod.mdp.K0_iff|fact"><span class="entity_def" id="Code_Mod.mdp.K0_def|fact"><span class="entity_def" id="Code_Mod.mdp.Suc_mk_markovian|fact"><span class="entity_def" id="Code_Mod.mdp.is_policy_\&lt;pi&gt;_Suc|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;pi&gt;_Suc_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_stationary_const|fact"><span class="entity_def" id="Code_Mod.mdp.is_stationary_const_iff|fact"><span class="entity_def" id="Code_Mod.mdp.is_stationary_def|fact"><span class="entity_def" id="Code_Mod.mdp.policies_ne|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_ne|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_ne|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_to_MR|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_MR_iff|fact"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_imp_policies|fact"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_det_def|fact"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_nil|fact"><span class="entity_def" id="Code_Mod.mdp.is_markovian_mk|fact"><span class="entity_def" id="Code_Mod.mdp.is_markovian_mk_iff|fact"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_markovian_def|fact"><span class="entity_def" id="Code_Mod.mdp.mk_det_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_deterministic_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_policy_def|fact"><span class="entity_def" id="Code_Mod.mdp.ex_dec|fact"><span class="entity_def" id="Code_Mod.mdp.D\&lt;^sub&gt;R_ne|fact"><span class="entity_def" id="Code_Mod.mdp.D_det_ne|fact"><span class="entity_def" id="Code_Mod.mdp.ex_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.SOME_is_dec_det|fact"><span class="entity_def" id="Code_Mod.mdp.D_det_to_MR|fact"><span class="entity_def" id="Code_Mod.mdp.is_dec_mk_dec_det_iff|fact"><span class="entity_def" id="Code_Mod.mdp.mk_dec_det_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_def|fact"><span class="entity_def" id="Code_Mod.mdp.is_decI|fact"><span class="entity_def" id="Code_Mod.mdp.is_dec_def|fact"><span class="entity_def" id="Code_Mod.mdp.A_ne|fact"><span class="entity_def" id="Code_Mod.mdp.discrete_MDP_axioms|fact"><span class="entity_def" id="Code_Mod.mod_MDP_vi_test_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;nu&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_d0&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_d0_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_r_min_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_L_pow_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_user_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_max_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_GS_rec_fun\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_r_vec&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_P_mat_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs&apos;&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_vi_gs_policy_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_improvement&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_step&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_partial&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_mk_markovian_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_improvement_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_step_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_is_dec_det_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_partial_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_is_opt_act_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy_impl_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_vi_policy&apos;_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_L_det_def|fact"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="Code_Mod.vi_test_def|thm"><span class="entity_def" id="Code_Mod.\&lt;nu&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.d0&apos;_def|thm"><span class="entity_def" id="Code_Mod.d0_def|thm"><span class="entity_def" id="Code_Mod.r_min_def|thm"><span class="entity_def" id="Code_Mod.v0_mpi_def|thm"><span class="entity_def" id="Code_Mod.L_pow_def|thm"><span class="entity_def" id="Code_Mod.mpi_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.v0_mpi\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mpi_user_def|thm"><span class="entity_def" id="Code_Mod.GS_iter_def|thm"><span class="entity_def" id="Code_Mod.GS_iter_max_def|thm"><span class="entity_def" id="Code_Mod.GS_rec_fun\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.r_vec&apos;_def|thm"><span class="entity_def" id="Code_Mod.P_mat_def|thm"><span class="entity_def" id="Code_Mod.opt_policy_gs&apos;&apos;_def|thm"><span class="entity_def" id="Code_Mod.opt_policy_gs_def|thm"><span class="entity_def" id="Code_Mod.vi_gs_policy_def|thm"><span class="entity_def" id="Code_Mod.gs_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.gs_iteration_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration_policy_improvement&apos;_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration_policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration_policy_step&apos;_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration&apos;_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mk_markovian_def|thm"><span class="entity_def" id="Code_Mod.policy_eval_def|thm"><span class="entity_def" id="Code_Mod.policy_improvement_def|thm"><span class="entity_def" id="Code_Mod.policy_step_def|thm"><span class="entity_def" id="Code_Mod.is_dec_det_def|thm"><span class="entity_def" id="Code_Mod.policy_iteration_def|thm"><span class="entity_def" id="Code_Mod.value_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.is_opt_act_def|thm"><span class="entity_def" id="Code_Mod.find_policy_impl_def|thm"><span class="entity_def" id="Code_Mod.find_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.vi_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.value_iteration_def|thm"><span class="entity_def" id="Code_Mod.L_det_def|thm"><span class="entity_def" id="Code_Mod.\&lt;L&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial_eq_algo|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.fixp_induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.raw_induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.mono|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial.simps|thm"><span class="entity_def" id="Code_Mod.mdp.d0_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.d0_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;_prod|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_fold|thm"><span class="entity_def" id="Code_Mod.mdp.vec_upd_def|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial_eq|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.mono|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial.simps|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_vec|thm"><span class="entity_def" id="Code_Mod.mdp.mat_eq_blinfun|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.r_vec&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.P_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.pi_eq_partial|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.mono|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial.simps|thm"><span class="entity_def" id="Code_Mod.mdp.code_find_policy_impl|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl_def|thm"><span class="entity_def" id="Code_Mod.mdp.L_det_def|thm"><span class="entity_def" id="Code_Mod.mdp.vi_eq_partial|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.fixp_induct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.raw_induct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.mono|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial.simps|thm"><span class="entity_def" id="Code_Mod.mdp.vi_test_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_user_opt|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_user_eq|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_user_def|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_opt|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_eq_mpi|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_def&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.termination_mpi_algo|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_Suc&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.simps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.simps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.termination|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.psimps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.psimps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.intros(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.intros(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.domintros|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.termination|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.psimps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.intros|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_val_term_ex|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_opt|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_eps_opt|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_conv(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_conv(1)|thm"><span class="entity_def" id="Code_Mod.mdp.w_conv|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt_n|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;nu&gt;\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="Code_Mod.mdp.w.simps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.w.simps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.w.termination|thm"><span class="entity_def" id="Code_Mod.mdp.w.psimps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.w.psimps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.w_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.intros(2)|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.intros(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_includes_value_it|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_val_eq|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_val_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_mpi_pol|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_is_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_val_def|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.simps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.simps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.termination|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.psimps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.psimps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.intros(2)|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.intros(1)|thm"><span class="entity_def" id="Code_Mod.mdp.L_pow_\&lt;L&gt;\&lt;^sub&gt;b_mono_inv|thm"><span class="entity_def" id="Code_Mod.mdp.L_pow_eq_W|thm"><span class="entity_def" id="Code_Mod.mdp.L_pow_eq|thm"><span class="entity_def" id="Code_Mod.mdp.sum_telescope&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.L_pow_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_W_ge|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_le|thm"><span class="entity_def" id="Code_Mod.mdp.W_ge_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.W_le_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.W_eq_L_iter|thm"><span class="entity_def" id="Code_Mod.mdp.W_def|thm"><span class="entity_def" id="Code_Mod.mdp.dist_U\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_fix_unique|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_tendsto|thm"><span class="entity_def" id="Code_Mod.mdp.lim_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.L_iter_le_U\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_mono|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_convergent|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_conv(2)|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_conv(1)|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_contraction|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.U_one_eq_\&lt;L&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.U_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_eq_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.B_eq_\&lt;L&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.B_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_eq_iter_max|thm"><span class="entity_def" id="Code_Mod.mdp.vi_gs_policy_opt|thm"><span class="entity_def" id="Code_Mod.mdp.vi_gs_policy_def|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_error_bound_gs|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_inner_vec|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_error|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs_eq&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_arg_max_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code_eq|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_is_arg_max|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_is_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_eq_GS_iter&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_eq_GS_iter|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_iter_arg_max_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_iter_max|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_iter|thm"><span class="entity_def" id="Code_Mod.mdp.GS_iter_max_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_iter_def|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_inv_extend&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|thm"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;_split_dist|thm"><span class="entity_def" id="Code_Mod.mdp.THE_fix_GS_rec_fun\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.simps|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.termination|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.psimps|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.intros|thm"><span class="entity_def" id="Code_Mod.mdp.gs_rel_dec|thm"><span class="entity_def" id="Code_Mod.mdp.GS_QR_disc_le_disc|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_lt_dist_opt|thm"><span class="entity_def" id="Code_Mod.mdp.norm_GS_QR_le_disc|thm"><span class="entity_def" id="Code_Mod.mdp.GS_inv_blinfun_to_matrix|thm"><span class="entity_def" id="Code_Mod.mdp.ex_opt_blinfun|thm"><span class="entity_def" id="Code_Mod.mdp.invertible_Q_GS|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_eq_GS_inv|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_GS_inv&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.ex_GS_opt|thm"><span class="entity_def" id="Code_Mod.mdp.ex_GS_opt_le|thm"><span class="entity_def" id="Code_Mod.mdp.ext_GS_opt_le|thm"><span class="entity_def" id="Code_Mod.mdp.mult_mat_vec_nth|thm"><span class="entity_def" id="Code_Mod.mdp.GS_opt_indep_high|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_gs_iff|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;&apos;&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_rec_step_indep&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_rec_step_indep|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_imp_splitting&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_eq_GS_inv|thm"><span class="entity_def" id="Code_Mod.mdp.Q_mat_invertible|thm"><span class="entity_def" id="Code_Mod.mdp.strict_lower_triangular_mat_mult|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_eq_GS_inv|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_GS_inv|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec_step_act&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_rec_step_act|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_elem|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_elem|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code|thm"><span class="entity_def" id="Code_Mod.mdp.sorted_list_of_set_split&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.sorted_list_of_set_split|thm"><span class="entity_def" id="Code_Mod.mdp.foldl_upd_notin&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.foldl_upd_notin|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_eq_GS_iter|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_inner_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq_vec|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_def&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_elem|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_elem_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.simps|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.termination|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.psimps|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.intros|thm"><span class="entity_def" id="Code_Mod.mdp.ex_is_arg_max_GS|thm"><span class="entity_def" id="Code_Mod.mdp.is_arg_max_GS_le|thm"><span class="entity_def" id="Code_Mod.mdp.is_am_GS_inv_extend|thm"><span class="entity_def" id="Code_Mod.mdp.GS_inv_rec|thm"><span class="entity_def" id="Code_Mod.mdp.GS_indep_high_states|thm"><span class="entity_def" id="Code_Mod.mdp.inv_Q_mat_indep|thm"><span class="entity_def" id="Code_Mod.mdp.lt_Q_inv|thm"><span class="entity_def" id="Code_Mod.mdp.inv_Q_mat_suminf|thm"><span class="entity_def" id="Code_Mod.mdp.GS_inv_def|thm"><span class="entity_def" id="Code_Mod.mdp.triangular_mat_R|thm"><span class="entity_def" id="Code_Mod.mdp.R_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.Q_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.splitting_gauss|thm"><span class="entity_def" id="Code_Mod.mdp.R_GS_def|thm"><span class="entity_def" id="Code_Mod.mdp.Q_GS_def|thm"><span class="entity_def" id="Code_Mod.mdp.lt_P_lower|thm"><span class="entity_def" id="Code_Mod.mdp.slt_P_lower|thm"><span class="entity_def" id="Code_Mod.mdp.triangular_mat_P_upper|thm"><span class="entity_def" id="Code_Mod.mdp.row_P_lower_indep|thm"><span class="entity_def" id="Code_Mod.mdp.row_P_upper_indep|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;U_le_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;L_le_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_less_one|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_le_one|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;L_le|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;L|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_lower|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_upper|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_P_dec|thm"><span class="entity_def" id="Code_Mod.mdp.nonneg_\&lt;P&gt;\&lt;^sub&gt;U|thm"><span class="entity_def" id="Code_Mod.mdp.P_dec_elem|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;L_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;U_def|thm"><span class="entity_def" id="Code_Mod.mdp.P_lower_def|thm"><span class="entity_def" id="Code_Mod.mdp.P_upper_def|thm"><span class="entity_def" id="Code_Mod.mdp.P_dec_def|thm"><span class="entity_def" id="Code_Mod.mdp.norm_splitting_le|thm"><span class="entity_def" id="Code_Mod.mdp.inv_one_sub_Q&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_fin_eq_det|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_fin_eq_det|thm"><span class="entity_def" id="Code_Mod.mdp.GS.find_policy_QR_error_bound|thm"><span class="entity_def" id="Code_Mod.mdp.GS.L_split_contraction|thm"><span class="entity_def" id="Code_Mod.mdp.GS.L_split_fix|thm"><span class="entity_def" id="Code_Mod.mdp.GS.dist_\&lt;L&gt;\&lt;^sub&gt;b_split_opt_eps|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_tendsto_opt|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_lim(2)|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_lim(1)|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_contraction|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_def&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;_split_bfun_aux|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;_split_def|thm"><span class="entity_def" id="Code_Mod.mdp.GS.a_nonneg|thm"><span class="entity_def" id="Code_Mod.mdp.GS.QR_le_QR_disc|thm"><span class="entity_def" id="Code_Mod.mdp.GS.splitting|thm"><span class="entity_def" id="Code_Mod.mdp.GS.norm_QR_less_one|thm"><span class="entity_def" id="Code_Mod.mdp.GS.QR_mono|thm"><span class="entity_def" id="Code_Mod.mdp.GS.QR_nonneg|thm"><span class="entity_def" id="Code_Mod.mdp.GS.R_mono|thm"><span class="entity_def" id="Code_Mod.mdp.GS.R_nonneg|thm"><span class="entity_def" id="Code_Mod.mdp.GS.Q_invertible|thm"><span class="entity_def" id="Code_Mod.mdp.GS.Q_nonneg|thm"><span class="entity_def" id="Code_Mod.mdp.GS.splitting_eq|thm"><span class="entity_def" id="Code_Mod.mdp.GS.inv_Q_mono|thm"><span class="entity_def" id="Code_Mod.mdp.GS.arg_max_ex_split|thm"><span class="entity_def" id="Code_Mod.mdp.GS.QR_contraction|thm"><span class="entity_def" id="Code_Mod.mdp.GS.is_splitting|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_correct|thm"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_pi&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.simps|thm"><span class="entity_def" id="Code_Mod.mdp.eval_eq_imp_policy_eq|thm"><span class="entity_def" id="Code_Mod.mdp.finite_rel|thm"><span class="entity_def" id="Code_Mod.mdp.fin_actions|thm"><span class="entity_def" id="Code_Mod.mdp.fin_states|thm"><span class="entity_def" id="Code_Mod.mdp.vi_policy&apos;_opt|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy&apos;_error_bound|thm"><span class="entity_def" id="Code_Mod.mdp.vi_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step_eq_imp_opt|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval_mon|thm"><span class="entity_def" id="Code_Mod.mdp.eval_policy_step_L|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_improving|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_is_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_pi|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.termination|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.psimps|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.intros|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step_def|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_opt_acts|thm"><span class="entity_def" id="Code_Mod.mdp.some_opt_acts_in_A|thm"><span class="entity_def" id="Code_Mod.mdp.is_opt_act_some|thm"><span class="entity_def" id="Code_Mod.mdp.is_opt_act_def|thm"><span class="entity_def" id="Code_Mod.mdp.invertible_nu_inv_max|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_linear_vec_lambda_blinfun|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_linear_vec_lambda|thm"><span class="entity_def" id="Code_Mod.mdp.apply_nu_inv_mat|thm"><span class="entity_def" id="Code_Mod.mdp.nu_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.nu_inv_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.Ek_mat_def|thm"><span class="entity_def" id="Code_Mod.mdp.fun_to_matrix_def|thm"><span class="entity_def" id="Code_Mod.mdp.lemma_6_3_1_d|thm"><span class="entity_def" id="Code_Mod.mdp.vi_policy_opt|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_error_bound|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_iter_mono|thm"><span class="entity_def" id="Code_Mod.mdp.vi_policy_def|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_def|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_error|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_opt_eps|thm"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;_dist|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.simps|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.termination|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.psimps|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.intros|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.intros|thm"><span class="entity_def" id="Code_Mod.mdp.dist_\&lt;L&gt;\&lt;^sub&gt;b_lt_dist_opt|thm"><span class="entity_def" id="Code_Mod.mdp.vi_rel_dec|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval_def|thm"><span class="entity_def" id="Code_Mod.mdp.ex_improving_det|thm"><span class="entity_def" id="Code_Mod.mdp.ex_opt_det|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_L\&lt;^sub&gt;a_max|thm"><span class="entity_def" id="Code_Mod.mdp.arg_max_on_in|thm"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_le_arg_max|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_10_a_aux&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Sup_att|thm"><span class="entity_def" id="Code_Mod.mdp.L_iter_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_stationary_\&lt;nu&gt;\&lt;^sub&gt;b_fin|thm"><span class="entity_def" id="Code_Mod.mdp.L_iter|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq|thm"><span class="entity_def" id="Code_Mod.mdp.max_L_ex_def|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_3_1_b_aux|thm"><span class="entity_def" id="Code_Mod.mdp.lemma_6_3_1_a|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_det|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_le_det|thm"><span class="entity_def" id="Code_Mod.mdp.ex_det_dist_eps|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_11|thm"><span class="entity_def" id="Code_Mod.mdp.ex_det_eps|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_10|thm"><span class="entity_def" id="Code_Mod.mdp.opt_imp_opt_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_det|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_eq_SUP_det|thm"><span class="entity_def" id="Code_Mod.mdp.SUP_L\&lt;^sub&gt;a_eq_det|thm"><span class="entity_def" id="Code_Mod.mdp.integrable_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="Code_Mod.mdp.SUP_step_det_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_sup_att_dec|thm"><span class="entity_def" id="Code_Mod.mdp.SUP_step_MR_eq|thm"><span class="entity_def" id="Code_Mod.mdp.L_eq_L\&lt;^sub&gt;a_det|thm"><span class="entity_def" id="Code_Mod.mdp.L_eq_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_int|thm"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_bounded|thm"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a_le|thm"><span class="entity_def" id="Code_Mod.mdp.improving_att_imp_det_opt|thm"><span class="entity_def" id="Code_Mod.mdp.conserving_imp_opt&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.ex_improving_imp_conserving|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_alt&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_alt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_conserving|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_ge|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_iff|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_alt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_improving|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_imp_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_ge|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_iff|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_def|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_6&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.thm_6_2_6|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_lim|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_fix|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_conv(2)|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_conv(1)|thm"><span class="entity_def" id="Code_Mod.mdp.is_contraction_L|thm"><span class="entity_def" id="Code_Mod.mdp.contraction_L|thm"><span class="entity_def" id="Code_Mod.mdp.is_contraction_\&lt;L&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.contraction_\&lt;L&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.bounded_P|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_fix_imp_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_inc_le_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_dec_ge_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;d_lim|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_tendsto_\&lt;nu&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_L_le|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_elem|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc_n_elem|thm"><span class="entity_def" id="Code_Mod.mdp.step_mono_elem|thm"><span class="entity_def" id="Code_Mod.mdp.step_mono|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_mono|thm"><span class="entity_def" id="Code_Mod.mdp.L_mono|thm"><span class="entity_def" id="Code_Mod.mdp.L_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;_def|thm"><span class="entity_def" id="Code_Mod.mdp.L_\&lt;nu&gt;_fix_iff|thm"><span class="entity_def" id="Code_Mod.mdp.L_fix_\&lt;nu&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.L_\&lt;nu&gt;_fix|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_step|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_eq_\&lt;P&gt;\&lt;^sub&gt;X_one|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_stationary|thm"><span class="entity_def" id="Code_Mod.mdp.abs_L_le|thm"><span class="entity_def" id="Code_Mod.mdp.norm_L_le|thm"><span class="entity_def" id="Code_Mod.mdp.L_def|thm"><span class="entity_def" id="Code_Mod.mdp.lemma_6_1_2_b|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_suminf_pos|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_suminf_ge|thm"><span class="entity_def" id="Code_Mod.mdp.convergent_disc_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.disc_\&lt;P&gt;\&lt;^sub&gt;1_lim|thm"><span class="entity_def" id="Code_Mod.mdp.disc_\&lt;P&gt;\&lt;^sub&gt;1_tendsto|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_sum_ge|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_sum_pos|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_n_disc_pos|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_n_pos|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pos|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1_l_less|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_const|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pow|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_elem|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_as_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_MR|thm"><span class="entity_def" id="Code_Mod.mdp.sum_disc_bound&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.sum_disc_bound|thm"><span class="entity_def" id="Code_Mod.mdp.sum_disc_lim_l|thm"><span class="entity_def" id="Code_Mod.mdp.norm_bfun_disc_le&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.norm_bfun_disc_le|thm"><span class="entity_def" id="Code_Mod.mdp.summable_disc_norm|thm"><span class="entity_def" id="Code_Mod.mdp.summable_norm_bfun_disc|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_sconst|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.disc_reward_tendsto|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bounded_r|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bound_r|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_def|thm"><span class="entity_def" id="Code_Mod.mdp.norm_r_dec_le|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec_eq_r_K0|thm"><span class="entity_def" id="Code_Mod.mdp.abs_r_dec_le|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_eq_MR|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_MD_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_as_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;nu&gt;_le|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_Pn|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_le|thm"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_le|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_\&lt;nu&gt;_trace|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_eq_lim|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_eq_Pn|thm"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_fin_le|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_def|thm"><span class="entity_def" id="Code_Mod.mdp.expectation_abs_r_le|thm"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;nu&gt;_trace|thm"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;nu&gt;_trace_fin|thm"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_trace_fin_le|thm"><span class="entity_def" id="Code_Mod.mdp.abs_\&lt;nu&gt;_trace_le|thm"><span class="entity_def" id="Code_Mod.mdp.r\&lt;^sub&gt;M_nonneg|thm"><span class="entity_def" id="Code_Mod.mdp.abs_r_le_r\&lt;^sub&gt;M|thm"><span class="entity_def" id="Code_Mod.mdp.r\&lt;^sub&gt;M_def|thm"><span class="entity_def" id="Code_Mod.mdp.r_bounded&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.r_bfun|thm"><span class="entity_def" id="Code_Mod.mdp.r_bounded|thm"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_eq_\&lt;T&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_markovian_eq_Xn&apos;_bind|thm"><span class="entity_def" id="Code_Mod.mdp.Yn&apos;_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_split|thm"><span class="entity_def" id="Code_Mod.mdp.Suc_Xn&apos;_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.Suc_Xn&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_Pn&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.PSuc&apos;_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.PSuc&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_return_pmf|thm"><span class="entity_def" id="Code_Mod.mdp.pmf_K_st|thm"><span class="entity_def" id="Code_Mod.mdp.K_st_def|thm"><span class="entity_def" id="Code_Mod.mdp.K0&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.Yn&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;_def|thm"><span class="entity_def" id="Code_Mod.mdp.integral_\&lt;T&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.nn_integral_\&lt;T&gt;|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_return_eq|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_return|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq_return|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_eq_return_distr|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_def|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_as_markovian_eq|thm"><span class="entity_def" id="Code_Mod.mdp.is_policy_as_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.is_\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_as_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.Yn_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.Y0|thm"><span class="entity_def" id="Code_Mod.mdp.Yn_def|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_markovian_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_Xn_Y_cond&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_Xn_Y_cond|thm"><span class="entity_def" id="Code_Mod.mdp.pmf_Y_cond_X|thm"><span class="entity_def" id="Code_Mod.mdp.pmf_Pn|thm"><span class="entity_def" id="Code_Mod.mdp.pmf_Pn_pair|thm"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_def|thm"><span class="entity_def" id="Code_Mod.mdp.set_pmf_PSuc|thm"><span class="entity_def" id="Code_Mod.mdp.Xn_Suc&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_markovian_eq_Xn_bind|thm"><span class="entity_def" id="Code_Mod.mdp.Xn_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.Xn_def|thm"><span class="entity_def" id="Code_Mod.mdp.T_in_A|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_in_A|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_eq_T|thm"><span class="entity_def" id="Code_Mod.mdp.Pn.simps(2)|thm"><span class="entity_def" id="Code_Mod.mdp.Pn.simps(1)|thm"><span class="entity_def" id="Code_Mod.mdp.Pn_def|thm"><span class="entity_def" id="Code_Mod.mdp.nn_integral_T|thm"><span class="entity_def" id="Code_Mod.mdp.integral_T|thm"><span class="entity_def" id="Code_Mod.mdp.T_eq_distr|thm"><span class="entity_def" id="Code_Mod.mdp.T_eq|thm"><span class="entity_def" id="Code_Mod.mdp.K0_MDP_cont_eq|thm"><span class="entity_def" id="Code_Mod.mdp.T_def|thm"><span class="entity_def" id="Code_Mod.mdp.set_pmf_K0|thm"><span class="entity_def" id="Code_Mod.mdp.K0_iff|thm"><span class="entity_def" id="Code_Mod.mdp.K0_def|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;pi&gt;_Suc_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_stationary_def|thm"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_det_def|thm"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_markovian_def|thm"><span class="entity_def" id="Code_Mod.mdp.mk_det_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_deterministic_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_policy_def|thm"><span class="entity_def" id="Code_Mod.mdp.SOME_is_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.mk_dec_det_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_dec_det_def|thm"><span class="entity_def" id="Code_Mod.mdp.is_dec_def|thm"><span class="entity_def" id="Code_Mod.mdp.A_ne|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_user_code|thm"><span class="entity_def" id="Code_Mod.mdp.r_min_code|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;_code|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.step_value_code|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;_code|thm"><span class="entity_def" id="Code_Mod.mdp.v0_code|thm"><span class="entity_def" id="Code_Mod.mdp.d0&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.code_GS_rec_am_arr_opt|thm"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.GS_iter_max_code|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_code&apos;&apos;&apos;&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_code_opt|thm"><span class="entity_def" id="Code_Mod.mdp.code_policy_iteration|thm"><span class="entity_def" id="Code_Mod.mdp.code_policy_iteration&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_vec_opt|thm"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.code_vi_policy&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.code_find_policy_impl_opt|thm"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.code_value_iteration|thm"><span class="entity_def" id="Code_Mod.mdp.code_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.code_L_det|thm"><span class="entity_def" id="Code_Mod.mdp.vi_code_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.elims|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.w.elims|thm"><span class="entity_def" id="Code_Mod.mdp.w.induct|thm"><span class="entity_def" id="Code_Mod.mdp.w.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.w.cases|thm"><span class="entity_def" id="Code_Mod.mdp.w.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.w_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.w_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.w_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.w_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.w_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_val_zero|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_pol_zero|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.elims|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.mpi_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.U_zero|thm"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_MPI_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.elims|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.induct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.cases|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.elims|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.induct|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.cases|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_ord_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split_fix|thm"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.GS.MDP_QR_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.pi_pi|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.elims|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.induct|thm"><span class="entity_def" id="Code_Mod.mdp.finite_D\&lt;^sub&gt;D|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_PI_finite_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.cases|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.arb_act_in|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_act_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_finite_type_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.elims|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.induct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.pelims|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.cases|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration.pinduct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.simps|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.induct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel.cases|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.inducts|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.simps|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.induct|thm"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph.cases|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_att_\&lt;L&gt;_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin_zero|thm"><span class="entity_def" id="Code_Mod.mdp.conserving_imp_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving_imp_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving_D_MR|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b_fix_iff_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_pow_bfun_one|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_bfun_one|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.p_n_\&lt;pi&gt;_MR|thm"><span class="entity_def" id="Code_Mod.mdp.p_n_\&lt;pi&gt;_MD|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_mono|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1_mono|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.L_bdd_above|thm"><span class="entity_def" id="Code_Mod.mdp.L_bounded&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.L_bounded|thm"><span class="entity_def" id="Code_Mod.mdp.apply_bfun_bdd_above|thm"><span class="entity_def" id="Code_Mod.mdp.apply_bfun_bounded_above|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1_pow|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DR|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DD|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_MD|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt|thm"><span class="entity_def" id="Code_Mod.mdp.summable_bfun_disc|thm"><span class="entity_def" id="Code_Mod.mdp.norm_P_n|thm"><span class="entity_def" id="Code_Mod.mdp.summable_disc_reward_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_reward&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;X_apply|thm"><span class="entity_def" id="Code_Mod.mdp.norm_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_bounded_linear|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X_0|thm"><span class="entity_def" id="Code_Mod.mdp.summable_disc_reward|thm"><span class="entity_def" id="Code_Mod.mdp.summable_discI|thm"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_I&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.summable_norm_disc_I|thm"><span class="entity_def" id="Code_Mod.mdp.norm_l_pow_eq|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_le_\&lt;nu&gt;_opt|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_zero|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.integrable_r_nth|thm"><span class="entity_def" id="Code_Mod.mdp.measurable_r_nth|thm"><span class="entity_def" id="Code_Mod.mdp.measurable_suminf_reward|thm"><span class="entity_def" id="Code_Mod.mdp.summable_r_disc(3)|thm"><span class="entity_def" id="Code_Mod.mdp.summable_r_disc(2)|thm"><span class="entity_def" id="Code_Mod.mdp.summable_r_disc(1)|thm"><span class="entity_def" id="Code_Mod.mdp.summable_disc|thm"><span class="entity_def" id="Code_Mod.mdp.abs_r\&lt;^sub&gt;M_eq_r\&lt;^sub&gt;M|thm"><span class="entity_def" id="Code_Mod.mdp.abs_disc_eq|thm"><span class="entity_def" id="Code_Mod.mdp.disc_lt_one|thm"><span class="entity_def" id="Code_Mod.mdp.zero_le_disc|thm"><span class="entity_def" id="Code_Mod.mdp.MDP_reward_axioms|thm"><span class="entity_def" id="Code_Mod.mdp.X0&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.P0&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.integrable_\&lt;T&gt;_bounded|thm"><span class="entity_def" id="Code_Mod.mdp.measurable_ident_Suc&apos;|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_sets|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;_prob_space|thm"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X_0|thm"><span class="entity_def" id="Code_Mod.mdp.prob_Pn_X|thm"><span class="entity_def" id="Code_Mod.mdp.prob_K0_X|thm"><span class="entity_def" id="Code_Mod.mdp.set_pmf_X0|thm"><span class="entity_def" id="Code_Mod.mdp.X0|thm"><span class="entity_def" id="Code_Mod.mdp.T_subprob_space|thm"><span class="entity_def" id="Code_Mod.mdp.T_subprob|thm"><span class="entity_def" id="Code_Mod.mdp.prob_space_T|thm"><span class="entity_def" id="Code_Mod.mdp.is_policy_MDP_cont|thm"><span class="entity_def" id="Code_Mod.mdp.space_T|thm"><span class="entity_def" id="Code_Mod.mdp.space_stream_space_ne|thm"><span class="entity_def" id="Code_Mod.mdp.sets_T|thm"><span class="entity_def" id="Code_Mod.mdp.space_M|thm"><span class="entity_def" id="Code_Mod.mdp.count_space_M|thm"><span class="entity_def" id="Code_Mod.mdp.fst_K0|thm"><span class="entity_def" id="Code_Mod.mdp.pmf_K0|thm"><span class="entity_def" id="Code_Mod.mdp.vimage_pair|thm"><span class="entity_def" id="Code_Mod.mdp.Suc_mk_markovian|thm"><span class="entity_def" id="Code_Mod.mdp.is_policy_\&lt;pi&gt;_Suc|thm"><span class="entity_def" id="Code_Mod.mdp.is_stationary_const|thm"><span class="entity_def" id="Code_Mod.mdp.is_stationary_const_iff|thm"><span class="entity_def" id="Code_Mod.mdp.policies_ne|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_ne|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_ne|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_to_MR|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_MR_iff|thm"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_imp_policies|thm"><span class="entity_def" id="Code_Mod.mdp.mk_markovian_nil|thm"><span class="entity_def" id="Code_Mod.mdp.is_markovian_mk|thm"><span class="entity_def" id="Code_Mod.mdp.is_markovian_mk_iff|thm"><span class="entity_def" id="Code_Mod.mdp.ex_dec|thm"><span class="entity_def" id="Code_Mod.mdp.D\&lt;^sub&gt;R_ne|thm"><span class="entity_def" id="Code_Mod.mdp.D_det_ne|thm"><span class="entity_def" id="Code_Mod.mdp.ex_dec_det|thm"><span class="entity_def" id="Code_Mod.mdp.D_det_to_MR|thm"><span class="entity_def" id="Code_Mod.mdp.is_dec_mk_dec_det_iff|thm"><span class="entity_def" id="Code_Mod.mdp.is_decI|thm"><span class="entity_def" id="Code_Mod.mdp.discrete_MDP_axioms|thm"><span class="entity_def" id="Code_Mod.mod_MDP_vi_test_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;nu&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_d0&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_d0_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_r_min_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_L_pow_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_user_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_max_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_GS_rec_fun\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_r_vec&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_P_mat_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs&apos;&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_vi_gs_policy_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_improvement&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_step&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_partial&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_mk_markovian_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_improvement_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_step_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_is_dec_det_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_partial_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_is_opt_act_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy_impl_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_vi_policy&apos;_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_L_det_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="Code_Mod.mod_MDP_vi_test_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;nu&gt;\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_d0&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_d0_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_r_min_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_L_pow_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_partial&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_mpi_user_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_max_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_GS_rec_fun\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_r_vec&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_P_mat_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs&apos;&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_vi_gs_policy_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_partial_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_improvement&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_eval&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_step&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_partial&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_mk_markovian_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_improvement_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_step_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_is_dec_det_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_partial_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_is_opt_act_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy_impl_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_find_policy&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_vi_policy&apos;_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_L_det_def|axiom"><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="Code_Mod.vi_test|const"><span class="entity_def" id="Code_Mod.\&lt;nu&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.d0&apos;|const"><span class="entity_def" id="Code_Mod.d0|const"><span class="entity_def" id="Code_Mod.r_min|const"><span class="entity_def" id="Code_Mod.v0_mpi|const"><span class="entity_def" id="Code_Mod.L_pow|const"><span class="entity_def" id="Code_Mod.mpi_partial&apos;|const"><span class="entity_def" id="Code_Mod.v0_mpi\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mpi_user|const"><span class="entity_def" id="Code_Mod.GS_iter|const"><span class="entity_def" id="Code_Mod.GS_iter_max|const"><span class="entity_def" id="Code_Mod.GS_rec_fun\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.r_vec&apos;|const"><span class="entity_def" id="Code_Mod.P_mat|const"><span class="entity_def" id="Code_Mod.opt_policy_gs&apos;&apos;|const"><span class="entity_def" id="Code_Mod.opt_policy_gs|const"><span class="entity_def" id="Code_Mod.vi_gs_policy|const"><span class="entity_def" id="Code_Mod.gs_iteration_partial|const"><span class="entity_def" id="Code_Mod.gs_iteration|const"><span class="entity_def" id="Code_Mod.policy_iteration_policy_improvement&apos;|const"><span class="entity_def" id="Code_Mod.policy_iteration_policy_eval&apos;|const"><span class="entity_def" id="Code_Mod.policy_iteration_policy_step&apos;|const"><span class="entity_def" id="Code_Mod.policy_iteration&apos;|const"><span class="entity_def" id="Code_Mod.policy_iteration_partial&apos;|const"><span class="entity_def" id="Code_Mod.policy_eval&apos;|const"><span class="entity_def" id="Code_Mod.mk_markovian|const"><span class="entity_def" id="Code_Mod.policy_eval|const"><span class="entity_def" id="Code_Mod.policy_improvement|const"><span class="entity_def" id="Code_Mod.policy_step|const"><span class="entity_def" id="Code_Mod.is_dec_det|const"><span class="entity_def" id="Code_Mod.policy_iteration|const"><span class="entity_def" id="Code_Mod.value_iteration_partial|const"><span class="entity_def" id="Code_Mod.is_opt_act|const"><span class="entity_def" id="Code_Mod.find_policy_impl|const"><span class="entity_def" id="Code_Mod.find_policy&apos;|const"><span class="entity_def" id="Code_Mod.vi_policy&apos;|const"><span class="entity_def" id="Code_Mod.value_iteration|const"><span class="entity_def" id="Code_Mod.L_det|const"><span class="entity_def" id="Code_Mod.\&lt;L&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.mpi_partial&apos;|const"><span class="entity_def" id="Code_Mod.mdp.mpi_partial|const"><span class="entity_def" id="Code_Mod.mdp.d0&apos;|const"><span class="entity_def" id="Code_Mod.mdp.d0|const"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;&apos;|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_partial|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration&apos;|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial&apos;|const"><span class="entity_def" id="Code_Mod.mdp.policy_step&apos;|const"><span class="entity_def" id="Code_Mod.mdp.policy_improvement&apos;|const"><span class="entity_def" id="Code_Mod.mdp.policy_eval&apos;|const"><span class="entity_def" id="Code_Mod.mdp.r_vec&apos;|const"><span class="entity_def" id="Code_Mod.mdp.P_mat|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_partial|const"><span class="entity_def" id="Code_Mod.mdp.find_policy_impl|const"><span class="entity_def" id="Code_Mod.mdp.L_det|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration_partial|const"><span class="entity_def" id="Code_Mod.mdp.vi_test|const"><span class="entity_def" id="Code_Mod.mdp.mpi_user|const"><span class="entity_def" id="Code_Mod.mdp.v0_mpi\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.v0_mpi|const"><span class="entity_def" id="Code_Mod.mdp.r_min|const"><span class="entity_def" id="Code_Mod.mdp.mpi_alg_rec|const"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;|const"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_dom|const"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_rel|const"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_sumC|const"><span class="entity_def" id="Code_Mod.mdp.mpi&apos;_graph|const"><span class="entity_def" id="Code_Mod.mdp.mpi_algo|const"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_dom|const"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_rel|const"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_sumC|const"><span class="entity_def" id="Code_Mod.mdp.mpi_algo_graph|const"><span class="entity_def" id="Code_Mod.mdp.w|const"><span class="entity_def" id="Code_Mod.mdp.w_sumC|const"><span class="entity_def" id="Code_Mod.mdp.w_graph|const"><span class="entity_def" id="Code_Mod.mdp.mpi_pol|const"><span class="entity_def" id="Code_Mod.mdp.mpi_val|const"><span class="entity_def" id="Code_Mod.mdp.mpi|const"><span class="entity_def" id="Code_Mod.mdp.mpi_sumC|const"><span class="entity_def" id="Code_Mod.mdp.mpi_graph|const"><span class="entity_def" id="Code_Mod.mdp.L_pow|const"><span class="entity_def" id="Code_Mod.mdp.W|const"><span class="entity_def" id="Code_Mod.mdp.U\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.U|const"><span class="entity_def" id="Code_Mod.mdp.B\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.B|const"><span class="entity_def" id="Code_Mod.mdp.vi_gs_policy|const"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter_arg_max|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code&apos;|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_am_code|const"><span class="entity_def" id="Code_Mod.mdp.GS_iter_arg_max|const"><span class="entity_def" id="Code_Mod.mdp.GS_iter_max|const"><span class="entity_def" id="Code_Mod.mdp.GS_iter|const"><span class="entity_def" id="Code_Mod.mdp.opt_policy_gs&apos;|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_dom|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_rel|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_sumC|const"><span class="entity_def" id="Code_Mod.mdp.gs_iteration_graph|const"><span class="entity_def" id="Code_Mod.mdp.gs_measure|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_iter|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_inner|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_step|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_elem|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_dom|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_rel|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_sumC|const"><span class="entity_def" id="Code_Mod.mdp.GS_rec_fun_graph|const"><span class="entity_def" id="Code_Mod.mdp.GS_inv|const"><span class="entity_def" id="Code_Mod.mdp.R_mat|const"><span class="entity_def" id="Code_Mod.mdp.Q_mat|const"><span class="entity_def" id="Code_Mod.mdp.r_vec|const"><span class="entity_def" id="Code_Mod.mdp.r_det\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.R_GS|const"><span class="entity_def" id="Code_Mod.mdp.Q_GS|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;L|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;U|const"><span class="entity_def" id="Code_Mod.mdp.P_lower|const"><span class="entity_def" id="Code_Mod.mdp.P_upper|const"><span class="entity_def" id="Code_Mod.mdp.P_dec|const"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;\&lt;^sub&gt;b_split|const"><span class="entity_def" id="Code_Mod.mdp.GS.\&lt;L&gt;_split|const"><span class="entity_def" id="Code_Mod.mdp.GS.L_split|const"><span class="entity_def" id="Code_Mod.mdp.GS.QR_disc|const"><span class="entity_def" id="Code_Mod.mdp.vi_policy&apos;|const"><span class="entity_def" id="Code_Mod.mdp.find_policy&apos;|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_dom|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_rel|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_sumC|const"><span class="entity_def" id="Code_Mod.mdp.policy_iteration_graph|const"><span class="entity_def" id="Code_Mod.mdp.policy_step|const"><span class="entity_def" id="Code_Mod.mdp.policy_improvement|const"><span class="entity_def" id="Code_Mod.mdp.opt_acts|const"><span class="entity_def" id="Code_Mod.mdp.is_opt_act|const"><span class="entity_def" id="Code_Mod.mdp.nu_mat|const"><span class="entity_def" id="Code_Mod.mdp.nu_inv_mat|const"><span class="entity_def" id="Code_Mod.mdp.Ek_mat|const"><span class="entity_def" id="Code_Mod.mdp.vi|const"><span class="entity_def" id="Code_Mod.mdp.vi_policy|const"><span class="entity_def" id="Code_Mod.mdp.find_policy|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration_dom|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration_rel|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration_sumC|const"><span class="entity_def" id="Code_Mod.mdp.value_iteration_graph|const"><span class="entity_def" id="Code_Mod.mdp.term_measure|const"><span class="entity_def" id="Code_Mod.mdp.policy_eval|const"><span class="entity_def" id="Code_Mod.mdp.max_L_ex|const"><span class="entity_def" id="Code_Mod.mdp.L\&lt;^sub&gt;a|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_conserving|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_improving|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;d|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_fin|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;L&gt;|const"><span class="entity_def" id="Code_Mod.mdp.L|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;1|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;P&gt;\&lt;^sub&gt;X|const"><span class="entity_def" id="Code_Mod.mdp.r_dec\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.r_dec|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b_opt|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_opt|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_MD|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_fin|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_trace|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;nu&gt;_trace_fin|const"><span class="entity_def" id="Code_Mod.mdp.r\&lt;^sub&gt;M|const"><span class="entity_def" id="Code_Mod.mdp.K_st|const"><span class="entity_def" id="Code_Mod.mdp.Yn&apos;|const"><span class="entity_def" id="Code_Mod.mdp.Xn&apos;|const"><span class="entity_def" id="Code_Mod.mdp.Pn&apos;|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;T&gt;|const"><span class="entity_def" id="Code_Mod.mdp.as_markovian|const"><span class="entity_def" id="Code_Mod.mdp.Yn|const"><span class="entity_def" id="Code_Mod.mdp.Y_cond_X|const"><span class="entity_def" id="Code_Mod.mdp.Xn|const"><span class="entity_def" id="Code_Mod.mdp.Pn|const"><span class="entity_def" id="Code_Mod.mdp.T|const"><span class="entity_def" id="Code_Mod.mdp.mk_stationary_det|const"><span class="entity_def" id="Code_Mod.mdp.mk_stationary|const"><span class="entity_def" id="Code_Mod.mdp.is_stationary|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D|const"><span class="entity_def" id="Code_Mod.mdp.mk_markovian|const"><span class="entity_def" id="Code_Mod.mdp.is_markovian|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;H\&lt;^sub&gt;D|const"><span class="entity_def" id="Code_Mod.mdp.is_deterministic|const"><span class="entity_def" id="Code_Mod.mdp.\&lt;Pi&gt;\&lt;^sub&gt;H\&lt;^sub&gt;R|const"><span class="entity_def" id="Code_Mod.mdp.is_policy|const"><span class="entity_def" id="Code_Mod.mdp.D\&lt;^sub&gt;D|const"><span class="entity_def" id="Code_Mod.mdp.is_dec_det|const"><span class="entity_def" id="Code_Mod.mdp.D\&lt;^sub&gt;R|const"><span class="entity_def" id="Code_Mod.mdp.is_dec|const"><span>global_interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP|locale"><span>mod_MDP</span></a><span> </span><span class="quoted"><span class="free"><span>transition</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>reward</span></span></span><span> </span><span class="quoted"><span class="free"><span>discount</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>transition</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>reward</span></span><span> </span><span class="free"><span>discount</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b|const"><span>mod_MDP_â<span class="hidden">â©</span><sub>b</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.â<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b_L_det|const"><span>mod_MDP_â<span class="hidden">â©</span><sub>b</sub>_L_det</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.L_det</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration|const"><span>mod_MDP_value_iteration</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.value_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_vi_policy&apos;|const"><span>mod_MDP_vi_policy'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_policy'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_find_policy&apos;|const"><span>mod_MDP_find_policy'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.find_policy'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_find_policy_impl|const"><span>mod_MDP_find_policy_impl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.find_policy_impl</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_is_opt_act|const"><span>mod_MDP_is_opt_act</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.is_opt_act</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_value_iteration_partial|const"><span>mod_MDP_value_iteration_partial</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.value_iteration_partial</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration|const"><span>mod_MDP_policy_iteration</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_is_dec_det|const"><span>mod_MDP_is_dec_det</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.is_dec_det</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_step|const"><span>mod_MDP_policy_step</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_step</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_improvement|const"><span>mod_MDP_policy_improvement</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_improvement</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval|const"><span>mod_MDP_policy_eval</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_mk_markovian|const"><span>mod_MDP_mk_markovian</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mk_markovian</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_eval&apos;|const"><span>mod_MDP_policy_eval'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_partial&apos;|const"><span>mod_MDP_policy_iteration_partial'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration_partial'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration&apos;|const"><span>mod_MDP_policy_iteration'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_iteration'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_step&apos;|const"><span>mod_MDP_policy_iteration_policy_step'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_step'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_eval&apos;|const"><span>mod_MDP_policy_iteration_policy_eval'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_eval'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_policy_iteration_policy_improvement&apos;|const"><span>mod_MDP_policy_iteration_policy_improvement'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.policy_improvement'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration|const"><span>mod_MDP_gs_iteration</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.gs_iteration</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_gs_iteration_partial|const"><span>mod_MDP_gs_iteration_partial</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.gs_iteration_partial</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_vi_gs_policy|const"><span>mod_MDP_vi_gs_policy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_gs_policy</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs|const"><span>mod_MDP_opt_policy_gs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.opt_policy_gs</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_opt_policy_gs&apos;&apos;|const"><span>mod_MDP_opt_policy_gs''</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.opt_policy_gs''</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_P_mat|const"><span>mod_MDP_P_mat</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.P_mat</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_r_vec&apos;|const"><span>mod_MDP_r_vec'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.r_vec'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_GS_rec_fun\&lt;^sub&gt;b|const"><span>mod_MDP_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter_max|const"><span>mod_MDP_GS_iter_max</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_iter_max</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_GS_iter|const"><span>mod_MDP_GS_iter</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.GS_iter</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_mpi_user|const"><span>mod_MDP_mpi_user</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mpi_user</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi\&lt;^sub&gt;b|const"><span>mod_MDP_v0_mpi<span class="hidden">â©</span><sub>b</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.v0_mpi<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_mpi_partial&apos;|const"><span>mod_MDP_mpi_partial'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.mpi_partial'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_L_pow|const"><span>mod_MDP_L_pow</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.L_pow</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_v0_mpi|const"><span>mod_MDP_v0_mpi</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.v0_mpi</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_r_min|const"><span>mod_MDP_r_min</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.r_min</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_d0|const"><span>mod_MDP_d0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.d0</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_d0&apos;|const"><span>mod_MDP_d0'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.d0'</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_\&lt;nu&gt;\&lt;^sub&gt;b|const"><span>mod_MDP_Î½<span class="hidden">â©</span><sub>b</sub></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.Î½<span class="hidden">â©</span><sub>b</sub></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Mod.mod_MDP_vi_test|const"><span>mod_MDP_vi_test</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>mdp.vi_test</span></span><span>
  </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
value "mod_MDP_vi_gs_policy (Î»_::(2Ã2). return_pmf (1::2)) (Î»_. {}) (Î»_. 0) 0.5 0.5 (vec_to_bfun (Ï i. 1)) 0"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div><div id='Examples'>le>
</head>


<body>
<div class="head">
<h1>Theory Code_Real_Approx_By_Float_Fix</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Code_Real_Approx_By_Float_Fix</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
  </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/Code_Real_Approx_By_Float.html"><span>HOL-Library.Code_Real_Approx_By_Float</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="../Gauss_Jordan/Code_Real_Approx_By_Float_Haskell.html"><span>Gauss_Jordan.Code_Real_Approx_By_Float_Haskell</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>&lt;</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Fix for Floating Point Approximation using Haskell</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>code_printing</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>type_constructor</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.Double</span><span>"</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>Double precision</span><span>*</span><span>)</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>0.0</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>1.0</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Code_Real_Approx_By_Float.html#Code_Real_Approx_By_Float.real_of_integer|const"><span>real_of_integer</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.fromIntegral (_)</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>class_instance</span></span></span><span> real </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>HOL.equal</span></a><span>"</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> - </span><span class="comment1"><span>(</span><span>*</span><span>This is necessary. See the tutorial on code generation, page 29</span><span>*</span><span>)</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal_class.equal|const"><span>HOL.equal</span></a><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ == _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span>  </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ &lt; _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span>  </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(â¤)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ &lt;= _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ + _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ - _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>(*)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ * _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>(/)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>_ '/ _</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>uminus</span></a><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.negate</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/NthRoot.html#NthRoot.sqrt|const"><span>sqrt</span></a><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.sqrt</span><span>"</span></span><span> 
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL-Library/Code_Real_Approx_By_Float.html#Code_Real_Approx_By_Float.real_exp|const"><span>Code_Real_Approx_By_Float.real_exp</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.exp</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.ln_class.ln|const"><span>ln</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.log</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.cos|const"><span>cos</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.cos</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.sin|const"><span>sin</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.sin</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.tan|const"><span>tan</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.tan</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.pi|const"><span>pi</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.pi</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.arctan|const"><span>arctan</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.atan</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.arccos|const"><span>arccos</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.acos</span><span>"</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Transcendental.html#Transcendental.arcsin|const"><span>arcsin</span></a></span><span> </span><span class="main"><span>â</span></span><span>
    </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>Prelude.asin</span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>code_printing</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL-Library/Code_Real_Approx_By_Float.html#Code_Real_Approx_By_Float.Realfract|const"><span>Realfract</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>Haskell</span><span class="main"><span>)</span></span><span> 
    </span><span class="quoted"><span>"</span><span>(Prelude.fromIntegral (integer'_of'_int _) '/ Prelude.fromIntegral (integer'_of'_int _))</span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>code_printing</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>constant</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL-Library/Code_Real_Approx_By_Float.html#Code_Real_Approx_By_Float.Realfract|const"><span>Realfract</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>SML</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>"</span><span>(Real.fromInt (IntInf.toInt (integer'_of'_int _))) '// Real.fromInt (IntInf.toInt (integer'_of'_int _))</span><span>"</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span>&gt;</span><span>*</span><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>body>
<div class="head">
<h1>Theory Code_Inventory</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Code_Inventory</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="Code_Mod.html"><span>Code_Mod</span></a><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> Remove for precise results, approximates real numbers by floats, UNSOUND! </span><span>*</span><span>)</span></span><span>
    </span><a href="Code_Real_Approx_By_Float_Fix.html"><span>Code_Real_Approx_By_Float_Fix</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Inventory Management Example</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>abstype</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.embed_pmf|const"><span>embed_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.td_pmf_embed_pmf|fact"><span>td_pmf_embed_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Typedef.html#Typedef.type_definition_def|fact"><span>type_definition_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code_abbrev</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/PMF_Impl.html#PMF_Impl.pmf_integral_code_unfold|fact"><span>pmf_integral_code_unfold</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite_UNIV|fact"><span>finite_class.finite_UNIV</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf|fact"><span>integral_measure_pmf</span></a><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_scaleR_def|fact"><span>real_scaleR_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Indicator_Function.html#Indicator_Function.indicat_real|const"><span>indicat_real</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf|const"><span>bind_pmf</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>Probability_Mass_Function.pmf_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.pmf_finite_le|fact"><span class="entity_def" id="Code_Inventory.pmf_finite_le|thm"><span>pmf_finite_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.sum_pmf_eq_1|fact"><span>sum_pmf_eq_1</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span></a></span></a></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>p</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono2|fact"><span>sum_mono2</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1030..1035">lemma</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.mod_less_diff|fact"><span class="entity_def" id="Code_Inventory.mod_less_diff|thm"><span>mod_less_diff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_1030..1035"><span>assms</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.mono_Rep|fact"><span>mono_Rep</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.mono_def|fact"><span>mono_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1215..1216">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.diff_def|fact"><span>mod_type_class.diff_def</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep_Abs_mod|fact"><span>Rep_Abs_mod</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep_ge_0|fact"><span>Rep_ge_0</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Euclidean_Division.html#Euclidean_Division.mod_pos_pos_trivial|fact"><span>mod_pos_pos_trivial</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>x</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.strict_trans1|fact"><span>order.strict_trans1</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep_less_n|fact"><span>Rep_less_n</span></a><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_1030..1035"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.strict_mono_Rep|fact"><span>strict_mono_Rep</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep_ge_0|fact"><span>Rep_ge_0</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_less|fact"><span>le_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.strict_mono_def|fact"><span>strict_mono_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_1215..1216"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less_iff_gr_or_eq|fact"><span>not_less_iff_gr_or_eq</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.strict_mono_Rep|fact"><span>strict_mono_Rep</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.strict_mono_def|fact"><span>strict_mono_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>locale</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.inventory|locale"><span>inventory</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>fixed_cost</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>var_cost</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type|class"><span>mod_type</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>inv_cost</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>revenue</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>discount</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.order_cost_def|fact"><span class="entity_def" id="Code_Inventory.inventory.order_cost_def|thm"><span class="entity_def" id="Code_Inventory.inventory.order_cost_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inventory.order_cost.cong|fact"><span class="entity_def" id="Code_Inventory.inventory.order_cost.cong|thm"><span class="entity_def" id="Code_Inventory.inventory.order_cost|const"><span class="entity_def" id="offset_1955..1965">order_cost</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>fixed_cost</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>var_cost</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv_def|fact"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv_def|thm"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv_def_raw|axiom"><span class="entity_def" id="offset_2019..2029">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv.cong|fact"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv.cong|thm"><span class="entity_def" id="Code_Inventory.inventory.prob_ge_inv|const"><span class="entity_def" id="offset_2031..2042">prob_ge_inv</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.exp_rev_def|fact"><span class="entity_def" id="Code_Inventory.inventory.exp_rev_def|thm"><span class="entity_def" id="Code_Inventory.inventory.exp_rev_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inventory.exp_rev.cong|fact"><span class="entity_def" id="Code_Inventory.inventory.exp_rev.cong|thm"><span class="entity_def" id="Code_Inventory.inventory.exp_rev|const"><span class="entity_def" id="offset_2090..2097">exp_rev</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>revenue</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>revenue</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>u</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.reward_def|fact"><span class="entity_def" id="Code_Inventory.inventory.reward_def|thm"><span class="entity_def" id="Code_Inventory.inventory.reward_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inventory.reward.cong|fact"><span class="entity_def" id="Code_Inventory.inventory.reward.cong|thm"><span class="entity_def" id="Code_Inventory.inventory.reward|const"><span class="entity_def" id="offset_2181..2187">reward</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2090..2097"><span>exp_rev</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_1955..1965"><span>order_cost</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>inv_cost</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.transition.rep_eq|fact"><span class="entity_def" id="Code_Inventory.inventory.transition.abs_eq|fact"><span class="entity_def" id="Code_Inventory.inventory.transition.transfer|fact"><span class="entity_def" id="Code_Inventory.inventory.transition.rsp|fact"><span class="entity_def" id="Code_Inventory.inventory.transition_def|fact"><span class="entity_def" id="Code_Inventory.inventory.transition.rep_eq|thm"><span class="entity_def" id="Code_Inventory.inventory.transition.abs_eq|thm"><span class="entity_def" id="Code_Inventory.inventory.transition.transfer|thm"><span class="entity_def" id="Code_Inventory.inventory.transition.rsp|thm"><span class="entity_def" id="Code_Inventory.inventory.transition_def|thm"><span class="entity_def" id="Code_Inventory.inventory.transition_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_Inventory.inventory.transition.cong|fact"><span class="entity_def" id="Code_Inventory.inventory.transition.cong|thm"><span class="entity_def" id="Code_Inventory.inventory.transition|const"><span class="entity_def" id="offset_2281..2291">transition</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="bound"><span>a</span></span><span> 
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
   </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>safe</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2019..2029"><span>prob_ge_inv_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.pmf_finite_le|fact"><span>pmf_finite_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.int|const"><span>int</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal|const"><span>ennreal</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.int|const"><span>int</span></a><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_nonneg|fact"><span>pmf_nonneg</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2019..2029"><span>prob_ge_inv_def</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.pmf_finite_le|fact"><span>pmf_finite_le</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_count_space_finite|fact"><span>nn_integral_count_space_finite</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.sum_ennreal|fact"><span>sum_ennreal</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_cong|fact"><span>ennreal_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.least_mod_type|fact"><span>least_mod_type</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.remove|fact"><span>sum.remove</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>&lt;..}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan_def|fact"><span>greaterThan_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.le_neq_trans|fact"><span>le_neq_trans</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.least_mod_type|fact"><span>least_mod_type</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.cong|fact"><span>cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_cong|fact"><span>ennreal_cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>prob_ge_inv</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>&lt;..</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost_def|fact"><span>atMost_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan_def|fact"><span>greaterThan_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost_def|fact"><span>greaterThanAtMost_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect_neg_eq|fact"><span>Collect_neg_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.If_cases|fact"><span>sum.If_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>&lt;..</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_2019..2029"><span>prob_ge_inv_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>&lt;..</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>demand_prob</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.reindex_bij_betw|fact"><span>sum.reindex_bij_betw</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.bij_betw_imageI|fact"><span>bij_betw_imageI</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>&lt;..</span></a></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.add.left_cancel|fact"><span>add.left_cancel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_add_cancel|fact"><span>diff_add_cancel</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_add_class.add.assoc|fact"><span>add.assoc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.add_to_nat_def|fact"><span>add_to_nat_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.monoid_add_class.add.left_neutral|fact"><span>add.left_neutral</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_add_cancel|fact"><span>diff_add_cancel</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.least_mod_type|fact"><span>least_mod_type</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.diff_0_right|fact"><span>diff_0_right</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.least_mod_type|fact"><span>least_mod_type</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.mod_less_diff|fact"><span>mod_less_diff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>&lt;..</span></a></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThanAtMost|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.mod_less_diff|fact"><span>mod_less_diff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_count_space_finite|fact"><span>nn_integral_count_space_finite</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory.A_inv_def|fact"><span class="entity_def" id="Code_Inventory.inventory.A_inv_def|thm"><span class="entity_def" id="Code_Inventory.inventory.A_inv_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inventory.A_inv|const"><span class="entity_def" id="offset_5335..5340">A_inv</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>::</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.var_cost_lin_def|fact"><span class="entity_def" id="Code_Inventory.var_cost_lin_def|thm"><span class="entity_def" id="Code_Inventory.var_cost_lin_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.var_cost_lin|const"><span>var_cost_lin</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inv_cost_lin_def|fact"><span class="entity_def" id="Code_Inventory.inv_cost_lin_def|thm"><span class="entity_def" id="Code_Inventory.inv_cost_lin_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inv_cost_lin|const"><span>inv_cost_lin</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.revenue_lin_def|fact"><span class="entity_def" id="Code_Inventory.revenue_lin_def|thm"><span class="entity_def" id="Code_Inventory.revenue_lin_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.revenue_lin|const"><span>revenue_lin</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.demand_unif.rep_eq|fact"><span class="entity_def" id="Code_Inventory.demand_unif.abs_eq|fact"><span class="entity_def" id="Code_Inventory.demand_unif.transfer|fact"><span class="entity_def" id="Code_Inventory.demand_unif.rsp|fact"><span class="entity_def" id="Code_Inventory.demand_unif_def|fact"><span class="entity_def" id="Code_Inventory.demand_unif.rep_eq|thm"><span class="entity_def" id="Code_Inventory.demand_unif.abs_eq|thm"><span class="entity_def" id="Code_Inventory.demand_unif.transfer|thm"><span class="entity_def" id="Code_Inventory.demand_unif.rsp|thm"><span class="entity_def" id="Code_Inventory.demand_unif_def|thm"><span class="entity_def" id="Code_Inventory.demand_unif_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_Inventory.demand_unif|const"><span>demand_unif</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_divide_times|fact"><span>ennreal_divide_times</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.divide_ennreal|fact"><span>divide_ennreal</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_of_nat_eq_real_of_nat|fact"><span>ennreal_of_nat_eq_real_of_nat</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.demand_three.rep_eq|fact"><span class="entity_def" id="Code_Inventory.demand_three.abs_eq|fact"><span class="entity_def" id="Code_Inventory.demand_three.transfer|fact"><span class="entity_def" id="Code_Inventory.demand_three.rsp|fact"><span class="entity_def" id="Code_Inventory.demand_three_def|fact"><span class="entity_def" id="Code_Inventory.demand_three.rep_eq|thm"><span class="entity_def" id="Code_Inventory.demand_three.abs_eq|thm"><span class="entity_def" id="Code_Inventory.demand_three.transfer|thm"><span class="entity_def" id="Code_Inventory.demand_three.rsp|thm"><span class="entity_def" id="Code_Inventory.demand_three_def|thm"><span class="entity_def" id="Code_Inventory.demand_three_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_Inventory.demand_three|const"><span>demand_three</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>3</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="numeral"><span>2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5835..5836">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>,</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span class="numeral"><span>2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.exhaust_3|fact"><span>exhaust_3</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_count_space_finite|fact"><span>nn_integral_count_space_finite</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#offset_5835..5836"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.fixed_cost|const"><span>fixed_cost</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.var_cost|const"><span>var_cost</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.var_cost_lin|const"><span>var_cost_lin</span></a><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.inv_cost|const"><span>inv_cost</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inv_cost_lin|const"><span>inv_cost_lin</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.revenue|const"><span>revenue</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.revenue_lin|const"><span>revenue_lin</span></a><span> </span><span class="numeral"><span>8</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.discount|const"><span>discount</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="numeral"><span>0.99</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.capacity|type"><span>capacity</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>30</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.card_ge_2_imp_ne|fact"><span class="entity_def" id="Code_Inventory.card_ge_2_imp_ne|thm"><span>card_ge_2_imp_ne</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.card_2_iff&apos;|fact"><span>card_2_iff'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Linear_Algebra.html#Linear_Algebra.ex_card|fact"><span>ex_card</span></a><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.inventory_ex.A_inv_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.rep_eq|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.abs_eq|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.transfer|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.rsp|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.transition_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.reward_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.exp_rev_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.prob_ge_inv_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.order_cost_def|fact"><span class="entity_def" id="Code_Inventory.exp_rev_def|fact"><span class="entity_def" id="Code_Inventory.order_cost_def|fact"><span class="entity_def" id="Code_Inventory.prob_ge_inv_def|fact"><span class="entity_def" id="Code_Inventory.reward_def|fact"><span class="entity_def" id="Code_Inventory.transition_def|fact"><span class="entity_def" id="Code_Inventory.A_inv_def|fact"><span class="entity_def" id="Code_Inventory.inventory_ex.A_inv_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.rep_eq|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.abs_eq|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.rsp|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.transition_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.reward_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.exp_rev_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.prob_ge_inv_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.order_cost_def|thm"><span class="entity_def" id="Code_Inventory.inventory_ex.transition.transfer|thm"><span class="entity_def" id="Code_Inventory.exp_rev_def|thm"><span class="entity_def" id="Code_Inventory.order_cost_def|thm"><span class="entity_def" id="Code_Inventory.prob_ge_inv_def|thm"><span class="entity_def" id="Code_Inventory.reward_def|thm"><span class="entity_def" id="Code_Inventory.transition_def|thm"><span class="entity_def" id="Code_Inventory.A_inv_def|thm"><span class="entity_def" id="Code_Inventory.exp_rev_def|axiom"><span class="entity_def" id="Code_Inventory.order_cost_def|axiom"><span class="entity_def" id="Code_Inventory.prob_ge_inv_def|axiom"><span class="entity_def" id="Code_Inventory.reward_def|axiom"><span class="entity_def" id="Code_Inventory.transition_def|axiom"><span class="entity_def" id="Code_Inventory.A_inv_def|axiom"><span class="entity_def" id="Code_Inventory.inventory_ex.A_inv|const"><span class="entity_def" id="Code_Inventory.inventory_ex.transition|const"><span class="entity_def" id="Code_Inventory.inventory_ex.reward|const"><span class="entity_def" id="Code_Inventory.inventory_ex.exp_rev|const"><span class="entity_def" id="Code_Inventory.inventory_ex.prob_ge_inv|const"><span class="entity_def" id="Code_Inventory.inventory_ex.order_cost|const"><span>global_interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> inventory_ex</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inventory|locale"><span>inventory</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fixed_cost|const"><span>fixed_cost</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.var_cost|const"><span>var_cost</span></a><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.capacity|type"><span>capacity</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inv_cost|const"><span>inv_cost</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.demand_unif|const"><span>demand_unif</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.revenue|const"><span>revenue</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.discount|const"><span>discount</span></a></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.A_inv|const"><span>A_inv</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_5335..5340"><span>inventory_ex.A_inv</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.transition|const"><span>transition</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_2281..2291"><span>inventory_ex.transition</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.reward|const"><span>reward</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_2181..2187"><span>inventory_ex.reward</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.prob_ge_inv|const"><span>prob_ge_inv</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_2031..2042"><span>inventory_ex.prob_ge_inv</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.order_cost|const"><span>order_cost</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_1955..1965"><span>inventory_ex.order_cost</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Code_Inventory.exp_rev|const"><span>exp_rev</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#offset_2090..2097"><span>inventory_ex.exp_rev</span></a></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.K|const"><span>K</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inventory_ex.transition|const"><span>inventory_ex.transition</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.A|const"><span>A</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inventory_ex.A_inv|const"><span>inventory_ex.A_inv</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.r|const"><span>r</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.inventory_ex.reward|const"><span>inventory_ex.reward</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.l|const"><span>l</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="numeral"><span>0.95</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.eps_def|fact"><span class="entity_def" id="Code_Inventory.eps_def|thm"><span class="entity_def" id="Code_Inventory.eps_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.eps|const"><span>eps</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>0.1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.fun_to_list_def|fact"><span class="entity_def" id="Code_Inventory.fun_to_list_def|thm"><span class="entity_def" id="Code_Inventory.fun_to_list_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.fun_to_list|const"><span>fun_to_list</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_gs_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_gs_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_gs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_gs|const"><span>benchmark_gs</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.vi_policy&apos;|const"><span>vi_policy'</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.eps|const"><span>eps</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_vi_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_vi_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_vi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_vi|const"><span>benchmark_vi</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.vi_gs_policy|const"><span>vi_gs_policy</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.eps|const"><span>eps</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_mpi_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_mpi_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_mpi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_mpi|const"><span>benchmark_mpi</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span> </span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mpi_user|const"><span>mpi_user</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.eps|const"><span>eps</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_pi_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_pi_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_pi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_pi|const"><span>benchmark_pi</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.policy_iteration|const"><span>policy_iteration</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.vs_n.elims|fact"><span class="entity_def" id="Code_Inventory.vs_n.induct|fact"><span class="entity_def" id="Code_Inventory.vs_n.simps|fact"><span class="entity_def" id="Code_Inventory.vs_n.pelims|fact"><span class="entity_def" id="Code_Inventory.vs_n.cases|fact"><span class="entity_def" id="Code_Inventory.vs_n.termination|fact"><span class="entity_def" id="Code_Inventory.vs_n.pinduct|fact"><span class="entity_def" id="Code_Inventory.vs_n.psimps|fact"><span class="entity_def" id="Code_Inventory.vs_n_rel.inducts|fact"><span class="entity_def" id="Code_Inventory.vs_n_rel.simps|fact"><span class="entity_def" id="Code_Inventory.vs_n_rel.induct|fact"><span class="entity_def" id="Code_Inventory.vs_n_rel.cases|fact"><span class="entity_def" id="Code_Inventory.vs_n_rel.intros|fact"><span class="entity_def" id="Code_Inventory.vs_n_graph.inducts|fact"><span class="entity_def" id="Code_Inventory.vs_n_graph.simps|fact"><span class="entity_def" id="Code_Inventory.vs_n_graph.induct|fact"><span class="entity_def" id="Code_Inventory.vs_n_graph.cases|fact"><span class="entity_def" id="Code_Inventory.vs_n_graph.intros|fact"><span class="entity_def" id="Code_Inventory.vs_n.elims|thm"><span class="entity_def" id="Code_Inventory.vs_n.induct|thm"><span class="entity_def" id="Code_Inventory.vs_n.simps(2)|thm"><span class="entity_def" id="Code_Inventory.vs_n.simps(1)|thm"><span class="entity_def" id="Code_Inventory.vs_n.pelims|thm"><span class="entity_def" id="Code_Inventory.vs_n.cases|thm"><span class="entity_def" id="Code_Inventory.vs_n.termination|thm"><span class="entity_def" id="Code_Inventory.vs_n.pinduct|thm"><span class="entity_def" id="Code_Inventory.vs_n.psimps(2)|thm"><span class="entity_def" id="Code_Inventory.vs_n.psimps(1)|thm"><span class="entity_def" id="Code_Inventory.vs_n_rel.inducts|thm"><span class="entity_def" id="Code_Inventory.vs_n_rel.simps|thm"><span class="entity_def" id="Code_Inventory.vs_n_rel.induct|thm"><span class="entity_def" id="Code_Inventory.vs_n_rel.cases|thm"><span class="entity_def" id="Code_Inventory.vs_n_rel.intros|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.inducts|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.simps|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.induct|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.cases|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.intros(2)|thm"><span class="entity_def" id="Code_Inventory.vs_n_graph.intros(1)|thm"><span class="entity_def" id="Code_Inventory.vs_n_def|axiom"><span class="entity_def" id="Code_Inventory.vs_n_rel_def|axiom"><span class="entity_def" id="Code_Inventory.vs_n_sumC_def|axiom"><span class="entity_def" id="Code_Inventory.vs_n_graph_def|axiom"><span class="entity_def" id="Code_Inventory.vs_n_dom|const"><span class="entity_def" id="Code_Inventory.vs_n_rel|const"><span class="entity_def" id="Code_Inventory.vs_n_sumC|const"><span class="entity_def" id="Code_Inventory.vs_n_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Inventory.vs_n|const"><span>vs_n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vs_n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vs_n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>vs_n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b|const"><span>mod_MDP_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.vs_n&apos;_def|fact"><span class="entity_def" id="Code_Inventory.vs_n&apos;_def|thm"><span class="entity_def" id="Code_Inventory.vs_n&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.vs_n&apos;|const"><span>vs_n'</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.vs_n|const"><span>vs_n</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_vi_n_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_vi_n_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_vi_n_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_vi_n|const"><span>benchmark_vi_n</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.vs_n|const"><span>vs_n</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Inventory.benchmark_vi_nopol_def|fact"><span class="entity_def" id="Code_Inventory.benchmark_vi_nopol_def|thm"><span class="entity_def" id="Code_Inventory.benchmark_vi_nopol_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Inventory.benchmark_vi_nopol|const"><span>benchmark_vi_nopol</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_value_iteration|const"><span>mod_MDP_value_iteration</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.K|const"><span>K</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.A|const"><span>A</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.r|const"><span>r</span></a><span> </span><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.l|const"><span>l</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="numeral"><span>10</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
value "benchmark_gs ()"
value "benchmark_vi ()"
value "benchmark_pi ()"
value "benchmark_mpi ()"
</span><span>*</span><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>export_code</span></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.vs_n&apos;|const"><span>vs_n'</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_vi_nopol|const"><span>benchmark_vi_nopol</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_vi_n|const"><span>benchmark_vi_n</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Code_Numeral.html#Code_Numeral.nat_of_integer|const"><span>nat_of_integer</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Code_Numeral.html#Code_Numeral.integer.integer_of_int|const"><span>integer_of_int</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_gs|const"><span>benchmark_gs</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_vi|const"><span>benchmark_vi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_mpi|const"><span>benchmark_mpi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_pi|const"><span>benchmark_pi</span></a></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> Haskell </span><span class="keyword2"><span class="keyword"><span>module_name</span></span></span><span> DP</span><span>

</span><span class="keyword1"><span class="command"><span>export_code</span></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Code_Numeral.html#Code_Numeral.integer.integer_of_int|const"><span>integer_of_int</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_gs|const"><span>benchmark_gs</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_vi|const"><span>benchmark_vi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_mpi|const"><span>benchmark_mpi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Inventory.html#Code_Inventory.benchmark_pi|const"><span>benchmark_pi</span></a></span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> SML </span><span class="keyword2"><span class="keyword"><span>module_name</span></span></span><span> DP</span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'>body>
<div class="head">
<h1>Theory Code_Gridworld</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Code_Gridworld</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="Code_Mod.html"><span>Code_Mod</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Gridworld Example</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>abstype</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.embed_pmf|const"><span>embed_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.td_pmf_embed_pmf|fact"><span>td_pmf_embed_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Typedef.html#Typedef.type_definition_def|fact"><span>type_definition_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code_abbrev</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/PMF_Impl.html#PMF_Impl.pmf_integral_code_unfold|fact"><span>pmf_integral_code_unfold</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code_unfold</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite_UNIV|fact"><span>finite_class.finite_UNIV</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf|fact"><span>integral_measure_pmf</span></a><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_scaleR_def|fact"><span>real_scaleR_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.cong|fact"><span>sum.cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Indicator_Function.html#Indicator_Function.indicat_real|const"><span>indicat_real</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf|const"><span>bind_pmf</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Enum.html#Enum.enum|class"><span>enum</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>Probability_Mass_Function.pmf_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> 3 x 4 + 1 * Trap </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="Code_Gridworld.state_robot|type"><span>state_robot</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>13</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.from_state_def|fact"><span class="entity_def" id="Code_Gridworld.from_state_def|thm"><span class="entity_def" id="Code_Gridworld.from_state_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.from_state|const"><span>from_state</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>4</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Rep|const"><span>Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.modulo_class.modulo|const"><span>mod</span></a></span><span> </span><span class="numeral"><span>4</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.to_state_def|fact"><span class="entity_def" id="Code_Gridworld.to_state_def|thm"><span class="entity_def" id="Code_Gridworld.to_state_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.to_state|const"><span>to_state</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Rank_Nullity_Theorem/Mod_Type.html#Mod_Type.mod_type_class.Abs|const"><span>Abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.state_robot|type"><span>state_robot</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> up, right, down, left </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="Code_Gridworld.action_robot|type"><span>action_robot</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="numeral"><span>4</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.A_robot.elims|fact"><span class="entity_def" id="Code_Gridworld.A_robot.induct|fact"><span class="entity_def" id="Code_Gridworld.A_robot.simps|fact"><span class="entity_def" id="Code_Gridworld.A_robot.pelims|fact"><span class="entity_def" id="Code_Gridworld.A_robot.cases|fact"><span class="entity_def" id="Code_Gridworld.A_robot.termination|fact"><span class="entity_def" id="Code_Gridworld.A_robot.pinduct|fact"><span class="entity_def" id="Code_Gridworld.A_robot.psimps|fact"><span class="entity_def" id="Code_Gridworld.A_robot_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.A_robot_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.A_robot_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.A_robot_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.A_robot_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.A_robot_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.A_robot_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.A_robot_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.A_robot_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.A_robot_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.A_robot.elims|thm"><span class="entity_def" id="Code_Gridworld.A_robot.induct|thm"><span class="entity_def" id="Code_Gridworld.A_robot.simps|thm"><span class="entity_def" id="Code_Gridworld.A_robot.pelims|thm"><span class="entity_def" id="Code_Gridworld.A_robot.cases|thm"><span class="entity_def" id="Code_Gridworld.A_robot.termination|thm"><span class="entity_def" id="Code_Gridworld.A_robot.pinduct|thm"><span class="entity_def" id="Code_Gridworld.A_robot.psimps|thm"><span class="entity_def" id="Code_Gridworld.A_robot_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.A_robot_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.A_robot_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.A_robot_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.A_robot_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.A_robot_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.A_robot_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.A_robot_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.A_robot_graph.intros|thm"><span class="entity_def" id="Code_Gridworld.A_robot_def|axiom"><span class="entity_def" id="Code_Gridworld.A_robot_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.A_robot_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.A_robot_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.A_robot_dom|const"><span class="entity_def" id="Code_Gridworld.A_robot_rel|const"><span class="entity_def" id="Code_Gridworld.A_robot_sumC|const"><span class="entity_def" id="Code_Gridworld.A_robot_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.A_robot|const"><span>A_robot</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.state_robot|type"><span>state_robot</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.action_robot|type"><span>action_robot</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A_robot</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pos</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.noise|const"><span>noise</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>0.2</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.add_noise.rep_eq|fact"><span class="entity_def" id="Code_Gridworld.add_noise.abs_eq|fact"><span class="entity_def" id="Code_Gridworld.add_noise.transfer|fact"><span class="entity_def" id="Code_Gridworld.add_noise.rsp|fact"><span class="entity_def" id="Code_Gridworld.add_noise_def|fact"><span class="entity_def" id="Code_Gridworld.add_noise.rep_eq|thm"><span class="entity_def" id="Code_Gridworld.add_noise.abs_eq|thm"><span class="entity_def" id="Code_Gridworld.add_noise.transfer|thm"><span class="entity_def" id="Code_Gridworld.add_noise.rsp|thm"><span class="entity_def" id="Code_Gridworld.add_noise_def|thm"><span class="entity_def" id="Code_Gridworld.add_noise_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Code_Gridworld.add_noise|const"><span>add_noise</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.action_robot|type"><span>action_robot</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.action_robot|type"><span>action_robot</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>det</span></span><span> </span><span class="bound"><span>rnd</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>det</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>rnd</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.noise|const"><span>noise</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>det</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>rnd</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="bound"><span>det</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>rnd</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.noise|const"><span>noise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> n</span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_count_space_finite|fact"><span>nn_integral_count_space_finite</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.UNIV_4|fact"><span>UNIV_4</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Cartesian_Space.html#Cartesian_Space.exhaust_4|fact"><span>exhaust_4</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.r_robot.elims|fact"><span class="entity_def" id="Code_Gridworld.r_robot.induct|fact"><span class="entity_def" id="Code_Gridworld.r_robot.simps|fact"><span class="entity_def" id="Code_Gridworld.r_robot.pelims|fact"><span class="entity_def" id="Code_Gridworld.r_robot.cases|fact"><span class="entity_def" id="Code_Gridworld.r_robot.termination|fact"><span class="entity_def" id="Code_Gridworld.r_robot.pinduct|fact"><span class="entity_def" id="Code_Gridworld.r_robot.psimps|fact"><span class="entity_def" id="Code_Gridworld.r_robot_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.r_robot_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.r_robot_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.r_robot_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.r_robot_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.r_robot_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.r_robot_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.r_robot_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.r_robot_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.r_robot_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.r_robot.elims|thm"><span class="entity_def" id="Code_Gridworld.r_robot.induct|thm"><span class="entity_def" id="Code_Gridworld.r_robot.simps|thm"><span class="entity_def" id="Code_Gridworld.r_robot.pelims|thm"><span class="entity_def" id="Code_Gridworld.r_robot.cases|thm"><span class="entity_def" id="Code_Gridworld.r_robot.termination|thm"><span class="entity_def" id="Code_Gridworld.r_robot.pinduct|thm"><span class="entity_def" id="Code_Gridworld.r_robot.psimps|thm"><span class="entity_def" id="Code_Gridworld.r_robot_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.r_robot_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.r_robot_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.r_robot_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.r_robot_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.r_robot_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.r_robot_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.r_robot_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.r_robot_graph.intros|thm"><span class="entity_def" id="Code_Gridworld.r_robot_def|axiom"><span class="entity_def" id="Code_Gridworld.r_robot_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.r_robot_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.r_robot_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.r_robot_dom|const"><span class="entity_def" id="Code_Gridworld.r_robot_rel|const"><span class="entity_def" id="Code_Gridworld.r_robot_sumC|const"><span class="entity_def" id="Code_Gridworld.r_robot_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.r_robot|const"><span>r_robot</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.state_robot|type"><span>state_robot</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.action_robot|type"><span>action_robot</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r_robot</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.from_state|const"><span>from_state</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.from_state|const"><span>from_state</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> 
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.from_state|const"><span>from_state</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.K_robot.elims|fact"><span class="entity_def" id="Code_Gridworld.K_robot.induct|fact"><span class="entity_def" id="Code_Gridworld.K_robot.simps|fact"><span class="entity_def" id="Code_Gridworld.K_robot.pelims|fact"><span class="entity_def" id="Code_Gridworld.K_robot.cases|fact"><span class="entity_def" id="Code_Gridworld.K_robot.termination|fact"><span class="entity_def" id="Code_Gridworld.K_robot.pinduct|fact"><span class="entity_def" id="Code_Gridworld.K_robot.psimps|fact"><span class="entity_def" id="Code_Gridworld.K_robot_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.K_robot_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.K_robot_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.K_robot_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.K_robot_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.K_robot_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.K_robot_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.K_robot_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.K_robot_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.K_robot_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.K_robot.elims|thm"><span class="entity_def" id="Code_Gridworld.K_robot.induct|thm"><span class="entity_def" id="Code_Gridworld.K_robot.simps|thm"><span class="entity_def" id="Code_Gridworld.K_robot.pelims|thm"><span class="entity_def" id="Code_Gridworld.K_robot.cases|thm"><span class="entity_def" id="Code_Gridworld.K_robot.termination|thm"><span class="entity_def" id="Code_Gridworld.K_robot.pinduct|thm"><span class="entity_def" id="Code_Gridworld.K_robot.psimps|thm"><span class="entity_def" id="Code_Gridworld.K_robot_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.K_robot_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.K_robot_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.K_robot_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.K_robot_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.K_robot_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.K_robot_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.K_robot_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.K_robot_graph.intros|thm"><span class="entity_def" id="Code_Gridworld.K_robot_def|axiom"><span class="entity_def" id="Code_Gridworld.K_robot_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.K_robot_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.K_robot_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.K_robot_dom|const"><span class="entity_def" id="Code_Gridworld.K_robot_rel|const"><span class="entity_def" id="Code_Gridworld.K_robot_sumC|const"><span class="entity_def" id="Code_Gridworld.K_robot_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.K_robot|const"><span>K_robot</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.state_robot|type"><span>state_robot</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.action_robot|type"><span>action_robot</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.state_robot|type"><span>state_robot</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K_robot</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>loc</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.add_noise|const"><span>add_noise</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.from_state|const"><span>from_state</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>loc</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>3</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
   </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> 
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_state|const"><span>to_state</span></a><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>,</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="bound"><span>y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>3</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y'</span></span><span class="main"><span>,</span></span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_state|const"><span>to_state</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_state|const"><span>to_state</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.l_robot_def|fact"><span class="entity_def" id="Code_Gridworld.l_robot_def|thm"><span class="entity_def" id="Code_Gridworld.l_robot_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.l_robot|const"><span>l_robot</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>0.9</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Code_DP.html#Code_DP.vi_code|const"><span>vi_code</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.A_robot|const"><span>A_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.r_robot|const"><span>r_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.l_robot|const"><span>l_robot</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.l_robot_def|fact"><span>l_robot_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.to_gridworld|const"><span>to_gridworld</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.K_robot|const"><span>K_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.r_robot|const"><span>r_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.l_robot|const"><span>l_robot</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.K_robot|const"><span>K_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.A_robot|const"><span>A_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.r_robot|const"><span>r_robot</span></a><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.l_robot|const"><span>l_robot</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_policy_eval&apos;|const"><span>gridworld_policy_eval'</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld|const"><span>to_gridworld</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_policy_eval&apos;|const"><span>mod_MDP_policy_eval'</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_policy_step&apos;|const"><span>gridworld_policy_step'</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_policy_iteration_policy_step&apos;|const"><span>mod_MDP_policy_iteration_policy_step'</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_mpi_user|const"><span>gridworld_mpi_user</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_mpi_user|const"><span>mod_MDP_mpi_user</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_opt_policy_gs|const"><span>gridworld_opt_policy_gs</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_opt_policy_gs|const"><span>mod_MDP_opt_policy_gs</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_\&lt;L&gt;\&lt;^sub&gt;b|const"><span>gridworld_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_\&lt;L&gt;\&lt;^sub&gt;b|const"><span>mod_MDP_â<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_find_policy&apos;|const"><span>gridworld_find_policy'</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_find_policy&apos;|const"><span>mod_MDP_find_policy'</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_GS_rec_fun\&lt;^sub&gt;b|const"><span>gridworld_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_GS_rec_fun\&lt;^sub&gt;b|const"><span>mod_MDP_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_vi_policy&apos;|const"><span>gridworld_vi_policy'</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_vi_policy&apos;|const"><span>mod_MDP_vi_policy'</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_vi_gs_policy|const"><span>gridworld_vi_gs_policy</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_vi_gs_policy|const"><span>mod_MDP_vi_gs_policy</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gridworld_policy_iteration|const"><span>gridworld_policy_iteration</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.to_gridworld&apos;|const"><span>to_gridworld'</span></a><span> </span><a class="entity_ref" href="Code_Mod.html#Code_Mod.mod_MDP_policy_iteration|const"><span>mod_MDP_policy_iteration</span></a><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.pi_robot_n.elims|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.induct|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.simps|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.pelims|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.cases|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.termination|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.pinduct|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.psimps|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.pi_robot_n.elims|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.induct|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.simps(2)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.simps(1)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.pelims|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.cases|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.termination|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.pinduct|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.psimps(2)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n.psimps(1)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel.intros|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.intros(2)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph.intros(1)|thm"><span class="entity_def" id="Code_Gridworld.pi_robot_n_def|axiom"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.pi_robot_n_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.pi_robot_n_dom|const"><span class="entity_def" id="Code_Gridworld.pi_robot_n_rel|const"><span class="entity_def" id="Code_Gridworld.pi_robot_n_sumC|const"><span class="entity_def" id="Code_Gridworld.pi_robot_n_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.pi_robot_n|const"><span>pi_robot_n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pi_robot_n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_policy_eval&apos;|const"><span>gridworld_policy_eval'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pi_robot_n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>pi_robot_n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_policy_step&apos;|const"><span>gridworld_policy_step'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.mpi_robot_def|fact"><span class="entity_def" id="Code_Gridworld.mpi_robot_def|thm"><span class="entity_def" id="Code_Gridworld.mpi_robot_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.mpi_robot|const"><span>mpi_robot</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_mpi_user|const"><span>gridworld_mpi_user</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.gs_robot_n.elims|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.induct|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.simps|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.pelims|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.cases|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.termination|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.pinduct|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.psimps|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.gs_robot_n.elims|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.induct|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.simps(2)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.simps(1)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.pelims|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.cases|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.termination|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.pinduct|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.psimps(2)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n.psimps(1)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel.intros|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.intros(2)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph.intros(1)|thm"><span class="entity_def" id="Code_Gridworld.gs_robot_n_def|axiom"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.gs_robot_n_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.gs_robot_n_dom|const"><span class="entity_def" id="Code_Gridworld.gs_robot_n_rel|const"><span class="entity_def" id="Code_Gridworld.gs_robot_n_sumC|const"><span class="entity_def" id="Code_Gridworld.gs_robot_n_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.gs_robot_n|const"><span>gs_robot_n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gs_robot_n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_opt_policy_gs|const"><span>gridworld_opt_policy_gs</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>gs_robot_n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>gs_robot_n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_GS_rec_fun\&lt;^sub&gt;b|const"><span>gridworld_GS_rec_fun<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.vi_robot_n.elims|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.induct|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.simps|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.pelims|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.cases|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.termination|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.pinduct|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.psimps|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.inducts|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.simps|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.induct|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.cases|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.intros|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.inducts|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.simps|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.induct|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.cases|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.intros|fact"><span class="entity_def" id="Code_Gridworld.vi_robot_n.elims|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.induct|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.simps(2)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.simps(1)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.pelims|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.cases|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.termination|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.pinduct|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.psimps(2)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n.psimps(1)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.inducts|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.simps|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.induct|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.cases|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel.intros|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.inducts|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.simps|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.induct|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.cases|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.intros(2)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph.intros(1)|thm"><span class="entity_def" id="Code_Gridworld.vi_robot_n_def|axiom"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel_def|axiom"><span class="entity_def" id="Code_Gridworld.vi_robot_n_sumC_def|axiom"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph_def|axiom"><span class="entity_def" id="Code_Gridworld.vi_robot_n_dom|const"><span class="entity_def" id="Code_Gridworld.vi_robot_n_rel|const"><span class="entity_def" id="Code_Gridworld.vi_robot_n_sumC|const"><span class="entity_def" id="Code_Gridworld.vi_robot_n_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Gridworld.vi_robot_n|const"><span>vi_robot_n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vi_robot_n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_find_policy&apos;|const"><span>gridworld_find_policy'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vi_robot_n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>vi_robot_n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_\&lt;L&gt;\&lt;^sub&gt;b|const"><span>gridworld_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.mpi_result_def|fact"><span class="entity_def" id="Code_Gridworld.mpi_result_def|thm"><span class="entity_def" id="Code_Gridworld.mpi_result_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.mpi_result|const"><span>mpi_result</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.mpi_robot|const"><span>mpi_robot</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>eps</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.gs_result_def|fact"><span class="entity_def" id="Code_Gridworld.gs_result_def|thm"><span class="entity_def" id="Code_Gridworld.gs_result_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.gs_result|const"><span>gs_result</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gs_robot_n|const"><span>gs_robot_n</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.vi_result_n_def|fact"><span class="entity_def" id="Code_Gridworld.vi_result_n_def|thm"><span class="entity_def" id="Code_Gridworld.vi_result_n_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.vi_result_n|const"><span>vi_result_n</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.vi_robot_n|const"><span>vi_robot_n</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.pi_result_n_def|fact"><span class="entity_def" id="Code_Gridworld.pi_result_n_def|thm"><span class="entity_def" id="Code_Gridworld.pi_result_n_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.pi_result_n|const"><span>pi_result_n</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.pi_robot_n|const"><span>pi_robot_n</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_DP.html#Code_DP.vec_to_fun|const"><span>vec_to_fun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.fun_to_list_def|fact"><span class="entity_def" id="Code_Gridworld.fun_to_list_def|thm"><span class="entity_def" id="Code_Gridworld.fun_to_list_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.fun_to_list|const"><span>fun_to_list</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.benchmark_gs_def|fact"><span class="entity_def" id="Code_Gridworld.benchmark_gs_def|thm"><span class="entity_def" id="Code_Gridworld.benchmark_gs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.benchmark_gs|const"><span>benchmark_gs</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_vi_policy&apos;|const"><span>gridworld_vi_policy'</span></a><span> </span><span class="numeral"><span>0.1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.benchmark_vi_def|fact"><span class="entity_def" id="Code_Gridworld.benchmark_vi_def|thm"><span class="entity_def" id="Code_Gridworld.benchmark_vi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.benchmark_vi|const"><span>benchmark_vi</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_vi_gs_policy|const"><span>gridworld_vi_gs_policy</span></a><span> </span><span class="numeral"><span>0.1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.benchmark_mpi_def|fact"><span class="entity_def" id="Code_Gridworld.benchmark_mpi_def|thm"><span class="entity_def" id="Code_Gridworld.benchmark_mpi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.benchmark_mpi|const"><span>benchmark_mpi</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_mpi_user|const"><span>gridworld_mpi_user</span></a><span> </span><span class="numeral"><span>0.1</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Gridworld.benchmark_pi_def|fact"><span class="entity_def" id="Code_Gridworld.benchmark_pi_def|thm"><span class="entity_def" id="Code_Gridworld.benchmark_pi_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Code_Gridworld.benchmark_pi|const"><span>benchmark_pi</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.fun_to_list|const"><span>fun_to_list</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.gridworld_policy_iteration|const"><span>gridworld_policy_iteration</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>
value [code] "gs_result 20"
value [code] "mpi_result 0.1"
value [code] "vi_result_n 20"
value [code] "pi_result_n 3"
value "benchmark_gs"
value "benchmark_vi"
value "benchmark_mpi"
value "benchmark_pi"
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>export_code</span></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_gs|const"><span>benchmark_gs</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_vi|const"><span>benchmark_vi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_mpi|const"><span>benchmark_mpi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_pi|const"><span>benchmark_pi</span></a></span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> Haskell </span><span class="keyword2"><span class="keyword"><span>module_name</span></span></span><span> DP</span><span>
</span><span class="keyword1"><span class="command"><span>export_code</span></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_gs|const"><span>benchmark_gs</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_vi|const"><span>benchmark_vi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_mpi|const"><span>benchmark_mpi</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><a class="entity_ref" href="Code_Gridworld.html#Code_Gridworld.benchmark_pi|const"><span>benchmark_pi</span></a></span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> SML </span><span class="keyword2"><span class="keyword"><span>module_name</span></span></span><span> DP</span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Examples'><div class="head">
<h1>Theory Examples</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Examples</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><a href="Code_Inventory.html"><span>Code_Inventory</span></a><span>
    </span><a href="Code_Gridworld.html"><span>Code_Gridworld</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div>