<div id="PM">
<div class="head">
<h1>Theory PM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Introduction ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> PM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="../../HOL/HOL/Main.html">Main</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ In this paper, we use Isabelle/HOL to verify some elementary theorems and alternative axiomatizations
of classical extensional mereology, as well as some of its weaker subtheories.\footnote{For similar 
developments see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "sen_computational_2017"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "bittner_formal_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} We mostly follow the 
presentations from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span>, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span>, 
with some important corrections from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "pontow_note_2004"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "hovda_what_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span> as well as
some detailed proofs adapted from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "pietruszczak_metamereology_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.\footnote{For help with 
this project I am grateful to Zach Barnett, Sam Baron, Bob Beddor, Olivier Danvy, Mark Goh,
Jeremiah Joven Joaquin, Wang-Yen Lee, Kee Wei Loo, Bruno Woltzenlogel Paleo, Michael Pelczar, Hsueh Qu, 
Abelard Podgorski, Divyanshu Sharma, Manikaran Singh, Neil Sinhababu, Weng-Hong Tang and Zhang Jiang.} ›</span></span> 

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ We will use the following notation throughout.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 99-100 
for a helpful comparison of alternative notations.} ›</span></span>

<span class="keyword1"><span class="command">typedecl</span></span> i
<span class="keyword1"><span class="command">consts</span></span> part <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">P</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> overlap <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">O</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> proper_part <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">PP</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> sum <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infix</span></span> <span class="quoted">"<span class="keyword1">⊕</span>"</span> 52<span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> product <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infix</span></span> <span class="quoted">"<span class="keyword1">⊗</span>"</span> 53<span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> difference <span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infix</span></span> <span class="quoted">"<span class="keyword1">⊖</span>"</span> 51<span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> complement<span class="main">::</span> <span class="quoted"><span class="quoted">"i <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">─</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> universe <span class="main">::</span> <span class="quoted"><span class="quoted">"i"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">u</span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> general_sum <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>i <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">binder</span></span> <span class="quoted">"<span class="keyword1">σ</span>"</span> 9<span class="main">)</span>
<span class="keyword1"><span class="command">consts</span></span> general_product <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>i <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> i"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">binder</span></span> <span class="quoted">"<span class="keyword1">π</span>"</span> <span class="main">[</span>8<span class="main">]</span> 9<span class="main">)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Premereology ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{premereology} assumes parthood is reflexive and transitive.\footnote{ 
For discussion of reflexivity see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "kearns_can_2011"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. For transitivity see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_note_2006"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.}
In other words, parthood is assumed to be a partial ordering relation.\footnote{Hence the name \emph{premereology},
from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "parsons_many_2014"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 6.} Overlap is defined as common parthood.\footnote{See
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 28, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 261 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 36. } ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> PM <span class="main">=</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_reflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_transitivity <span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> overlap_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Parthood ›</span></span>

<span class="keyword1" id="PM-identity_implies_part"><span class="command">lemma</span></span> identity_implies_part <span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_reflexivity<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Overlap ›</span></span>

<span class="keyword1" id="PM-overlap_intro"><span class="command">lemma</span></span> overlap_intro<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-part_implies_overlap"><span class="command">lemma</span></span> part_implies_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_reflexivity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-overlap_reflexivity"><span class="command">lemma</span></span> overlap_reflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity part_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-overlap_symmetry"><span class="command">lemma</span></span> overlap_symmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-overlap_monotonicity"><span class="command">lemma</span></span> overlap_monotonicity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The next lemma is from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "hovda_what_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 66. ›</span></span>

<span class="keyword1" id="PM-overlap_lemma"><span class="command">lemma</span></span> overlap_lemma<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Disjointness ›</span></span>

<span class="keyword1" id="PM-disjoint_implies_distinct"><span class="command">lemma</span></span> disjoint_implies_distinct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-disjoint_implies_not_part"><span class="command">lemma</span></span> disjoint_implies_not_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-disjoint_symmetry"><span class="command">lemma</span></span> disjoint_symmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="PM-disjoint_demonotonicity"><span class="command">lemma</span></span> disjoint_demonotonicity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="comment1">(*&lt;*)</span><span class="keyword2"><span class="keyword">end</span></span><span class="comment1">(*&gt;*)</span></pre>
</div><div id="M">
<div class="head">
<h1>Theory M</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Ground Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> M
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="PM.html">PM</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{ground mereology} adds to premereology the antisymmetry of parthood, and
defines proper parthood as nonidentical parthood.\footnote{For this axiomatization of ground mereology see,
for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 261 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 36. For discussion of the 
antisymmetry of parthood see, for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_antisymmetry_2010"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. For the definition of 
proper parthood as nonidentical parthood, see for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "leonard_calculus_1940"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 47.} 
In other words, ground mereology assumes that parthood is a partial order.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> M <span class="main">=</span> PM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_antisymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nip_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Proper Parthood ›</span></span>

<span class="keyword1" id="M-proper_implies_part"><span class="command">lemma</span></span> proper_implies_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="M-proper_implies_distinct"><span class="command">lemma</span></span> proper_implies_distinct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="M-proper_implies_not_part"><span class="command">lemma</span></span> proper_implies_not_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_distinct<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="M-proper_part_asymmetry"><span class="command">lemma</span></span> proper_part_asymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_distinct<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="M-proper_implies_overlap"><span class="command">lemma</span></span> proper_implies_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The rest of this section compares four alternative axiomatizations of ground mereology, and
verifies their equivalence. ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The first alternative axiomatization defines proper parthood as nonmutual instead of nonidentical parthood.\footnote{
See, for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 261 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 36. For the distinction
between nonmutual and nonidentical parthood, see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "parsons_many_2014"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 6-8.}
In the presence of antisymmetry, the two definitions of proper parthood are equivalent.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_antisymmetry_2010"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 398, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "donnelly_using_2011"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 233, 
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_non-wellfounded_2012"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 191, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "obojska_remarks_2013"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 344,
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_does_2016"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 128 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_is_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> M1 <span class="main">=</span> PM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nmp_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_antisymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M <span class="main">⊆</span> M1
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> nmp_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> nip<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> nip <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> nmp<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> nmp <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_antisymmetry<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M1 <span class="main">⊆</span> M
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> nip_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> nmp_eq <span class="keyword1"><span class="command">have</span></span> nmp<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> nmp <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> nip<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> nip <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> nmp_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_antisymmetry<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Conversely, assuming the two definitions of proper parthood are equivalent entails the antisymmetry
of parthood, leading to the second alternative axiomatization, which assumes both equivalencies.\footnote{
For this point see especially <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "parsons_many_2014"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 9-10.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> M2 <span class="main">=</span> PM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nip_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nmp_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M <span class="main">⊆</span> M2
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nmp_eq<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M2 <span class="main">⊆</span> M
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> 
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> nmp_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ In the context of the other axioms, antisymmetry is equivalent to the extensionality of parthood, 
which gives the third alternative axiomatization.\footnote{For this point see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_antisymmetry_2010"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 401 
and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_non-wellfounded_2012"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 191-2.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> M3 <span class="main">=</span> PM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nip_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_extensionality<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M <span class="main">⊆</span> M3
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> part_extensionality<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_reflexivity<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_reflexivity<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M3 <span class="main">⊆</span> M
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> part_antisymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The fourth axiomatization adopts proper parthood as primitive.\footnote{See, for example, 
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span>, p. 26 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 37.} Improper parthood is
defined as proper parthood or identity.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> M4 <span class="main">=</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span>  overlap_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> proper_part_asymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> proper_part_transitivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="M-proper_part_irreflexivity"><span class="command">lemma</span></span> proper_part_irreflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_part_asymmetry<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M <span class="main">⊆</span> M4
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">z</span>
  <span class="keyword3"><span class="command">show</span></span> part_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> 
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> identity_implies_part<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> proper_part_asymmetry<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> proper_part_transitivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_part_asymmetry<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> M4 <span class="main">⊆</span> M
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">z</span>
  <span class="keyword3"><span class="command">show</span></span> proper_part_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> proper_part_irreflexivity <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> rhs<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> rhs <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span> 
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> refl<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_part_asymmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="skolem">y</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span> <span class="main">∨</span> <span class="skolem">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> part_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="MM">
<div class="head">
<h1>Theory MM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Minimal Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> MM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="M.html">M</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Minimal mereology adds to ground mereology the axiom of weak supplementation.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 39. The name \emph{minimal mereology}
reflects the, controversial, idea that weak supplementation is analytic. See, for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span>
p. 116, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_extensionality_2008"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 110-1, and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_is_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. For general
discussion of weak supplementation see, for example <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "smith_mereology_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 507 and 
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "donnelly_using_2011"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> MM <span class="main">=</span> M <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> weak_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The rest of this section considers three alternative axiomatizations of minimal mereology. The
first alternative axiomatization replaces improper with proper parthood in the consequent of weak
supplementation.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 28.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> MM1 <span class="main">=</span> M <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> proper_weak_supplementation<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM <span class="main">⊆</span> MM1
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>                                       
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="skolem">z</span> <span class="main">≠</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">≠</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_overlap<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM1 <span class="main">⊆</span> MM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> weak_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_weak_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The following two corollaries are sometimes found in the literature.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 27. For the names \emph{weak company} 
and \emph{strong company} see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_non-wellfounded_2012"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 192-3 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_mereology_2016"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} ›</span></span>

<span class="keyword1"><span class="command">context</span></span> MM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">corollary</span></span> weak_company<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="bound">z</span> <span class="main">≠</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_weak_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">≠</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_implies_distinct<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="skolem">z</span> <span class="main">≠</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="bound">z</span> <span class="main">≠</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> strong_company<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_weak_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_implies_not_part<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ If weak supplementation is formulated in terms of nonidentical parthood, then the antisymmetry 
of parthood is redundant, and we have the second alternative axiomatization of minimal mereology.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_antisymmetry_2010"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 399, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "donnelly_using_2011"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 232,
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_non-wellfounded_2012"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 193 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "obojska_remarks_2013"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 235-6.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> MM2 <span class="main">=</span> PM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> nip_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> weak_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM2 <span class="main">⊆</span> MM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> part_antisymmetry<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span> 
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_implies_not_part<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weak_supplementation<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM <span class="main">⊆</span> MM2
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span> <span class="main">≠</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nip_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weak_supplementation<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Likewise, if proper parthood is adopted as primitive, then the asymmetry of proper parthood
is redundant in the context of weak supplementation, leading to the third alternative
axiomatization.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "donnelly_using_2011"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 232 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_is_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> MM3 <span class="main">=</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> part_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> overlap_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> proper_part_transitivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> weak_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="MM-part_reflexivity"><span class="command">lemma</span></span> part_reflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="MM-proper_part_irreflexivity"><span class="command">lemma</span></span> proper_part_irreflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_reflexivity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM3 <span class="main">⊆</span> M4
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">z</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> proper_part_irreflexivity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> proper_part_irreflexivity <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> proper_part_transitivity<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM3 <span class="main">⊆</span> MM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weak_supplementation<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> MM <span class="main">⊆</span> MM3
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">z</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">z</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="skolem">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> proper_part_transitivity<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weak_supplementation<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="EM">
<div class="head">
<h1>Theory EM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Extensional Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> EM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="MM.html">MM</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Extensional mereology adds to ground mereology the axiom of strong supplementation.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 29, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 262 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> 
p. 39-40.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> EM <span class="main">=</span> M <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> strong_supplementation<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Strong supplementation entails weak supplementation.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span>
p. 29 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 40.} ›</span></span>

<span class="keyword1" id="EM-weak_supplementation"><span class="command">lemma</span></span> weak_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_not_part<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ So minimal mereology is a subtheory of extensional mereology.\footnote{<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 40.} ›</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> EM <span class="main">⊆</span> MM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span> <span class="skolem">x</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weak_supplementation<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Strong supplementation also entails the proper parts principle.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span>
pp. 28-9 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 263.} ›</span></span>

<span class="keyword1"><span class="command">context</span></span> EM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="EM-proper_parts_principle"><span class="command">lemma</span></span> proper_parts_principle<span class="main">:</span>
<span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">≠</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span>  <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="skolem">z</span> <span class="main">≠</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Which with antisymmetry entails the extensionality of proper parthood.\footnote{See
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 28, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 263 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span>
p. 40.} ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> proper_part_extensionality<span class="main">:</span>
<span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> right<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> disjE<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_parts_principle<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_parts_principle<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_parts_principle<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">PP</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>`</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_parts_principle<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ It also follows from strong supplementation that parthood is definable in terms of overlap.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "parsons_many_2014"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 4.}  ›</span></span>

<span class="keyword1" id="EM-part_overlap_eq"><span class="command">lemma</span></span> part_overlap_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> right<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Which entails the extensionality of overlap. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> overlap_extensionality<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> right<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="CM">
<div class="head">
<h1>Theory CM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Closed Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> CM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="M.html">M</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{closed mereology} adds to ground mereology conditions guaranteeing the
existence of sums and products.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "masolo_atomicity_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 238. <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 263 
and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 43 give a slightly weaker version of the sum closure axiom, which is
equivalent given axioms considered later.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CM <span class="main">=</span> M <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> sum_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> sum_closure<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> product_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> product_closure<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Products ›</span></span>

<span class="keyword1" id="CM-product_intro"><span class="command">lemma</span></span> product_intro<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">v</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">assume</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> product_eq <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_idempotence"><span class="command">lemma</span></span> product_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_character"><span class="command">lemma</span></span> product_character<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_closure<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> z <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_commutativity"><span class="command">lemma</span></span> product_commutativity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⊗</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⊗</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_in_factors"><span class="command">lemma</span></span> product_in_factors<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_reflexivity<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_in_first_factor"><span class="command">lemma</span></span> product_in_first_factor<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_factors<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_in_second_factor"><span class="command">lemma</span></span> product_in_second_factor<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_factors<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-nonpart_implies_proper_product"><span class="command">lemma</span></span> nonpart_implies_proper_product<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">PP</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_first_factor<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">≠</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_second_factor<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">≠</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-common_part_in_product"><span class="command">lemma</span></span> common_part_in_product<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_part_in_factors"><span class="command">lemma</span></span> product_part_in_factors<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> product_part_in_first_factor<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> product_part_in_second_factor<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-part_product_identity"><span class="command">lemma</span></span> part_product_identity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_reflexivity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_first_factor<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_overlap"><span class="command">lemma</span></span> product_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">z</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-disjoint_from_second_factor"><span class="command">lemma</span></span> disjoint_from_second_factor<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-converse_product_overlap"><span class="command">lemma</span></span> converse_product_overlap<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_second_factor<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-part_product_in_whole_product"><span class="command">lemma</span></span> part_product_in_whole_product<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>     
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_reflexivity<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-right_associated_product"><span class="command">lemma</span></span> right_associated_product<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span>
  <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> yz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> xyz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">from</span></span> yz <span class="keyword1"><span class="command">have</span></span> wyz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> xyz <span class="keyword1"><span class="command">have</span></span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-left_associated_product"><span class="command">lemma</span></span> left_associated_product<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span>
  <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> xy<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> xyz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">from</span></span> xy <span class="keyword1"><span class="command">have</span></span> vxy<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> xyz <span class="keyword1"><span class="command">have</span></span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> product_associativity<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> ante<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> right_associated_product<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> ante <span class="keyword1"><span class="command">have</span></span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> left_associated_product<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Differences  ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Some writers also add to closed mereology the axiom of difference closure.\footnote{See, for example,
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 263 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "masolo_atomicity_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 238.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CMD <span class="main">=</span> CM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> difference_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> difference_closure<span class="main">:</span>
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CM-difference_intro"><span class="command">lemma</span></span> difference_intro<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">assume</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> difference_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-difference_idempotence"><span class="command">lemma</span></span> difference_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_symmetry<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_demonotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_symmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-difference_character"><span class="command">lemma</span></span> difference_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> 
  <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_closure<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> z <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-difference_disjointness"><span class="command">lemma</span></span> difference_disjointness<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> xmy<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> xmy <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ The Universe ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Another closure condition sometimes considered is the existence of the universe.\footnote{
See, for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 264 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 45.}  ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CMU <span class="main">=</span> CM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> universe_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> universe_closure<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CM-universe_intro"><span class="command">lemma</span></span> universe_intro<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">u</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">assume</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> z <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> v <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_eq <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-universe_character"><span class="command">lemma</span></span> universe_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> universe_closure <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="keyword2"><span class="keyword">where</span></span> y<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> universe_intro<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> y <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">PP</span> <span class="keyword1">u</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="keyword1">u</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_not_part<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_character<span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_universe_implies_factor_universe"><span class="command">lemma</span></span> product_universe_implies_factor_universe<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_first_factor<span class="main">)</span>  
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="keyword1">u</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> universe_character <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Complements ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ As is a condition ensuring the existence of complements.\footnote{See, for example, 
 <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 264 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 45.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CMC <span class="main">=</span> CM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> complement_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> complement_closure<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> difference_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CM-complement_intro"><span class="command">lemma</span></span> complement_intro<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">assume</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> part_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> complement_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-complement_character"><span class="command">lemma</span></span> complement_character<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_closure<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> z <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-not_complement_part"><span class="command">lemma</span></span> not_complement_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-complement_part"><span class="command">lemma</span></span> complement_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-complement_overlap"><span class="command">lemma</span></span> complement_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-or_complement_overlap"><span class="command">lemma</span></span> or_complement_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_overlap<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-complement_disjointness"><span class="command">lemma</span></span> complement_disjointness<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-part_disjoint_from_complement"><span class="command">lemma</span></span> part_disjoint_from_complement<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_disjointness<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CM-product_complement_character"><span class="command">lemma</span></span> product_complement_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> 
  <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part<span class="main">)</span>  
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> prod<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> prod<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> difference_closure<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> 
  <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_complement_character<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CMC <span class="main">⊆</span> CMD
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊖</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> difference_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span> <span class="main">⟹</span> 
    <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> difference_closure<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> CMC<span class="main">)</span> difference_is_product_of_complement<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_complement_character<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Universe and difference closure entail complement closure, since the difference of an individual
and the universe is the individual's complement. ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CMUD <span class="main">=</span> CMU <span class="main">+</span> CMD <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> complement_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CM-universe_difference"><span class="command">lemma</span></span> universe_difference<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> ux<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">from</span></span> ux <span class="keyword1"><span class="command">have</span></span> wux<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> wux <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> wux <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> complement_closure<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> universe_difference<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CMUD <span class="main">⊆</span> CMC
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> complement_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> complement_closure<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊖</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> difference_eq<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> CMUD<span class="main">)</span> complement_universe_difference<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> universe_difference<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">" <span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">u</span> <span class="main">⊖</span> <span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="CEM">
<div class="head">
<h1>Theory CEM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Closed Extensional Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> CEM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="CM.html">CM</a> <a href="EM.html">EM</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Closed extensional mereology combines closed mereology with extensional mereology.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 263 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 43.} ›</span></span>  

<span class="keyword1"><span class="command">locale</span></span> CEM <span class="main">=</span> CM <span class="main">+</span> EM

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Likewise, closed minimal mereology combines closed mereology with minimal mereology.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 43.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CMM <span class="main">=</span> CM <span class="main">+</span> MM

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ But famously closed minimal mereology and closed extensional mereology are the same theory,
because in closed minimal mereology product closure and weak supplementation entail strong
supplementation.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 31 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 44.} ›</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CMM <span class="main">⊆</span> CEM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> strong_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span><span class="main">)</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> nonpart_implies_proper_product<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_from_second_factor<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> part_reflexivity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CEM <span class="main">⊆</span> CMM<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Sums ›</span></span>

<span class="keyword1"><span class="command">context</span></span> CEM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CEM-sum_intro"><span class="command">lemma</span></span> sum_intro<span class="main">:</span>
   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">v</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span>
    <span class="keyword3"><span class="command">assume</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword1"><span class="command">from</span></span> sum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> a <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> sum_eq <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_idempotence"><span class="command">lemma</span></span> sum_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> iffI<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjE<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-part_sum_identity"><span class="command">lemma</span></span> part_sum_identity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_character"><span class="command">lemma</span></span> sum_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> sum_closure <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="skolem">a</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> a <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_overlap"><span class="command">lemma</span></span> sum_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> sum_character<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1" id="CEM-sum_part_character"><span class="command">lemma</span></span> sum_part_character<span class="main">:</span>  
  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">w</span>"</span></span>    
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> sum_overlap <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> right<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> sum_overlap <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">w</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_commutativity"><span class="command">lemma</span></span> sum_commutativity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-first_summand_overlap"><span class="command">lemma</span></span> first_summand_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> sum_overlap <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-first_summand_disjointness"><span class="command">lemma</span></span> first_summand_disjointness<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-first_summand_in_sum"><span class="command">lemma</span></span> first_summand_in_sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-common_first_summand"><span class="command">lemma</span></span> common_first_summand<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">from</span></span> first_summand_in_sum <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">from</span></span> first_summand_in_sum <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-common_first_summand_overlap"><span class="command">lemma</span></span> common_first_summand_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> first_summand_in_sum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> first_summand_in_sum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-second_summand_overlap"><span class="command">lemma</span></span> second_summand_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-second_summand_disjointness"><span class="command">lemma</span></span> second_summand_disjointness<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-second_summand_in_sum"><span class="command">lemma</span></span> second_summand_in_sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-second_summands_in_sums"><span class="command">lemma</span></span> second_summands_in_sums<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">z</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summand_in_sum<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">z</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summand_in_sum<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-disjoint_from_sum"><span class="command">lemma</span></span> disjoint_from_sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-summands_part_implies_sum_part"><span class="command">lemma</span></span> summands_part_implies_sum_part<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">have</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> sum_character<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> part_overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_part_implies_summands_part"><span class="command">lemma</span></span> sum_part_implies_summands_part<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="free">z</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> first_summand_in_sum <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> antecedent <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> second_summand_in_sum <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> antecedent <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-in_second_summand"><span class="command">lemma</span></span> in_second_summand<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> disjE<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-disjoint_second_summands"><span class="command">lemma</span></span> disjoint_second_summands<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">v</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">v</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span> 
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> in_second_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">v</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> in_second_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-right_associated_sum"><span class="command">lemma</span></span> right_associated_sum<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span>
    <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-left_associated_sum"><span class="command">lemma</span></span> left_associated_sum<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span>
    <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> sum_associativity<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> right_associated_sum <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> left_associated_sum <span class="keyword3"><span class="command">show</span></span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Distributivity ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The proofs in this section are adapted from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "pietruszczak_metamereology_2018"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 102-4.  ›</span></span>

<span class="keyword1" id="CEM-common_summand_in_product"><span class="command">lemma</span></span> common_summand_in_product<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> common_first_summand <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>

<span class="keyword1" id="CEM-product_in_first_summand"><span class="command">lemma</span></span> product_in_first_summand<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> common_first_summand_overlap <span class="keyword1"><span class="command">have</span></span> 
        <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>`</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_second_summands<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> 
    <span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>
  
<span class="keyword1" id="CEM-product_is_first_summand"><span class="command">lemma</span></span> product_is_first_summand<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_first_summand<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> common_summand_in_product
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_over_product_left"><span class="command">lemma</span></span> sum_over_product_left<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summands_in_sums
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_product_in_whole_product<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> common_summand_in_product <span class="keyword1"><span class="command">have</span></span>
    <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> summands_part_implies_sum_part<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_over_product_right"><span class="command">lemma</span></span> sum_over_product_right<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">" <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> disjoint_from_sum <span class="keyword1"><span class="command">have</span></span> vd<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> vd <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> common_first_summand_overlap <span class="keyword1"><span class="command">have</span></span> 
      vs<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> in_second_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> vs <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> in_second_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>    
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Sums distribute over products. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> sum_over_product<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_over_product_left<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_over_product_right<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-product_in_factor_by_sum"><span class="command">lemma</span></span> product_in_factor_by_sum<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_first_factor<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_second_factor<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> first_summand_in_sum <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_in_product<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-product_of_first_summand"><span class="command">lemma</span></span> product_of_first_summand<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_overlap<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_from_second_factor<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> in_second_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> disjoint_product_over_sum<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_of_first_summand<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_in_factor_by_sum<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-product_over_sum_left"><span class="command">lemma</span></span> product_over_sum_left<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_overlap<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> 
      <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> disjoint_from_sum <span class="keyword1"><span class="command">have</span></span> oxyz<span class="main">:</span>
      <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> pxyz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_factors<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> oxyz <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_from_second_factor<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> oxyz <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_from_second_factor<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> disjoint_from_sum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> pxyz <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-product_over_sum_right"><span class="command">lemma</span></span> product_over_sum_right<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span> <span class="main">⟹</span> <span class="keyword1">P</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span>  product_in_factor_by_sum<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">z</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span>  product_in_factor_by_sum<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> summands_part_implies_sum_part<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> product_over_sum<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_over_sum_left<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span><span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> antecedent <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_over_sum_right<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-joint_identical_sums"><span class="command">lemma</span></span> joint_identical_sums<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">w</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">v</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">w</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">w</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">v</span> <span class="main">⊕</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">w</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_over_sum<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">v</span> <span class="main">⊕</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> first_summand_in_sum
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_product_identity<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">v</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">w</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-disjoint_identical_sums"><span class="command">lemma</span></span> disjoint_identical_sums<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="free">v</span> <span class="main">∧</span> <span class="free">y</span> <span class="main">=</span> <span class="free">w</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> identical<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> disjoint<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">v</span> <span class="main">∧</span> <span class="free">y</span> <span class="main">=</span> <span class="free">w</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> disjoint <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_is_first_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> identical <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> disjoint <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">v</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_is_first_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span> <span class="main">=</span> <span class="free">v</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">from</span></span> disjoint <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_is_first_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> disjoint <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">w</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊕</span> <span class="free">v</span><span class="main">)</span> <span class="main">=</span> <span class="free">w</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_is_first_summand<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">w</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">v</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">=</span> <span class="free">w</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> identical <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">w</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">w</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">w</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">w</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">w</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">w</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">w</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Differences ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CEMD <span class="main">=</span> CEM <span class="main">+</span> CMD
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CEM-plus_minus"><span class="command">lemma</span></span> plus_minus<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span> <span class="main">⟹</span> <span class="free">y</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> xmy<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> difference_character<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">from</span></span> xmy <span class="keyword1"><span class="command">have</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">from</span></span> xmy <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">PP</span> <span class="free">y</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> proper_implies_part<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> xmy <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">⊕</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ The Universe ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CEMU <span class="main">=</span> CEM <span class="main">+</span> CMU
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CEM-something_disjoint"><span class="command">lemma</span></span> something_disjoint<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-overlaps_universe"><span class="command">lemma</span></span> overlaps_universe<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-universe_absorbing"><span class="command">lemma</span></span> universe_absorbing<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="keyword1">u</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="keyword1">u</span><span class="main">)</span> <span class="keyword1">u</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="keyword1">u</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summand_in_sum
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-second_summand_not_universe"><span class="command">lemma</span></span> second_summand_not_universe<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="keyword1">u</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> antecedent <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_absorbing<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-first_summand_not_universe"><span class="command">lemma</span></span> first_summand_not_universe<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> sum_commutativity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">⊕</span> <span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_not_universe<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Complements ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> CEMC <span class="main">=</span> CEM <span class="main">+</span> CMC <span class="main">+</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> universe_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="CEM-complement_sum_character"><span class="command">lemma</span></span> complement_sum_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> or_complement_overlap<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> sum_part_character <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-universe_closure"><span class="command">lemma</span></span> universe_closure<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> complement_sum_character <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CEMC <span class="main">⊆</span> CEMU
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_closure<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> CEMC <span class="main">⊆</span> CEMD
<span class="keyword1"><span class="command">proof</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">context</span></span> CEMC
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">corollary</span></span> universe_is_complement_sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> complement_sum_character <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> universe_intro<span class="main">)</span>

<span class="keyword1" id="CEM-strong_complement_character"><span class="command">lemma</span></span> strong_complement_character<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> something_disjoint<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-complement_part_not_part"><span class="command">lemma</span></span> complement_part_not_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> y<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">x</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_implies_not_part<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-complement_involution"><span class="command">lemma</span></span> complement_involution<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="keyword1">u</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="keyword1">u</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> notx<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="keyword1">u</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> notx <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="keyword1">u</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_character<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>  
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="keyword1">u</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="keyword1">u</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">─</span><span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="keyword1">u</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> notnotx<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">s</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">s</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> notx <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> s <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>     
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">s</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">s</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">s</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> notnotx <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> s <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> or_complement_overlap <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">s</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-part_complement_reversal"><span class="command">lemma</span></span> part_complement_reversal<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span> 
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> ny<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="keyword1">u</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> universe_character <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> ny <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-complements_overlap"><span class="command">lemma</span></span> complements_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> something_disjoint<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_disjointness<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_disjointness<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-sum_complement_in_complement_product"><span class="command">lemma</span></span> sum_complement_in_complement_product<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complements_overlap<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">⟷</span><span class="main">(</span><span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> first_summand_in_sum
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_complement_reversal<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> second_summand_in_sum
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_complement_reversal<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-complement_product_in_sum_complement"><span class="command">lemma</span></span> complement_product_in_sum_complement<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complements_overlap<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_character<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> sum_character<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_not_universe<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span> 
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_not_universe<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> sum_complement_is_complements_product<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>  <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_complement_in_complement_product<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_product_in_sum_complement<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-complement_sum_in_product_complement"><span class="command">lemma</span></span> complement_sum_in_product_complement<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_universe_implies_factor_universe<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span> notxty<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_complement_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">⊕</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span><span class="keyword1">O</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">⊕</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> sum_character <span class="keyword1"><span class="command">have</span></span> 
      <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span><span class="main">⊕</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part_not_part<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_first_factor<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span> 
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_part_not_part<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_part_in_second_factor<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="CEM-product_complement_in_complements_sum"><span class="command">lemma</span></span> product_complement_in_complements_sum<span class="main">:</span>  
  <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="keyword1">P</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_involution<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_involution<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span> <span class="main">=</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> universe_character <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_involution<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊗</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_complement_is_complements_product<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">y</span> <span class="main">=</span> <span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>`</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> part_reflexivity <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">(</span><span class="main">─</span><span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> complement_of_product_is_sum_of_complements<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span> <span class="main">⟹</span> <span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span><span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">─</span><span class="free">x</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">─</span><span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> first_summand_not_universe<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> second_summand_not_universe<span class="main">)</span> 
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span> <span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="quoted"><span class="quoted">`<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_complement_in_complements_sum<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">" <span class="keyword1">P</span> <span class="main">(</span><span class="main">─</span> <span class="free">x</span> <span class="main">⊕</span> <span class="main">─</span> <span class="free">y</span><span class="main">)</span> <span class="main">(</span><span class="main">─</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="quoted"><span class="quoted">`<span class="free">y</span> <span class="main">≠</span> <span class="keyword1">u</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_sum_in_product_complement<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="GM">
<div class="head">
<h1>Theory GM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ General Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> GM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="CM.html">CM</a>
<span class="keyword2"><span class="keyword">begin</span></span> <span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{general mereology} adds the axiom of fusion to ground mereology.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 36, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 265 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 46.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> GM <span class="main">=</span> M <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> fusion<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ Fusion entails sum closure. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> sum_closure<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">a</span> <span class="main">=</span> <span class="free">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">a</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="free">a</span> <span class="main">=</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> disjE<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="free">a</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="free">b</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> disjE<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">a</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="free">a</span> <span class="main">=</span> <span class="free">b</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">a</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="free">a</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">b</span> <span class="main">=</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">b</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="free">b</span> <span class="main">=</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">b</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="free">b</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">b</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span> <span class="main">=</span> <span class="free">a</span> <span class="main">∨</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">b</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> w <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">a</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span>
</pre>
</div><div id="GMM">
<div class="head">
<h1>Theory GMM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ General Minimal Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> GMM
 <span class="keyword2"><span class="keyword">imports</span></span> <a href="GM.html">GM</a> <a href="MM.html">MM</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{general minimal mereology} adds general mereology to minimal mereology.\footnote{
See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 46.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> GMM <span class="main">=</span> GM <span class="main">+</span> MM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ It is natural to assume that just as closed minimal mereology and closed extensional mereology
are the same theory, so are general minimal mereology and general extensional mereology.\footnote{For
this mistake see <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "simons_parts:_1987"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 37 and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 46. The mistake
is corrected in <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "pontow_note_2004"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "hovda_what_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span>. For discussion of the significance
of this issue see, for example, <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_universalism_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span> and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "cotnoir_does_2016"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.}
But this is not the case, since the proof of strong supplementation in closed minimal mereology
required the product closure axiom. However, in general minimal mereology, the fusion axiom does not 
entail the product closure axiom. So neither product closure nor strong supplementation are theorems. ›</span></span>

<span class="keyword1" id="GMM-product_closure"><span class="command">lemma</span></span> product_closure<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
  <span class="keyword1"><span class="command">nitpick</span></span> <span class="main">[</span>expect <span class="main">=</span> genuine<span class="main">]</span> <span class="keyword1"><span class="command">oops</span></span>

<span class="keyword1" id="GMM-strong_supplementation"><span class="command">lemma</span></span> strong_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">nitpick</span></span> <span class="main">[</span>expect <span class="main">=</span> genuine<span class="main">]</span> <span class="keyword1"><span class="command">oops</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div><div id="GEM">
<div class="head">
<h1>Theory GEM</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ General Extensional Mereology ›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> GEM
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="GMM.html">GMM</a> <a href="CEM.html">CEM</a>
<span class="keyword2"><span class="keyword">begin</span></span> <span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The theory of \emph{general extensional mereology}, also known as \emph{classical extensional
mereology} adds general mereology to extensional mereology.\footnote{For this axiomatization see
<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "varzi_parts_1996"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 265  and <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "casati_parts_1999"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 46.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> GEM <span class="main">=</span> GM <span class="main">+</span> EM <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> sum_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> product_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> difference_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> complement_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> universe_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> fusion_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> 
    <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> general_product_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> GEM <span class="main">⊆</span> GMM
<span class="keyword1"><span class="command">proof</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ General Sums  ›</span></span>

<span class="keyword1"><span class="command">context</span></span> GEM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="GEM-fusion_intro"><span class="command">lemma</span></span> fusion_intro<span class="main">:</span> 
<span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span>
    <span class="keyword3"><span class="command">assume</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">x</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">x</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">b</span>     
      <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">b</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">b</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> a <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">b</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">b</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">b</span> <span class="skolem">a</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">b</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_extensionality <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">a</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">z</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">z</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> overlap_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_eq<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-fusion_idempotence"><span class="command">lemma</span></span> fusion_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> refl <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The whole is the sum of its parts. ›</span></span>

<span class="keyword1" id="GEM-fusion_absorption"><span class="command">lemma</span></span> fusion_absorption<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> part_reflexivity <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">x</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">x</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="free">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-part_fusion"><span class="command">lemma</span></span> part_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">w</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> fusion_absorption <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-fusion_character"><span class="command">lemma</span></span> fusion_character<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">z</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> z <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ The next lemma characterises fusions in terms of parthood.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "pontow_note_2004"<span class="antiquote"><span class="antiquote">}</span></span></span></span> pp. 202-9.} ›</span></span>

<span class="keyword1" id="GEM-fusion_part_character"><span class="command">lemma</span></span> fusion_part_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> 
  <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> F<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
        <span class="keyword1"><span class="command">from</span></span> F <span class="keyword1"><span class="command">have</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">y</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>`</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> w <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> right<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> right <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="free">F</span> <span class="bound">w</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">w</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="free">F</span> <span class="bound">w</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> F <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="free">F</span> <span class="bound">w</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">w</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-fusion_part"><span class="command">lemma</span></span> fusion_part<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">x</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">F</span> <span class="free">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-common_part_fusion"><span class="command">lemma</span></span> common_part_fusion<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> sum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> 
    <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part_character<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">from</span></span> sum <span class="keyword1"><span class="command">have</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> 
      <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> w <span class="keyword1"><span class="command">have</span></span> bla<span class="main">:</span> 
        <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> 
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">from</span></span> bla <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">from</span></span> bla <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> product_closure<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_fusion<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> GEM <span class="main">⊆</span> CEM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> sum_closure<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊕</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> sum_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> product_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> product_closure<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">context</span></span> GEM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> common_part_fusion<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> product_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-disjoint_fusion"><span class="command">lemma</span></span> disjoint_fusion<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_character<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_demonotonicity<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_symmetry<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="free">x</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> complement_closure<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_fusion<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> GEM <span class="main">⊆</span> CEMC
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> complement_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> complement_closure<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊖</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> difference_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> universe_eq<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">context</span></span> GEM
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">corollary</span></span> complement_is_disjoint_fusion<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">─</span> <span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> disjoint_fusion<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> complement_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> strong_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span>
  <span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> 
      <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part_character<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> 
      <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> strong_fusion_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> 
  <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span> 
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span>"</span></span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
            <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_part_character<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">v</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">F</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_intro<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-strong_sum_eq"><span class="command">lemma</span></span> strong_sum_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> first_summand_in_sum<span class="keyword1"><span class="command">.</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summand_in_sum<span class="keyword1"><span class="command">.</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> sum_overlap <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">w</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> sum_intro<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ General Products ›</span></span>

<span class="keyword1" id="GEM-general_product_intro"><span class="command">lemma</span></span> general_product_intro<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion_intro<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> general_product_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-general_product_idempotence"><span class="command">lemma</span></span> general_product_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="bound">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> overlap_eq part_reflexivity part_transitivity<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> general_product_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-general_product_absorption"><span class="command">lemma</span></span> general_product_absorption<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> overlap_eq part_reflexivity part_transitivity<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> general_product_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-general_product_character"><span class="command">lemma</span></span> general_product_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span> <span class="main">⟹</span> 
  <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fusion<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> general_product_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> x <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> bla<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="bound">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> general_product_character<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> bla <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">z</span>"</span></span> 
        <span class="keyword1"><span class="command">using</span></span> overlap_reflexivity<span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span> <span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> universe_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Strong Fusion ›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹ An alternative axiomatization of general extensional mereology adds a stronger version of the
fusion axiom to minimal mereology, with correspondingly stronger definitions of sums and general
sums.\footnote{See <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "tarski_foundations_1983"<span class="antiquote"><span class="antiquote">}</span></span></span></span> p. 25. The proofs in this section are adapted
from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> "hovda_what_2009"<span class="antiquote"><span class="antiquote">}</span></span></span></span>.} ›</span></span>

<span class="keyword1"><span class="command">locale</span></span> GEM1 <span class="main">=</span> MM <span class="main">+</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> strong_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> strong_sum_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> product_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊗</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> difference_eq<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊖</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> complement_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="free">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> universe_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> strong_fusion_eq<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> general_product_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">theorem</span></span> fusion<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">v</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">v</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">φ</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">x</span>`</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_intro<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-pair"><span class="command">lemma</span></span> pair<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">v</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-or_id"><span class="command">lemma</span></span> or_id<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">v</span> <span class="main">⟹</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">v</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">v</span> <span class="main">=</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">w</span> <span class="free">v</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">v</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="free">w</span> <span class="free">v</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="free">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-strong_sum_closure"><span class="command">lemma</span></span> strong_sum_closure<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> pair <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> allw<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> allw <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">v</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">v</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> or_id<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span> 

<span class="keyword1"><span class="command">sublocale</span></span> GEM1 <span class="main">⊆</span> GMM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">φ</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">φ</span> <span class="bound">x</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fusion<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">context</span></span> GEM1
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="GEM-least_upper_bound"><span class="command">lemma</span></span> least_upper_bound<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> sf<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> lub<span class="main">:</span> 
      <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
 <span class="keyword1"><span class="command">from</span></span> sf <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">next</span></span>
 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
 <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
   <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">z</span>"</span></span>
   <span class="keyword1"><span class="command">from</span></span> pair <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">y</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">y</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
   <span class="keyword1"><span class="command">hence</span></span> left<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
   <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
   <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
   <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
   <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="skolem">v</span>"</span></span>
   <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">≠</span> <span class="skolem">v</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> left <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">z</span> <span class="main">=</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">z</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="skolem">z</span> <span class="main">≠</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="skolem">z</span> <span class="main">≠</span> <span class="skolem">v</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> nip_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">PP</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> weak_supplementation<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> right<span class="main">:</span> 
      <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">y</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="bound">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">y</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">y</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">s</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">s</span> <span class="main">=</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">s</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">s</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> s <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">s</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
     <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">t</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">t</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">t</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">t</span></span> <span class="keyword2"><span class="keyword">where</span></span> t<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">from</span></span> sf <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">t</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">t</span> <span class="bound">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">t</span> <span class="skolem">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">from</span></span> sf <span class="keyword1"><span class="command">have</span></span> ub<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">a</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">a</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">a</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">F</span> <span class="skolem">a</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> a <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">t</span> <span class="skolem">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">t</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
     <span class="keyword1"><span class="command">from</span></span> t <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">t</span>"</span></span>
     <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">a</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">a</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> a <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">a</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> a <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">t</span> <span class="skolem">a</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">t</span> <span class="skolem">z</span>"</span></span>
       <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
     <span class="keyword1"><span class="command">qed</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">w</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
     <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> s <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">s</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
     <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">v</span>`</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
 <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> strong_fusion_intro<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> antecedent<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> least_upper_bound <span class="keyword1"><span class="command">have</span></span> lubx<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="bound">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_eq<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> antecedent<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
    <span class="keyword3"><span class="command">assume</span></span> w<span class="main">:</span> 
      <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">w</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">w</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> least_upper_bound <span class="keyword1"><span class="command">have</span></span> lubw<span class="main">:</span>
      <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">w</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> antecedent <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">from</span></span> lubx <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">w</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> lubw <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">w</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-strong_fusion_character"><span class="command">lemma</span></span> strong_fusion_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> x <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-F_in"><span class="command">lemma</span></span> F_in<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_character<span class="main">)</span>
 <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-parts_overlap_Fs"><span class="command">lemma</span></span> parts_overlap_Fs<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_character<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-in_strong_fusion"><span class="command">lemma</span></span> in_strong_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> F_in<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">z</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-strong_fusion_in"><span class="command">lemma</span></span> strong_fusion_in<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> sf<span class="main">:</span>
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_character<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> least_upper_bound <span class="keyword1"><span class="command">have</span></span> lub<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">z</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="free">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> part_reflexivity <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-strong_fusion_idempotence"><span class="command">lemma</span></span> strong_fusion_idempotence<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">z</span> <span class="main">=</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
 <span class="keyword1"><span class="command">using</span></span> strong_fusion_in in_strong_fusion <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_antisymmetry<span class="main">)</span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹ Strong Sums ›</span></span>

<span class="keyword1" id="GEM-pair_fusion"><span class="command">lemma</span></span> pair_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
 <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
 <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">v</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
   <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
   <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
   <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
   <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span> <span class="main">=</span> <span class="free">x</span>"</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span> <span class="main">=</span> <span class="free">y</span>"</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
   <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
   <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
   <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">z</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
     <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span> 
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
     <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
 <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_intro<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> strong_sum_fusion<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> 
    <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> exz<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> allw<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="bound">w</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">w</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> F_in<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
      <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword1"><span class="command">from</span></span> allw <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">`<span class="free">x</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">=</span> <span class="free">y</span>`</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">from</span></span> allw <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="free">y</span> <span class="main">=</span> <span class="free">y</span>"</span></span> 
          <span class="keyword1"><span class="command">using</span></span> refl<span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> exz <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> parts_overlap_Fs<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="skolem">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> or_id<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> pair_fusion <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">with</span></span> strong_sum_eq <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> strong_sum_intro<span class="main">:</span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="free">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="free">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> pair_fusion <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">∨</span> <span class="bound">z</span> <span class="main">=</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> strong_sum_fusion <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="free">z</span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> strong_sum_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> strong_sum_closure <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
 <span class="keyword1"><span class="command">with</span></span> strong_sum_intro <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
 <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> z <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> summands_in<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> strong_sum_character<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1"><span class="command">corollary</span></span> first_summand_in<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> summands_in<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1"><span class="command">corollary</span></span> second_summand_in<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> summands_in<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1"><span class="command">corollary</span></span> sum_part_overlap<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strong_sum_character<span class="keyword1"><span class="command">..</span></span>

<span class="keyword1" id="GEM-strong_sum_absorption"><span class="command">lemma</span></span> strong_sum_absorption<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
 <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
 <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> first_summand_in <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ssubst<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> strong_supplementation<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
 <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span>
 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="main">(</span><span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span><span class="main">)</span>"</span></span>
 <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">v</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
    <span class="main">(</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
   <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">v</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
   <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="skolem">v</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="skolem">v</span>"</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> 
       <span class="keyword1"><span class="command">using</span></span> second_summand_in <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
   <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
     <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
     <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> sum_part_overlap <span class="keyword1"><span class="command">have</span></span>
       <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> rev_mp<span class="main">)</span>
     <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
     <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">t</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">t</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">t</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">t</span></span> <span class="keyword2"><span class="keyword">where</span></span> t<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="skolem">w</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="skolem">w</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="skolem">v</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> t <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">t</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_intro<span class="main">)</span>
     <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">.</span></span>
     <span class="keyword1"><span class="command">qed</span></span>
     <span class="keyword1"><span class="command">with</span></span> refl <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
     <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
   <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">hence</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">z</span><span class="main">.</span> <span class="free">y</span> <span class="main">=</span> <span class="bound">z</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_intro<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> strong_fusion_idempotence <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> subst<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_sum_absorption<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="free">y</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
 <span class="keyword1"><span class="command">qed</span></span>
 <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-sum_character"><span class="command">lemma</span></span> sum_character<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> sum_part_overlap<span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">w</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">x</span> <span class="skolem">v</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">w</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="free">y</span> <span class="skolem">v</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> first_summand_in
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_intro<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">v</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> w <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> second_summand_in
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_transitivity<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_intro<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="GEM-sum_eq"><span class="command">lemma</span></span> sum_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> sum_character<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">x</span> <span class="skolem">z</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">z</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="free">y</span> <span class="skolem">z</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">z</span>"</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟶</span> <span class="main">(</span><span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span> <span class="main">⟷</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="skolem">w</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> strong_sum_intro <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span> <span class="main">=</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span> <span class="main">=</span> <span class="free">x</span> <span class="main">⊕</span> <span class="free">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> fusion_eq<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span> <span class="main">⟹</span>
  <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>"</span></span>
  <span class="keyword1"><span class="command">hence</span></span> bla<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> parts_overlap_Fs<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> overlap_eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">v</span></span> <span class="keyword2"><span class="keyword">where</span></span> v<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span> bla <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> v <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">v</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">v</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">v</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="keyword1">P</span> <span class="skolem">v</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_symmetry<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">from</span></span><span class="quoted"><span class="quoted">`<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> F_in<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span> <span class="main">⟶</span>  <span class="keyword1">P</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> overlap_monotonicity<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> x<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span>"</span></span>
          <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
            <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
            <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">x</span>"</span></span>
              <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_supplementation<span class="main">)</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> z<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v</span><span class="main">.</span> <span class="free">F</span> <span class="bound">v</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">v</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> z <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="free">F</span> <span class="skolem">y</span>`</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="skolem">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">y</span><span class="main">.</span> <span class="free">F</span> <span class="bound">y</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="bound">y</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
            <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">`<span class="main">¬</span> <span class="keyword1">O</span> <span class="skolem">z</span> <span class="skolem">x</span>`</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"False"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">qed</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">proof</span></span>
          <span class="keyword1"><span class="command">from</span></span> x <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">P</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">O</span> <span class="skolem">y</span> <span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> part_implies_overlap<span class="main">)</span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="skolem">y</span> <span class="bound">z</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> strong_fusion_intro<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="free">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="free">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> GEM1 <span class="main">⊆</span> GEM
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">F</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span> <span class="keyword1">P</span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> <span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">z</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">z</span> <span class="skolem">y</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> strong_supplementation<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊕</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">v</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> sum_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> product_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊖</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> difference_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> complement_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> universe_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fusion_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> general_product_eq<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> GEM <span class="main">⊆</span> GEM1
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">F</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strong_fusion<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">z</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">O</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strong_fusion_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">π</span> <span class="bound">x</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">σ</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="skolem">F</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="keyword1">P</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> general_product_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊕</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">P</span> <span class="skolem">x</span> <span class="bound">z</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="skolem">y</span> <span class="bound">z</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∨</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strong_sum_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊗</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="keyword1">P</span> <span class="bound">v</span> <span class="skolem">y</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> product_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">⊖</span> <span class="skolem">y</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">P</span> <span class="bound">w</span> <span class="skolem">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">y</span><span class="main">)</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> difference_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">─</span> <span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">z</span><span class="main">.</span> <span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">w</span> <span class="bound">z</span> <span class="main">⟷</span> <span class="main">¬</span> <span class="keyword1">O</span> <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> complement_eq<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">u</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="keyword1">P</span> <span class="bound">y</span> <span class="bound">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> universe_eq<span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*&lt;*)</span> <span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">(*&gt;*)</span></pre>
</div>